/*! For license information please see bundle.ext.b183d74091b9fb763ad1.js.LICENSE.txt */
(()=>{"use strict";var t,e={9112:(t,e,r)=>{r.r(e),r.d(e,{CompactEncrypt:()=>fa,CompactSign:()=>Ma,EmbeddedJWK:()=>ou,EncryptJWT:()=>Fc,FlattenedEncrypt:()=>ho,FlattenedSign:()=>Ca,GeneralEncrypt:()=>Mo,GeneralSign:()=>ac,SignJWT:()=>mc,UnsecuredJWT:()=>bf,base64url:()=>n,calculateJwkThumbprint:()=>zc,calculateJwkThumbprintUri:()=>$c,compactDecrypt:()=>yn,compactVerify:()=>li,createLocalJWKSet:()=>xu,createRemoteJWKSet:()=>sf,cryptoRuntime:()=>Wf,customFetch:()=>Xu,decodeJwt:()=>Sf,decodeProtectedHeader:()=>gf,errors:()=>o,exportJWK:()=>In,exportPKCS8:()=>Dn,exportSPKI:()=>Hn,flattenedDecrypt:()=>nn,flattenedVerify:()=>ni,generalDecrypt:()=>gn,generalVerify:()=>mi,generateKeyPair:()=>kf,generateSecret:()=>Gf,importJWK:()=>ar,importPKCS8:()=>or,importSPKI:()=>tr,importX509:()=>rr,jwksCache:()=>qu,jwtDecrypt:()=>Qi,jwtVerify:()=>Ni});var n={};r.r(n),r.d(n,{decode:()=>h,encode:()=>v});var o={};r.r(o),r.d(o,{JOSEAlgNotAllowed:()=>G,JOSEError:()=>T,JOSENotSupported:()=>K,JWEDecryptionFailed:()=>W,JWEInvalid:()=>H,JWKInvalid:()=>J,JWKSInvalid:()=>I,JWKSMultipleMatchingKeys:()=>M,JWKSNoMatchingKey:()=>R,JWKSTimeout:()=>F,JWSInvalid:()=>x,JWSSignatureVerificationFailed:()=>U,JWTClaimValidationFailed:()=>_,JWTExpired:()=>C,JWTInvalid:()=>D});var i=new TextEncoder,a=new TextDecoder,c=Math.pow(2,32);function u(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=e.reduce(function(t,e){return t+e.length},0),o=new Uint8Array(n),i=0,a=0,c=e;a<c.length;a++){var u=c[a];o.set(u,i),i+=u.length}return o}function f(t,e,r){if(e<0||e>=c)throw new RangeError("value must be >= 0 and <= ".concat(c-1,". Received ").concat(e));t.set([e>>>24,e>>>16,e>>>8,255&e],r)}function s(t){var e=Math.floor(t/c),r=t%c,n=new Uint8Array(8);return f(n,e,0),f(n,r,4),n}function p(t){var e=new Uint8Array(4);return f(e,t),e}function l(t){if(Uint8Array.prototype.toBase64)return t.toBase64();for(var e=[],r=0;r<t.length;r+=32768)e.push(String.fromCharCode.apply(null,t.subarray(r,r+32768)));return btoa(e.join(""))}function y(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(t);for(var e=atob(t),r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}function h(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof t?t:a.decode(t),{alphabet:"base64url"});var e=t;e instanceof Uint8Array&&(e=a.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return y(e)}catch(t){throw new TypeError("The input to be decoded is not correctly encoded.")}}function v(t){var e=t;return"string"==typeof e&&(e=i.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):l(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A(n.key),n)}}function w(t,e,r){return e&&b(t.prototype,e),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e,r){return e=P(e),function(t,e){if(e&&("object"==d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,j()?Reflect.construct(e,r||[],P(t).constructor):e.apply(t,r))}function S(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}function O(t){var e="function"==typeof Map?new Map:void 0;return O=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(j())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&E(o,r.prototype),o}(t,arguments,P(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),E(r,t)},O(t)}function j(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(j=function(){return!!t})()}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}function k(t,e,r){return(e=A(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A(t){var e=function(t){if("object"!=d(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==d(e)?e:e+""}var T=function(t){function e(t,r){var n,o;return m(this,e),k(o=g(this,e,[t,r]),"code","ERR_JOSE_GENERIC"),o.name=o.constructor.name,null===(n=Error.captureStackTrace)||void 0===n||n.call(Error,o,o.constructor),o}return S(e,t),w(e)}(O(Error));k(T,"code","ERR_JOSE_GENERIC");var _=function(t){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unspecified";return m(this,e),k(n=g(this,e,[t,{cause:{claim:o,reason:i,payload:r}}]),"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),k(n,"claim",void 0),k(n,"reason",void 0),k(n,"payload",void 0),n.claim=o,n.reason=i,n.payload=r,n}return S(e,t),w(e)}(T);k(_,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");var C=function(t){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unspecified";return m(this,e),k(n=g(this,e,[t,{cause:{claim:o,reason:i,payload:r}}]),"code","ERR_JWT_EXPIRED"),k(n,"claim",void 0),k(n,"reason",void 0),k(n,"payload",void 0),n.claim=o,n.reason=i,n.payload=r,n}return S(e,t),w(e)}(T);k(C,"code","ERR_JWT_EXPIRED");var G=function(t){function e(){var t;m(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return k(t=g(this,e,[].concat(n)),"code","ERR_JOSE_ALG_NOT_ALLOWED"),t}return S(e,t),w(e)}(T);k(G,"code","ERR_JOSE_ALG_NOT_ALLOWED");var K=function(t){function e(){var t;m(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return k(t=g(this,e,[].concat(n)),"code","ERR_JOSE_NOT_SUPPORTED"),t}return S(e,t),w(e)}(T);k(K,"code","ERR_JOSE_NOT_SUPPORTED");var W=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;return m(this,e),k(t=g(this,e,[r,n]),"code","ERR_JWE_DECRYPTION_FAILED"),t}return S(e,t),w(e)}(T);k(W,"code","ERR_JWE_DECRYPTION_FAILED");var H=function(t){function e(){var t;m(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return k(t=g(this,e,[].concat(n)),"code","ERR_JWE_INVALID"),t}return S(e,t),w(e)}(T);k(H,"code","ERR_JWE_INVALID");var x=function(t){function e(){var t;m(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return k(t=g(this,e,[].concat(n)),"code","ERR_JWS_INVALID"),t}return S(e,t),w(e)}(T);k(x,"code","ERR_JWS_INVALID");var D=function(t){function e(){var t;m(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return k(t=g(this,e,[].concat(n)),"code","ERR_JWT_INVALID"),t}return S(e,t),w(e)}(T);k(D,"code","ERR_JWT_INVALID");var J=function(t){function e(){var t;m(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return k(t=g(this,e,[].concat(n)),"code","ERR_JWK_INVALID"),t}return S(e,t),w(e)}(T);k(J,"code","ERR_JWK_INVALID");var I=function(t){function e(){var t;m(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return k(t=g(this,e,[].concat(n)),"code","ERR_JWKS_INVALID"),t}return S(e,t),w(e)}(T);k(I,"code","ERR_JWKS_INVALID");var R=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;return m(this,e),k(t=g(this,e,[r,n]),"code","ERR_JWKS_NO_MATCHING_KEY"),t}return S(e,t),w(e)}(T);k(R,"code","ERR_JWKS_NO_MATCHING_KEY");var M=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;return m(this,e),k(t=g(this,e,[r,n]),Symbol.asyncIterator,void 0),k(t,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS"),t}return S(e,t),w(e)}(T);k(M,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");var F=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;return m(this,e),k(t=g(this,e,[r,n]),"code","ERR_JWKS_TIMEOUT"),t}return S(e,t),w(e)}(T);k(F,"code","ERR_JWKS_TIMEOUT");var U=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;return m(this,e),k(t=g(this,e,[r,n]),"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED"),t}return S(e,t),w(e)}(T);function N(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new K("Unsupported JWE Algorithm: ".concat(t))}}k(U,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");const B=function(t){return crypto.getRandomValues(new Uint8Array(N(t)>>3))},L=function(t,e){if(e.length<<3!==N(t))throw new H("Invalid Initialization Vector length")},V=function(t,e){var r=t.byteLength<<3;if(r!==e)throw new H("Invalid Content Encryption Key length. Expected ".concat(e," bits, got ").concat(r," bits"))};function z(t){return new TypeError("CryptoKey does not support this operation, its ".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"algorithm.name"," must be ").concat(t))}function X(t,e){return t.name===e}function $(t){return parseInt(t.name.slice(4),10)}function Y(t,e){if(e&&!t.usages.includes(e))throw new TypeError("CryptoKey does not support this operation, its usages must include ".concat(e,"."))}function q(t,e,r){switch(e){case"HS256":case"HS384":case"HS512":if(!X(t.algorithm,"HMAC"))throw z("HMAC");var n=parseInt(e.slice(2),10);if($(t.algorithm.hash)!==n)throw z("SHA-".concat(n),"algorithm.hash");break;case"RS256":case"RS384":case"RS512":if(!X(t.algorithm,"RSASSA-PKCS1-v1_5"))throw z("RSASSA-PKCS1-v1_5");var o=parseInt(e.slice(2),10);if($(t.algorithm.hash)!==o)throw z("SHA-".concat(o),"algorithm.hash");break;case"PS256":case"PS384":case"PS512":if(!X(t.algorithm,"RSA-PSS"))throw z("RSA-PSS");var i=parseInt(e.slice(2),10);if($(t.algorithm.hash)!==i)throw z("SHA-".concat(i),"algorithm.hash");break;case"Ed25519":case"EdDSA":if(!X(t.algorithm,"Ed25519"))throw z("Ed25519");break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":if(!X(t.algorithm,e))throw z(e);break;case"ES256":case"ES384":case"ES512":if(!X(t.algorithm,"ECDSA"))throw z("ECDSA");var a=function(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(e);if(t.algorithm.namedCurve!==a)throw z(a,"algorithm.namedCurve");break;default:throw new TypeError("CryptoKey does not support this operation")}Y(t,r)}function Q(t,e,r){switch(e){case"A128GCM":case"A192GCM":case"A256GCM":if(!X(t.algorithm,"AES-GCM"))throw z("AES-GCM");var n=parseInt(e.slice(1,4),10);if(t.algorithm.length!==n)throw z(n,"algorithm.length");break;case"A128KW":case"A192KW":case"A256KW":if(!X(t.algorithm,"AES-KW"))throw z("AES-KW");var o=parseInt(e.slice(1,4),10);if(t.algorithm.length!==o)throw z(o,"algorithm.length");break;case"ECDH":switch(t.algorithm.name){case"ECDH":case"X25519":break;default:throw z("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!X(t.algorithm,"PBKDF2"))throw z("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(!X(t.algorithm,"RSA-OAEP"))throw z("RSA-OAEP");var i=parseInt(e.slice(9),10)||1;if($(t.algorithm.hash)!==i)throw z("SHA-".concat(i),"algorithm.hash");break;default:throw new TypeError("CryptoKey does not support this operation")}Y(t,r)}function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function tt(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];if((n=n.filter(Boolean)).length>2){var i=n.pop();t+="one of type ".concat(n.join(", "),", or ").concat(i,".")}else 2===n.length?t+="one of type ".concat(n[0]," or ").concat(n[1],"."):t+="of type ".concat(n[0],".");if(null==e)t+=" Received ".concat(e);else if("function"==typeof e&&e.name)t+=" Received function ".concat(e.name);else if("object"===Z(e)&&null!=e){var a;null!==(a=e.constructor)&&void 0!==a&&a.name&&(t+=" Received an instance of ".concat(e.constructor.name))}return t}const et=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return tt.apply(void 0,["Key must be ",t].concat(r))};function rt(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return tt.apply(void 0,["Key for the ".concat(t," algorithm must be "),e].concat(n))}function nt(t){if(!ot(t))throw new Error("CryptoKey instance expected")}function ot(t){return"CryptoKey"===(null==t?void 0:t[Symbol.toStringTag])}function it(t){return"KeyObject"===(null==t?void 0:t[Symbol.toStringTag])}const at=function(t){return ot(t)||it(t)};function ct(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return ut(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(ut(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,ut(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,ut(p,"constructor",f),ut(f,"constructor",u),u.displayName="GeneratorFunction",ut(f,o,"GeneratorFunction"),ut(p),ut(p,o,"Generator"),ut(p,n,function(){return this}),ut(p,"toString",function(){return"[object Generator]"}),(ct=function(){return{w:i,m:l}})()}function ut(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ut=function(t,e,r,n){function i(e,r){ut(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},ut(t,e,r,n)}function ft(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function st(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){ft(i,n,o,a,c,"next",t)}function c(t){ft(i,n,o,a,c,"throw",t)}a(void 0)})}}function pt(t,e){return lt.apply(this,arguments)}function lt(){return(lt=st(ct().m(function t(e,r){var n,o,i,a,c,u,f,s,p,l;return ct().w(function(t){for(;;)switch(t.n){case 0:if(e instanceof Uint8Array){t.n=1;break}throw new TypeError("First argument must be a buffer");case 1:if(r instanceof Uint8Array){t.n=2;break}throw new TypeError("Second argument must be a buffer");case 2:return n={name:"HMAC",hash:"SHA-256"},t.n=3,crypto.subtle.generateKey(n,!1,["sign"]);case 3:return o=t.v,f=Uint8Array,t.n=4,crypto.subtle.sign(n,o,e);case 4:return s=t.v,i=new f(s),p=Uint8Array,t.n=5,crypto.subtle.sign(n,o,r);case 5:for(l=t.v,a=new p(l),c=0,u=-1;++u<32;)c|=i[u]^a[u];return t.a(2,0===c)}},t)}))).apply(this,arguments)}function yt(t,e,r,n,o,i){return ht.apply(this,arguments)}function ht(){return ht=st(ct().m(function t(e,r,n,o,i,a){var c,f,p,l,y,h,v,d,b,w,m;return ct().w(function(t){for(;;)switch(t.p=t.n){case 0:if(r instanceof Uint8Array){t.n=1;break}throw new TypeError(et(r,"Uint8Array"));case 1:return c=parseInt(e.slice(1,4),10),t.n=2,crypto.subtle.importKey("raw",r.subarray(c>>3),"AES-CBC",!1,["decrypt"]);case 2:return f=t.v,t.n=3,crypto.subtle.importKey("raw",r.subarray(0,c>>3),{hash:"SHA-".concat(c<<1),name:"HMAC"},!1,["sign"]);case 3:return p=t.v,l=u(a,o,n,s(a.length<<3)),d=Uint8Array,t.n=4,crypto.subtle.sign("HMAC",p,l);case 4:return b=t.v.slice(0,c>>3),y=new d(b),t.p=5,t.n=6,pt(i,y);case 6:h=t.v,t.n=8;break;case 7:t.p=7,t.v;case 8:if(h){t.n=9;break}throw new W;case 9:return t.p=9,w=Uint8Array,t.n=10,crypto.subtle.decrypt({iv:o,name:"AES-CBC"},f,n);case 10:m=t.v,v=new w(m),t.n=12;break;case 11:t.p=11,t.v;case 12:if(v){t.n=13;break}throw new W;case 13:return t.a(2,v)}},t,null,[[9,11],[5,7]])})),ht.apply(this,arguments)}function vt(t,e,r,n,o,i){return dt.apply(this,arguments)}function dt(){return dt=st(ct().m(function t(e,r,n,o,i,a){var c,f,s;return ct().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!(r instanceof Uint8Array)){t.n=2;break}return t.n=1,crypto.subtle.importKey("raw",r,"AES-GCM",!1,["decrypt"]);case 1:c=t.v,t.n=3;break;case 2:Q(r,e,"decrypt"),c=r;case 3:return t.p=3,f=Uint8Array,t.n=4,crypto.subtle.decrypt({additionalData:a,iv:o,name:"AES-GCM",tagLength:128},c,u(n,i));case 4:return s=t.v,t.a(2,new f(s));case 5:throw t.p=5,t.v,new W;case 6:return t.a(2)}},t,null,[[3,5]])})),dt.apply(this,arguments)}const bt=function(){var t=st(ct().m(function t(e,r,n,o,i,a){var c;return ct().w(function(t){for(;;)switch(t.n){case 0:if(ot(r)||r instanceof Uint8Array){t.n=1;break}throw new TypeError(et(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));case 1:if(o){t.n=2;break}throw new H("JWE Initialization Vector missing");case 2:if(i){t.n=3;break}throw new H("JWE Authentication Tag missing");case 3:L(e,o),c=e,t.n="A128CBC-HS256"===c||"A192CBC-HS384"===c||"A256CBC-HS512"===c?4:"A128GCM"===c||"A192GCM"===c||"A256GCM"===c?5:6;break;case 4:return r instanceof Uint8Array&&V(r,parseInt(e.slice(-3),10)),t.a(2,yt(e,r,n,o,i,a));case 5:return r instanceof Uint8Array&&V(r,parseInt(e.slice(1,4),10)),t.a(2,vt(e,r,n,o,i,a));case 6:throw new K("Unsupported JWE Content Encryption Algorithm");case 7:return t.a(2)}},t)}));return function(e,r,n,o,i,a){return t.apply(this,arguments)}}();function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const mt=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,o=e.filter(Boolean);if(0===o.length||1===o.length)return!0;var i,a=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return wt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(o);try{for(a.s();!(i=a.n()).done;){var c=i.value,u=Object.keys(c);if(n&&0!==n.size)for(var f=0,s=u;f<s.length;f++){var p=s[f];if(n.has(p))return!1;n.add(p)}else n=new Set(u)}}catch(t){a.e(t)}finally{a.f()}return!0};function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}const St=function(t){if("object"!==gt(e=t)||null===e||"[object Object]"!==Object.prototype.toString.call(t))return!1;var e;if(null===Object.getPrototypeOf(t))return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r};function Ot(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return jt(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(jt(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,jt(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,jt(p,"constructor",f),jt(f,"constructor",u),u.displayName="GeneratorFunction",jt(f,o,"GeneratorFunction"),jt(p),jt(p,o,"Generator"),jt(p,n,function(){return this}),jt(p,"toString",function(){return"[object Generator]"}),(Ot=function(){return{w:i,m:l}})()}function jt(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}jt=function(t,e,r,n){function i(e,r){jt(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},jt(t,e,r,n)}function Et(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Pt(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Et(i,n,o,a,c,"next",t)}function c(t){Et(i,n,o,a,c,"throw",t)}a(void 0)})}}function kt(t,e){if(t.algorithm.length!==parseInt(e.slice(1,4),10))throw new TypeError("Invalid key size for alg: ".concat(e))}function At(t,e,r){return t instanceof Uint8Array?crypto.subtle.importKey("raw",t,"AES-KW",!0,[r]):(Q(t,e,r),t)}function Tt(t,e,r){return _t.apply(this,arguments)}function _t(){return(_t=Pt(Ot().m(function t(e,r,n){var o,i,a,c;return Ot().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At(r,e,"wrapKey");case 1:return kt(o=t.v,e),t.n=2,crypto.subtle.importKey("raw",n,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);case 2:return i=t.v,a=Uint8Array,t.n=3,crypto.subtle.wrapKey("raw",i,o,"AES-KW");case 3:return c=t.v,t.a(2,new a(c))}},t)}))).apply(this,arguments)}function Ct(t,e,r){return Gt.apply(this,arguments)}function Gt(){return(Gt=Pt(Ot().m(function t(e,r,n){var o,i,a,c;return Ot().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At(r,e,"unwrapKey");case 1:return kt(o=t.v,e),t.n=2,crypto.subtle.unwrapKey("raw",n,o,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);case 2:return i=t.v,a=Uint8Array,t.n=3,crypto.subtle.exportKey("raw",i);case 3:return c=t.v,t.a(2,new a(c))}},t)}))).apply(this,arguments)}function Kt(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Wt(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Wt(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Wt(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Wt(p,"constructor",f),Wt(f,"constructor",u),u.displayName="GeneratorFunction",Wt(f,o,"GeneratorFunction"),Wt(p),Wt(p,o,"Generator"),Wt(p,n,function(){return this}),Wt(p,"toString",function(){return"[object Generator]"}),(Kt=function(){return{w:i,m:l}})()}function Wt(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Wt=function(t,e,r,n){function i(e,r){Wt(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Wt(t,e,r,n)}function Ht(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}const xt=function(){var t,e=(t=Kt().m(function t(e,r){var n,o,i;return Kt().w(function(t){for(;;)switch(t.n){case 0:return n="SHA-".concat(e.slice(-3)),o=Uint8Array,t.n=1,crypto.subtle.digest(n,r);case 1:return i=t.v,t.a(2,new o(i))}},t)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Ht(i,n,o,a,c,"next",t)}function c(t){Ht(i,n,o,a,c,"throw",t)}a(void 0)})});return function(t,r){return e.apply(this,arguments)}}();function Dt(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Jt(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Jt(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Jt(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Jt(p,"constructor",f),Jt(f,"constructor",u),u.displayName="GeneratorFunction",Jt(f,o,"GeneratorFunction"),Jt(p),Jt(p,o,"Generator"),Jt(p,n,function(){return this}),Jt(p,"toString",function(){return"[object Generator]"}),(Dt=function(){return{w:i,m:l}})()}function Jt(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Jt=function(t,e,r,n){function i(e,r){Jt(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Jt(t,e,r,n)}function It(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Rt(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){It(i,n,o,a,c,"next",t)}function c(t){It(i,n,o,a,c,"throw",t)}a(void 0)})}}function Mt(t){return u(p(t.length),t)}function Ft(t,e,r){return Ut.apply(this,arguments)}function Ut(){return(Ut=Rt(Dt().m(function t(e,r,n){var o,i,a,c,u,f,s;return Dt().w(function(t){for(;;)switch(t.n){case 0:o=r>>3,i=32,a=Math.ceil(o/i),c=new Uint8Array(a*i),u=1;case 1:if(!(u<=a)){t.n=4;break}return(f=new Uint8Array(4+e.length+n.length)).set(p(u),0),f.set(e,4),f.set(n,4+e.length),t.n=2,xt("sha256",f);case 2:s=t.v,c.set(s,(u-1)*i);case 3:u++,t.n=1;break;case 4:return t.a(2,c.slice(0,o))}},t)}))).apply(this,arguments)}function Nt(t,e,r,n){return Bt.apply(this,arguments)}function Bt(){return Bt=Rt(Dt().m(function t(e,r,n,o){var a,c,f,s,l,y,h,v,d,b,w,m=arguments;return Dt().w(function(t){for(;;)switch(t.n){case 0:return a=m.length>4&&void 0!==m[4]?m[4]:new Uint8Array(0),c=m.length>5&&void 0!==m[5]?m[5]:new Uint8Array(0),Q(e,"ECDH"),Q(r,"ECDH","deriveBits"),f=Mt(i.encode(n)),s=Mt(a),l=Mt(c),y=p(o),h=new Uint8Array(0),v=u(f,s,l,y,h),b=Uint8Array,t.n=1,crypto.subtle.deriveBits({name:e.algorithm.name,public:e},r,Lt(e));case 1:return w=t.v,d=new b(w),t.a(2,Ft(d,o,v))}},t)})),Bt.apply(this,arguments)}function Lt(t){return"X25519"===t.algorithm.name?256:Math.ceil(parseInt(t.algorithm.namedCurve.slice(-3),10)/8)<<3}function Vt(t){switch(t.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===t.algorithm.name}}function zt(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Xt(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Xt(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Xt(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Xt(p,"constructor",f),Xt(f,"constructor",u),u.displayName="GeneratorFunction",Xt(f,o,"GeneratorFunction"),Xt(p),Xt(p,o,"Generator"),Xt(p,n,function(){return this}),Xt(p,"toString",function(){return"[object Generator]"}),(zt=function(){return{w:i,m:l}})()}function Xt(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Xt=function(t,e,r,n){function i(e,r){Xt(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Xt(t,e,r,n)}function $t(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Yt(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){$t(i,n,o,a,c,"next",t)}function c(t){$t(i,n,o,a,c,"throw",t)}a(void 0)})}}function qt(t,e){return t instanceof Uint8Array?crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits"]):(Q(t,e,"deriveBits"),t)}var Qt=function(t,e){return u(i.encode(t),new Uint8Array([0]),e)};function Zt(t,e,r,n){return te.apply(this,arguments)}function te(){return(te=Yt(zt().m(function t(e,r,n,o){var i,a,c,u,f,s;return zt().w(function(t){for(;;)switch(t.n){case 0:if(e instanceof Uint8Array&&!(e.length<8)){t.n=1;break}throw new H("PBES2 Salt Input must be 8 or more octets");case 1:return i=Qt(r,e),a=parseInt(r.slice(13,16),10),c={hash:"SHA-".concat(r.slice(8,11)),iterations:n,name:"PBKDF2",salt:i},t.n=2,qt(o,r);case 2:return u=t.v,f=Uint8Array,t.n=3,crypto.subtle.deriveBits(c,u,a);case 3:return s=t.v,t.a(2,new f(s))}},t)}))).apply(this,arguments)}function ee(t,e,r){return re.apply(this,arguments)}function re(){return re=Yt(zt().m(function t(e,r,n){var o,i,a,c,u=arguments;return zt().w(function(t){for(;;)switch(t.n){case 0:return o=u.length>3&&void 0!==u[3]?u[3]:2048,i=u.length>4&&void 0!==u[4]?u[4]:crypto.getRandomValues(new Uint8Array(16)),t.n=1,Zt(i,e,o,r);case 1:return a=t.v,t.n=2,Tt(e.slice(-6),a,n);case 2:return c=t.v,t.a(2,{encryptedKey:c,p2c:o,p2s:v(i)})}},t)})),re.apply(this,arguments)}function ne(t,e,r,n,o){return oe.apply(this,arguments)}function oe(){return(oe=Yt(zt().m(function t(e,r,n,o,i){var a;return zt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Zt(i,e,o,r);case 1:return a=t.v,t.a(2,Ct(e.slice(-6),a,n))}},t)}))).apply(this,arguments)}const ie=function(t,e){if(t.startsWith("RS")||t.startsWith("PS")){var r=e.algorithm.modulusLength;if("number"!=typeof r||r<2048)throw new TypeError("".concat(t," requires key modulusLength to be 2048 bits or larger"))}};function ae(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return ce(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(ce(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,ce(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,ce(p,"constructor",f),ce(f,"constructor",u),u.displayName="GeneratorFunction",ce(f,o,"GeneratorFunction"),ce(p),ce(p,o,"Generator"),ce(p,n,function(){return this}),ce(p,"toString",function(){return"[object Generator]"}),(ae=function(){return{w:i,m:l}})()}function ce(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ce=function(t,e,r,n){function i(e,r){ce(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},ce(t,e,r,n)}function ue(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function fe(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){ue(i,n,o,a,c,"next",t)}function c(t){ue(i,n,o,a,c,"throw",t)}a(void 0)})}}var se=function(t){switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new K("alg ".concat(t," is not supported either by JOSE or your javascript runtime"))}};function pe(t,e,r){return le.apply(this,arguments)}function le(){return(le=fe(ae().m(function t(e,r,n){var o,i;return ae().w(function(t){for(;;)switch(t.n){case 0:return Q(r,e,"encrypt"),ie(e,r),o=Uint8Array,t.n=1,crypto.subtle.encrypt(se(e),r,n);case 1:return i=t.v,t.a(2,new o(i))}},t)}))).apply(this,arguments)}function ye(t,e,r){return he.apply(this,arguments)}function he(){return(he=fe(ae().m(function t(e,r,n){var o,i;return ae().w(function(t){for(;;)switch(t.n){case 0:return Q(r,e,"decrypt"),ie(e,r),o=Uint8Array,t.n=1,crypto.subtle.decrypt(se(e),r,n);case 1:return i=t.v,t.a(2,new o(i))}},t)}))).apply(this,arguments)}function ve(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new K("Unsupported JWE Algorithm: ".concat(t))}}const de=function(t){return crypto.getRandomValues(new Uint8Array(ve(t)>>3))};function be(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return we(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(we(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,we(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,we(p,"constructor",f),we(f,"constructor",u),u.displayName="GeneratorFunction",we(f,o,"GeneratorFunction"),we(p),we(p,o,"Generator"),we(p,n,function(){return this}),we(p,"toString",function(){return"[object Generator]"}),(be=function(){return{w:i,m:l}})()}function we(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}we=function(t,e,r,n){function i(e,r){we(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},we(t,e,r,n)}function me(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ge(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){me(i,n,o,a,c,"next",t)}function c(t){me(i,n,o,a,c,"throw",t)}a(void 0)})}}var Se=function(t,e){var r=(t.match(/.{1,64}/g)||[]).join("\n");return"-----BEGIN ".concat(e,"-----\n").concat(r,"\n-----END ").concat(e,"-----")},Oe=function(){var t=ge(be().m(function t(e,r,n){var o,i,a,c;return be().w(function(t){for(;;)switch(t.n){case 0:if(!it(n)){t.n=2;break}if(n.type===e){t.n=1;break}throw new TypeError("key is not a ".concat(e," key"));case 1:return t.a(2,n.export({format:"pem",type:r}));case 2:if(ot(n)){t.n=3;break}throw new TypeError(et(n,"CryptoKey","KeyObject"));case 3:if(n.extractable){t.n=4;break}throw new TypeError("CryptoKey is not extractable");case 4:if(n.type===e){t.n=5;break}throw new TypeError("key is not a ".concat(e," key"));case 5:return o=Se,i=l,a=Uint8Array,t.n=6,crypto.subtle.exportKey(r,n);case 6:return c=t.v,t.a(2,o(i(new a(c)),"".concat(e.toUpperCase()," KEY")))}},t)}));return function(e,r,n){return t.apply(this,arguments)}}(),je=function(t){return Oe("public","spki",t)},Ee=function(t){return Oe("private","pkcs8",t)},Pe=function(t,e){if(t.byteLength!==e.length)return!1;for(var r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},ke=function(t){return{data:t,pos:0}},Ae=function(t){var e=t.data[t.pos++];if(128&e){for(var r=127&e,n=0,o=0;o<r;o++)n=n<<8|t.data[t.pos++];return n}return e},Te=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!(e<=0)){t.pos++;var r=Ae(t);t.pos+=r,e>1&&Te(t,e-1)}},_e=function(t,e,r){if(t.data[t.pos++]!==e)throw new Error(r)},Ce=function(t,e){var r=t.data.subarray(t.pos,t.pos+e);return t.pos+=e,r},Ge=function(t){var e=function(t){_e(t,6,"Expected algorithm OID");var e=Ae(t);return Ce(t,e)}(t);if(Pe(e,[43,101,110]))return"X25519";if(!Pe(e,[42,134,72,206,61,2,1]))throw new Error("Unsupported key algorithm");_e(t,6,"Expected curve OID");for(var r=Ae(t),n=Ce(t,r),o=0,i=[{name:"P-256",oid:[42,134,72,206,61,3,1,7]},{name:"P-384",oid:[43,129,4,0,34]},{name:"P-521",oid:[43,129,4,0,35]}];o<i.length;o++){var a=i[o],c=a.name,u=a.oid;if(Pe(n,u))return c}throw new Error("Unsupported named curve")},Ke=function(){var t=ge(be().m(function t(e,r,n,o){var i,a,c,u,f,s,p,l;return be().w(function(t){for(;;)switch(t.p=t.n){case 0:u="spki"===e,f=function(){return u?["verify"]:["sign"]},s=function(){return u?["encrypt","wrapKey"]:["decrypt","unwrapKey"]},l=n,t.n="PS256"===l||"PS384"===l||"PS512"===l?1:"RS256"===l||"RS384"===l||"RS512"===l?2:"RSA-OAEP"===l||"RSA-OAEP-256"===l||"RSA-OAEP-384"===l||"RSA-OAEP-512"===l?3:"ES256"===l||"ES384"===l||"ES512"===l?4:"ECDH-ES"===l||"ECDH-ES+A128KW"===l||"ECDH-ES+A192KW"===l||"ECDH-ES+A256KW"===l?5:"Ed25519"===l||"EdDSA"===l?8:"ML-DSA-44"===l||"ML-DSA-65"===l||"ML-DSA-87"===l?9:10;break;case 1:return a={name:"RSA-PSS",hash:"SHA-".concat(n.slice(-3))},c=f(),t.a(3,11);case 2:return a={name:"RSASSA-PKCS1-v1_5",hash:"SHA-".concat(n.slice(-3))},c=f(),t.a(3,11);case 3:return a={name:"RSA-OAEP",hash:"SHA-".concat(parseInt(n.slice(-3),10)||1)},c=s(),t.a(3,11);case 4:return a={name:"ECDSA",namedCurve:{ES256:"P-256",ES384:"P-384",ES512:"P-521"}[n]},c=f(),t.a(3,11);case 5:t.p=5,p=o.getNamedCurve(r),a="X25519"===p?{name:"X25519"}:{name:"ECDH",namedCurve:p},t.n=7;break;case 6:throw t.p=6,t.v,new K("Invalid or unsupported key format");case 7:return c=u?[]:["deriveBits"],t.a(3,11);case 8:return a={name:"Ed25519"},c=f(),t.a(3,11);case 9:return a={name:n},c=f(),t.a(3,11);case 10:throw new K('Invalid or unsupported "alg" (Algorithm) value');case 11:return t.a(2,crypto.subtle.importKey(e,r,a,null!==(i=null==o?void 0:o.extractable)&&void 0!==i?i:!!u,c))}},t,null,[[5,6]])}));return function(e,r,n,o){return t.apply(this,arguments)}}(),We=function(t,e){return y(t.replace(e,""))},He=function(t,e,r){var n,o=We(t,/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g),i=r;return null!=e&&null!==(n=e.startsWith)&&void 0!==n&&n.call(e,"ECDH-ES")&&(i||(i={}),i.getNamedCurve=function(t){var e=ke(t);return function(t){_e(t,48,"Invalid PKCS#8 structure"),Ae(t),_e(t,2,"Expected version field");var e=Ae(t);t.pos+=e,_e(t,48,"Expected algorithm identifier");Ae(t);t.pos}(e),Ge(e)}),Ke("pkcs8",o,e,i)},xe=function(t,e,r){var n,o=We(t,/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g),i=r;return null!=e&&null!==(n=e.startsWith)&&void 0!==n&&n.call(e,"ECDH-ES")&&(i||(i={}),i.getNamedCurve=function(t){var e=ke(t);return function(t){_e(t,48,"Invalid SPKI structure"),Ae(t),_e(t,48,"Expected algorithm identifier");Ae(t);t.pos}(e),Ge(e)}),Ke("spki",o,e,i)};var De=function(t,e,r){var n;try{n=function(t){var e=ke(t);_e(e,48,"Invalid certificate structure"),Ae(e),_e(e,48,"Invalid tbsCertificate structure"),Ae(e),160===t[e.pos]?Te(e,6):Te(e,5);var r=e.pos;_e(e,48,"Invalid SPKI structure");var n=Ae(e);return t.subarray(r,r+n+(e.pos-r))}(We(t,/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g))}catch(t){throw new TypeError("Failed to parse the X.509 certificate",{cause:t})}return xe(Se(l(n),"PUBLIC KEY"),e,r)};function Je(t){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(t)}function Ie(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Re(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Re(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Re(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Re(p,"constructor",f),Re(f,"constructor",u),u.displayName="GeneratorFunction",Re(f,o,"GeneratorFunction"),Re(p),Re(p,o,"Generator"),Re(p,n,function(){return this}),Re(p,"toString",function(){return"[object Generator]"}),(Ie=function(){return{w:i,m:l}})()}function Re(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Re=function(t,e,r,n){function i(e,r){Re(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Re(t,e,r,n)}function Me(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Fe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Me(Object(r),!0).forEach(function(e){Ue(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ue(t,e,r){return(e=function(t){var e=function(t){if("object"!=Je(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Je(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ne(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Be(t){var e,r;switch(t.kty){case"AKP":switch(t.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":e={name:t.alg},r=t.priv?["sign"]:["verify"];break;default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(t.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:"SHA-".concat(t.alg.slice(-3))},r=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:"SHA-".concat(t.alg.slice(-3))},r=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:"SHA-".concat(parseInt(t.alg.slice(-3),10)||1)},r=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(t.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},r=t.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},r=t.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(t.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new K('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:r}}const Le=function(){var t,e=(t=Ie().m(function t(e){var r,n,o,i,a,c;return Ie().w(function(t){for(;;)switch(t.n){case 0:if(e.alg){t.n=1;break}throw new TypeError('"alg" argument is required when "jwk.alg" is not present');case 1:return o=Be(e),i=o.algorithm,a=o.keyUsages,"AKP"!==(c=Fe({},e)).kty&&delete c.alg,delete c.use,t.a(2,crypto.subtle.importKey("jwk",c,i,null!==(r=e.ext)&&void 0!==r?r:!e.d&&!e.priv,null!==(n=e.key_ops)&&void 0!==n?n:a))}},t)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Ne(i,n,o,a,c,"next",t)}function c(t){Ne(i,n,o,a,c,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}();function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}function ze(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Xe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ze(Object(r),!0).forEach(function(e){$e(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function $e(t,e,r){return(e=function(t){var e=function(t){if("object"!=Ve(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ve(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ye(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return qe(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(qe(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,qe(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,qe(p,"constructor",f),qe(f,"constructor",u),u.displayName="GeneratorFunction",qe(f,o,"GeneratorFunction"),qe(p),qe(p,o,"Generator"),qe(p,n,function(){return this}),qe(p,"toString",function(){return"[object Generator]"}),(Ye=function(){return{w:i,m:l}})()}function qe(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}qe=function(t,e,r,n){function i(e,r){qe(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},qe(t,e,r,n)}function Qe(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ze(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Qe(i,n,o,a,c,"next",t)}function c(t){Qe(i,n,o,a,c,"throw",t)}a(void 0)})}}function tr(t,e,r){return er.apply(this,arguments)}function er(){return(er=Ze(Ye().m(function t(e,r,n){return Ye().w(function(t){for(;;)switch(t.n){case 0:if("string"==typeof e&&0===e.indexOf("-----BEGIN PUBLIC KEY-----")){t.n=1;break}throw new TypeError('"spki" must be SPKI formatted string');case 1:return t.a(2,xe(e,r,n))}},t)}))).apply(this,arguments)}function rr(t,e,r){return nr.apply(this,arguments)}function nr(){return(nr=Ze(Ye().m(function t(e,r,n){return Ye().w(function(t){for(;;)switch(t.n){case 0:if("string"==typeof e&&0===e.indexOf("-----BEGIN CERTIFICATE-----")){t.n=1;break}throw new TypeError('"x509" must be X.509 formatted string');case 1:return t.a(2,De(e,r,n))}},t)}))).apply(this,arguments)}function or(t,e,r){return ir.apply(this,arguments)}function ir(){return(ir=Ze(Ye().m(function t(e,r,n){return Ye().w(function(t){for(;;)switch(t.n){case 0:if("string"==typeof e&&0===e.indexOf("-----BEGIN PRIVATE KEY-----")){t.n=1;break}throw new TypeError('"pkcs8" must be PKCS#8 formatted string');case 1:return t.a(2,He(e,r,n))}},t)}))).apply(this,arguments)}function ar(t,e,r){return cr.apply(this,arguments)}function cr(){return(cr=Ze(Ye().m(function t(e,r,n){var o,i,a;return Ye().w(function(t){for(;;)switch(t.n){case 0:if(St(e)){t.n=1;break}throw new TypeError("JWK must be an object");case 1:null!=r||(r=e.alg),null!=i||(i=null!==(o=null==n?void 0:n.extractable)&&void 0!==o?o:e.ext),a=e.kty,t.n="oct"===a?2:"RSA"===a?4:"AKP"===a?6:"EC"===a||"OKP"===a?9:10;break;case 2:if("string"==typeof e.k&&e.k){t.n=3;break}throw new TypeError('missing "k" (Key Value) Parameter value');case 3:return t.a(2,h(e.k));case 4:if(!("oth"in e)||void 0===e.oth){t.n=5;break}throw new K('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case 5:case 9:return t.a(2,Le(Xe(Xe({},e),{},{alg:r,ext:i})));case 6:if("string"==typeof e.alg&&e.alg){t.n=7;break}throw new TypeError('missing "alg" (Algorithm) Parameter value');case 7:if(void 0===r||r===e.alg){t.n=8;break}throw new TypeError("JWK alg and alg option value mismatch");case 8:return t.a(2,Le(Xe(Xe({},e),{},{ext:i})));case 10:throw new K('Unsupported "kty" (Key Type) Parameter value');case 11:return t.a(2)}},t)}))).apply(this,arguments)}function ur(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return fr(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(fr(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,fr(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,fr(p,"constructor",f),fr(f,"constructor",u),u.displayName="GeneratorFunction",fr(f,o,"GeneratorFunction"),fr(p),fr(p,o,"Generator"),fr(p,n,function(){return this}),fr(p,"toString",function(){return"[object Generator]"}),(ur=function(){return{w:i,m:l}})()}function fr(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}fr=function(t,e,r,n){function i(e,r){fr(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},fr(t,e,r,n)}function sr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function pr(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){sr(i,n,o,a,c,"next",t)}function c(t){sr(i,n,o,a,c,"throw",t)}a(void 0)})}}function lr(t,e,r,n,o){return yr.apply(this,arguments)}function yr(){return yr=pr(ur().m(function t(e,r,n,o,i){var a,c,f,p,l,y,h,v,d,b;return ur().w(function(t){for(;;)switch(t.n){case 0:if(n instanceof Uint8Array){t.n=1;break}throw new TypeError(et(n,"Uint8Array"));case 1:return a=parseInt(e.slice(1,4),10),t.n=2,crypto.subtle.importKey("raw",n.subarray(a>>3),"AES-CBC",!1,["encrypt"]);case 2:return c=t.v,t.n=3,crypto.subtle.importKey("raw",n.subarray(0,a>>3),{hash:"SHA-".concat(a<<1),name:"HMAC"},!1,["sign"]);case 3:return f=t.v,h=Uint8Array,t.n=4,crypto.subtle.encrypt({iv:o,name:"AES-CBC"},c,r);case 4:return v=t.v,p=new h(v),l=u(i,o,p,s(i.length<<3)),d=Uint8Array,t.n=5,crypto.subtle.sign("HMAC",f,l);case 5:return b=t.v.slice(0,a>>3),y=new d(b),t.a(2,{ciphertext:p,tag:y,iv:o})}},t)})),yr.apply(this,arguments)}function hr(t,e,r,n,o){return vr.apply(this,arguments)}function vr(){return vr=pr(ur().m(function t(e,r,n,o,i){var a,c,u,f,s,p;return ur().w(function(t){for(;;)switch(t.n){case 0:if(!(n instanceof Uint8Array)){t.n=2;break}return t.n=1,crypto.subtle.importKey("raw",n,"AES-GCM",!1,["encrypt"]);case 1:a=t.v,t.n=3;break;case 2:Q(n,e,"encrypt"),a=n;case 3:return s=Uint8Array,t.n=4,crypto.subtle.encrypt({additionalData:i,iv:o,name:"AES-GCM",tagLength:128},a,r);case 4:return p=t.v,c=new s(p),u=c.slice(-16),f=c.slice(0,-16),t.a(2,{ciphertext:f,tag:u,iv:o})}},t)})),vr.apply(this,arguments)}const dr=function(){var t=pr(ur().m(function t(e,r,n,o,i){var a;return ur().w(function(t){for(;;)switch(t.n){case 0:if(ot(n)||n instanceof Uint8Array){t.n=1;break}throw new TypeError(et(n,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));case 1:o?L(e,o):o=B(e),a=e,t.n="A128CBC-HS256"===a||"A192CBC-HS384"===a||"A256CBC-HS512"===a?2:"A128GCM"===a||"A192GCM"===a||"A256GCM"===a?3:4;break;case 2:return n instanceof Uint8Array&&V(n,parseInt(e.slice(-3),10)),t.a(2,lr(e,r,n,o,i));case 3:return n instanceof Uint8Array&&V(n,parseInt(e.slice(1,4),10)),t.a(2,hr(e,r,n,o,i));case 4:throw new K("Unsupported JWE Content Encryption Algorithm");case 5:return t.a(2)}},t)}));return function(e,r,n,o,i){return t.apply(this,arguments)}}();function br(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return wr(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(wr(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,wr(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,wr(p,"constructor",f),wr(f,"constructor",u),u.displayName="GeneratorFunction",wr(f,o,"GeneratorFunction"),wr(p),wr(p,o,"Generator"),wr(p,n,function(){return this}),wr(p,"toString",function(){return"[object Generator]"}),(br=function(){return{w:i,m:l}})()}function wr(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}wr=function(t,e,r,n){function i(e,r){wr(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},wr(t,e,r,n)}function mr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function gr(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){mr(i,n,o,a,c,"next",t)}function c(t){mr(i,n,o,a,c,"throw",t)}a(void 0)})}}function Sr(t,e,r,n){return Or.apply(this,arguments)}function Or(){return(Or=gr(br().m(function t(e,r,n,o){var i,a;return br().w(function(t){for(;;)switch(t.n){case 0:return i=e.slice(0,7),t.n=1,dr(i,n,r,o,new Uint8Array(0));case 1:return a=t.v,t.a(2,{encryptedKey:a.ciphertext,iv:v(a.iv),tag:v(a.tag)})}},t)}))).apply(this,arguments)}function jr(t,e,r,n,o){return Er.apply(this,arguments)}function Er(){return Er=gr(br().m(function t(e,r,n,o,i){var a;return br().w(function(t){for(;;)if(0===t.n)return a=e.slice(0,7),t.a(2,bt(a,r,n,o,i,new Uint8Array(0)))},t)})),Er.apply(this,arguments)}function Pr(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return kr(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(kr(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,kr(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,kr(p,"constructor",f),kr(f,"constructor",u),u.displayName="GeneratorFunction",kr(f,o,"GeneratorFunction"),kr(p),kr(p,o,"Generator"),kr(p,n,function(){return this}),kr(p,"toString",function(){return"[object Generator]"}),(Pr=function(){return{w:i,m:l}})()}function kr(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}kr=function(t,e,r,n){function i(e,r){kr(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},kr(t,e,r,n)}function Ar(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}const Tr=function(){var t,e=(t=Pr().m(function t(e,r,n,o,i){var a,c,u,f,s,p,l,y,v;return Pr().w(function(t){for(;;)switch(t.p=t.n){case 0:v=e,t.n="dir"===v?1:"ECDH-ES"===v?3:"ECDH-ES+A128KW"===v||"ECDH-ES+A192KW"===v||"ECDH-ES+A256KW"===v?4:"RSA-OAEP"===v||"RSA-OAEP-256"===v||"RSA-OAEP-384"===v||"RSA-OAEP-512"===v?17:"PBES2-HS256+A128KW"===v||"PBES2-HS384+A192KW"===v||"PBES2-HS512+A256KW"===v?19:"A128KW"===v||"A192KW"===v||"A256KW"===v?26:"A128GCMKW"===v||"A192GCMKW"===v||"A256GCMKW"===v?28:36;break;case 1:if(void 0===n){t.n=2;break}throw new H("Encountered unexpected JWE Encrypted Key");case 2:return t.a(2,r);case 3:if(void 0===n){t.n=4;break}throw new H("Encountered unexpected JWE Encrypted Key");case 4:if(St(o.epk)){t.n=5;break}throw new H('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');case 5:if(nt(r),Vt(r)){t.n=6;break}throw new K("ECDH with the provided key is not allowed or not supported by your javascript runtime");case 6:return t.n=7,ar(o.epk,e);case 7:if(nt(a=t.v),void 0===o.apu){t.n=10;break}if("string"==typeof o.apu){t.n=8;break}throw new H('JOSE Header "apu" (Agreement PartyUInfo) invalid');case 8:t.p=8,c=h(o.apu),t.n=10;break;case 9:throw t.p=9,t.v,new H("Failed to base64url decode the apu");case 10:if(void 0===o.apv){t.n=13;break}if("string"==typeof o.apv){t.n=11;break}throw new H('JOSE Header "apv" (Agreement PartyVInfo) invalid');case 11:t.p=11,u=h(o.apv),t.n=13;break;case 12:throw t.p=12,t.v,new H("Failed to base64url decode the apv");case 13:return t.n=14,Nt(a,r,"ECDH-ES"===e?o.enc:e,"ECDH-ES"===e?ve(o.enc):parseInt(e.slice(-5,-2),10),c,u);case 14:if(f=t.v,"ECDH-ES"!==e){t.n=15;break}return t.a(2,f);case 15:if(void 0!==n){t.n=16;break}throw new H("JWE Encrypted Key missing");case 16:return t.a(2,Ct(e.slice(-6),f,n));case 17:if(void 0!==n){t.n=18;break}throw new H("JWE Encrypted Key missing");case 18:return nt(r),t.a(2,ye(e,r,n));case 19:if(void 0!==n){t.n=20;break}throw new H("JWE Encrypted Key missing");case 20:if("number"==typeof o.p2c){t.n=21;break}throw new H('JOSE Header "p2c" (PBES2 Count) missing or invalid');case 21:if(s=(null==i?void 0:i.maxPBES2Count)||1e4,!(o.p2c>s)){t.n=22;break}throw new H('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');case 22:if("string"==typeof o.p2s){t.n=23;break}throw new H('JOSE Header "p2s" (PBES2 Salt) missing or invalid');case 23:t.p=23,p=h(o.p2s),t.n=25;break;case 24:throw t.p=24,t.v,new H("Failed to base64url decode the p2s");case 25:return t.a(2,ne(e,r,n,o.p2c,p));case 26:if(void 0!==n){t.n=27;break}throw new H("JWE Encrypted Key missing");case 27:return t.a(2,Ct(e,r,n));case 28:if(void 0!==n){t.n=29;break}throw new H("JWE Encrypted Key missing");case 29:if("string"==typeof o.iv){t.n=30;break}throw new H('JOSE Header "iv" (Initialization Vector) missing or invalid');case 30:if("string"==typeof o.tag){t.n=31;break}throw new H('JOSE Header "tag" (Authentication Tag) missing or invalid');case 31:t.p=31,l=h(o.iv),t.n=33;break;case 32:throw t.p=32,t.v,new H("Failed to base64url decode the iv");case 33:t.p=33,y=h(o.tag),t.n=35;break;case 34:throw t.p=34,t.v,new H("Failed to base64url decode the tag");case 35:return t.a(2,jr(e,r,n,l,y));case 36:throw new K('Invalid or unsupported "alg" (JWE Algorithm) header value');case 37:return t.a(2)}},t,null,[[33,34],[31,32],[23,24],[11,12],[8,9]])}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Ar(i,n,o,a,c,"next",t)}function c(t){Ar(i,n,o,a,c,"throw",t)}a(void 0)})});return function(t,r,n,o,i){return e.apply(this,arguments)}}();function _r(t){return function(t){if(Array.isArray(t))return Gr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Cr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(t,e){if(t){if("string"==typeof t)return Gr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gr(t,e):void 0}}function Gr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const Kr=function(t,e,r,n,o){if(void 0!==o.crit&&void 0===(null==n?void 0:n.crit))throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(function(t){return"string"!=typeof t||0===t.length}))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');var i;i=void 0!==r?new Map([].concat(_r(Object.entries(r)),_r(e.entries()))):e;var a,c=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Cr(t))){e&&(t=e);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==e.return||e.return()}finally{if(a)throw o}}}}(n.crit);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(!i.has(u))throw new K('Extension Header Parameter "'.concat(u,'" is not recognized'));if(void 0===o[u])throw new t('Extension Header Parameter "'.concat(u,'" is missing'));if(i.get(u)&&void 0===n[u])throw new t('Extension Header Parameter "'.concat(u,'" MUST be integrity protected'))}}catch(t){c.e(t)}finally{c.f()}return new Set(n.crit)},Wr=function(t,e){if(void 0!==e&&(!Array.isArray(e)||e.some(function(t){return"string"!=typeof t})))throw new TypeError('"'.concat(t,'" option must be an array of strings'));if(e)return new Set(e)};function Hr(t){return St(t)&&"string"==typeof t.kty}function xr(t){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xr(t)}function Dr(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Jr(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Jr(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Jr(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Jr(p,"constructor",f),Jr(f,"constructor",u),u.displayName="GeneratorFunction",Jr(f,o,"GeneratorFunction"),Jr(p),Jr(p,o,"Generator"),Jr(p,n,function(){return this}),Jr(p,"toString",function(){return"[object Generator]"}),(Dr=function(){return{w:i,m:l}})()}function Jr(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Jr=function(t,e,r,n){function i(e,r){Jr(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Jr(t,e,r,n)}function Ir(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Rr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ir(Object(r),!0).forEach(function(e){Mr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ir(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Mr(t,e,r){return(e=function(t){var e=function(t){if("object"!=xr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ur(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Fr(i,n,o,a,c,"next",t)}function c(t){Fr(i,n,o,a,c,"throw",t)}a(void 0)})}}var Nr,Br=function(){var t=Ur(Dr().m(function t(e,r,n){var o,i,a,c=arguments;return Dr().w(function(t){for(;;)switch(t.n){case 0:if(o=c.length>3&&void 0!==c[3]&&c[3],Nr||(Nr=new WeakMap),null==(i=Nr.get(e))||!i[n]){t.n=1;break}return t.a(2,i[n]);case 1:return t.n=2,Le(Rr(Rr({},r),{},{alg:n}));case 2:return a=t.v,o&&Object.freeze(e),i?i[n]=a:Nr.set(e,Mr({},n,a)),t.a(2,a)}},t)}));return function(e,r,n){return t.apply(this,arguments)}}(),Lr=function(t,e){Nr||(Nr=new WeakMap);var r=Nr.get(t);if(null!=r&&r[e])return r[e];var n,o="public"===t.type,i=!!o;if("x25519"===t.asymmetricKeyType){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}n=t.toCryptoKey(t.asymmetricKeyType,i,o?[]:["deriveBits"])}if("ed25519"===t.asymmetricKeyType){if("EdDSA"!==e&&"Ed25519"!==e)throw new TypeError("given KeyObject instance cannot be used for this algorithm");n=t.toCryptoKey(t.asymmetricKeyType,i,[o?"verify":"sign"])}switch(t.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(e!==t.asymmetricKeyType.toUpperCase())throw new TypeError("given KeyObject instance cannot be used for this algorithm");n=t.toCryptoKey(t.asymmetricKeyType,i,[o?"verify":"sign"])}if("rsa"===t.asymmetricKeyType){var a;switch(e){case"RSA-OAEP":a="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":a="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":a="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":a="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return t.toCryptoKey({name:"RSA-OAEP",hash:a},i,o?["encrypt"]:["decrypt"]);n=t.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:a},i,[o?"verify":"sign"])}if("ec"===t.asymmetricKeyType){var c,u=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(null===(c=t.asymmetricKeyDetails)||void 0===c?void 0:c.namedCurve);if(!u)throw new TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===e&&"P-256"===u&&(n=t.toCryptoKey({name:"ECDSA",namedCurve:u},i,[o?"verify":"sign"])),"ES384"===e&&"P-384"===u&&(n=t.toCryptoKey({name:"ECDSA",namedCurve:u},i,[o?"verify":"sign"])),"ES512"===e&&"P-521"===u&&(n=t.toCryptoKey({name:"ECDSA",namedCurve:u},i,[o?"verify":"sign"])),e.startsWith("ECDH-ES")&&(n=t.toCryptoKey({name:"ECDH",namedCurve:u},i,o?[]:["deriveBits"]))}if(!n)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return r?r[e]=n:Nr.set(t,Mr({},e,n)),n};const Vr=function(){var t=Ur(Dr().m(function t(e,r){var n,o;return Dr().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!(e instanceof Uint8Array)){t.n=1;break}return t.a(2,e);case 1:if(!ot(e)){t.n=2;break}return t.a(2,e);case 2:if(!it(e)){t.n=7;break}if("secret"!==e.type){t.n=3;break}return t.a(2,e.export());case 3:if(!("toCryptoKey"in e)||"function"!=typeof e.toCryptoKey){t.n=6;break}return t.p=4,t.a(2,Lr(e,r));case 5:if(t.p=5,!((o=t.v)instanceof TypeError)){t.n=6;break}throw o;case 6:return n=e.export({format:"jwk"}),t.a(2,Br(e,n,r));case 7:if(!Hr(e)){t.n=9;break}if(!e.k){t.n=8;break}return t.a(2,h(e.k));case 8:return t.a(2,Br(e,e,r,!0));case 9:throw new Error("unreachable");case 10:return t.a(2)}},t,null,[[4,5]])}));return function(e,r){return t.apply(this,arguments)}}();var zr=function(t){return null==t?void 0:t[Symbol.toStringTag]},Xr=function(t,e,r){if(void 0!==e.use){var n;switch(r){case"sign":case"verify":n="sig";break;case"encrypt":case"decrypt":n="enc"}if(e.use!==n)throw new TypeError('Invalid key for this operation, its "use" must be "'.concat(n,'" when present'))}if(void 0!==e.alg&&e.alg!==t)throw new TypeError('Invalid key for this operation, its "alg" must be "'.concat(t,'" when present'));if(Array.isArray(e.key_ops)){var o,i,a;switch(!0){case"sign"===r||"verify"===r:case"dir"===t:case t.includes("CBC-HS"):a=r;break;case t.startsWith("PBES2"):a="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(t):a=!t.includes("GCM")&&t.endsWith("KW")?"encrypt"===r?"wrapKey":"unwrapKey":r;break;case"encrypt"===r&&t.startsWith("RSA"):a="wrapKey";break;case"decrypt"===r:a=t.startsWith("RSA")?"unwrapKey":"deriveBits"}if(a&&!1===(null===(o=e.key_ops)||void 0===o||null===(i=o.includes)||void 0===i?void 0:i.call(o,a)))throw new TypeError('Invalid key for this operation, its "key_ops" must include "'.concat(a,'" when present'))}return!0};const $r=function(t,e,r){t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(t)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(t)?function(t,e,r){if(!(e instanceof Uint8Array)){if(Hr(e)){if(function(t){return"oct"===t.kty&&"string"==typeof t.k}(e)&&Xr(t,e,r))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!at(e))throw new TypeError(rt(t,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==e.type)throw new TypeError("".concat(zr(e),' instances for symmetric algorithms must be of type "secret"'))}}(t,e,r):function(t,e,r){if(Hr(e))switch(r){case"decrypt":case"sign":if(function(t){return"oct"!==t.kty&&("AKP"===t.kty&&"string"==typeof t.priv||"string"==typeof t.d)}(e)&&Xr(t,e,r))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(function(t){return"oct"!==t.kty&&void 0===t.d&&void 0===t.priv}(e)&&Xr(t,e,r))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!at(e))throw new TypeError(rt(t,e,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===e.type)throw new TypeError("".concat(zr(e),' instances for asymmetric algorithms must not be of type "secret"'));if("public"===e.type)switch(r){case"sign":throw new TypeError("".concat(zr(e),' instances for asymmetric algorithm signing must be of type "private"'));case"decrypt":throw new TypeError("".concat(zr(e),' instances for asymmetric algorithm decryption must be of type "private"'))}if("private"===e.type)switch(r){case"verify":throw new TypeError("".concat(zr(e),' instances for asymmetric algorithm verifying must be of type "public"'));case"encrypt":throw new TypeError("".concat(zr(e),' instances for asymmetric algorithm encryption must be of type "public"'))}}(t,e,r)};function Yr(t){return Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yr(t)}function qr(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Qr(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Qr(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Qr(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Qr(p,"constructor",f),Qr(f,"constructor",u),u.displayName="GeneratorFunction",Qr(f,o,"GeneratorFunction"),Qr(p),Qr(p,o,"Generator"),Qr(p,n,function(){return this}),Qr(p,"toString",function(){return"[object Generator]"}),(qr=function(){return{w:i,m:l}})()}function Qr(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Qr=function(t,e,r,n){function i(e,r){Qr(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Qr(t,e,r,n)}function Zr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function tn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zr(Object(r),!0).forEach(function(e){en(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function en(t,e,r){return(e=function(t){var e=function(t){if("object"!=Yr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function nn(t,e,r){return on.apply(this,arguments)}function on(){var t;return t=qr().m(function t(e,r,n){var o,c,f,s,p,l,y,v,d,b,w,m,g,S,O,j,E,P,k,A;return qr().w(function(t){for(;;)switch(t.p=t.n){case 0:if(St(e)){t.n=1;break}throw new H("Flattened JWE must be an object");case 1:if(void 0!==e.protected||void 0!==e.header||void 0!==e.unprotected){t.n=2;break}throw new H("JOSE Header missing");case 2:if(void 0===e.iv||"string"==typeof e.iv){t.n=3;break}throw new H("JWE Initialization Vector incorrect type");case 3:if("string"==typeof e.ciphertext){t.n=4;break}throw new H("JWE Ciphertext missing or incorrect type");case 4:if(void 0===e.tag||"string"==typeof e.tag){t.n=5;break}throw new H("JWE Authentication Tag incorrect type");case 5:if(void 0===e.protected||"string"==typeof e.protected){t.n=6;break}throw new H("JWE Protected Header incorrect type");case 6:if(void 0===e.encrypted_key||"string"==typeof e.encrypted_key){t.n=7;break}throw new H("JWE Encrypted Key incorrect type");case 7:if(void 0===e.aad||"string"==typeof e.aad){t.n=8;break}throw new H("JWE AAD incorrect type");case 8:if(void 0===e.header||St(e.header)){t.n=9;break}throw new H("JWE Shared Unprotected Header incorrect type");case 9:if(void 0===e.unprotected||St(e.unprotected)){t.n=10;break}throw new H("JWE Per-Recipient Unprotected Header incorrect type");case 10:if(!e.protected){t.n=13;break}t.p=11,f=h(e.protected),c=JSON.parse(a.decode(f)),t.n=13;break;case 12:throw t.p=12,t.v,new H("JWE Protected Header is invalid");case 13:if(mt(c,e.header,e.unprotected)){t.n=14;break}throw new H("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");case 14:if(s=tn(tn(tn({},c),e.header),e.unprotected),Kr(H,new Map,null==n?void 0:n.crit,c,s),void 0===s.zip){t.n=15;break}throw new K('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');case 15:if(p=s.alg,l=s.enc,"string"==typeof p&&p){t.n=16;break}throw new H("missing JWE Algorithm (alg) in JWE Header");case 16:if("string"==typeof l&&l){t.n=17;break}throw new H("missing JWE Encryption Algorithm (enc) in JWE Header");case 17:if(y=n&&Wr("keyManagementAlgorithms",n.keyManagementAlgorithms),v=n&&Wr("contentEncryptionAlgorithms",n.contentEncryptionAlgorithms),!(y&&!y.has(p)||!y&&p.startsWith("PBES2"))){t.n=18;break}throw new G('"alg" (Algorithm) Header Parameter value not allowed');case 18:if(!v||v.has(l)){t.n=19;break}throw new G('"enc" (Encryption Algorithm) Header Parameter value not allowed');case 19:if(void 0===e.encrypted_key){t.n=22;break}t.p=20,d=h(e.encrypted_key),t.n=22;break;case 21:throw t.p=21,t.v,new H("Failed to base64url decode the encrypted_key");case 22:if(b=!1,"function"!=typeof r){t.n=24;break}return t.n=23,r(c,e);case 23:r=t.v,b=!0;case 24:return $r("dir"===p?l:p,r,"decrypt"),t.n=25,Vr(r,p);case 25:return w=t.v,t.p=26,t.n=27,Tr(p,w,d,s,n);case 27:m=t.v,t.n=30;break;case 28:if(t.p=28,!((A=t.v)instanceof TypeError||A instanceof H||A instanceof K)){t.n=29;break}throw A;case 29:m=de(l);case 30:if(void 0===e.iv){t.n=33;break}t.p=31,g=h(e.iv),t.n=33;break;case 32:throw t.p=32,t.v,new H("Failed to base64url decode the iv");case 33:if(void 0===e.tag){t.n=36;break}t.p=34,S=h(e.tag),t.n=36;break;case 35:throw t.p=35,t.v,new H("Failed to base64url decode the tag");case 36:O=i.encode(null!==(o=e.protected)&&void 0!==o?o:""),j=void 0!==e.aad?u(O,i.encode("."),i.encode(e.aad)):O,t.p=37,E=h(e.ciphertext),t.n=39;break;case 38:throw t.p=38,t.v,new H("Failed to base64url decode the ciphertext");case 39:return t.n=40,bt(l,m,E,g,S,j);case 40:if(P=t.v,k={plaintext:P},void 0!==e.protected&&(k.protectedHeader=c),void 0===e.aad){t.n=43;break}t.p=41,k.additionalAuthenticatedData=h(e.aad),t.n=43;break;case 42:throw t.p=42,t.v,new H("Failed to base64url decode the aad");case 43:if(void 0!==e.unprotected&&(k.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(k.unprotectedHeader=e.header),!b){t.n=44;break}return t.a(2,tn(tn({},k),{},{key:w}));case 44:return t.a(2,k)}},t,null,[[41,42],[37,38],[34,35],[31,32],[26,28],[20,21],[11,12]])}),on=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){rn(i,n,o,a,c,"next",t)}function c(t){rn(i,n,o,a,c,"throw",t)}a(void 0)})},on.apply(this,arguments)}function an(t){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},an(t)}function cn(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return un(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(un(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,un(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,un(p,"constructor",f),un(f,"constructor",u),u.displayName="GeneratorFunction",un(f,o,"GeneratorFunction"),un(p),un(p,o,"Generator"),un(p,n,function(){return this}),un(p,"toString",function(){return"[object Generator]"}),(cn=function(){return{w:i,m:l}})()}function un(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}un=function(t,e,r,n){function i(e,r){un(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},un(t,e,r,n)}function fn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function sn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fn(Object(r),!0).forEach(function(e){pn(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fn(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function pn(t,e,r){return(e=function(t){var e=function(t){if("object"!=an(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=an(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==an(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ln(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function yn(t,e,r){return hn.apply(this,arguments)}function hn(){var t;return t=cn().m(function t(e,r,n){var o,i,c,u,f,s,p,l;return cn().w(function(t){for(;;)switch(t.n){case 0:if(e instanceof Uint8Array&&(e=a.decode(e)),"string"==typeof e){t.n=1;break}throw new H("Compact JWE must be a string or Uint8Array");case 1:if(o=e.split("."),i=o[0],c=o[1],u=o[2],f=o[3],s=o[4],5===o.length){t.n=2;break}throw new H("Invalid Compact JWE");case 2:return t.n=3,nn({ciphertext:f,iv:u||void 0,protected:i,tag:s||void 0,encrypted_key:c||void 0},r,n);case 3:if(p=t.v,l={plaintext:p.plaintext,protectedHeader:p.protectedHeader},"function"!=typeof r){t.n=4;break}return t.a(2,sn(sn({},l),{},{key:p.key}));case 4:return t.a(2,l)}},t)}),hn=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){ln(i,n,o,a,c,"next",t)}function c(t){ln(i,n,o,a,c,"throw",t)}a(void 0)})},hn.apply(this,arguments)}function vn(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return dn(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(dn(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,dn(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,dn(p,"constructor",f),dn(f,"constructor",u),u.displayName="GeneratorFunction",dn(f,o,"GeneratorFunction"),dn(p),dn(p,o,"Generator"),dn(p,n,function(){return this}),dn(p,"toString",function(){return"[object Generator]"}),(vn=function(){return{w:i,m:l}})()}function dn(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}dn=function(t,e,r,n){function i(e,r){dn(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},dn(t,e,r,n)}function bn(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return wn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function wn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function mn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function gn(t,e,r){return Sn.apply(this,arguments)}function Sn(){var t;return t=vn().m(function t(e,r,n){var o,i,a,c;return vn().w(function(t){for(;;)switch(t.p=t.n){case 0:if(St(e)){t.n=1;break}throw new H("General JWE must be an object");case 1:if(Array.isArray(e.recipients)&&e.recipients.every(St)){t.n=2;break}throw new H("JWE Recipients missing or incorrect type");case 2:if(e.recipients.length){t.n=3;break}throw new H("JWE Recipients has no members");case 3:o=bn(e.recipients),t.p=4,o.s();case 5:if((i=o.n()).done){t.n=10;break}return a=i.value,t.p=6,t.n=7,nn({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:a.encrypted_key,header:a.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},r,n);case 7:return t.a(2,t.v);case 8:t.p=8,t.v;case 9:t.n=5;break;case 10:t.n=12;break;case 11:t.p=11,c=t.v,o.e(c);case 12:return t.p=12,o.f(),t.f(12);case 13:throw new W;case 14:return t.a(2)}},t,null,[[6,8],[4,11,12,13]])}),Sn=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){mn(i,n,o,a,c,"next",t)}function c(t){mn(i,n,o,a,c,"throw",t)}a(void 0)})},Sn.apply(this,arguments)}var On=Symbol(),jn=["ext","key_ops","alg","use"];function En(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Pn(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Pn(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Pn(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Pn(p,"constructor",f),Pn(f,"constructor",u),u.displayName="GeneratorFunction",Pn(f,o,"GeneratorFunction"),Pn(p),Pn(p,o,"Generator"),Pn(p,n,function(){return this}),Pn(p,"toString",function(){return"[object Generator]"}),(En=function(){return{w:i,m:l}})()}function Pn(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Pn=function(t,e,r,n){function i(e,r){Pn(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Pn(t,e,r,n)}function kn(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function An(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Tn(t){return _n.apply(this,arguments)}function _n(){var t;return t=En().m(function t(e){var r,n,o;return En().w(function(t){for(;;)switch(t.n){case 0:if(!it(e)){t.n=2;break}if("secret"!==e.type){t.n=1;break}e=e.export(),t.n=2;break;case 1:return t.a(2,e.export({format:"jwk"}));case 2:if(!(e instanceof Uint8Array)){t.n=3;break}return t.a(2,{kty:"oct",k:v(e)});case 3:if(ot(e)){t.n=4;break}throw new TypeError(et(e,"CryptoKey","KeyObject","Uint8Array"));case 4:if(e.extractable){t.n=5;break}throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");case 5:return t.n=6,crypto.subtle.exportKey("jwk",e);case 6:return(r=t.v).ext,r.key_ops,n=r.alg,r.use,"AKP"===(o=kn(r,jn)).kty&&(o.alg=n),t.a(2,o)}},t)}),_n=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){An(i,n,o,a,c,"next",t)}function c(t){An(i,n,o,a,c,"throw",t)}a(void 0)})},_n.apply(this,arguments)}function Cn(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Gn(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Gn(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Gn(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Gn(p,"constructor",f),Gn(f,"constructor",u),u.displayName="GeneratorFunction",Gn(f,o,"GeneratorFunction"),Gn(p),Gn(p,o,"Generator"),Gn(p,n,function(){return this}),Gn(p,"toString",function(){return"[object Generator]"}),(Cn=function(){return{w:i,m:l}})()}function Gn(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Gn=function(t,e,r,n){function i(e,r){Gn(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Gn(t,e,r,n)}function Kn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Wn(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Kn(i,n,o,a,c,"next",t)}function c(t){Kn(i,n,o,a,c,"throw",t)}a(void 0)})}}function Hn(t){return xn.apply(this,arguments)}function xn(){return(xn=Wn(Cn().m(function t(e){return Cn().w(function(t){for(;;)if(0===t.n)return t.a(2,je(e))},t)}))).apply(this,arguments)}function Dn(t){return Jn.apply(this,arguments)}function Jn(){return(Jn=Wn(Cn().m(function t(e){return Cn().w(function(t){for(;;)if(0===t.n)return t.a(2,Ee(e))},t)}))).apply(this,arguments)}function In(t){return Rn.apply(this,arguments)}function Rn(){return(Rn=Wn(Cn().m(function t(e){return Cn().w(function(t){for(;;)if(0===t.n)return t.a(2,Tn(e))},t)}))).apply(this,arguments)}var Mn=["encryptedKey"],Fn=["encryptedKey"];function Un(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Nn(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Nn(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Nn(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Nn(p,"constructor",f),Nn(f,"constructor",u),u.displayName="GeneratorFunction",Nn(f,o,"GeneratorFunction"),Nn(p),Nn(p,o,"Generator"),Nn(p,n,function(){return this}),Nn(p,"toString",function(){return"[object Generator]"}),(Un=function(){return{w:i,m:l}})()}function Nn(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Nn=function(t,e,r,n){function i(e,r){Nn(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Nn(t,e,r,n)}function Bn(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Ln(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}const Vn=function(){var t,e=(t=Un().m(function t(e,r,n,o){var i,a,c,u,f,s,p,l,y,h,d,b,w,m,g,S,O,j,E,P,k=arguments;return Un().w(function(t){for(;;)switch(t.n){case 0:i=k.length>4&&void 0!==k[4]?k[4]:{},P=e,t.n="dir"===P?1:"ECDH-ES"===P||"ECDH-ES+A128KW"===P||"ECDH-ES+A192KW"===P||"ECDH-ES+A256KW"===P?2:"RSA-OAEP"===P||"RSA-OAEP-256"===P||"RSA-OAEP-384"===P||"RSA-OAEP-512"===P?12:"PBES2-HS256+A128KW"===P||"PBES2-HS384+A192KW"===P||"PBES2-HS512+A256KW"===P?14:"A128KW"===P||"A192KW"===P||"A256KW"===P?16:"A128GCMKW"===P||"A192GCMKW"===P||"A256GCMKW"===P?18:20;break;case 1:return u=n,t.a(3,21);case 2:if(nt(n),Vt(n)){t.n=3;break}throw new K("ECDH with the provided key is not allowed or not supported by your javascript runtime");case 3:if(f=i.apu,s=i.apv,!i.epk){t.n=5;break}return t.n=4,Vr(i.epk,e);case 4:p=t.v,t.n=7;break;case 5:return t.n=6,crypto.subtle.generateKey(n.algorithm,!0,["deriveBits"]);case 6:p=t.v.privateKey;case 7:return t.n=8,In(p);case 8:return l=t.v,y=l.x,h=l.y,d=l.crv,b=l.kty,t.n=9,Nt(n,p,"ECDH-ES"===e?r:e,"ECDH-ES"===e?ve(r):parseInt(e.slice(-5,-2),10),f,s);case 9:if(w=t.v,c={epk:{x:y,crv:d,kty:b}},"EC"===b&&(c.epk.y=h),f&&(c.apu=v(f)),s&&(c.apv=v(s)),"ECDH-ES"!==e){t.n=10;break}return u=w,t.a(3,21);case 10:return u=o||de(r),m=e.slice(-6),t.n=11,Tt(m,w,u);case 11:return a=t.v,t.a(3,21);case 12:return u=o||de(r),nt(n),t.n=13,pe(e,n,u);case 13:return a=t.v,t.a(3,21);case 14:return u=o||de(r),g=i.p2c,S=i.p2s,t.n=15,ee(e,n,u,g,S);case 15:return O=t.v,a=O.encryptedKey,c=Bn(O,Mn),t.a(3,21);case 16:return u=o||de(r),t.n=17,Tt(e,n,u);case 17:return a=t.v,t.a(3,21);case 18:return u=o||de(r),j=i.iv,t.n=19,Sr(e,n,u,j);case 19:return E=t.v,a=E.encryptedKey,c=Bn(E,Fn),t.a(3,21);case 20:throw new K('Invalid or unsupported "alg" (JWE Algorithm) header value');case 21:return t.a(2,{cek:u,encryptedKey:a,parameters:c})}},t)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Ln(i,n,o,a,c,"next",t)}function c(t){Ln(i,n,o,a,c,"throw",t)}a(void 0)})});return function(t,r,n,o){return e.apply(this,arguments)}}();function zn(t){return zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(t)}function Xn(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return $n(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):($n(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,$n(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,$n(p,"constructor",f),$n(f,"constructor",u),u.displayName="GeneratorFunction",$n(f,o,"GeneratorFunction"),$n(p),$n(p,o,"Generator"),$n(p,n,function(){return this}),$n(p,"toString",function(){return"[object Generator]"}),(Xn=function(){return{w:i,m:l}})()}function $n(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}$n=function(t,e,r,n){function i(e,r){$n(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},$n(t,e,r,n)}function Yn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function qn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Yn(Object(r),!0).forEach(function(e){Qn(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yn(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Qn(t,e,r){return(e=eo(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function to(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eo(n.key),n)}}function eo(t){var e=function(t){if("object"!=zn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zn(e)?e:e+""}function ro(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function no(t,e){return t.get(io(t,e))}function oo(t,e,r){return t.set(io(t,e),r),r}function io(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var ao=new WeakMap,co=new WeakMap,uo=new WeakMap,fo=new WeakMap,so=new WeakMap,po=new WeakMap,lo=new WeakMap,yo=new WeakMap,ho=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ro(this,ao,void 0),ro(this,co,void 0),ro(this,uo,void 0),ro(this,fo,void 0),ro(this,so,void 0),ro(this,po,void 0),ro(this,lo,void 0),ro(this,yo,void 0),!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");oo(ao,this,e)},e=[{key:"setKeyManagementParameters",value:function(t){if(no(yo,this))throw new TypeError("setKeyManagementParameters can only be called once");return oo(yo,this,t),this}},{key:"setProtectedHeader",value:function(t){if(no(co,this))throw new TypeError("setProtectedHeader can only be called once");return oo(co,this,t),this}},{key:"setSharedUnprotectedHeader",value:function(t){if(no(uo,this))throw new TypeError("setSharedUnprotectedHeader can only be called once");return oo(uo,this,t),this}},{key:"setUnprotectedHeader",value:function(t){if(no(fo,this))throw new TypeError("setUnprotectedHeader can only be called once");return oo(fo,this,t),this}},{key:"setAdditionalAuthenticatedData",value:function(t){return oo(so,this,t),this}},{key:"setContentEncryptionKey",value:function(t){if(no(po,this))throw new TypeError("setContentEncryptionKey can only be called once");return oo(po,this,t),this}},{key:"setInitializationVector",value:function(t){if(no(lo,this))throw new TypeError("setInitializationVector can only be called once");return oo(lo,this,t),this}},{key:"encrypt",value:(r=Xn().m(function t(e,r){var n,o,c,f,s,p,l,y,h,d,b,w,m,g,S,O;return Xn().w(function(t){for(;;)switch(t.n){case 0:if(no(co,this)||no(fo,this)||no(uo,this)){t.n=1;break}throw new H("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");case 1:if(mt(no(co,this),no(fo,this),no(uo,this))){t.n=2;break}throw new H("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");case 2:if(n=qn(qn(qn({},no(co,this)),no(fo,this)),no(uo,this)),Kr(H,new Map,null==r?void 0:r.crit,no(co,this),n),void 0===n.zip){t.n=3;break}throw new K('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');case 3:if(o=n.alg,c=n.enc,"string"==typeof o&&o){t.n=4;break}throw new H('JWE "alg" (Algorithm) Header Parameter missing or invalid');case 4:if("string"==typeof c&&c){t.n=5;break}throw new H('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');case 5:if(!no(po,this)||"dir"!==o&&"ECDH-ES"!==o){t.n=6;break}throw new TypeError('setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header '.concat(o));case 6:return $r("dir"===o?c:o,e,"encrypt"),t.n=7,Vr(e,o);case 7:return l=t.v,t.n=8,Vn(o,c,l,no(po,this),no(yo,this));case 8:return y=t.v,s=y.cek,f=y.encryptedKey,(p=y.parameters)&&(r&&On in r?no(fo,this)?oo(fo,this,qn(qn({},no(fo,this)),p)):this.setUnprotectedHeader(p):no(co,this)?oo(co,this,qn(qn({},no(co,this)),p)):this.setProtectedHeader(p)),d=no(co,this)?i.encode(v(JSON.stringify(no(co,this)))):i.encode(""),no(so,this)?(b=v(no(so,this)),h=u(d,i.encode("."),i.encode(b))):h=d,t.n=9,dr(c,no(ao,this),s,no(lo,this),h);case 9:return w=t.v,m=w.ciphertext,g=w.tag,S=w.iv,O={ciphertext:v(m)},S&&(O.iv=v(S)),g&&(O.tag=v(g)),f&&(O.encrypted_key=v(f)),b&&(O.aad=b),no(co,this)&&(O.protected=a.decode(d)),no(uo,this)&&(O.unprotected=no(uo,this)),no(fo,this)&&(O.header=no(fo,this)),t.a(2,O)}},t,this)}),n=function(){var t=this,e=arguments;return new Promise(function(n,o){var i=r.apply(t,e);function a(t){Zn(i,n,o,a,c,"next",t)}function c(t){Zn(i,n,o,a,c,"throw",t)}a(void 0)})},function(t,e){return n.apply(this,arguments)})}],e&&to(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function vo(t){return vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vo(t)}function bo(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return wo(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(wo(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,wo(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,wo(p,"constructor",f),wo(f,"constructor",u),u.displayName="GeneratorFunction",wo(f,o,"GeneratorFunction"),wo(p),wo(p,o,"Generator"),wo(p,n,function(){return this}),wo(p,"toString",function(){return"[object Generator]"}),(bo=function(){return{w:i,m:l}})()}function wo(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}wo=function(t,e,r,n){function i(e,r){wo(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},wo(t,e,r,n)}function mo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function go(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mo(Object(r),!0).forEach(function(e){Ao(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mo(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function So(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,f=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){f=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(f)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Oo(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Oo(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function jo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Eo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,To(n.key),n)}}function ko(t,e,r){return e&&Po(t.prototype,e),r&&Po(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ao(t,e,r){return(e=To(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function To(t){var e=function(t){if("object"!=vo(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=vo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vo(e)?e:e+""}function _o(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function Co(t,e){return t.get(Ko(t,e))}function Go(t,e,r){return t.set(Ko(t,e),r),r}function Ko(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Wo=new WeakMap,Ho=function(){return ko(function t(e,r,n){Eo(this,t),_o(this,Wo,void 0),Ao(this,"unprotectedHeader",void 0),Ao(this,"key",void 0),Ao(this,"options",void 0),Go(Wo,this,e),this.key=r,this.options=n},[{key:"setUnprotectedHeader",value:function(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}},{key:"addRecipient",value:function(){var t;return(t=Co(Wo,this)).addRecipient.apply(t,arguments)}},{key:"encrypt",value:function(){var t;return(t=Co(Wo,this)).encrypt.apply(t,arguments)}},{key:"done",value:function(){return Co(Wo,this)}}])}(),xo=new WeakMap,Do=new WeakMap,Jo=new WeakMap,Io=new WeakMap,Ro=new WeakMap,Mo=function(){return ko(function t(e){Eo(this,t),_o(this,xo,void 0),_o(this,Do,[]),_o(this,Jo,void 0),_o(this,Io,void 0),_o(this,Ro,void 0),Go(xo,this,e)},[{key:"addRecipient",value:function(t,e){var r=new Ho(this,t,{crit:null==e?void 0:e.crit});return Co(Do,this).push(r),r}},{key:"setProtectedHeader",value:function(t){if(Co(Jo,this))throw new TypeError("setProtectedHeader can only be called once");return Go(Jo,this,t),this}},{key:"setSharedUnprotectedHeader",value:function(t){if(Co(Io,this))throw new TypeError("setSharedUnprotectedHeader can only be called once");return Go(Io,this,t),this}},{key:"setAdditionalAuthenticatedData",value:function(t){return Go(Ro,this,t),this}},{key:"encrypt",value:function(){var t,e=(t=bo().m(function t(){var e,r,n,o,i,a,c,u,f,s,p,l,y,h,d,b,w,m,g,S,O,j,E,P,k,A;return bo().w(function(t){for(;;)switch(t.n){case 0:if(Co(Do,this).length){t.n=1;break}throw new H("at least one recipient must be added");case 1:if(1!==Co(Do,this).length){t.n=3;break}return e=Co(Do,this),r=So(e,1),n=r[0],t.n=2,new ho(Co(xo,this)).setAdditionalAuthenticatedData(Co(Ro,this)).setProtectedHeader(Co(Jo,this)).setSharedUnprotectedHeader(Co(Io,this)).setUnprotectedHeader(n.unprotectedHeader).encrypt(n.key,go({},n.options));case 2:return o=t.v,i={ciphertext:o.ciphertext,iv:o.iv,recipients:[{}],tag:o.tag},o.aad&&(i.aad=o.aad),o.protected&&(i.protected=o.protected),o.unprotected&&(i.unprotected=o.unprotected),o.encrypted_key&&(i.recipients[0].encrypted_key=o.encrypted_key),o.header&&(i.recipients[0].header=o.header),t.a(2,i);case 3:c=0;case 4:if(!(c<Co(Do,this).length)){t.n=12;break}if(u=Co(Do,this)[c],mt(Co(Jo,this),Co(Io,this),u.unprotectedHeader)){t.n=5;break}throw new H("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");case 5:if(f=go(go(go({},Co(Jo,this)),Co(Io,this)),u.unprotectedHeader),"string"==typeof(s=f.alg)&&s){t.n=6;break}throw new H('JWE "alg" (Algorithm) Header Parameter missing or invalid');case 6:if("dir"!==s&&"ECDH-ES"!==s){t.n=7;break}throw new H('"dir" and "ECDH-ES" alg may only be used with a single recipient');case 7:if("string"==typeof f.enc&&f.enc){t.n=8;break}throw new H('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');case 8:if(a){t.n=9;break}a=f.enc,t.n=10;break;case 9:if(a===f.enc){t.n=10;break}throw new H('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');case 10:if(Kr(H,new Map,u.options.crit,Co(Jo,this),f),void 0===f.zip){t.n=11;break}throw new K('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');case 11:c++,t.n=4;break;case 12:p=de(a),l={ciphertext:"",iv:"",recipients:[],tag:""},y=0;case 13:if(!(y<Co(Do,this).length)){t.n=19;break}if(w=Co(Do,this)[y],m={},l.recipients.push(m),g=go(go(go({},Co(Jo,this)),Co(Io,this)),w.unprotectedHeader),S=g.alg.startsWith("PBES2")?2048+y:void 0,0!==y){t.n=15;break}return t.n=14,new ho(Co(xo,this)).setAdditionalAuthenticatedData(Co(Ro,this)).setContentEncryptionKey(p).setProtectedHeader(Co(Jo,this)).setSharedUnprotectedHeader(Co(Io,this)).setUnprotectedHeader(w.unprotectedHeader).setKeyManagementParameters({p2c:S}).encrypt(w.key,go(go({},w.options),{},Ao({},On,!0)));case 14:return O=t.v,l.ciphertext=O.ciphertext,l.iv=O.iv,l.tag=O.tag,O.aad&&(l.aad=O.aad),O.protected&&(l.protected=O.protected),O.unprotected&&(l.unprotected=O.unprotected),m.encrypted_key=O.encrypted_key,O.header&&(m.header=O.header),t.a(3,18);case 15:return j=(null===(h=w.unprotectedHeader)||void 0===h?void 0:h.alg)||(null===(d=Co(Jo,this))||void 0===d?void 0:d.alg)||(null===(b=Co(Io,this))||void 0===b?void 0:b.alg),$r("dir"===j?a:j,w.key,"encrypt"),t.n=16,Vr(w.key,j);case 16:return E=t.v,t.n=17,Vn(j,a,E,p,{p2c:S});case 17:P=t.v,k=P.encryptedKey,A=P.parameters,m.encrypted_key=v(k),(w.unprotectedHeader||A)&&(m.header=go(go({},w.unprotectedHeader),A));case 18:y++,t.n=13;break;case 19:return t.a(2,l)}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){jo(i,n,o,a,c,"next",t)}function c(t){jo(i,n,o,a,c,"throw",t)}a(void 0)})});return function(){return e.apply(this,arguments)}}()}])}();const Fo=function(t,e){var r="SHA-".concat(t.slice(-3));switch(t){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:parseInt(t.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:t};default:throw new K("alg ".concat(t," is not supported either by JOSE or your javascript runtime"))}};function Uo(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return No(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(No(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,No(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,No(p,"constructor",f),No(f,"constructor",u),u.displayName="GeneratorFunction",No(f,o,"GeneratorFunction"),No(p),No(p,o,"Generator"),No(p,n,function(){return this}),No(p,"toString",function(){return"[object Generator]"}),(Uo=function(){return{w:i,m:l}})()}function No(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}No=function(t,e,r,n){function i(e,r){No(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},No(t,e,r,n)}function Bo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}const Lo=function(){var t,e=(t=Uo().m(function t(e,r,n){return Uo().w(function(t){for(;;)switch(t.n){case 0:if(!(r instanceof Uint8Array)){t.n=2;break}if(e.startsWith("HS")){t.n=1;break}throw new TypeError(et(r,"CryptoKey","KeyObject","JSON Web Key"));case 1:return t.a(2,crypto.subtle.importKey("raw",r,{hash:"SHA-".concat(e.slice(-3)),name:"HMAC"},!1,[n]));case 2:return q(r,e,n),t.a(2,r)}},t)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Bo(i,n,o,a,c,"next",t)}function c(t){Bo(i,n,o,a,c,"throw",t)}a(void 0)})});return function(t,r,n){return e.apply(this,arguments)}}();function Vo(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return zo(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(zo(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,zo(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,zo(p,"constructor",f),zo(f,"constructor",u),u.displayName="GeneratorFunction",zo(f,o,"GeneratorFunction"),zo(p),zo(p,o,"Generator"),zo(p,n,function(){return this}),zo(p,"toString",function(){return"[object Generator]"}),(Vo=function(){return{w:i,m:l}})()}function zo(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}zo=function(t,e,r,n){function i(e,r){zo(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},zo(t,e,r,n)}function Xo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}const $o=function(){var t,e=(t=Vo().m(function t(e,r,n,o){var i,a;return Vo().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.n=1,Lo(e,r,"verify");case 1:return i=t.v,ie(e,i),a=Fo(e,i.algorithm),t.p=2,t.n=3,crypto.subtle.verify(a,i,n,o);case 3:return t.a(2,t.v);case 4:return t.p=4,t.v,t.a(2,!1)}},t,null,[[2,4]])}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Xo(i,n,o,a,c,"next",t)}function c(t){Xo(i,n,o,a,c,"throw",t)}a(void 0)})});return function(t,r,n,o){return e.apply(this,arguments)}}();function Yo(t){return Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yo(t)}function qo(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Qo(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Qo(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Qo(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Qo(p,"constructor",f),Qo(f,"constructor",u),u.displayName="GeneratorFunction",Qo(f,o,"GeneratorFunction"),Qo(p),Qo(p,o,"Generator"),Qo(p,n,function(){return this}),Qo(p,"toString",function(){return"[object Generator]"}),(qo=function(){return{w:i,m:l}})()}function Qo(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Qo=function(t,e,r,n){function i(e,r){Qo(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Qo(t,e,r,n)}function Zo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ti(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zo(Object(r),!0).forEach(function(e){ei(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zo(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ei(t,e,r){return(e=function(t){var e=function(t){if("object"!=Yo(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Yo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yo(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ri(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ni(t,e,r){return oi.apply(this,arguments)}function oi(){var t;return t=qo().m(function t(e,r,n){var o,c,f,s,p,l,y,v,d,b,w,m,g,S;return qo().w(function(t){for(;;)switch(t.p=t.n){case 0:if(St(e)){t.n=1;break}throw new x("Flattened JWS must be an object");case 1:if(void 0!==e.protected||void 0!==e.header){t.n=2;break}throw new x('Flattened JWS must have either of the "protected" or "header" members');case 2:if(void 0===e.protected||"string"==typeof e.protected){t.n=3;break}throw new x("JWS Protected Header incorrect type");case 3:if(void 0!==e.payload){t.n=4;break}throw new x("JWS Payload missing");case 4:if("string"==typeof e.signature){t.n=5;break}throw new x("JWS Signature missing or incorrect type");case 5:if(void 0===e.header||St(e.header)){t.n=6;break}throw new x("JWS Unprotected Header incorrect type");case 6:if(c={},!e.protected){t.n=9;break}t.p=7,f=h(e.protected),c=JSON.parse(a.decode(f)),t.n=9;break;case 8:throw t.p=8,t.v,new x("JWS Protected Header is invalid");case 9:if(mt(c,e.header)){t.n=10;break}throw new x("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");case 10:if(s=ti(ti({},c),e.header),p=Kr(x,new Map([["b64",!0]]),null==n?void 0:n.crit,c,s),l=!0,!p.has("b64")){t.n=11;break}if("boolean"==typeof(l=c.b64)){t.n=11;break}throw new x('The "b64" (base64url-encode payload) Header Parameter must be a boolean');case 11:if("string"==typeof(y=s.alg)&&y){t.n=12;break}throw new x('JWS "alg" (Algorithm) Header Parameter missing or invalid');case 12:if(!(v=n&&Wr("algorithms",n.algorithms))||v.has(y)){t.n=13;break}throw new G('"alg" (Algorithm) Header Parameter value not allowed');case 13:if(!l){t.n=15;break}if("string"==typeof e.payload){t.n=14;break}throw new x("JWS Payload must be a string");case 14:t.n=16;break;case 15:if("string"==typeof e.payload||e.payload instanceof Uint8Array){t.n=16;break}throw new x("JWS Payload must be a string or an Uint8Array instance");case 16:if(d=!1,"function"!=typeof r){t.n=18;break}return t.n=17,r(c,e);case 17:r=t.v,d=!0;case 18:$r(y,r,"verify"),b=u(i.encode(null!==(o=e.protected)&&void 0!==o?o:""),i.encode("."),"string"==typeof e.payload?i.encode(e.payload):e.payload),t.p=19,w=h(e.signature),t.n=21;break;case 20:throw t.p=20,t.v,new x("Failed to base64url decode the signature");case 21:return t.n=22,Vr(r,y);case 22:return m=t.v,t.n=23,$o(y,m,w,b);case 23:if(t.v){t.n=24;break}throw new U;case 24:if(!l){t.n=28;break}t.p=25,g=h(e.payload),t.n=27;break;case 26:throw t.p=26,t.v,new x("Failed to base64url decode the payload");case 27:t.n=29;break;case 28:g="string"==typeof e.payload?i.encode(e.payload):e.payload;case 29:if(S={payload:g},void 0!==e.protected&&(S.protectedHeader=c),void 0!==e.header&&(S.unprotectedHeader=e.header),!d){t.n=30;break}return t.a(2,ti(ti({},S),{},{key:m}));case 30:return t.a(2,S)}},t,null,[[25,26],[19,20],[7,8]])}),oi=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){ri(i,n,o,a,c,"next",t)}function c(t){ri(i,n,o,a,c,"throw",t)}a(void 0)})},oi.apply(this,arguments)}function ii(t){return ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ii(t)}function ai(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return ci(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(ci(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,ci(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,ci(p,"constructor",f),ci(f,"constructor",u),u.displayName="GeneratorFunction",ci(f,o,"GeneratorFunction"),ci(p),ci(p,o,"Generator"),ci(p,n,function(){return this}),ci(p,"toString",function(){return"[object Generator]"}),(ai=function(){return{w:i,m:l}})()}function ci(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ci=function(t,e,r,n){function i(e,r){ci(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},ci(t,e,r,n)}function ui(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function fi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ui(Object(r),!0).forEach(function(e){si(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ui(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function si(t,e,r){return(e=function(t){var e=function(t){if("object"!=ii(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ii(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ii(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function li(t,e,r){return yi.apply(this,arguments)}function yi(){var t;return t=ai().m(function t(e,r,n){var o,i,c,u,f,s;return ai().w(function(t){for(;;)switch(t.n){case 0:if(e instanceof Uint8Array&&(e=a.decode(e)),"string"==typeof e){t.n=1;break}throw new x("Compact JWS must be a string or Uint8Array");case 1:if(o=e.split("."),i=o[0],c=o[1],u=o[2],3===o.length){t.n=2;break}throw new x("Invalid Compact JWS");case 2:return t.n=3,ni({payload:c,protected:i,signature:u},r,n);case 3:if(f=t.v,s={payload:f.payload,protectedHeader:f.protectedHeader},"function"!=typeof r){t.n=4;break}return t.a(2,fi(fi({},s),{},{key:f.key}));case 4:return t.a(2,s)}},t)}),yi=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){pi(i,n,o,a,c,"next",t)}function c(t){pi(i,n,o,a,c,"throw",t)}a(void 0)})},yi.apply(this,arguments)}function hi(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return vi(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(vi(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,vi(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,vi(p,"constructor",f),vi(f,"constructor",u),u.displayName="GeneratorFunction",vi(f,o,"GeneratorFunction"),vi(p),vi(p,o,"Generator"),vi(p,n,function(){return this}),vi(p,"toString",function(){return"[object Generator]"}),(hi=function(){return{w:i,m:l}})()}function vi(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}vi=function(t,e,r,n){function i(e,r){vi(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},vi(t,e,r,n)}function di(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return bi(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bi(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function bi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function wi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function mi(t,e,r){return gi.apply(this,arguments)}function gi(){var t;return t=hi().m(function t(e,r,n){var o,i,a,c;return hi().w(function(t){for(;;)switch(t.p=t.n){case 0:if(St(e)){t.n=1;break}throw new x("General JWS must be an object");case 1:if(Array.isArray(e.signatures)&&e.signatures.every(St)){t.n=2;break}throw new x("JWS Signatures missing or incorrect type");case 2:o=di(e.signatures),t.p=3,o.s();case 4:if((i=o.n()).done){t.n=9;break}return a=i.value,t.p=5,t.n=6,ni({header:a.header,payload:e.payload,protected:a.protected,signature:a.signature},r,n);case 6:return t.a(2,t.v);case 7:t.p=7,t.v;case 8:t.n=4;break;case 9:t.n=11;break;case 10:t.p=10,c=t.v,o.e(c);case 11:return t.p=11,o.f(),t.f(11);case 12:throw new U;case 13:return t.a(2)}},t,null,[[5,7],[3,10,11,12]])}),gi=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){wi(i,n,o,a,c,"next",t)}function c(t){wi(i,n,o,a,c,"throw",t)}a(void 0)})},gi.apply(this,arguments)}const Si=function(t){return Math.floor(t.getTime()/1e3)};var Oi=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;const ji=function(t){var e=Oi.exec(t);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");var r,n=parseFloat(e[2]);switch(e[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":r=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":r=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":r=Math.round(3600*n);break;case"day":case"days":case"d":r=Math.round(86400*n);break;case"week":case"weeks":case"w":r=Math.round(604800*n);break;default:r=Math.round(31557600*n)}return"-"===e[1]||"ago"===e[4]?-r:r};function Ei(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pi(n.key),n)}}function Pi(t){var e=function(t){if("object"!=Ti(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Ti(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ti(e)?e:e+""}function ki(t,e){return t.get(Ai(t,e))}function Ai(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function Ti(t){return Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ti(t)}function _i(t,e){if(t){if("string"==typeof t)return Ci(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ci(t,e):void 0}}function Ci(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Gi(t,e){if(!Number.isFinite(e))throw new TypeError("Invalid ".concat(t," input"));return e}var Ki=function(t){return t.includes("/")?t.toLowerCase():"application/".concat(t.toLowerCase())};function Wi(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{r=JSON.parse(a.decode(e))}catch(t){}if(!St(r))throw new D("JWT Claims Set must be a top-level JSON object");var o=n.typ;if(o&&("string"!=typeof t.typ||Ki(t.typ)!==Ki(o)))throw new _('unexpected "typ" JWT header value',r,"typ","check_failed");var i,c=n.requiredClaims,u=void 0===c?[]:c,f=n.issuer,s=n.subject,p=n.audience,l=n.maxTokenAge,y=function(t){if(Array.isArray(t))return Ci(t)}(i=u)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||_i(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();void 0!==l&&y.push("iat"),void 0!==p&&y.push("aud"),void 0!==s&&y.push("sub"),void 0!==f&&y.push("iss");var h,v,d,b,w=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=_i(t))){e&&(t=e);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==e.return||e.return()}finally{if(a)throw o}}}}(new Set(y.reverse()));try{for(w.s();!(h=w.n()).done;){var m=h.value;if(!(m in r))throw new _('missing required "'.concat(m,'" claim'),r,m,"missing")}}catch(t){w.e(t)}finally{w.f()}if(f&&!(Array.isArray(f)?f:[f]).includes(r.iss))throw new _('unexpected "iss" claim value',r,"iss","check_failed");if(s&&r.sub!==s)throw new _('unexpected "sub" claim value',r,"sub","check_failed");if(p&&(d="string"==typeof p?[p]:p,!("string"==typeof(v=r.aud)?d.includes(v):Array.isArray(v)&&d.some(Set.prototype.has.bind(new Set(v))))))throw new _('unexpected "aud" claim value',r,"aud","check_failed");switch(Ti(n.clockTolerance)){case"string":b=ji(n.clockTolerance);break;case"number":b=n.clockTolerance;break;case"undefined":b=0;break;default:throw new TypeError("Invalid clockTolerance option type")}var g=n.currentDate,S=Si(g||new Date);if((void 0!==r.iat||l)&&"number"!=typeof r.iat)throw new _('"iat" claim must be a number',r,"iat","invalid");if(void 0!==r.nbf){if("number"!=typeof r.nbf)throw new _('"nbf" claim must be a number',r,"nbf","invalid");if(r.nbf>S+b)throw new _('"nbf" claim timestamp check failed',r,"nbf","check_failed")}if(void 0!==r.exp){if("number"!=typeof r.exp)throw new _('"exp" claim must be a number',r,"exp","invalid");if(r.exp<=S-b)throw new C('"exp" claim timestamp check failed',r,"exp","check_failed")}if(l){var O=S-r.iat;if(O-b>("number"==typeof l?l:ji(l)))throw new C('"iat" claim timestamp check failed (too far in the past)',r,"iat","check_failed");if(O<0-b)throw new _('"iat" claim timestamp check failed (it should be in the past)',r,"iat","check_failed")}return r}var Hi=new WeakMap,xi=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}(this,Hi,void 0),!St(e))throw new TypeError("JWT Claims Set MUST be an object");var r,n;r=Hi,n=structuredClone(e),r.set(Ai(r,this),n)},(e=[{key:"data",value:function(){return i.encode(JSON.stringify(ki(Hi,this)))}},{key:"iss",get:function(){return ki(Hi,this).iss},set:function(t){ki(Hi,this).iss=t}},{key:"sub",get:function(){return ki(Hi,this).sub},set:function(t){ki(Hi,this).sub=t}},{key:"aud",get:function(){return ki(Hi,this).aud},set:function(t){ki(Hi,this).aud=t}},{key:"jti",set:function(t){ki(Hi,this).jti=t}},{key:"nbf",set:function(t){"number"==typeof t?ki(Hi,this).nbf=Gi("setNotBefore",t):t instanceof Date?ki(Hi,this).nbf=Gi("setNotBefore",Si(t)):ki(Hi,this).nbf=Si(new Date)+ji(t)}},{key:"exp",set:function(t){"number"==typeof t?ki(Hi,this).exp=Gi("setExpirationTime",t):t instanceof Date?ki(Hi,this).exp=Gi("setExpirationTime",Si(t)):ki(Hi,this).exp=Si(new Date)+ji(t)}},{key:"iat",set:function(t){void 0===t?ki(Hi,this).iat=Si(new Date):t instanceof Date?ki(Hi,this).iat=Gi("setIssuedAt",Si(t)):ki(Hi,this).iat=Gi("setIssuedAt","string"==typeof t?Si(new Date)+ji(t):t)}}])&&Ei(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Di(t){return Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Di(t)}function Ji(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Ii(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Ii(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Ii(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Ii(p,"constructor",f),Ii(f,"constructor",u),u.displayName="GeneratorFunction",Ii(f,o,"GeneratorFunction"),Ii(p),Ii(p,o,"Generator"),Ii(p,n,function(){return this}),Ii(p,"toString",function(){return"[object Generator]"}),(Ji=function(){return{w:i,m:l}})()}function Ii(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ii=function(t,e,r,n){function i(e,r){Ii(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Ii(t,e,r,n)}function Ri(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Mi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ri(Object(r),!0).forEach(function(e){Fi(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ri(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Fi(t,e,r){return(e=function(t){var e=function(t){if("object"!=Di(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Di(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Di(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ui(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ni(t,e,r){return Bi.apply(this,arguments)}function Bi(){var t;return t=Ji().m(function t(e,r,n){var o,i,a,c;return Ji().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,li(e,r,n);case 1:if(i=t.v,null===(o=i.protectedHeader.crit)||void 0===o||!o.includes("b64")||!1!==i.protectedHeader.b64){t.n=2;break}throw new D("JWTs MUST NOT use unencoded payload");case 2:if(a=Wi(i.protectedHeader,i.payload,n),c={payload:a,protectedHeader:i.protectedHeader},"function"!=typeof r){t.n=3;break}return t.a(2,Mi(Mi({},c),{},{key:i.key}));case 3:return t.a(2,c)}},t)}),Bi=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Ui(i,n,o,a,c,"next",t)}function c(t){Ui(i,n,o,a,c,"throw",t)}a(void 0)})},Bi.apply(this,arguments)}function Li(t){return Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Li(t)}function Vi(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return zi(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(zi(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,zi(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,zi(p,"constructor",f),zi(f,"constructor",u),u.displayName="GeneratorFunction",zi(f,o,"GeneratorFunction"),zi(p),zi(p,o,"Generator"),zi(p,n,function(){return this}),zi(p,"toString",function(){return"[object Generator]"}),(Vi=function(){return{w:i,m:l}})()}function zi(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}zi=function(t,e,r,n){function i(e,r){zi(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},zi(t,e,r,n)}function Xi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function $i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xi(Object(r),!0).forEach(function(e){Yi(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xi(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Yi(t,e,r){return(e=function(t){var e=function(t){if("object"!=Li(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Li(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Li(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Qi(t,e,r){return Zi.apply(this,arguments)}function Zi(){var t;return t=Vi().m(function t(e,r,n){var o,i,a,c;return Vi().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,yn(e,r,n);case 1:if(o=t.v,i=Wi(o.protectedHeader,o.plaintext,n),void 0===(a=o.protectedHeader).iss||a.iss===i.iss){t.n=2;break}throw new _('replicated "iss" claim header parameter mismatch',i,"iss","mismatch");case 2:if(void 0===a.sub||a.sub===i.sub){t.n=3;break}throw new _('replicated "sub" claim header parameter mismatch',i,"sub","mismatch");case 3:if(void 0===a.aud||JSON.stringify(a.aud)===JSON.stringify(i.aud)){t.n=4;break}throw new _('replicated "aud" claim header parameter mismatch',i,"aud","mismatch");case 4:if(c={payload:i,protectedHeader:a},"function"!=typeof r){t.n=5;break}return t.a(2,$i($i({},c),{},{key:o.key}));case 5:return t.a(2,c)}},t)}),Zi=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){qi(i,n,o,a,c,"next",t)}function c(t){qi(i,n,o,a,c,"throw",t)}a(void 0)})},Zi.apply(this,arguments)}function ta(t){return ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ta(t)}function ea(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return ra(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(ra(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,ra(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,ra(p,"constructor",f),ra(f,"constructor",u),u.displayName="GeneratorFunction",ra(f,o,"GeneratorFunction"),ra(p),ra(p,o,"Generator"),ra(p,n,function(){return this}),ra(p,"toString",function(){return"[object Generator]"}),(ea=function(){return{w:i,m:l}})()}function ra(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ra=function(t,e,r,n){function i(e,r){ra(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},ra(t,e,r,n)}function na(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function oa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ia(n.key),n)}}function ia(t){var e=function(t){if("object"!=ta(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ta(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ta(e)?e:e+""}function aa(t,e){return t.get(ca(t,e))}function ca(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var ua=new WeakMap,fa=function(){return t=function t(e){var r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}(this,ua,void 0),r=ua,n=new ho(e),r.set(ca(r,this),n)},e=[{key:"setContentEncryptionKey",value:function(t){return aa(ua,this).setContentEncryptionKey(t),this}},{key:"setInitializationVector",value:function(t){return aa(ua,this).setInitializationVector(t),this}},{key:"setProtectedHeader",value:function(t){return aa(ua,this).setProtectedHeader(t),this}},{key:"setKeyManagementParameters",value:function(t){return aa(ua,this).setKeyManagementParameters(t),this}},{key:"encrypt",value:function(){var t,e=(t=ea().m(function t(e,r){var n;return ea().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,aa(ua,this).encrypt(e,r);case 1:return n=t.v,t.a(2,[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join("."))}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){na(i,n,o,a,c,"next",t)}function c(t){na(i,n,o,a,c,"throw",t)}a(void 0)})});return function(t,r){return e.apply(this,arguments)}}()}],e&&oa(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function sa(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return pa(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(pa(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,pa(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,pa(p,"constructor",f),pa(f,"constructor",u),u.displayName="GeneratorFunction",pa(f,o,"GeneratorFunction"),pa(p),pa(p,o,"Generator"),pa(p,n,function(){return this}),pa(p,"toString",function(){return"[object Generator]"}),(sa=function(){return{w:i,m:l}})()}function pa(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}pa=function(t,e,r,n){function i(e,r){pa(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},pa(t,e,r,n)}function la(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}const ya=function(){var t,e=(t=sa().m(function t(e,r,n){var o,i;return sa().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lo(e,r,"sign");case 1:return o=t.v,ie(e,o),t.n=2,crypto.subtle.sign(Fo(e,o.algorithm),o,n);case 2:return i=t.v,t.a(2,new Uint8Array(i))}},t)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){la(i,n,o,a,c,"next",t)}function c(t){la(i,n,o,a,c,"throw",t)}a(void 0)})});return function(t,r,n){return e.apply(this,arguments)}}();function ha(t){return ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ha(t)}function va(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return da(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(da(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,da(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,da(p,"constructor",f),da(f,"constructor",u),u.displayName="GeneratorFunction",da(f,o,"GeneratorFunction"),da(p),da(p,o,"Generator"),da(p,n,function(){return this}),da(p,"toString",function(){return"[object Generator]"}),(va=function(){return{w:i,m:l}})()}function da(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}da=function(t,e,r,n){function i(e,r){da(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},da(t,e,r,n)}function ba(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function wa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ba(Object(r),!0).forEach(function(e){ma(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ba(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ma(t,e,r){return(e=Oa(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ga(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Sa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oa(n.key),n)}}function Oa(t){var e=function(t){if("object"!=ha(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ha(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ha(e)?e:e+""}function ja(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function Ea(t,e){return t.get(ka(t,e))}function Pa(t,e,r){return t.set(ka(t,e),r),r}function ka(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Aa=new WeakMap,Ta=new WeakMap,_a=new WeakMap,Ca=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ja(this,Aa,void 0),ja(this,Ta,void 0),ja(this,_a,void 0),!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");Pa(Aa,this,e)},e=[{key:"setProtectedHeader",value:function(t){if(Ea(Ta,this))throw new TypeError("setProtectedHeader can only be called once");return Pa(Ta,this,t),this}},{key:"setUnprotectedHeader",value:function(t){if(Ea(_a,this))throw new TypeError("setUnprotectedHeader can only be called once");return Pa(_a,this,t),this}},{key:"sign",value:(r=va().m(function t(e,r){var n,o,c,f,s,p,l,y,h,d;return va().w(function(t){for(;;)switch(t.n){case 0:if(Ea(Ta,this)||Ea(_a,this)){t.n=1;break}throw new x("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");case 1:if(mt(Ea(Ta,this),Ea(_a,this))){t.n=2;break}throw new x("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");case 2:if(n=wa(wa({},Ea(Ta,this)),Ea(_a,this)),o=Kr(x,new Map([["b64",!0]]),null==r?void 0:r.crit,Ea(Ta,this),n),c=!0,!o.has("b64")){t.n=3;break}if("boolean"==typeof(c=Ea(Ta,this).b64)){t.n=3;break}throw new x('The "b64" (base64url-encode payload) Header Parameter must be a boolean');case 3:if("string"==typeof(f=n.alg)&&f){t.n=4;break}throw new x('JWS "alg" (Algorithm) Header Parameter missing or invalid');case 4:return $r(f,e,"sign"),s=Ea(Aa,this),c&&(s=i.encode(v(s))),p=Ea(Ta,this)?i.encode(v(JSON.stringify(Ea(Ta,this)))):i.encode(""),l=u(p,i.encode("."),s),t.n=5,Vr(e,f);case 5:return y=t.v,t.n=6,ya(f,y,l);case 6:return h=t.v,d={signature:v(h),payload:""},c&&(d.payload=a.decode(s)),Ea(_a,this)&&(d.header=Ea(_a,this)),Ea(Ta,this)&&(d.protected=a.decode(p)),t.a(2,d)}},t,this)}),n=function(){var t=this,e=arguments;return new Promise(function(n,o){var i=r.apply(t,e);function a(t){ga(i,n,o,a,c,"next",t)}function c(t){ga(i,n,o,a,c,"throw",t)}a(void 0)})},function(t,e){return n.apply(this,arguments)})}],e&&Sa(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function Ga(t){return Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ga(t)}function Ka(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Wa(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Wa(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Wa(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Wa(p,"constructor",f),Wa(f,"constructor",u),u.displayName="GeneratorFunction",Wa(f,o,"GeneratorFunction"),Wa(p),Wa(p,o,"Generator"),Wa(p,n,function(){return this}),Wa(p,"toString",function(){return"[object Generator]"}),(Ka=function(){return{w:i,m:l}})()}function Wa(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Wa=function(t,e,r,n){function i(e,r){Wa(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Wa(t,e,r,n)}function Ha(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function xa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Da(n.key),n)}}function Da(t){var e=function(t){if("object"!=Ga(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ga(e)?e:e+""}function Ja(t,e){return t.get(Ia(t,e))}function Ia(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Ra=new WeakMap,Ma=function(){return t=function t(e){var r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}(this,Ra,void 0),r=Ra,n=new Ca(e),r.set(Ia(r,this),n)},e=[{key:"setProtectedHeader",value:function(t){return Ja(Ra,this).setProtectedHeader(t),this}},{key:"sign",value:(r=Ka().m(function t(e,r){var n;return Ka().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ja(Ra,this).sign(e,r);case 1:if(void 0!==(n=t.v).payload){t.n=2;break}throw new TypeError("use the flattened module for creating JWS with b64: false");case 2:return t.a(2,"".concat(n.protected,".").concat(n.payload,".").concat(n.signature))}},t,this)}),n=function(){var t=this,e=arguments;return new Promise(function(n,o){var i=r.apply(t,e);function a(t){Ha(i,n,o,a,c,"next",t)}function c(t){Ha(i,n,o,a,c,"throw",t)}a(void 0)})},function(t,e){return n.apply(this,arguments)})}],e&&xa(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function Fa(t){return Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fa(t)}var Ua=["payload"];function Na(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Ba(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Ba(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Ba(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Ba(p,"constructor",f),Ba(f,"constructor",u),u.displayName="GeneratorFunction",Ba(f,o,"GeneratorFunction"),Ba(p),Ba(p,o,"Generator"),Ba(p,n,function(){return this}),Ba(p,"toString",function(){return"[object Generator]"}),(Na=function(){return{w:i,m:l}})()}function Ba(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ba=function(t,e,r,n){function i(e,r){Ba(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Ba(t,e,r,n)}function La(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Va(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function za(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qa(n.key),n)}}function $a(t,e,r){return e&&Xa(t.prototype,e),r&&Xa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ya(t,e,r){return(e=qa(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qa(t){var e=function(t){if("object"!=Fa(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Fa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fa(e)?e:e+""}function Qa(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function Za(t,e){return t.get(ec(t,e))}function tc(t,e,r){return t.set(ec(t,e),r),r}function ec(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var rc=new WeakMap,nc=function(){return $a(function t(e,r,n){za(this,t),Qa(this,rc,void 0),Ya(this,"protectedHeader",void 0),Ya(this,"unprotectedHeader",void 0),Ya(this,"options",void 0),Ya(this,"key",void 0),tc(rc,this,e),this.key=r,this.options=n},[{key:"setProtectedHeader",value:function(t){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}},{key:"setUnprotectedHeader",value:function(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}},{key:"addSignature",value:function(){var t;return(t=Za(rc,this)).addSignature.apply(t,arguments)}},{key:"sign",value:function(){var t;return(t=Za(rc,this)).sign.apply(t,arguments)}},{key:"done",value:function(){return Za(rc,this)}}])}(),oc=new WeakMap,ic=new WeakMap,ac=function(){return $a(function t(e){za(this,t),Qa(this,oc,void 0),Qa(this,ic,[]),tc(oc,this,e)},[{key:"addSignature",value:function(t,e){var r=new nc(this,t,e);return Za(ic,this).push(r),r}},{key:"sign",value:(t=Na().m(function t(){var e,r,n,o,i,a,c;return Na().w(function(t){for(;;)switch(t.n){case 0:if(Za(ic,this).length){t.n=1;break}throw new x("at least one signature must be added");case 1:e={signatures:[],payload:""},r=0;case 2:if(!(r<Za(ic,this).length)){t.n=7;break}return n=Za(ic,this)[r],(o=new Ca(Za(oc,this))).setProtectedHeader(n.protectedHeader),o.setUnprotectedHeader(n.unprotectedHeader),t.n=3,o.sign(n.key,n.options);case 3:if(i=t.v,a=i.payload,c=La(i,Ua),0!==r){t.n=4;break}e.payload=a,t.n=5;break;case 4:if(e.payload===a){t.n=5;break}throw new x("inconsistent use of JWS Unencoded Payload (RFC7797)");case 5:e.signatures.push(c);case 6:r++,t.n=2;break;case 7:return t.a(2,e)}},t,this)}),e=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Va(i,n,o,a,c,"next",t)}function c(t){Va(i,n,o,a,c,"throw",t)}a(void 0)})},function(){return e.apply(this,arguments)})}]);var t,e}();function cc(t){return cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cc(t)}function uc(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return fc(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(fc(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,fc(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,fc(p,"constructor",f),fc(f,"constructor",u),u.displayName="GeneratorFunction",fc(f,o,"GeneratorFunction"),fc(p),fc(p,o,"Generator"),fc(p,n,function(){return this}),fc(p,"toString",function(){return"[object Generator]"}),(uc=function(){return{w:i,m:l}})()}function fc(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}fc=function(t,e,r,n){function i(e,r){fc(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},fc(t,e,r,n)}function sc(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function pc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lc(n.key),n)}}function lc(t){var e=function(t){if("object"!=cc(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=cc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==cc(e)?e:e+""}function yc(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function hc(t,e){return t.get(dc(t,e))}function vc(t,e,r){return t.set(dc(t,e),r),r}function dc(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var bc=new WeakMap,wc=new WeakMap,mc=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),yc(this,bc,void 0),yc(this,wc,void 0),vc(wc,this,new xi(e))},e=[{key:"setIssuer",value:function(t){return hc(wc,this).iss=t,this}},{key:"setSubject",value:function(t){return hc(wc,this).sub=t,this}},{key:"setAudience",value:function(t){return hc(wc,this).aud=t,this}},{key:"setJti",value:function(t){return hc(wc,this).jti=t,this}},{key:"setNotBefore",value:function(t){return hc(wc,this).nbf=t,this}},{key:"setExpirationTime",value:function(t){return hc(wc,this).exp=t,this}},{key:"setIssuedAt",value:function(t){return hc(wc,this).iat=t,this}},{key:"setProtectedHeader",value:function(t){return vc(bc,this,t),this}},{key:"sign",value:(r=uc().m(function t(e,r){var n,o;return uc().w(function(t){for(;;)switch(t.n){case 0:if((o=new Ma(hc(wc,this).data())).setProtectedHeader(hc(bc,this)),!Array.isArray(null===(n=hc(bc,this))||void 0===n?void 0:n.crit)||!hc(bc,this).crit.includes("b64")||!1!==hc(bc,this).b64){t.n=1;break}throw new D("JWTs MUST NOT use unencoded payload");case 1:return t.a(2,o.sign(e,r))}},t,this)}),n=function(){var t=this,e=arguments;return new Promise(function(n,o){var i=r.apply(t,e);function a(t){sc(i,n,o,a,c,"next",t)}function c(t){sc(i,n,o,a,c,"throw",t)}a(void 0)})},function(t,e){return n.apply(this,arguments)})}],e&&pc(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function gc(t){return gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(t)}function Sc(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Oc(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Oc(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Oc(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Oc(p,"constructor",f),Oc(f,"constructor",u),u.displayName="GeneratorFunction",Oc(f,o,"GeneratorFunction"),Oc(p),Oc(p,o,"Generator"),Oc(p,n,function(){return this}),Oc(p,"toString",function(){return"[object Generator]"}),(Sc=function(){return{w:i,m:l}})()}function Oc(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Oc=function(t,e,r,n){function i(e,r){Oc(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Oc(t,e,r,n)}function jc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Ec(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jc(Object(r),!0).forEach(function(e){Pc(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jc(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Pc(t,e,r){return(e=Tc(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kc(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ac(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tc(n.key),n)}}function Tc(t){var e=function(t){if("object"!=gc(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=gc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gc(e)?e:e+""}function _c(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function Cc(t,e){return t.get(Kc(t,e))}function Gc(t,e,r){return t.set(Kc(t,e),r),r}function Kc(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Wc=new WeakMap,Hc=new WeakMap,xc=new WeakMap,Dc=new WeakMap,Jc=new WeakMap,Ic=new WeakMap,Rc=new WeakMap,Mc=new WeakMap,Fc=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_c(this,Wc,void 0),_c(this,Hc,void 0),_c(this,xc,void 0),_c(this,Dc,void 0),_c(this,Jc,void 0),_c(this,Ic,void 0),_c(this,Rc,void 0),_c(this,Mc,void 0),Gc(Mc,this,new xi(e))},e=[{key:"setIssuer",value:function(t){return Cc(Mc,this).iss=t,this}},{key:"setSubject",value:function(t){return Cc(Mc,this).sub=t,this}},{key:"setAudience",value:function(t){return Cc(Mc,this).aud=t,this}},{key:"setJti",value:function(t){return Cc(Mc,this).jti=t,this}},{key:"setNotBefore",value:function(t){return Cc(Mc,this).nbf=t,this}},{key:"setExpirationTime",value:function(t){return Cc(Mc,this).exp=t,this}},{key:"setIssuedAt",value:function(t){return Cc(Mc,this).iat=t,this}},{key:"setProtectedHeader",value:function(t){if(Cc(Dc,this))throw new TypeError("setProtectedHeader can only be called once");return Gc(Dc,this,t),this}},{key:"setKeyManagementParameters",value:function(t){if(Cc(xc,this))throw new TypeError("setKeyManagementParameters can only be called once");return Gc(xc,this,t),this}},{key:"setContentEncryptionKey",value:function(t){if(Cc(Wc,this))throw new TypeError("setContentEncryptionKey can only be called once");return Gc(Wc,this,t),this}},{key:"setInitializationVector",value:function(t){if(Cc(Hc,this))throw new TypeError("setInitializationVector can only be called once");return Gc(Hc,this,t),this}},{key:"replicateIssuerAsHeader",value:function(){return Gc(Jc,this,!0),this}},{key:"replicateSubjectAsHeader",value:function(){return Gc(Ic,this,!0),this}},{key:"replicateAudienceAsHeader",value:function(){return Gc(Rc,this,!0),this}},{key:"encrypt",value:function(){var t,e=(t=Sc().m(function t(e,r){var n;return Sc().w(function(t){for(;;)if(0===t.n)return n=new fa(Cc(Mc,this).data()),Cc(Dc,this)&&(Cc(Jc,this)||Cc(Ic,this)||Cc(Rc,this))&&Gc(Dc,this,Ec(Ec({},Cc(Dc,this)),{},{iss:Cc(Jc,this)?Cc(Mc,this).iss:void 0,sub:Cc(Ic,this)?Cc(Mc,this).sub:void 0,aud:Cc(Rc,this)?Cc(Mc,this).aud:void 0})),n.setProtectedHeader(Cc(Dc,this)),Cc(Hc,this)&&n.setInitializationVector(Cc(Hc,this)),Cc(Wc,this)&&n.setContentEncryptionKey(Cc(Wc,this)),Cc(xc,this)&&n.setKeyManagementParameters(Cc(xc,this)),t.a(2,n.encrypt(e,r))},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){kc(i,n,o,a,c,"next",t)}function c(t){kc(i,n,o,a,c,"throw",t)}a(void 0)})});return function(t,r){return e.apply(this,arguments)}}()}],e&&Ac(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Uc(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Nc(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Nc(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Nc(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Nc(p,"constructor",f),Nc(f,"constructor",u),u.displayName="GeneratorFunction",Nc(f,o,"GeneratorFunction"),Nc(p),Nc(p,o,"Generator"),Nc(p,n,function(){return this}),Nc(p,"toString",function(){return"[object Generator]"}),(Uc=function(){return{w:i,m:l}})()}function Nc(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Nc=function(t,e,r,n){function i(e,r){Nc(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Nc(t,e,r,n)}function Bc(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Lc(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Bc(i,n,o,a,c,"next",t)}function c(t){Bc(i,n,o,a,c,"throw",t)}a(void 0)})}}var Vc=function(t,e){if("string"!=typeof t||!t)throw new J("".concat(e," missing or invalid"))};function zc(t,e){return Xc.apply(this,arguments)}function Xc(){return(Xc=Lc(Uc().m(function t(e,r){var n,o,a,c,u;return Uc().w(function(t){for(;;)switch(t.n){case 0:if(!Hr(e)){t.n=1;break}n=e,t.n=4;break;case 1:if(!at(e)){t.n=3;break}return t.n=2,In(e);case 2:n=t.v,t.n=4;break;case 3:throw new TypeError(et(e,"CryptoKey","KeyObject","JSON Web Key"));case 4:if(null!=r||(r="sha256"),"sha256"===r||"sha384"===r||"sha512"===r){t.n=5;break}throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');case 5:c=n.kty,t.n="AKP"===c?6:"EC"===c?7:"OKP"===c?8:"RSA"===c?9:"oct"===c?10:11;break;case 6:return Vc(n.alg,'"alg" (Algorithm) Parameter'),Vc(n.pub,'"pub" (Public key) Parameter'),o={alg:n.alg,kty:n.kty,pub:n.pub},t.a(3,12);case 7:return Vc(n.crv,'"crv" (Curve) Parameter'),Vc(n.x,'"x" (X Coordinate) Parameter'),Vc(n.y,'"y" (Y Coordinate) Parameter'),o={crv:n.crv,kty:n.kty,x:n.x,y:n.y},t.a(3,12);case 8:return Vc(n.crv,'"crv" (Subtype of Key Pair) Parameter'),Vc(n.x,'"x" (Public Key) Parameter'),o={crv:n.crv,kty:n.kty,x:n.x},t.a(3,12);case 9:return Vc(n.e,'"e" (Exponent) Parameter'),Vc(n.n,'"n" (Modulus) Parameter'),o={e:n.e,kty:n.kty,n:n.n},t.a(3,12);case 10:return Vc(n.k,'"k" (Key Value) Parameter'),o={k:n.k,kty:n.kty},t.a(3,12);case 11:throw new K('"kty" (Key Type) Parameter missing or unsupported');case 12:return a=i.encode(JSON.stringify(o)),u=v,t.n=13,xt(r,a);case 13:return t.a(2,u(t.v))}},t)}))).apply(this,arguments)}function $c(t,e){return Yc.apply(this,arguments)}function Yc(){return(Yc=Lc(Uc().m(function t(e,r){var n;return Uc().w(function(t){for(;;)switch(t.n){case 0:return null!=r||(r="sha256"),t.n=1,zc(e,r);case 1:return n=t.v,t.a(2,"urn:ietf:params:oauth:jwk-thumbprint:sha-".concat(r.slice(-3),":").concat(n))}},t)}))).apply(this,arguments)}function qc(t){return qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qc(t)}function Qc(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Zc(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Zc(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Zc(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Zc(p,"constructor",f),Zc(f,"constructor",u),u.displayName="GeneratorFunction",Zc(f,o,"GeneratorFunction"),Zc(p),Zc(p,o,"Generator"),Zc(p,n,function(){return this}),Zc(p,"toString",function(){return"[object Generator]"}),(Qc=function(){return{w:i,m:l}})()}function Zc(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Zc=function(t,e,r,n){function i(e,r){Zc(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Zc(t,e,r,n)}function tu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function eu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tu(Object(r),!0).forEach(function(e){ru(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tu(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ru(t,e,r){return(e=function(t){var e=function(t){if("object"!=qc(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=qc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qc(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nu(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ou(t,e){return iu.apply(this,arguments)}function iu(){var t;return t=Qc().m(function t(e,r){var n,o;return Qc().w(function(t){for(;;)switch(t.n){case 0:if(n=eu(eu({},e),null==r?void 0:r.header),St(n.jwk)){t.n=1;break}throw new x('"jwk" (JSON Web Key) Header Parameter must be a JSON object');case 1:return t.n=2,ar(eu(eu({},n.jwk),{},{ext:!0}),n.alg);case 2:if(!((o=t.v)instanceof Uint8Array||"public"!==o.type)){t.n=3;break}throw new x('"jwk" (JSON Web Key) Header Parameter must be a public key');case 3:return t.a(2,o)}},t)}),iu=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){nu(i,n,o,a,c,"next",t)}function c(t){nu(i,n,o,a,c,"throw",t)}a(void 0)})},iu.apply(this,arguments)}function au(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return cu(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(cu(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,cu(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,cu(p,"constructor",f),cu(f,"constructor",u),u.displayName="GeneratorFunction",cu(f,o,"GeneratorFunction"),cu(p),cu(p,o,"Generator"),cu(p,n,function(){return this}),cu(p,"toString",function(){return"[object Generator]"}),(au=function(){return{w:i,m:l}})()}function cu(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}cu=function(t,e,r,n){function i(e,r){cu(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},cu(t,e,r,n)}function uu(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return fu(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fu(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function fu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function su(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function pu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?su(Object(r),!0).forEach(function(e){lu(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):su(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function lu(t,e,r){return(e=du(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yu(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function hu(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){yu(i,n,o,a,c,"next",t)}function c(t){yu(i,n,o,a,c,"throw",t)}a(void 0)})}}function vu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,du(n.key),n)}}function du(t){var e=function(t){if("object"!=gu(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=gu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gu(e)?e:e+""}function bu(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function wu(t,e){return t.get(mu(t,e))}function mu(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function gu(t){return gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(t)}function Su(t){return new Eu(t,0)}function Ou(t){return function(){return new ju(t.apply(this,arguments))}}function ju(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,c=a instanceof Eu;Promise.resolve(c?a.v:a).then(function(r){if(c){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var c={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=c:(e=r=c,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function Eu(t,e){this.v=t,this.k=e}function Pu(t){switch("string"==typeof t&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new K('Unsupported "alg" value for a JSON Web Key Set')}}function ku(t){return St(t)}ju.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},ju.prototype.next=function(t){return this._invoke("next",t)},ju.prototype.throw=function(t){return this._invoke("throw",t)},ju.prototype.return=function(t){return this._invoke("return",t)};var Au,Tu,_u,Cu=new WeakMap,Gu=new WeakMap,Ku=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),bu(this,Cu,void 0),bu(this,Gu,new WeakMap),!function(t){return t&&"object"===gu(t)&&Array.isArray(t.keys)&&t.keys.every(ku)}(e))throw new I("JSON Web Key Set malformed");var r,n;r=Cu,n=structuredClone(e),r.set(mu(r,this),n)},e=[{key:"jwks",value:function(){return wu(Cu,this)}},{key:"getKey",value:(r=hu(au().m(function t(e,r){var n,o,i,a,c,u,f,s,p;return au().w(function(t){for(;;)switch(t.n){case 0:if(n=pu(pu({},e),null==r?void 0:r.header),o=n.alg,i=n.kid,a=Pu(o),c=wu(Cu,this).keys.filter(function(t){var e=a===t.kty;if(e&&"string"==typeof i&&(e=i===t.kid),!e||"string"!=typeof t.alg&&"AKP"!==a||(e=o===t.alg),e&&"string"==typeof t.use&&(e="sig"===t.use),e&&Array.isArray(t.key_ops)&&(e=t.key_ops.includes("verify")),e)switch(o){case"ES256":e="P-256"===t.crv;break;case"ES384":e="P-384"===t.crv;break;case"ES512":e="P-521"===t.crv;break;case"Ed25519":case"EdDSA":e="Ed25519"===t.crv}return e}),u=c[0],0!==(f=c.length)){t.n=1;break}throw new R;case 1:if(1===f){t.n=2;break}throw s=new M,p=wu(Gu,this),s[Symbol.asyncIterator]=Ou(au().m(function t(){var e,r,n,i;return au().w(function(t){for(;;)switch(t.p=t.n){case 0:e=uu(c),t.p=1,e.s();case 2:if((r=e.n()).done){t.n=8;break}return n=r.value,t.p=3,t.n=4,Su(Wu(p,n,o));case 4:return t.n=5,t.v;case 5:t.n=7;break;case 6:t.p=6,t.v;case 7:t.n=2;break;case 8:t.n=10;break;case 9:t.p=9,i=t.v,e.e(i);case 10:return t.p=10,e.f(),t.f(10);case 11:return t.a(2)}},t,null,[[3,6],[1,9,10,11]])})),s;case 2:return t.a(2,Wu(wu(Gu,this),u,o))}},t,this)})),function(t,e){return r.apply(this,arguments)})}],e&&vu(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Wu(t,e,r){return Hu.apply(this,arguments)}function Hu(){return Hu=hu(au().m(function t(e,r,n){var o,i;return au().w(function(t){for(;;)switch(t.n){case 0:if(void 0!==(o=e.get(r)||e.set(r,{}).get(r))[n]){t.n=3;break}return t.n=1,ar(pu(pu({},r),{},{ext:!0}),n);case 1:if(!((i=t.v)instanceof Uint8Array||"public"!==i.type)){t.n=2;break}throw new I("JSON Web Key Set members must be public keys");case 2:o[n]=i;case 3:return t.a(2,o[n])}},t)})),Hu.apply(this,arguments)}function xu(t){var e=new Ku(t),r=function(){var t=hu(au().m(function t(r,n){return au().w(function(t){for(;;)if(0===t.n)return t.a(2,e.getKey(r,n))},t)}));return function(e,r){return t.apply(this,arguments)}}();return Object.defineProperties(r,{jwks:{value:function(){return structuredClone(e.jwks())},enumerable:!1,configurable:!1,writable:!1}}),r}function Du(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return Ju(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(Ju(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Ju(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,Ju(p,"constructor",f),Ju(f,"constructor",u),u.displayName="GeneratorFunction",Ju(f,o,"GeneratorFunction"),Ju(p),Ju(p,o,"Generator"),Ju(p,n,function(){return this}),Ju(p,"toString",function(){return"[object Generator]"}),(Du=function(){return{w:i,m:l}})()}function Ju(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ju=function(t,e,r,n){function i(e,r){Ju(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},Ju(t,e,r,n)}function Iu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ru(n.key),n)}}function Ru(t){var e=function(t){if("object"!=Bu(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Bu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bu(e)?e:e+""}function Mu(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function Fu(t,e){return t.get(Nu(t,e))}function Uu(t,e,r){return t.set(Nu(t,e),r),r}function Nu(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function Bu(t){return Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bu(t)}function Lu(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Vu(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Lu(i,n,o,a,c,"next",t)}function c(t){Lu(i,n,o,a,c,"throw",t)}a(void 0)})}}function zu(){return"undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime}"undefined"!=typeof navigator&&null!==(Au=navigator.userAgent)&&void 0!==Au&&null!==(Tu=Au.startsWith)&&void 0!==Tu&&Tu.call(Au,"Mozilla/5.0 ")||(_u="".concat("jose","/").concat("v6.1.0"));var Xu=Symbol();function $u(t,e,r){return Yu.apply(this,arguments)}function Yu(){return Yu=Vu(Du().m(function t(e,r,n){var o,i,a=arguments;return Du().w(function(t){for(;;)switch(t.p=t.n){case 0:return o=a.length>3&&void 0!==a[3]?a[3]:fetch,t.n=1,o(e,{method:"GET",signal:n,redirect:"manual",headers:r}).catch(function(t){if("TimeoutError"===t.name)throw new F;throw t});case 1:if(200===(i=t.v).status){t.n=2;break}throw new T("Expected 200 OK from the JSON Web Key Set HTTP response");case 2:return t.p=2,t.n=3,i.json();case 3:return t.a(2,t.v);case 4:throw t.p=4,t.v,new T("Failed to parse the JSON Web Key Set HTTP response as JSON");case 5:return t.a(2)}},t,null,[[2,4]])})),Yu.apply(this,arguments)}var qu=Symbol(),Qu=new WeakMap,Zu=new WeakMap,tf=new WeakMap,ef=new WeakMap,rf=new WeakMap,nf=new WeakMap,of=new WeakMap,af=new WeakMap,cf=new WeakMap,uf=new WeakMap,ff=function(){return t=function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Mu(this,Qu,void 0),Mu(this,Zu,void 0),Mu(this,tf,void 0),Mu(this,ef,void 0),Mu(this,rf,void 0),Mu(this,nf,void 0),Mu(this,of,void 0),Mu(this,af,void 0),Mu(this,cf,void 0),Mu(this,uf,void 0),!(e instanceof URL))throw new TypeError("url must be an instance of URL");var n,o;Uu(Qu,this,new URL(e.href)),Uu(Zu,this,"number"==typeof(null==r?void 0:r.timeoutDuration)?null==r?void 0:r.timeoutDuration:5e3),Uu(tf,this,"number"==typeof(null==r?void 0:r.cooldownDuration)?null==r?void 0:r.cooldownDuration:3e4),Uu(ef,this,"number"==typeof(null==r?void 0:r.cacheMaxAge)?null==r?void 0:r.cacheMaxAge:6e5),Uu(of,this,new Headers(null==r?void 0:r.headers)),_u&&!Fu(of,this).has("User-Agent")&&Fu(of,this).set("User-Agent",_u),Fu(of,this).has("accept")||(Fu(of,this).set("accept","application/json"),Fu(of,this).append("accept","application/jwk-set+json")),Uu(af,this,null==r?void 0:r[Xu]),void 0!==(null==r?void 0:r[qu])&&(Uu(uf,this,null==r?void 0:r[qu]),n=null==r?void 0:r[qu],o=Fu(ef,this),"object"===Bu(n)&&null!==n&&"uat"in n&&"number"==typeof n.uat&&!(Date.now()-n.uat>=o)&&"jwks"in n&&St(n.jwks)&&Array.isArray(n.jwks.keys)&&Array.prototype.every.call(n.jwks.keys,St)&&(Uu(rf,this,Fu(uf,this).uat),Uu(cf,this,xu(Fu(uf,this).jwks))))},e=[{key:"pendingFetch",value:function(){return!!Fu(nf,this)}},{key:"coolingDown",value:function(){return"number"==typeof Fu(rf,this)&&Date.now()<Fu(rf,this)+Fu(tf,this)}},{key:"fresh",value:function(){return"number"==typeof Fu(rf,this)&&Date.now()<Fu(rf,this)+Fu(ef,this)}},{key:"jwks",value:function(){var t;return null===(t=Fu(cf,this))||void 0===t?void 0:t.jwks()}},{key:"getKey",value:(n=Vu(Du().m(function t(e,r){var n;return Du().w(function(t){for(;;)switch(t.p=t.n){case 0:if(Fu(cf,this)&&this.fresh()){t.n=1;break}return t.n=1,this.reload();case 1:return t.p=1,t.n=2,Fu(cf,this).call(this,e,r);case 2:return t.a(2,t.v);case 3:if(t.p=3,!((n=t.v)instanceof R)){t.n=5;break}if(!1!==this.coolingDown()){t.n=5;break}return t.n=4,this.reload();case 4:return t.a(2,Fu(cf,this).call(this,e,r));case 5:throw n;case 6:return t.a(2)}},t,this,[[1,3]])})),function(t,e){return n.apply(this,arguments)})},{key:"reload",value:(r=Vu(Du().m(function t(){var e=this;return Du().w(function(t){for(;;)switch(t.n){case 0:return Fu(nf,this)&&zu()&&Uu(nf,this,void 0),Fu(nf,this)||Uu(nf,this,$u(Fu(Qu,this).href,Fu(of,this),AbortSignal.timeout(Fu(Zu,this)),Fu(af,this)).then(function(t){Uu(cf,e,xu(t)),Fu(uf,e)&&(Fu(uf,e).uat=Date.now(),Fu(uf,e).jwks=t),Uu(rf,e,Date.now()),Uu(nf,e,void 0)}).catch(function(t){throw Uu(nf,e,void 0),t})),t.n=1,Fu(nf,this);case 1:return t.a(2)}},t,this)})),function(){return r.apply(this,arguments)})}],e&&Iu(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function sf(t,e){var r=new ff(t,e),n=function(){var t=Vu(Du().m(function t(e,n){return Du().w(function(t){for(;;)if(0===t.n)return t.a(2,r.getKey(e,n))},t)}));return function(e,r){return t.apply(this,arguments)}}();return Object.defineProperties(n,{coolingDown:{get:function(){return r.coolingDown()},enumerable:!0,configurable:!1},fresh:{get:function(){return r.fresh()},enumerable:!0,configurable:!1},reload:{value:function(){return r.reload()},enumerable:!0,configurable:!1,writable:!1},reloading:{get:function(){return r.pendingFetch()},enumerable:!0,configurable:!1},jwks:{value:function(){return r.jwks()},enumerable:!0,configurable:!1,writable:!1}}),n}function pf(t){return pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pf(t)}function lf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yf(n.key),n)}}function yf(t){var e=function(t){if("object"!=pf(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=pf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pf(e)?e:e+""}function hf(t,e){return t.get(vf(t,e))}function vf(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var df=new WeakMap,bf=function(){return t=function t(){var e,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}(this,df,void 0),e=df,r=new xi(n),e.set(vf(e,this),r)},r=[{key:"decode",value:function(t,e){if("string"!=typeof t)throw new D("Unsecured JWT must be a string");var r,n=t.split("."),o=n[0],i=n[1],c=n[2];if(3!==n.length||""!==c)throw new D("Invalid Unsecured JWT");try{if("none"!==(r=JSON.parse(a.decode(h(o)))).alg)throw new Error}catch(t){throw new D("Invalid Unsecured JWT")}return{payload:Wi(r,h(i),e),header:r}}}],(e=[{key:"encode",value:function(){var t=v(JSON.stringify({alg:"none"})),e=v(hf(df,this).data());return"".concat(t,".").concat(e,".")}},{key:"setIssuer",value:function(t){return hf(df,this).iss=t,this}},{key:"setSubject",value:function(t){return hf(df,this).sub=t,this}},{key:"setAudience",value:function(t){return hf(df,this).aud=t,this}},{key:"setJti",value:function(t){return hf(df,this).jti=t,this}},{key:"setNotBefore",value:function(t){return hf(df,this).nbf=t,this}},{key:"setExpirationTime",value:function(t){return hf(df,this).exp=t,this}},{key:"setIssuedAt",value:function(t){return hf(df,this).iat=t,this}}])&&lf(t.prototype,e),r&&lf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function wf(t){return wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(t)}function mf(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function gf(t){var e,r,n;if("string"==typeof t){var o=t.split(".");3!==o.length&&5!==o.length||(e=(r=o,n=1,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,f=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){f=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(f)throw o}}return c}}(r,n)||function(t,e){if(t){if("string"==typeof t)return mf(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mf(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0])}else if("object"===wf(t)&&t){if(!("protected"in t))throw new TypeError("Token does not contain a Protected Header");e=t.protected}try{if("string"!=typeof e||!e)throw new Error;var i=JSON.parse(a.decode(h(e)));if(!St(i))throw new Error;return i}catch(t){throw new TypeError("Invalid Token or Protected Header formatting")}}function Sf(t){if("string"!=typeof t)throw new D("JWTs must use Compact JWS serialization, JWT must be a string");var e,r,n=t.split("."),o=n[1],i=n.length;if(5===i)throw new D("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new D("Invalid JWT");if(!o)throw new D("JWTs must contain a payload");try{e=h(o)}catch(t){throw new D("Failed to base64url decode the payload")}try{r=JSON.parse(a.decode(e))}catch(t){throw new D("Failed to parse the decoded payload as JSON")}if(!St(r))throw new D("Invalid JWT Claims Set");return r}function Of(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return jf(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(jf(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,jf(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,jf(p,"constructor",f),jf(f,"constructor",u),u.displayName="GeneratorFunction",jf(f,o,"GeneratorFunction"),jf(p),jf(p,o,"Generator"),jf(p,n,function(){return this}),jf(p,"toString",function(){return"[object Generator]"}),(Of=function(){return{w:i,m:l}})()}function jf(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}jf=function(t,e,r,n){function i(e,r){jf(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},jf(t,e,r,n)}function Ef(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Pf(t){var e,r=null!==(e=null==t?void 0:t.modulusLength)&&void 0!==e?e:2048;if("number"!=typeof r||r<2048)throw new K("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return r}function kf(t,e){return Af.apply(this,arguments)}function Af(){var t;return t=Of().m(function t(e,r){var n,o,i,a,c,u,f;return Of().w(function(t){for(;;)switch(t.n){case 0:u=e,t.n="PS256"===u||"PS384"===u||"PS512"===u?1:"RS256"===u||"RS384"===u||"RS512"===u?2:"RSA-OAEP"===u||"RSA-OAEP-256"===u||"RSA-OAEP-384"===u||"RSA-OAEP-512"===u?3:"ES256"===u?4:"ES384"===u?5:"ES512"===u?6:"Ed25519"===u||"EdDSA"===u?7:"ML-DSA-44"===u||"ML-DSA-65"===u||"ML-DSA-87"===u?8:"ECDH-ES"===u||"ECDH-ES+A128KW"===u||"ECDH-ES+A192KW"===u||"ECDH-ES+A256KW"===u?9:14;break;case 1:return o={name:"RSA-PSS",hash:"SHA-".concat(e.slice(-3)),publicExponent:new Uint8Array([1,0,1]),modulusLength:Pf(r)},i=["sign","verify"],t.a(3,15);case 2:return o={name:"RSASSA-PKCS1-v1_5",hash:"SHA-".concat(e.slice(-3)),publicExponent:new Uint8Array([1,0,1]),modulusLength:Pf(r)},i=["sign","verify"],t.a(3,15);case 3:return o={name:"RSA-OAEP",hash:"SHA-".concat(parseInt(e.slice(-3),10)||1),publicExponent:new Uint8Array([1,0,1]),modulusLength:Pf(r)},i=["decrypt","unwrapKey","encrypt","wrapKey"],t.a(3,15);case 4:return o={name:"ECDSA",namedCurve:"P-256"},i=["sign","verify"],t.a(3,15);case 5:return o={name:"ECDSA",namedCurve:"P-384"},i=["sign","verify"],t.a(3,15);case 6:return o={name:"ECDSA",namedCurve:"P-521"},i=["sign","verify"],t.a(3,15);case 7:return i=["sign","verify"],o={name:"Ed25519"},t.a(3,15);case 8:return i=["sign","verify"],o={name:e},t.a(3,15);case 9:i=["deriveBits"],c=null!==(a=null==r?void 0:r.crv)&&void 0!==a?a:"P-256",f=c,t.n="P-256"===f||"P-384"===f||"P-521"===f?10:"X25519"===f?11:12;break;case 10:return o={name:"ECDH",namedCurve:c},t.a(3,13);case 11:return o={name:"X25519"},t.a(3,13);case 12:throw new K("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, and X25519");case 13:return t.a(3,15);case 14:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');case 15:return t.a(2,crypto.subtle.generateKey(o,null!==(n=null==r?void 0:r.extractable)&&void 0!==n&&n,i))}},t)}),Af=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Ef(i,n,o,a,c,"next",t)}function c(t){Ef(i,n,o,a,c,"throw",t)}a(void 0)})},Af.apply(this,arguments)}function Tf(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,f=Object.create(u.prototype);return _f(f,"_invoke",function(r,n,o){var i,c,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,c=0,u=t,l.n=r,a}};function y(r,n){for(c=r,u=n,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,h=i[2];r>3?(o=h===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,l.v=n,l.n=i[1]):y<h&&(o=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,l.n=h,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,h){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,h),c=s,u=h;(e=c<2?t:u)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,u)):l.n=u:l.v=u);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?u:r.call(n,l))!==a)break}catch(e){i=t,c=1,u=e}finally{f=1}}return{value:e,done:p}}}(r,o,i),!0),f}var a={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(_f(e={},n,function(){return this}),e),p=f.prototype=c.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,_f(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,_f(p,"constructor",f),_f(f,"constructor",u),u.displayName="GeneratorFunction",_f(f,o,"GeneratorFunction"),_f(p),_f(p,o,"Generator"),_f(p,n,function(){return this}),_f(p,"toString",function(){return"[object Generator]"}),(Tf=function(){return{w:i,m:l}})()}function _f(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}_f=function(t,e,r,n){function i(e,r){_f(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},_f(t,e,r,n)}function Cf(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Gf(t,e){return Kf.apply(this,arguments)}function Kf(){var t;return t=Tf().m(function t(e,r){var n,o,i,a,c;return Tf().w(function(t){for(;;)switch(t.n){case 0:c=e,t.n="HS256"===c||"HS384"===c||"HS512"===c?1:"A128CBC-HS256"===c||"A192CBC-HS384"===c||"A256CBC-HS512"===c?2:"A128KW"===c||"A192KW"===c||"A256KW"===c?3:"A128GCMKW"===c||"A192GCMKW"===c||"A256GCMKW"===c||"A128GCM"===c||"A192GCM"===c||"A256GCM"===c?4:5;break;case 1:return o=parseInt(e.slice(-3),10),i={name:"HMAC",hash:"SHA-".concat(o),length:o},a=["sign","verify"],t.a(3,6);case 2:return o=parseInt(e.slice(-3),10),t.a(2,crypto.getRandomValues(new Uint8Array(o>>3)));case 3:return o=parseInt(e.slice(1,4),10),i={name:"AES-KW",length:o},a=["wrapKey","unwrapKey"],t.a(3,6);case 4:return o=parseInt(e.slice(1,4),10),i={name:"AES-GCM",length:o},a=["encrypt","decrypt"],t.a(3,6);case 5:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');case 6:return t.a(2,crypto.subtle.generateKey(i,null!==(n=null==r?void 0:r.extractable)&&void 0!==n&&n,a))}},t)}),Kf=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Cf(i,n,o,a,c,"next",t)}function c(t){Cf(i,n,o,a,c,"throw",t)}a(void 0)})},Kf.apply(this,arguments)}var Wf="WebCryptoAPI"}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var i=r[t]={id:t,loaded:!1,exports:{}};return e[t](i,i.exports,n),i.loaded=!0,i.exports}n.m=e,t=[],n.O=(e,r,o,i)=>{if(!r){var a=1/0;for(s=0;s<t.length;s++){for(var[r,o,i]=t[s],c=!0,u=0;u<r.length;u++)(!1&i||a>=i)&&Object.keys(n.O).every(t=>n.O[t](r[u]))?r.splice(u--,1):(c=!1,i<a&&(a=i));if(c){t.splice(s--,1);var f=o();void 0!==f&&(e=f)}}return e}i=i||0;for(var s=t.length;s>0&&t[s-1][2]>i;s--)t[s]=t[s-1];t[s]=[r,o,i]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=r[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{var t={420:0};n.O.j=e=>0===t[e];var e=(e,r)=>{var o,i,[a,c,u]=r,f=0;if(a.some(e=>0!==t[e])){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(u)var s=u(n)}for(e&&e(r);f<a.length;f++)i=a[f],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(s)},r=self.webpackChunkadc_rb_material=self.webpackChunkadc_rb_material||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var o=n(9112);o=n.O(o)})();
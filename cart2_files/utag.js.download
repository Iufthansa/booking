//tealium universal tag - utag.loader ut4.0.202512221317, Copyright 2025 Tealium.com Inc. All Rights Reserved.
var utag_condload=false;window.__tealium_twc_switch=false;try{try{window.tealiumiq_currency={ts:"202311220100",rates:{"IRR":42262.5,"CRC":530.494682,"SCR":13.485266,"SEK":10.450846,"XCD":2.70255,"VES":35.40681,"PYG":7438.471964,"GYD":209.118715,"HNL":24.712088,"GTQ":7.825849,"PEN":3.736613,"MYR":4.664,"MAD":10.126379,"SDG":601,"ILS":3.71545,"XPT":0.00106968,"CLF":0.031526,"MKD":56.295621,"ZWL":322,"BAM":1.786984,"AWG":1.768,"MWK":1683.146,"HRK":6.900922,"YER":250.299958,"RON":4.5516,"MRU":39.885,"RUB":88.245014,"PAB":1,"AED":3.67281,"LBP":15027.556711,"KWD":0.3081,"TWD":31.412499,"SHP":0.797093,"BGN":1.7915,"ISK":140.21,"CAD":1.370008,"MMK":2098.941457,"TMT":3.5,"MNT":3450,"JPY":148.23861111,"AUD":1.524272,"CDF":2575.361714,"UGX":3785.425953,"KES":152.6,"IQD":1309.586518,"BYN":3.292918,"MXN":17.1998,"SZL":18.365054,"WST":2.8,"QAR":3.6405,"XAG":0.04199034,"RSD":107.077389,"NZD":1.651302,"MZN":63.850001,"THB":35.178,"VND":24140.015235,"BMD":1,"GNF":8613.139488,"MDL":17.699209,"UZS":12268.779487,"KRW":1293.953276,"STN":22.608421,"XPF":109.280817,"AZN":1.7,"VUV":118.722,"BIF":2845.177181,"SAR":3.750676,"BBD":2,"XDR":0.750774,"PHP":55.409498,"MVR":15.4,"SGD":1.338154,"USD":1,"LSL":18.371265,"SVC":8.745785,"AFN":70.205771,"GBP":0.797093,"DJF":178.062377,"JEP":0.797093,"ZAR":18.61805,"AOA":829.905333,"MOP":8.025858,"EUR":0.915773,"BDT":110.692829,"GGP":0.797093,"IDR":15518.41651,"KPW":900,"PKR":285.51708,"LAK":20682.973031,"RWF":1235.605457,"NPR":133.256292,"MUR":44.14,"GIP":0.797093,"UYU":39.415333,"LRD":187.999989,"NOK":10.665203,"KMF":450.949793,"TJS":10.914748,"GHS":11.95637,"ETB":55.801723,"BSD":1,"SYP":2512.53,"NAD":18.62,"ERN":15,"GMD":67.25,"BHD":0.376826,"CNY":7.1039,"NGN":816.6,"TRY":28.799299,"KHR":4111.651027,"DZD":134.087821,"HTG":132.484199,"IMP":0.797093,"PLN":4.007302,"CZK":22.4607,"FKP":0.797093,"BRL":4.9008,"JMD":155.502086,"BZD":2.014674,"XAU":0.00050061,"CHF":0.883249,"STD":22281.8,"TZS":2505,"ALL":94.659415,"TTD":6.791539,"BWP":13.41654,"CVE":100.988416,"BOB":6.906665,"OMR":0.384947,"PGK":3.727581,"BTN":83.285679,"JOD":0.7094,"LYD":4.817811,"ZMW":23.28841,"DKK":6.827135,"CLP":869.9,"XOF":600.707874,"SLL":20969.5,"SOS":571.146313,"UAH":36.093669,"SSP":130.26,"SRD":37.9665,"COP":4029.20428,"KYD":0.832915,"CNH":7.144314,"KGS":89.01,"AMD":402.028287,"ANG":1.801361,"ARS":355.973264,"TND":3.10375,"TOP":2.373521,"DOP":56.882573,"HUF":348.539266,"BTC":2.7691484e-05,"BND":1.336464,"XAF":600.707874,"GEL":2.705,"INR":83.312851,"SBD":8.468008,"FJD":2.24025,"LKR":328.442103,"EGP":30.8932,"XPD":0.00092984,"MGA":4517.70745,"NIO":36.65035,"CUC":1,"HKD":7.794911,"CUP":25.75,"KZT":458.633021},convert:function(a,f,t){var isString=typeof a=="string",converted=isString?[a]:a;for(var i=0;i<converted.length;i++){converted[i]=parseFloat(converted[i]);f=f.toUpperCase();t=t.toUpperCase();if(converted[i]>0&&this.rates[f]>0&&this.rates[t]>0){var v=converted[i]/this.rates[f]*this.rates[t];converted[i]=v.toFixed(2);}}
if(isString)return converted[0];else return converted;}}
function generateDynamicString(){const staticPart='ut4.46.';let currentDate=new Date();currentDate.setSeconds(currentDate.getSeconds()-3600);const year=currentDate.getFullYear();const month=('0'+(currentDate.getMonth()+1)).slice(-2);const day=('0'+currentDate.getDate()).slice(-2);const hours=('0'+currentDate.getHours()).slice(-2);const minutes=('0'+currentDate.getMinutes()).slice(-2);const seconds=('0'+currentDate.getSeconds()).slice(-2);const dynamicPart=`${year}${month}${day}${hours}${minutes}${seconds}`;const result=staticPart+dynamicPart;return result;}
var currencyScript=document.createElement('script');currencyScript.src='https://tags.tiqcdn.com/utag/tiqapp/utag.currency.js?utv='+generateDynamicString();document.head.appendChild(currencyScript);}catch(e){console.log(e)}}catch(e){console.log(e);}
if(!utag_condload){try{}catch(e){console.log(e);}}
if(!utag_condload){try{(function(){var blacklist=[["",".lufthansa.com","/online/portal/lh/de/my_account/irreg_corner"]]
for(var i=0;i<blacklist.length;i++){if(blacklist[i].length==3){if(blacklist[i][0]==""||blacklist[i][0].toLowerCase()==window.location.protocol.toLowerCase()){if(window.location.hostname.toLowerCase().indexOf(blacklist[i][1].toLowerCase())>-1){if(window.location.pathname==blacklist[i][2]){window.utag_condload=true;break;}}}}}})();}catch(e){console.log(e);}}
if(!utag_condload){try{try{try{if(typeof window.mmPageID==="undefined"){if(lhgData&&lhgData.conversion&&lhgData.conversion.funnel&&lhgData.conversion.funnel.funnelStep){window.mmPageID=lhgData.conversion.funnel.funnelStep.toUpperCase()+"_XX_XX";}else if(lhgData&&lhgData.page&&lhgData.page.pageInfo&&lhgData.page.pageInfo.pageId){window.mmPageID=lhgData.page.pageInfo.pageId;}}}catch(ex){}}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{try{if(mmPageID.startsWith('profile/account-activation')){window.utag_condload=true;}}
catch(ex){}}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(document.cookie.indexOf('cmv3')<0){document.cookie="cmv2=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain=.lufthansa.com; path=/;secure;samesite=none;";document.cookie="CONSENTMGR=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain=.lufthansa.com; path=/;secure;samesite=none;";}
function createCookie(name,value,days){var date,expires;if(days){date=new Date();date.setDate(date.getDate()+days);expires="; expires="+date.toUTCString();}else{expires="";}
document.cookie=name+"="+value+expires+"; domain=.lufthansa.com; path=/;secure;samesite=none;";}
createCookie('cmv3',true,365);}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{window.utag_data=window.utag_data||{};window.utag_cfg_ovrd=window.utag_cfg_ovrd||{};if(location.hostname&&location.hostname.indexOf(".miles-and-more.com")>0){utag_cfg_ovrd.domain=location.hostname;}
window.utag_data.mmPageID_firstPart='';window.utag_data.market='';window.utag_data.language='';utag_data.LH_FRONTEND_URL='';}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(typeof Object.assign!=='function'){Object.defineProperty(Object,"assign",{value:function assign(target,varArgs){'use strict';if(target===null||target===undefined){throw new TypeError('Cannot convert undefined or null to object');}
var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!==null&&nextSource!==undefined){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey];}}}}
return to;},writable:true,configurable:true});}
window.teal=window.teal||{};teal.ignore_keys={};teal.replace_keys={};teal.prefix="";teal.nested_delimiter=".";teal.flattener_version='1.2e';Object.keys||(Object.keys=function(){"use strict";var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var g,h,f=[];for(g in e)a.call(e,g)&&f.push(g);if(b)for(h=0;h<d;h++)a.call(e,c[h])&&f.push(c[h]);return f}}());teal.ignoreKey=function(key,re){var should_ignore_key=0;if(typeof teal.ignore_keys_list==='undefined'){teal.ignore_keys_list=Object.keys(teal.ignore_keys);teal.ignore_keys_list.forEach(function(name){teal.ignore_keys[name]=new RegExp("^"+name);if(key.match(teal.ignore_keys[name])){should_ignore_key=1;}});}else{teal.ignore_keys_list.forEach(function(name){if(key.match(teal.ignore_keys[name])){should_ignore_key=1;}});}
return should_ignore_key;}
teal.getKeyName=function(key,re){teal.replace_keys_regex=teal.replace_keys_regex||{};if(typeof teal.replace_keys_list==='undefined'){teal.replace_keys_list=Object.keys(teal.replace_keys);teal.replace_keys_list.forEach(function(name){teal.replace_keys_regex[name]=new RegExp("["+teal.nested_delimiter+"]"+name+"["+teal.nested_delimiter+"]","g");key=teal.keyReplace(key,name,teal.replace_keys_regex[name]);});}else{teal.replace_keys_list.forEach(function(name){key=teal.keyReplace(key,name,teal.replace_keys_regex[name]);});}
return key;}
teal.keyReplace=function(key,name,re){if(teal.replace_keys[name]===''){key=key.replace(re,teal.nested_delimiter);}else{key=key.replace(re,teal.nested_delimiter+teal.replace_keys[name]+teal.nested_delimiter);}
return key;}
teal.processDataObject=function(obj,new_obj,parent_key,create_array){if(typeof parent_key==="undefined"){parent_key="";}else{teal.nested_delimiter_regex=teal.nested_delimiter_regex||new RegExp("["+teal.nested_delimiter+"]$");if(!parent_key.match(teal.nested_delimiter_regex)){parent_key+=""+teal.nested_delimiter;}}
Object.keys(obj).forEach(function(key){var nested_key_name=parent_key+key;var new_key_name=teal.getKeyName((teal.prefix+parent_key+key).replace(/\s/g,''));var key_type=teal.typeOf(obj[key]);if(key_type!=='undefined'&&key_type!=null){if(key_type.match(/boolean|string|number|date/)&&!teal.ignoreKey(key)){if(teal.typeOf(obj[key])==='date'){obj[key]=obj[key].toISOString();}
if(create_array){if(teal.typeOf(new_obj[new_key_name])!=="array"){new_obj[new_key_name]=[];}
new_obj[new_key_name].push(""+obj[key]);}else{new_obj[new_key_name]=""+obj[key];}}else if(key_type==='object'&&!teal.ignoreKey(key)){teal.processDataObject(obj[key],new_obj,nested_key_name,create_array);}else if(key_type==='array'){teal.processDataArray(obj[key],new_obj,nested_key_name);}}});}
teal.processDataArray=function(obj,new_obj,parent_key){var objLength=obj.length;if(typeof parent_key==="undefined"){parent_key="";}else if(objLength>0&&teal.typeOf(obj[0]).match(/boolean|string|number|date/)){}else{parent_key+=""+teal.nested_delimiter;}
var new_key_name=teal.getKeyName((teal.prefix+parent_key).replace(/\s/g,''));for(var n=0;n<objLength;n++){var key_type=teal.typeOf(obj[n]);if(key_type.match(/boolean|string|number|date/)){if(key_type==='date'){obj[n]=obj[n].toISOString();}
if(teal.typeOf(new_obj[new_key_name])!=="array"){new_obj[new_key_name]=[];}
new_obj[new_key_name].push(""+obj[n]);}else if(key_type==='object'){teal.processDataObject(obj[n],new_obj,new_key_name,1);}}}
teal.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();}
teal.flattenObject=function(obj,new_obj){if(typeof obj==='undefined'){return false;}
var mergeObject=false;if(obj===new_obj){mergeObject=true;new_obj={};}
if(typeof new_obj==='undefined'){new_obj={};}
if(teal.typeOf(obj)==='array'){var temp_array=JSON.parse(JSON.stringify(obj));var temp_array_length=temp_array.length;obj={};if(obj==new_obj){if(typeof a==='undefined'){var a='view';}
utag.loader.RD(new_obj,a);}
for(var i=0;i<temp_array_length;i++){teal.processDataObject(temp_array[i],new_obj);}}else{teal.processDataObject(obj,new_obj);}
if(mergeObject){Object.keys(obj).forEach(function(key){delete obj[key];});Object.keys(new_obj).forEach(function(key){obj[key]=new_obj[key];});}
return new_obj;}
teal.processAttribs=function(data,name,parent,child){var attribs=[];for(var i=0;data.length>i;i++){var obj;if(child){obj=data[i][child][name];}else{obj=data[i][name];}
if(obj){for(var j=0;j<obj.length;j++){var a=Object.keys(obj[j]);a.forEach(function(el){if(attribs.indexOf(el)<0){attribs.push(el);}})}}}
return attribs;}
teal.flattenArray=function(a,parent,child){attribs=[];newProp="",tlo=window.lhgData;var node;var m=parent.split(".");if(tlo[m[0]]){node=tlo[m[0]];for(var j=1;j<m.length;j++){node=node[m[j]];}
for(var i=0;i<node.length;i++){var arrToFlatten,arrParent;if(node[i][child]){arrToFlatten=node[i][child][a];arrToFlatten=(typeof arrToFlatten==='string')?[arrToFlatten]:arrToFlatten;arrParent=node[i][child];}else{arrToFlatten=node[i][a];arrToFlatten=(typeof arrToFlatten==='string')?[arrToFlatten]:arrToFlatten;arrParent=node[i];}
if(arrToFlatten){var dl=tlo[m[0]];for(var j=1;j<m.length;j++){dl=dl[m[j]];}
attribs=teal.processAttribs(dl,a,parent,child);if(arrToFlatten.length==0){for(var z=attribs.length-1;z>=0;z--){newProp=a+"_"+attribs[z];arrParent[newProp];arrParent[newProp]="";}}else{for(var j=0;j<arrToFlatten.length;j++){if(a!=="bundle"){for(var k=0;attribs.length>k;k++){newProp=a+"_"+attribs[k];arrParent[newProp];if(typeof(arrParent[newProp])==="undefined"){arrParent[newProp]=arrToFlatten[j][attribs[k]];}else{arrParent[newProp]+="|"+arrToFlatten[j][attribs[k]];}}}else{var arr=a;arr+="_flat";node[i][child][arr]=arrToFlatten.join("|");}}}}}}};}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{var disableGA=['ga-disable-UA-100121750-3','ga-disable-UA-100121750-9','ga-disable-UA-100121750-19','ga-disable-UA-100121750-20'];for(var i in disableGA){if(document.cookie.indexOf(disableGA[i]+'=true')>-1){window[disableGA[i]]=true;}}}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(window.digitalData){window.utag_data=window.utag_data||{};window.utag_cfg_ovrd=window.utag_cfg_ovrd||{};if(typeof window.lhgData!=='object'&&typeof window.digitalData==='object'){window.utag_cfg_ovrd=Object.assign(window.utag_cfg_ovrd,{noview:true});}}
}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{window.lhgdataRetrack=window.lhgdataRetrack||function(){};window.debuglog=function(...args){if(sessionStorage.getItem('debug')==='true'){console.log("%cMonetate.log","color:white;font-weight:bold;background-color:#298FCE; padding: 5px 15px; width:100%; text-align:center; displayt:block; border:2px solid white; border-radius:3px;",...args);}};window.monetateLoaded=false;window.monetateFired=false;window.monetateB2TInitialized=false;function bannedURLS(){var allHREF=["/availability?","/manage-booking/retrieve","/booking/payment?callback=","/recovery","/booking/cash-upgrade","/redirect/back-to-portal","author-airem"];var currentURL=window.location.href;var containsString=allHREF.some(function(substring){return currentURL.includes(substring);});if(containsString){return false}else{return true}}
function urlListenAfterBanned(){var previousUrlBanned='';const observerBanned=new MutationObserver(function(mutations){if(previousUrlBanned==''){previousUrlBanned=location.href;}else if(location.href!==previousUrlBanned){previousUrlBanned=location.href;observerBanned.disconnect();debuglog('No longer listening to the URL change and trying to load Monetate again');loadMonetate();}});const configBanned={subtree:true,childList:true};observerBanned.observe(document,configBanned);}
function handleMonetateScriptLoad(){let attempts=0;const intervalDuration=100;const maxAttempts=10000/intervalDuration;const randomNumber=Math.floor(Math.random()*100)+1;const randPercentMax=10;let intervalId;function tryExecute(){attempts++;if(typeof gtag==="function"){var endTime=performance.now();var loadTimeSec=Math.ceil((endTime-window.startTime)/1000);debuglog("-----------------------------------------------------------------------------------------------");debuglog("------------------------------------------- "+loadTimeSec+" s ----------------------------------------------------");debuglog("-----------------------------------------------------------------------------------------------");setTimeout(function(){gtag('event','monetate_script_load',{load_time_sec:loadTimeSec});},8000);clearInterval(intervalId);return;}
if(attempts>=maxAttempts){clearInterval(intervalId);debuglog("handleMonetateScriptLoad: Stopped after 10 seconds without success.");}}
if(randomNumber<=randPercentMax){intervalId=setInterval(tryExecute,intervalDuration);}}
debuglog('This will be logged only if sessionStorage debug is true');function setupLhgPageNameWatcher(){if(window.__lhgPageWatcherInstalled)return;window.__lhgPageWatcherInstalled=true;function safeGetPageName(){try{return lhgData?.page?.pageInfo?.pageName||"";}catch(e){return"";}}
try{if(window.lhgData&&lhgData.page&&lhgData.page.pageInfo&&Object.getOwnPropertyDescriptor(lhgData.page.pageInfo,"pageName")?.configurable!==false){let current=lhgData.page.pageInfo.pageName;Object.defineProperty(lhgData.page.pageInfo,"pageName",{get:function(){return current;},set:function(v){if(v!==current){current=v;debuglog("lhgData.page.pageInfo.pageName changed (setter): "+v);if(typeof window.lhgdataRetrack==="function"){window.lhgdataRetrack();}}},enumerable:true,configurable:true});debuglog("lhgData pageName watcher installed via setter");}}catch(e){debuglog("Could not define setter on lhgData.page.pageInfo.pageName: "+e);}
let last=safeGetPageName();setInterval(function(){const now=safeGetPageName();if(now&&now!==last){last=now;debuglog("lhgData.page.pageInfo.pageName changed (poll): "+now);if(typeof window.lhgdataRetrack==="function"){window.lhgdataRetrack();}}},300);}
function loadMonetate(){function canRunMonetate(){return((typeof lhgData!='undefined'&&(lhgData?.page?.pageInfo?.pageId?.indexOf('payment')<0||typeof lhgData?.page?.pageInfo?.pageId=='undefined'))||typeof digitalData!='undefined');}
function initMonetate(){if(window.monetateLoaded){return;}
document.body.removeEventListener('click',handleConsentClick);window.monetateLoaded=true;var p=document.location.protocol;if(p=="http:"||p=="https:"){const utagEl=document.querySelector('script[src*="/utag.js"]');const scriptSrc=utagEl?utagEl.getAttribute("src"):"";const matchedEnv=scriptSrc?scriptSrc.match(/(qa|dev|prod)/i):null;const utagEnv=matchedEnv?matchedEnv[0].toLowerCase():null;const hostname=window.location.hostname;const parts=document.domain.split('.');const secondLevel=parts.length>=2?parts[parts.length-2]:"";const domMonetateTemp=parts.slice(-2).join('.');let envMonetate;if(hostname.startsWith("qa-www.")){envMonetate=(secondLevel==="lufthansa")?"d/www-dcep-qa.":"d/www-qa.";}else if(utagEnv==="prod"){envMonetate="p/";}else if(secondLevel==="lufthansa"){envMonetate="d/www-dcep-qa.";}else{envMonetate="d/www-qa.";}
const domMonetate=domMonetateTemp==="miles-and-more.com"?parts[0].replace("-uat1","")+".com":domMonetateTemp;const m=document.createElement("script");m.type="text/javascript";m.src="//se.monetate.net/js/2/a-5a963685/"+envMonetate+domMonetate+"/entry.js";window.startTime=performance.now();if(envMonetate==="p/"){const s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(m,s);}else{const flag=localStorage.getItem("enableMonetate")==="true";if(flag){const s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(m,s);}else{console.log("Monetate disabled on UAT (enableMonetate flag not set).");}}
m.onload=function(){if(typeof window.initiateMonetate=='function'&&window.monetateFired===false){debuglog("monetate_script loaded");window.initiateMonetate();handleMonetateScriptLoad();}
if(window.lhgData?.metadata?.platform==='ONCE'){setupLhgPageNameWatcher();}};}
debuglog("monetate_script added");}
if(bannedURLS()){if(canRunMonetate()){initMonetate();}else{const hostname=window.location.hostname||"";if(hostname.indexOf("once")!==-1){const intervalMs=200;const maxTimeMs=10000;let elapsed=0;const timerId=setInterval(function(){elapsed+=intervalMs;if(canRunMonetate()){clearInterval(timerId);initMonetate();}else if(elapsed>=maxTimeMs){clearInterval(timerId);debuglog("lhgData/digitalData not available after 10s on once* domain, skipping Monetate init.");}},intervalMs);}
}}else{debuglog("We have a banned URL, so we wait for the URL to change/update");urlListenAfterBanned();}}
function checkCookieCM2(){const consentCookie=document.cookie
.split('; ')
.find(row=>row.startsWith('CONSENTMGR='));if(consentCookie&&consentCookie.includes('c3:1')){debuglog('c3:1 exists');loadMonetate();document.body.removeEventListener('click',handleConsentClick);debuglog("removed listener: handleConsentClick");return true;}else{debuglog('c3:1 does no exists, I will wait');return false;}}
function handleConsentClick(event){debuglog("waited..now let's check...");let targetId=event.target.id;if(targetId==='cm-acceptAll'||targetId==='cm-acceptNone'||targetId==='cm-selectSpecific'||targetId==='selectAllCheckboxes'){setTimeout(checkCookieCM2,800);}}
if(!checkCookieCM2()){debuglog("waiting...");document.body.addEventListener('click',handleConsentClick);}}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{function getCookieDomain(){const hostname=window.location.hostname;if(hostname.includes("lufthansa.com"))return".lufthansa.com";if(hostname.includes("miles-and-more.com"))return".miles-and-more.com";return null;}
window.cookieSetter=function cookieSetter(name,value,days){const domain=getCookieDomain();if(!domain){return;}
let expires="";if(days){const date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toUTCString();}
const cookieString=`${name}=${encodeURIComponent(value||"")}${expires};path=/; domain=${domain}; SameSite=Lax`;
    document.cookie = cookieString;
}

//Getting The Cookie
window.cookieExtractor = function cookieExtractor(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

//Erase the Cookie
window.cookieEraser = function cookieEraser(name){ 
   
    const domain = getCookieDomain();
    if (!domain) {
        return; // Exit without setting cookie
    }
    
    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;domain=${domain};SameSite=Lax`;}}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{try{window.lhgTealiumIQHelpers={extractFlightProductData:function(searchLevel,parameterName,subParameterName){if(!searchLevel||!parameterName){utag.DB('DEBUG: Ext UID 375 - extractFlightProductData: No obligatory parameter defined');return false;}
if(digitalData.product&&digitalData.product.length>0){var returnedValues=[];for(var i=0;i<digitalData.product.length;i++){if(digitalData.product[i].category.primaryCategory==='FlightTicket'){for(var g=0;g<digitalData.product[i].productInfo.productDetails.flightTicket.bound.length;g++){if(searchLevel==='bound'){}else if(searchLevel==='segment'){for(var h=0;h<digitalData.product[i].productInfo.productDetails.flightTicket.bound[g].segment.length;h++){if(parameterName==='coupon'){for(var j=0;j<digitalData.product[i].productInfo.productDetails.flightTicket.bound[g].segment[h].coupon.length;j++){returnedValues.push(digitalData.product[i].productInfo.productDetails.flightTicket.bound[g].segment[h].coupon[j][subParameterName].toLowerCase())}
}else if(!subParameterName){returnedValues.push(digitalData.product[i].productInfo.productDetails.flightTicket.bound[g].segment[h][parameterName].toLowerCase());}else{returnedValues.push(digitalData.product[i].productInfo.productDetails.flightTicket.bound[g].segment[h][parameterName][subParameterName].toLowerCase());}}}}}else{utag.DB('DEBUG: Ext UID 375 - extractFlightProductData: No flight found in digitalData.product');}}
return returnedValues.join('|');}else{}}}}catch(err){utag.DB('DEBUG: Ext UID 372 crashed: '+err);}}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{window.addEventListener("load",function(event){function getCookie(cname){let name=cname+"=";let decodedCookie=decodeURIComponent(document.cookie);let ca=decodedCookie.split(';');for(let i=0;i<ca.length;i++){let c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return"not_set";}
if(typeof cognigyWebchat!="undefined"){cognigyWebchat.registerAnalyticsService(event=>{if(event.type==="webchat/incoming-message"&&getCookie("cognigy_session_id")==="not_set"){document.cookie="cognigy_session_id="+cognigyWebchat.client.socketOptions.sessionId;"expiration=session";};});};});}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{try{if(window.location.pathname.includes("/lp")&&lhgData.page.category.category1==="aircore"){let country=window.location.pathname.split("/")[2];if(!lhgData.page?.pageInfo?.country||lhgData.page.pageInfo.country==="XX"){lhgData.page.pageInfo.country=country;}}}
catch(e){utag.DB(e)}
}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{(function(w,d){var KEY='ab_session_v1';var SESSION_TTL_MS=30*60*1000;var MAX_EXPS=100;function getETLD1(host){var parts=String(host||'').toLowerCase().split('.').filter(Boolean);return parts.length>=2?parts.slice(-2).join('.'):host;}
function getCookieDomain(host){var etld1=getETLD1(host);return(host&&etld1&&host.toLowerCase()!==etld1)?('.'+etld1):null;}
function sameETLD(a,b){return getETLD1(a)===getETLD1(b);}
var CUR_HOST=location.hostname;var CUR_ETLD1=getETLD1(CUR_HOST);var COOKIE_DOMAIN=getCookieDomain(CUR_HOST);var XDOMAIN_SUFFIXES=['miles-and-more.com'];function now(){return Date.now();}
function consentOK(){try{if(w.utag&&utag.gdpr&&typeof utag.gdpr.consent!=='undefined'){return utag.gdpr.consent===1;}}catch(e){}
return true;}
function storage(){if(!consentOK())return w.sessionStorage;try{return w.localStorage;}catch(e){return w.sessionStorage;}}
function setCookie(name,value,maxAgeSec){if(!COOKIE_DOMAIN)return;d.cookie=name+'='+encodeURIComponent(value)+
'; Path=/'+
'; Domain='+COOKIE_DOMAIN+
'; Max-Age='+(maxAgeSec||1800)+
'; Secure; SameSite=Lax';}
function getCookie(name){var m=d.cookie.match(new RegExp('(?:^|; )'+name+'=([^;]*)'));return m?decodeURIComponent(m[1]):'';}
function getParam(u,key){var url=new URL(u||location.href);return url.searchParams.get(key);}
function stripParam(key){var url=new URL(location.href);if(!url.searchParams.has(key))return;url.searchParams.delete(key);history.replaceState(null,'',url.toString());}
function hostEndsWithAny(host,suffixes){host=String(host||'').toLowerCase();for(var i=0;i<suffixes.length;i++){if(host.endsWith(String(suffixes[i]).toLowerCase()))return true;}
return false;}
function isCrossDomainAllowed(srcHost,destHost){var crossEtld=!sameETLD(srcHost,destHost);if(!crossEtld)return false;return hostEndsWithAny(srcHost,XDOMAIN_SUFFIXES)||hostEndsWithAny(destHost,XDOMAIN_SUFFIXES);}
function load(){var raw;try{raw=storage().getItem(KEY);}catch(e){}
if(!raw)return{sid:now().toString(36),startedAt:now(),lastSeen:now(),exps:[]};var obj={};try{obj=JSON.parse(raw)||{};}catch(e){obj={};}
if(!obj.sid)obj.sid=now().toString(36);if(!obj.exps)obj.exps=[];if(!obj.lastSeen||(now()-obj.lastSeen)>SESSION_TTL_MS){obj={sid:now().toString(36),startedAt:now(),lastSeen:now(),exps:[]};}
return obj;}
var ExpStore={data:load(),save:function(){this.data.lastSeen=now();try{storage().setItem(KEY,JSON.stringify(this.data));}catch(e){}
if(consentOK()&&COOKIE_DOMAIN){var tiny=(this.data.exps||[]).map(function(e){return[e.id||'',e.recipeId||''];});setCookie('exp_exps',JSON.stringify(tiny),1800);}},add:function(exp){var name=(exp&&(exp.name||''))||'';var variant=(exp&&(exp.recipeName||exp.variant||''))||'';var id=exp&&(exp.id||exp.key||'');var recipeId=exp&&(exp.recipeId||'');var key=[(exp&&exp.provider)||'monetate',String(id),String(recipeId||variant)].join('|').toLowerCase();var exists=(this.data.exps||[]).some(function(e){return e.key===key;});if(exists){this.save();return false;}
(this.data.exps||(this.data.exps=[])).push({key:key,provider:(exp&&exp.provider)||'Monetate',id:id,name:name,recipeId:recipeId,recipeName:variant,firstSeen:now(),lastSeen:now()});if(this.data.exps.length>MAX_EXPS)this.data.exps=this.data.exps.slice(-MAX_EXPS);this.save();return true;},list:function(){return(this.data.exps||[]).slice();},listPairs:function(){return(this.data.exps||[]).map(function(e){return(e.name+':'+e.recipeName).trim();});},firstTouch:function(){var e=(this.data.exps||[])[0];return e?(e.name+':'+e.recipeName):'';},lastTouch:function(){var arr=(this.data.exps||[]);var e=arr[arr.length-1];return e?(e.name+':'+e.recipeName):'';}};w.ExpStore=ExpStore;w.expAddExperiment=function(exp){try{return ExpStore.add(exp||{});}catch(e){return false;}};function buildPayload(){var items=(ExpStore.list()||[]).map(function(e){return[e.id||'',e.recipeId||''].join('.');});var json=JSON.stringify({v:1,x:items});return btoa(json).replace(/=+$/,'').replace(/\+/g,'-').replace(/\//g,'_');}
function mergePayload(b64){try{var json=atob(b64.replace(/-/g,'+').replace(/_/g,'/'));var obj=JSON.parse(json||'{}');if(!obj||!obj.x)return;obj.x.forEach(function(tok){var parts=String(tok||'').split('.');w.expAddExperiment&&w.expAddExperiment({provider:'Monetate',id:parts[0]||'',recipeId:parts[1]||''});});}catch(e){}}
w.addEventListener('DOMContentLoaded',function(){var p=getParam(location.href,'xexp');if(p){mergePayload(p);stripParam('xexp');}
var c=getCookie('exp_exps');if(c){try{JSON.parse(c).forEach(function(pair){w.expAddExperiment&&w.expAddExperiment({provider:'Monetate',id:pair[0],recipeId:pair[1]});});}catch(e){}}
try{var list=w.activeExpList;if(Array.isArray(list)&&list.length){list.forEach(function(c){w.expAddExperiment({provider:'Monetate',id:c.id||c.campaign_id||c.key,key:c.key,name:c.label||c.campaign_name||c.name||(c.key?String(c.key):('campaign_'+(c.id||''))),recipeId:c.variant_id||c.recipe_id,recipeName:c.variant_label||c.variant_name||c.type||''});});}}catch(e){}});d.addEventListener('click',function(ev){var a=ev.target&&ev.target.closest?ev.target.closest('a[href]'):null;if(!a)return;try{var url=new URL(a.href,location.href);if(url.origin===location.origin)return;var destHost=url.hostname;var srcHost=CUR_HOST;if(!isCrossDomainAllowed(srcHost,destHost))return;if(!consentOK())return;var payload=buildPayload();url.searchParams.set('xexp',payload);a.href=url.toString();}catch(e){}},true);})(window,document);}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{window.utag_cfg_ovrd.nocookie=true;window.addEventListener("consent_updated",updatedConsentChanges);function updatedConsentChanges(event){if(event&&event.detail&&event.detail.decision){newtealiumCurrentDecision=Object.values(event.detail.decision);newaffiliates=newtealiumCurrentDecision.indexOf('affiliates')!==-1?'1':'0';newsearch=newtealiumCurrentDecision.indexOf('search')!==-1?'1':'0';newdisplay_ads=newtealiumCurrentDecision.indexOf('display_ads')!==-1?'1':'0';if(newaffiliates==="1"||newsearch==="1"||newdisplay_ads==="1"){window.utag_cfg_ovrd.nocookie=false;window.utag.cfg.nocookie=false;utag.loader.SC("utag_main",{"v_id":(utag.data['cp.utag_main_v_id']||"")});}}}}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(typeof utag=="undefined"&&!utag_condload){var utag={id:"lufthansa.main",o:{},sender:{},send:{},rpt:{ts:{a:new Date()}},dbi:[],db_log:[],loader:{q:[],lc:0,f:{},p:0,ol:0,wq:[],lq:[],bq:{},bk:{},rf:0,ri:0,rp:0,rq:[],ready_q:[],sendq:{"pending":0},run_ready_q:function(){for(var i=0;i<utag.loader.ready_q.length;i++){utag.DB("READY_Q:"+i);try{utag.loader.ready_q[i]()}catch(e){utag.DB(e)};}},lh:function(a,b,c){a=""+location.hostname;b=a.split(".");c=(/\.co\.|\.com\.|\.org\.|\.edu\.|\.net\.|\.asn\.|\...\.jp$/.test(a))?3:2;return b.splice(b.length-c,c).join(".");},WQ:function(a,b,c,d,g){utag.DB('WQ:'+utag.loader.wq.length);try{if(utag.udoname&&utag.udoname.indexOf(".")<0){utag.ut.merge(utag.data,window[utag.udoname],0);}
if(utag.cfg.load_rules_at_wait){utag.handler.LR(utag.data);}}catch(e){utag.DB(e)};d=0;g=[];for(a=0;a<utag.loader.wq.length;a++){b=utag.loader.wq[a];b.load=utag.loader.cfg[b.id].load;if(b.load==4){this.f[b.id]=0;utag.loader.LOAD(b.id)}else if(b.load>0){g.push(b);d++;}else{this.f[b.id]=1;}}
for(a=0;a<g.length;a++){utag.loader.AS(g[a]);}
if(d==0){utag.loader.END();}},AS:function(a,b,c,d){utag.send[a.id]=a;if(typeof a.src=='undefined'){a.src=utag.cfg.path+((typeof a.name!='undefined')?a.name:'ut'+'ag.'+a.id+'.js')}
a.src+=(a.src.indexOf('?')>0?'&':'?')+'utv='+(a.v?utag.cfg.template+a.v:utag.cfg.v);utag.rpt['l_'+a.id]=a.src;b=document;this.f[a.id]=0;if(a.load==2){utag.DB("Attach sync: "+a.src);a.uid=a.id;b.write('<script id="utag_'+a.id+'" src="'+a.src+'"></scr'+'ipt>')
if(typeof a.cb!='undefined')a.cb();}else if(a.load==1||a.load==3){if(b.createElement){c='utag_lufthansa.main_'+a.id;if(!b.getElementById(c)){d={src:a.src,id:c,uid:a.id,loc:a.loc}
if(a.load==3){d.type="iframe"};if(typeof a.cb!='undefined')d.cb=a.cb;utag.ut.loader(d);}}}},GV:function(a,b,c){b={};for(c in a){if(a.hasOwnProperty(c)&&typeof a[c]!="function")b[c]=a[c];}
return b},OU:function(tid,tcat,a,b,c,d,f,g){g={};utag.loader.RDcp(g);try{if(typeof g['cp.OPTOUTMULTI']!='undefined'){c=utag.loader.cfg;a=utag.ut.decode(g['cp.OPTOUTMULTI']).split('|');for(d=0;d<a.length;d++){b=a[d].split(':');if(b[1]*1!==0){if(b[0].indexOf('c')==0){for(f in utag.loader.GV(c)){if(c[f].tcat==b[0].substring(1))c[f].load=0;if(c[f].tid==tid&&c[f].tcat==b[0].substring(1))return true;}
if(tcat==b[0].substring(1))return true;}else if(b[0]*1==0){utag.cfg.nocookie=true}else{for(f in utag.loader.GV(c)){if(c[f].tid==b[0])c[f].load=0}
if(tid==b[0])return true;}}}}}catch(e){utag.DB(e)}
return false;},RDdom:function(o){var d=document||{},l=location||{};o["dom.referrer"]=d.referrer;o["dom.title"]=""+d.title;o["dom.domain"]=""+l.hostname;o["dom.query_string"]=(""+l.search).substring(1);o["dom.hash"]=(""+l.hash).substring(1);o["dom.url"]=""+d.URL;o["dom.pathname"]=""+l.pathname;o["dom.viewport_height"]=window.innerHeight||(d.documentElement?d.documentElement.clientHeight:960);o["dom.viewport_width"]=window.innerWidth||(d.documentElement?d.documentElement.clientWidth:960);},RDcp:function(o,b,c,d){b=utag.loader.RC();for(d in b){if(d.match(/utag_(.*)/)){for(c in utag.loader.GV(b[d])){o["cp.utag_"+RegExp.$1+"_"+c]=b[d][c];}}}
for(c in utag.loader.GV((utag.cl&&!utag.cl['_all_'])?utag.cl:b)){if(c.indexOf("utag_")<0&&typeof b[c]!="undefined")o["cp."+c]=b[c];}},RDqp:function(o,a,b,c){a=location.search+(location.hash+'').replace("#","&");if(utag.cfg.lowerqp){a=a.toLowerCase()};if(a.length>1){b=a.substring(1).split('&');for(a=0;a<b.length;a++){c=b[a].split("=");if(c.length>1){o["qp."+c[0]]=utag.ut.decode(c[1])}}}},RDmeta:function(o,a,b,h){a=document.getElementsByTagName("meta");for(b=0;b<a.length;b++){try{h=a[b].name||a[b].getAttribute("property")||"";}catch(e){h="";utag.DB(e)};if(utag.cfg.lowermeta){h=h.toLowerCase()};if(h!=""){o["meta."+h]=a[b].content}}},RDva:function(o){var readAttr=function(o,l){var a="",b;a=localStorage.getItem(l);if(!a||a=="{}")return;b=utag.ut.flatten({va:JSON.parse(a)});utag.ut.merge(o,b,1);}
try{readAttr(o,"tealium_va");readAttr(o,"tealium_va_"+o["ut.account"]+"_"+o["ut.profile"]);}catch(e){utag.DB(e)}},RDut:function(o,a){var t={};var d=new Date();var m=(utag.ut.typeOf(d.toISOString)=="function");o["ut.domain"]=utag.cfg.domain;o["ut.version"]=utag.cfg.v;t["tealium_event"]=o["ut.event"]=a||"view";t["tealium_visitor_id"]=o["ut.visitor_id"]=o["cp.utag_main_v_id"];t["tealium_session_id"]=o["ut.session_id"]=o["cp.utag_main_ses_id"];t["tealium_session_number"]=o["cp.utag_main__sn"];t["tealium_session_event_number"]=o["cp.utag_main__se"];try{t["tealium_datasource"]=utag.cfg.datasource;t["tealium_account"]=o["ut.account"]=utag.cfg.utid.split("/")[0];t["tealium_profile"]=o["ut.profile"]=utag.cfg.utid.split("/")[1];t["tealium_environment"]=o["ut.env"]=utag.cfg.path.split("/")[6];}catch(e){utag.DB(e)}
t["tealium_random"]=Math.random().toFixed(16).substring(2);t["tealium_library_name"]="ut"+"ag.js";t["tealium_library_version"]=(utag.cfg.template+"0").substring(2);t["tealium_timestamp_epoch"]=Math.floor(d.getTime()/1000);t["tealium_timestamp_utc"]=(m?d.toISOString():"");d.setHours(d.getHours()-(d.getTimezoneOffset()/60));t["tealium_timestamp_local"]=(m?d.toISOString().replace("Z",""):"");utag.ut.merge(o,t,0);},RDses:function(o,a,c){a=(new Date()).getTime();c=(a+parseInt(utag.cfg.session_timeout))+"";if(!o["cp.utag_main_ses_id"]){o["cp.utag_main_ses_id"]=a+"";o["cp.utag_main__ss"]="1";o["cp.utag_main__se"]="1";o["cp.utag_main__sn"]=(1+parseInt(o["cp.utag_main__sn"]||0))+"";}else{o["cp.utag_main__ss"]="0";o["cp.utag_main__se"]=(1+parseInt(o["cp.utag_main__se"]||0))+"";}
o["cp.utag_main__pn"]=o["cp.utag_main__pn"]||"1";o["cp.utag_main__st"]=c;utag.loader.SC("utag_main",{"_sn":(o["cp.utag_main__sn"]||1),"_se":o["cp.utag_main__se"],"_ss":o["cp.utag_main__ss"],"_st":c,"ses_id":(o["cp.utag_main_ses_id"]||a)+";exp-session","_pn":o["cp.utag_main__pn"]+";exp-session"});},RDpv:function(o){if(typeof utag.pagevars=="function"){utag.DB("Read page variables");utag.pagevars(o);}},RD:function(o,a){utag.DB("utag.loader.RD");utag.DB(o);utag.loader.RDcp(o);if(!utag.loader.rd_flag){utag.loader.rd_flag=1;o["cp.utag_main_v_id"]=o["cp.utag_main_v_id"]||utag.ut.vi((new Date()).getTime());o["cp.utag_main__pn"]=(1+parseInt(o["cp.utag_main__pn"]||0))+"";utag.loader.SC("utag_main",{"v_id":o["cp.utag_main_v_id"]});utag.loader.RDses(o);}
if(a&&!utag.cfg.noview)utag.loader.RDses(o);utag.loader.RDqp(o);utag.loader.RDmeta(o);utag.loader.RDdom(o);utag.loader.RDut(o,a||"view");utag.loader.RDpv(o);utag.loader.RDva(o);},RC:function(a,x,b,c,d,e,f,g,h,i,j,k,l,m,n,o,v,ck,cv,r,s,t){o={};b=(""+document.cookie!="")?(document.cookie).split("; "):[];r=/^(.*?)=(.*)$/;s=/^(.*);exp-(.*)$/;t=(new Date()).getTime();for(c=0;c<b.length;c++){if(b[c].match(r)){ck=RegExp.$1;cv=RegExp.$2;}
e=utag.ut.decode(cv);if(typeof ck!="undefined"){if(ck.indexOf("ulog")==0||ck.indexOf("utag_")==0){e=cv.split("$");g=[];j={};for(f=0;f<e.length;f++){try{g=e[f].split(":");if(g.length>2){g[1]=g.slice(1).join(":");}
v="";if((""+g[1]).indexOf("~")==0){h=g[1].substring(1).split("|");for(i=0;i<h.length;i++)h[i]=utag.ut.decode(h[i]);v=h}else v=utag.ut.decode(g[1]);j[g[0]]=v;}catch(er){utag.DB(er)};}
o[ck]={};for(f in utag.loader.GV(j)){if(j[f]instanceof Array){n=[];for(m=0;m<j[f].length;m++){if(j[f][m].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);if(k>t)n[m]=(x==0)?j[f][m]:RegExp.$1;}}
j[f]=n.join("|");}else{j[f]=""+j[f];if(j[f].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);j[f]=(k<t)?null:(x==0?j[f]:RegExp.$1);}}
if(j[f])o[ck][f]=j[f];}}else if(utag.cl[ck]||utag.cl['_all_']){o[ck]=e}}}
return(a)?(o[a]?o[a]:{}):o;},SC:function(a,b,c,d,e,f,g,h,i,j,k,x,v){if(!a)return 0;if(a=="utag_main"&&utag.cfg.nocookie)return 0;v="";var date=new Date();var exp=new Date();exp.setTime(date.getTime()+(365*24*60*60*1000));x=exp.toGMTString();if(c&&c=="da"){x="Thu, 31 Dec 2009 00:00:00 GMT";}else if(a.indexOf("utag_")!=0&&a.indexOf("ulog")!=0){if(typeof b!="object"){v=b}}else{d=utag.loader.RC(a,0);for(e in utag.loader.GV(b)){f=""+b[e];if(f.match(/^(.*);exp-(\d+)(\w)$/)){g=date.getTime()+parseInt(RegExp.$2)*((RegExp.$3=="h")?3600000:86400000);if(RegExp.$3=="u")g=parseInt(RegExp.$2);f=RegExp.$1+";exp-"+g;}
if(c=="i"){if(d[e]==null)d[e]=f;}else if(c=="d")delete d[e];else if(c=="a")d[e]=(d[e]!=null)?(f-0)+(d[e]-0):f;else if(c=="ap"||c=="au"){if(d[e]==null)d[e]=f;else{if(d[e].indexOf("|")>0){d[e]=d[e].split("|")}
g=(d[e]instanceof Array)?d[e]:[d[e]];g.push(f);if(c=="au"){h={};k={};for(i=0;i<g.length;i++){if(g[i].match(/^(.*);exp-(.*)$/)){j=RegExp.$1;}
if(typeof k[j]=="undefined"){k[j]=1;h[g[i]]=1;}}
g=[];for(i in utag.loader.GV(h)){g.push(i);}}
d[e]=g}}else d[e]=f;}
h=new Array();for(g in utag.loader.GV(d)){if(d[g]instanceof Array){for(c=0;c<d[g].length;c++){d[g][c]=encodeURIComponent(d[g][c])}
h.push(g+":~"+d[g].join("|"))}else h.push((g+":").replace(/[\,\$\;\?]/g,"")+encodeURIComponent(d[g]))}
if(h.length==0){h.push("");x=""}
v=(h.join("$"));}
document.cookie=a+"="+v+";path=/;domain="+utag.cfg.domain+";expires="+x+";secure";return 1},LOAD:function(a,b,c,d){if(!utag.loader.cfg){return}
if(this.ol==0){if(utag.loader.cfg[a].block&&utag.loader.cfg[a].cbf){this.f[a]=1;delete utag.loader.bq[a];}
for(b in utag.loader.GV(utag.loader.bq)){if(utag.loader.cfg[a].load==4&&utag.loader.cfg[a].wait==0){utag.loader.bk[a]=1;utag.DB("blocked: "+a);}
utag.DB("blocking: "+b);return;}
utag.loader.INIT();return;}
utag.DB('utag.loader.LOAD:'+a);if(this.f[a]==0){this.f[a]=1;if(utag.cfg.noview!=true){if(utag.loader.cfg[a].send){utag.DB("SENDING: "+a);try{if(utag.loader.sendq.pending>0&&utag.loader.sendq[a]){utag.DB("utag.loader.LOAD:sendq: "+a);while(d=utag.loader.sendq[a].shift()){utag.DB(d);utag.sender[a].send(d.event,utag.handler.C(d.data));utag.loader.sendq.pending--;}}else{utag.sender[a].send('view',utag.handler.C(utag.data));}
utag.rpt['s_'+a]=0;}catch(e){utag.DB(e);utag.rpt['s_'+a]=1;}}}
if(utag.loader.rf==0)return;for(b in utag.loader.GV(this.f)){if(this.f[b]==0||this.f[b]==2)return}
utag.loader.END();}},EV:function(a,b,c,d){if(b=="ready"){if(!utag.data){try{utag.cl={'_all_':1};utag.loader.initdata();utag.loader.RD(utag.data);}catch(e){utag.DB(e)};}
if((document.attachEvent||utag.cfg.dom_complete)?document.readyState==="complete":document.readyState!=="loading")setTimeout(c,1);else{utag.loader.ready_q.push(c);var RH;if(utag.loader.ready_q.length<=1){if(document.addEventListener){RH=function(){document.removeEventListener("DOMContentLoaded",RH,false);utag.loader.run_ready_q()};if(!utag.cfg.dom_complete)document.addEventListener("DOMContentLoaded",RH,false);window.addEventListener("load",utag.loader.run_ready_q,false);}else if(document.attachEvent){RH=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",RH);utag.loader.run_ready_q()}};document.attachEvent("onreadystatechange",RH);window.attachEvent("onload",utag.loader.run_ready_q);}}}}else{if(a.addEventListener){a.addEventListener(b,c,false)}else if(a.attachEvent){a.attachEvent(((d==1)?"":"on")+b,c)}}},END:function(b,c,d,e,v,w){if(this.ended){return};this.ended=1;utag.DB("loader.END");b=utag.data;if(utag.handler.base&&utag.handler.base!='*'){e=utag.handler.base.split(",");for(d=0;d<e.length;d++){if(typeof b[e[d]]!="undefined")utag.handler.df[e[d]]=b[e[d]]}}else if(utag.handler.base=='*'){utag.ut.merge(utag.handler.df,b,1);}
utag.rpt['r_0']="t";for(var r in utag.loader.GV(utag.cond)){utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";}
utag.rpt.ts['s']=new Date();v=utag.cfg.path;w=v.indexOf(".tiqcdn.");if(w>0&&b["cp.utag_main__ss"]==1&&!utag.cfg.no_session_count)utag.ut.loader({src:v.substring(0,v.indexOf("/ut"+"ag/")+6)+"tiqapp/ut"+"ag.v.js?a="+utag.cfg.utid+(utag.cfg.nocookie?"&nocookie=1":"&cb="+(new Date).getTime()),id:"tiqapp"})
if(utag.cfg.noview!=true)utag.handler.RE('view',b,"end");utag.handler.INIT();}},DB:function(a,b){if(utag.cfg.utagdb===false){return;}else if(typeof utag.cfg.utagdb=="undefined"){b=document.cookie+'';utag.cfg.utagdb=((b.indexOf('utagdb=true')>=0)?true:false);}
if(utag.cfg.utagdb===true){var t;if(utag.ut.typeOf(a)=="object"){t=utag.handler.C(a)}else{t=a}
utag.db_log.push(t);try{if(!utag.cfg.noconsole)console.log(t)}catch(e){}}},RP:function(a,b,c){if(typeof a!='undefined'&&typeof a.src!='undefined'&&a.src!=''){b=[];for(c in utag.loader.GV(a)){if(c!='src')b.push(c+'='+escape(a[c]))}
this.dbi.push((new Image()).src=a.src+'?utv='+utag.cfg.v+'&utid='+utag.cfg.utid+'&'+(b.join('&')))}},view:function(a,c,d){return this.track({event:'view',data:a||{},cfg:{cb:c,uids:d}})},link:function(a,c,d){return this.track({event:'link',data:a||{},cfg:{cb:c,uids:d}})},track:function(a,b,c,d,e){a=a||{};if(typeof a=="string"){a={event:a,data:b||{},cfg:{cb:c,uids:d}}}
for(e in utag.loader.GV(utag.o)){utag.o[e].handler.trigger(a.event||"view",a.data||a,a.cfg||{cb:b,uids:c})}
a.cfg=a.cfg||{cb:b};if(typeof a.cfg.cb=="function")a.cfg.cb();return true},handler:{base:"",df:{},o:{},send:{},iflag:0,INIT:function(a,b,c){utag.DB('utag.handler.INIT');if(utag.initcatch){utag.initcatch=0;return}
this.iflag=1;a=utag.loader.q.length;if(a>0){utag.DB("Loader queue");for(b=0;b<a;b++){c=utag.loader.q[b];utag.handler.trigger(c.a,c.b,c.c)}}
},test:function(){return 1},LR:function(b){utag.DB("Load Rules");for(var d in utag.loader.GV(utag.cond)){utag.cond[d]=false;}
utag.DB(b);utag.loader.loadrules(b);utag.DB(utag.cond);utag.loader.initcfg();utag.loader.OU();for(var r in utag.loader.GV(utag.cond)){utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";}},RE:function(a,b,c,d,e,f,g){if(c!="alr"&&!this.cfg_extend){return 0;}
utag.DB("RE: "+c);if(c=="alr")utag.DB("All Tags EXTENSIONS");utag.DB(b);if(typeof this.extend!="undefined"){g=0;for(d=0;d<this.extend.length;d++){try{e=0;if(typeof this.cfg_extend!="undefined"){f=this.cfg_extend[d];if(typeof f.count=="undefined")f.count=0;if(f[a]==0||(f.once==1&&f.count>0)||f[c]==0){e=1}else{if(f[c]==1){g=1};f.count++}}
if(e!=1){this.extend[d](a,b);utag.rpt['ex_'+d]=0}}catch(er){utag.DB(er);utag.rpt['ex_'+d]=1;utag.ut.error({e:er.message,s:utag.cfg.path+'utag.js',l:d,t:'ge'});}}
utag.DB(b);return g;}},trigger:function(a,b,c,d,e,f){utag.DB('trigger:'+a+(c&&c.uids?":"+c.uids.join(","):""));b=b||{};utag.DB(b);if(!this.iflag){utag.DB("trigger:called before tags loaded");for(d in utag.loader.f){if(!(utag.loader.f[d]===1))utag.DB('Tag '+d+' did not LOAD')}
utag.loader.q.push({a:a,b:utag.handler.C(b),c:c});return;}
utag.ut.merge(b,this.df,0);utag.loader.RD(b,a);utag.cfg.noview=false;function sendTag(a,b,d){try{if(typeof utag.sender[d]!="undefined"){utag.DB("SENDING: "+d);utag.sender[d].send(a,utag.handler.C(b));utag.rpt['s_'+d]=0;}else if(utag.loader.cfg[d].load!=2){utag.loader.sendq[d]=utag.loader.sendq[d]||[];utag.loader.sendq[d].push({"event":a,"data":utag.handler.C(b)});utag.loader.sendq.pending++;utag.loader.AS({id:d,load:1});}}catch(e){utag.DB(e)}}
if(c&&c.uids){this.RE(a,b,"alr");for(f=0;f<c.uids.length;f++){d=c.uids[f];if(!utag.loader.OU(utag.loader.cfg[d].tid)){sendTag(a,b,d);}}}else if(utag.cfg.load_rules_ajax){this.RE(a,b,"blr");this.LR(b);this.RE(a,b,"alr");for(f=0;f<utag.loader.cfgsort.length;f++){d=utag.loader.cfgsort[f];if(utag.loader.cfg[d].load&&utag.loader.cfg[d].send){sendTag(a,b,d);}}}else{this.RE(a,b,"alr");for(d in utag.loader.GV(utag.sender)){sendTag(a,b,d);}}
this.RE(a,b,"end");},C:function(a,b,c){b={};for(c in utag.loader.GV(a)){if(a[c]instanceof Array){b[c]=a[c].slice(0)}else{b[c]=a[c]}}
return b}},ut:{pad:function(a,b,c,d){a=""+((a-0).toString(16));d='';if(b>a.length){for(c=0;c<(b-a.length);c++){d+='0'}}return""+d+a},vi:function(t,a,b){if(!utag.v_id){a=this.pad(t,12);b=""+Math.random();a+=this.pad(b.substring(2,b.length),16);try{a+=this.pad((navigator.plugins.length?navigator.plugins.length:0),2);a+=this.pad(navigator.userAgent.length,3);a+=this.pad(document.URL.length,4);a+=this.pad(navigator.appVersion.length,3);a+=this.pad(screen.width+screen.height+parseInt((screen.colorDepth)?screen.colorDepth:screen.pixelDepth),5)}catch(e){utag.DB(e);a+="12345"};utag.v_id=a;}
return utag.v_id},hasOwn:function(o,a){return o!=null&&Object.prototype.hasOwnProperty.call(o,a)},isEmptyObject:function(o,a){for(a in o){if(utag.ut.hasOwn(o,a))return false}
return true},isEmpty:function(o){var t=utag.ut.typeOf(o);if(t=="number"){return isNaN(o)}else if(t=="boolean"){return false}else if(t=="string"){return o.length===0}else return utag.ut.isEmptyObject(o)},typeOf:function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();},flatten:function(o){var a={};function r(c,p){if(Object(c)!==c||c instanceof Array){a[p]=c;}else{if(utag.ut.isEmptyObject(c)){}else{for(var d in c){r(c[d],p?p+"."+d:d);}}}}
r(o,"");return a;},merge:function(a,b,c,d){if(c){for(d in utag.loader.GV(b)){a[d]=b[d]}}else{for(d in utag.loader.GV(b)){if(typeof a[d]=="undefined")a[d]=b[d]}}},decode:function(a,b){b="";try{b=decodeURIComponent(a)}catch(e){utag.DB(e)};if(b==""){b=unescape(a)};return b},encode:function(a,b){b="";try{b=encodeURIComponent(a)}catch(e){utag.DB(e)};if(b==""){b=escape(a)};return b},error:function(a,b,c){if(typeof utag_err!="undefined"){utag_err.push(a)}},loader:function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){m.parentNode.removeChild(m);}
b=a.createElement("iframe");o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}
if(o.id){b.id=o.id};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l])}
b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}
if(typeof o.error=="function"){utag.loader.EV(b,"error",o.error);}
if(o.type!="img"){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}}};utag.o['lufthansa.main']=utag;utag.cfg={template:"ut4.46.",load_rules_ajax:true,load_rules_at_wait:false,lowerqp:false,noconsole:false,session_timeout:1800000,readywait:0,noload:0,domain:utag.loader.lh(),datasource:"##UTDATASOURCE##".replace("##"+"UTDATASOURCE##",""),path:"//tags.tiqcdn.com/utag/lufthansa/main/prod/",utid:"lufthansa/main/202512221317"};utag.cfg.v=utag.cfg.template+"202512221317";utag.cond={103:0,117:0,126:0,129:0,137:0,141:0,144:0,145:0,148:0,150:0,155:0,162:0,166:0,172:0,176:0,182:0,192:0,197:0,198:0,199:0,218:0,224:0,227:0,22:0,231:0,232:0,233:0,234:0,241:0,244:0,245:0,248:0,255:0,266:0,272:0,273:0,279:0,286:0,287:0,288:0,294:0,297:0,309:0,321:0,323:0,328:0,331:0,336:0,338:0,346:0,349:0,350:0,351:0,353:0,354:0,355:0,356:0,362:0,363:0};utag.pagevars=function(ud){ud=ud||utag.data;try{ud['js_page.mmPageID']=mmPageID}catch(e){utag.DB(e)};try{ud['js_page.navigator.userAgent']=navigator.userAgent}catch(e){utag.DB(e)};};utag.loader.initdata=function(){try{utag.data=(typeof utag_data!='undefined')?utag_data:{};utag.udoname='utag_data';}catch(e){utag.data={};utag.DB('idf:'+e);}};utag.loader.loadrules=function(_pd,_pc){var d=_pd||utag.data;var c=_pc||utag.cond;for(var l in utag.loader.GV(c)){switch(l){case'103':try{c[103]|=(typeof d['app_webview']=='undefined')||(d['app_webview']=='no')}catch(e){utag.DB(e)};break;case'117':try{c[117]|=(/^(?!.*?\/online\/(my)?portal\/lh\/.*?(@|%40|filekey|lastname).*$).*$/.test(d['dom.url'])&&/^(?!.*?\/online\/(my)?portal\/lh\/.*?(@|%40|filekey|lastname).*$).*$/.test(d['dom.referrer'])&&/^(?!.*?\/deeplink(\/sec)?\/mybookings.*?(@|%40|filekey|lastname).*$).*$/.test(d['dom.url'])&&/^(?!.*?\/deeplink(\/sec)?\/mybookings.*?(@|%40|filekey|lastname).*$).*$/.test(d['dom.referrer']))}catch(e){utag.DB(e)};break;case'126':try{c[126]|=(typeof d['mmPageID_firstPart']!='undefined'&&d['mmPageID_firstPart']=='FOFP')||(typeof d['mmPageID_firstPart']!='undefined'&&d['mmPageID_firstPart']=='FFPP')||(typeof d['mmPageID_firstPart']!='undefined'&&d['mmPageID_firstPart']=='FOMS')}catch(e){utag.DB(e)};break;case'129':try{c[129]|=(typeof d['page.pageInfo.pageName']=='undefined')||(typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase()!='my-account'.toLowerCase())}catch(e){utag.DB(e)};break;case'137':try{c[137]|=(typeof d['mmPageID_firstPart']=='undefined')||(typeof d['mmPageID_firstPart']!='undefined'&&d['mmPageID_firstPart'].toString().toLowerCase()!='PURF'.toLowerCase())}catch(e){utag.DB(e)};break;case'141':try{c[141]|=(typeof d['cp.utag_main_clickID']!='undefined'&&typeof d['cp.utag_main_utmMediumCookie']!='undefined'&&d['cp.utag_main_utmMediumCookie'].toString().toLowerCase()=='fse'.toLowerCase())}catch(e){utag.DB(e)};break;case'144':try{c[144]|=(typeof d['dom.url']!='undefined'&&d['dom.url'].toString().toLowerCase().indexOf('firstname'.toLowerCase())<0&&d['dom.url'].toString().toLowerCase().indexOf('lastname'.toLowerCase())<0&&d['dom.url'].toString().toLowerCase().indexOf('filekey'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'145':try{c[145]|=(d['market']=='US'&&d['language']=='en')}catch(e){utag.DB(e)};break;case'148':try{c[148]|=(typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase()=='homepage'.toLowerCase())||(d['mmPageID_firstPart']=='FOFP')||(d['mmPageID_firstPart']=='FFPP')||(d['mmPageID_firstPart']=='FOMS')||(d['mmPageID_firstPart']=='FOSD')||(d['mmPageID_firstPart']=='ITCO')||(d['mmPageID_firstPart']=='CART')||(d['mmPageID_firstPart']=='SEAT')||(d['mmPageID_firstPart']=='RAIL')||(d['mmPageID_firstPart']=='FBAG')||(d['mmPageID_firstPart']=='INSU')||(d['mmPageID_firstPart']=='ALPI')||(d['mmPageID_firstPart']=='PURF')||(d['mmPageID_firstPart']=='VERI')||(d['mmPageID_firstPart']=='BKCO')||(d['mmPageID_firstPart']=='RBVA')||(d['mmPageID_firstPart']=='RBFP')||(d['mmPageID_firstPart']=='RBSD')||(d['mmPageID_firstPart']=='RBPD')||(d['mmPageID_firstPart']=='RBCO')||(d['mmPageID_firstPart']=='EBPP')||(d['mmPageID_firstPart']=='EBFB')||(d['mmPageID_firstPart']=='EBIC')||(d['mmPageID_firstPart']=='EBRF')||(d['mmPageID_firstPart']=='EBSC')||(d['mmPageID_firstPart']=='EBCO')||(d['mmPageID_firstPart']=='REPD')||(d['mmPageID_firstPart']=='UPVA')||(d['mmPageID_firstPart']=='UPCO')||(d['mmPageID_firstPart']=='UPCH')||(d['mmPageID_firstPart']=='UPCA')||(d['mmPageID_firstPart']=='UPCC')||(d['mmPageID_firstPart']=='ADVS')||(typeof d['mmPageID_SEOpage']!='undefined'&&d['mmPageID_SEOpage']=='yes')||(typeof d['platformId']!='undefined'&&d['platformId']=='adcb2')}catch(e){utag.DB(e)};break;case'150':try{c[150]|=(d['market'].toString().toLowerCase()=='US'.toLowerCase()&&d['language'].toString().toLowerCase()=='en'.toLowerCase())||(d['market'].toString().toLowerCase()=='BR'.toLowerCase()&&d['language'].toString().toLowerCase()=='pt'.toLowerCase())||(d['market'].toString().toLowerCase()=='CA'.toLowerCase()&&d['language'].toString().toLowerCase()=='en'.toLowerCase())||(d['market'].toString().toLowerCase()=='CA'.toLowerCase()&&d['language'].toString().toLowerCase()=='fr'.toLowerCase())||(d['market'].toString().toLowerCase()=='MX'.toLowerCase()&&d['language'].toString().toLowerCase()=='es'.toLowerCase())||(d['market'].toString().toLowerCase()=='AR'.toLowerCase()&&d['language'].toString().toLowerCase()=='es'.toLowerCase())||(d['market'].toString().toLowerCase()=='CO'.toLowerCase()&&d['language'].toString().toLowerCase()=='es'.toLowerCase())||(d['market'].toString().toLowerCase()=='PA'.toLowerCase()&&d['language'].toString().toLowerCase()=='es'.toLowerCase())}catch(e){utag.DB(e)};break;case'155':try{c[155]|=(typeof d['cp.utag_main_utmTermCookie']!='undefined'&&d['cp.utag_main_utmTermCookie'].toString().toLowerCase()=='kayak'.toLowerCase())}catch(e){utag.DB(e)};break;case'162':try{c[162]|=(d['market']=='MX'&&d['language']=='es')}catch(e){utag.DB(e)};break;case'166':try{c[166]|=(d['market'].toString().toLowerCase()=='IT'.toLowerCase()&&d['language'].toString().toLowerCase()=='it'.toLowerCase())}catch(e){utag.DB(e)};break;case'172':try{c[172]|=(d['market']=='IN')}catch(e){utag.DB(e)};break;case'176':try{c[176]|=(typeof d['mmPageID_firstPart']!='undefined'&&d['mmPageID_firstPart'].toString().toLowerCase()!='PURF'.toLowerCase()&&d['mmPageID_firstPart'].toString().toLowerCase()!='EBCO'.toLowerCase()&&d['mmPageID_firstPart'].toString().toLowerCase()!='REPD'.toLowerCase()&&d['mmPageID_firstPart'].toString().toLowerCase()!='RBPD'.toLowerCase()&&d['mmPageID_firstPart'].toString().toLowerCase()!='UPCA'.toLowerCase())}catch(e){utag.DB(e)};break;case'182':try{c[182]|=(typeof d['dom.referrer']=='undefined')||(typeof d['dom.referrer']!='undefined'&&d['dom.referrer'].toString().toLowerCase().indexOf('mycockpit'.toLowerCase())<0&&d['dom.referrer'].toString().toLowerCase().indexOf('flug.check24'.toLowerCase())<0&&d['dom.referrer'].toString().toLowerCase().indexOf('crystal-travel'.toLowerCase())<0&&d['dom.referrer'].toString().toLowerCase().indexOf('misterfly'.toLowerCase())<0&&/^((?!@[A-Za-z0-9.-]+\.).)*$/.test(d['dom.referrer']))}catch(e){utag.DB(e)};break;case'192':try{c[192]|=(typeof d['cp.utag_main_utmMediumCookie']!='undefined'&&d['cp.utag_main_utmMediumCookie'].toString().toLowerCase()=='affiliate'.toLowerCase()&&typeof d['cp.utag_main_utmTermCookie']!='undefined'&&/^artefact/i.test(d['cp.utag_main_utmTermCookie']))||(typeof d['cp.utag_main_utmMediumCookie']!='undefined'&&d['cp.utag_main_utmMediumCookie'].toString().toLowerCase()=='fse'.toLowerCase()&&typeof d['cp.utag_main_utmTermCookie']!='undefined'&&/^artefact/i.test(d['cp.utag_main_utmTermCookie']))}catch(e){utag.DB(e)};break;case'197':try{c[197]|=(typeof d['cp.utag_main_aaaid']!='undefined'&&typeof d['cp.utag_main_aaaid']!='undefined'&&d['cp.utag_main_aaaid']!='')}catch(e){utag.DB(e)};break;case'198':try{c[198]|=(typeof d['transaction.attributes.payment.paymentMethod']!='undefined'&&!/^external voucher/i.test(d['transaction.attributes.payment.paymentMethod']))||(typeof d['transaction.attributes.payment.paymentMethod']!='undefined'&&d['transaction.attributes.payment.paymentMethod'].toString().toLowerCase().indexOf('external voucher'.toLowerCase())<0)||(typeof d['transaction.attributes.payment.paymentMethod']=='undefined')}catch(e){utag.DB(e)};break;case'199':try{c[199]|=(typeof d['cp.utag_main_utmMediumCookie']!='undefined'&&d['cp.utag_main_utmMediumCookie'].toString().toLowerCase()=='fse'.toLowerCase()&&typeof d['cp.utag_main_utmTermCookie']!='undefined'&&/^skyscanner/i.test(d['cp.utag_main_utmTermCookie']))}catch(e){utag.DB(e)};break;case'218':try{c[218]|=(typeof d['platformId']!='undefined'&&d['platformId'].toString().toLowerCase().indexOf('adcb2'.toLowerCase())<0)||(typeof d['platformId']!='undefined'&&d['platformId'].toString().toLowerCase().indexOf('adcb2'.toLowerCase())>-1&&typeof d['page.category.primaryCategory']!='undefined'&&d['page.category.primaryCategory'].toString().toLowerCase()!='Servicing'.toLowerCase()&&d['page.category.primaryCategory'].toString().toLowerCase()!='Invol Refund'.toLowerCase()&&d['page.category.primaryCategory'].toString().toLowerCase()!='Invol Rebooking'.toLowerCase())}catch(e){utag.DB(e)};break;case'22':try{c[22]|=(typeof d['mmPageID_firstPart']!='undefined'&&d['mmPageID_firstPart']=='BKCO')}catch(e){utag.DB(e)};break;case'224':try{c[224]|=(typeof d['page.pageInfo.pageId']!='undefined'&&/(booking confirmation_[a-z]{2}_[a-z]{2}|\/book\/confirmation-new|(ibe\.)*[a-z]{2}\.[a-z]{2}\.fb_(bookingr|confirmation))/.test(d['page.pageInfo.pageId']))||(typeof d['page.pageInfo.pageName']!='undefined'&&/(booking confirmation|confirmation_page|(ibe\.)*fb_(bookingr|confirmation|booking))/.test(d['page.pageInfo.pageName']))||(typeof d['page.pageInfo.pageID']!='undefined'&&typeof d['page.category.primaryCategory']!='undefined'&&d['page.pageInfo.pageID'].toString().toLowerCase()=='confirmation'.toLowerCase()&&d['page.category.primaryCategory'].toString().toLowerCase()=='booking'.toLowerCase())}catch(e){utag.DB(e)};break;case'227':try{c[227]|=(d['cp.channelcloser']=='gfs'&&typeof d['lhg_refundFlag']=='undefined')||(d['cp.channelcloser']=='gfs'&&d['lhg_refundFlag']=='0')}catch(e){utag.DB(e)};break;case'231':try{c[231]|=(d['dom.domain'].toString().toLowerCase().indexOf('www-dcep-qb.lufthansa.com'.toLowerCase())<0&&d['dom.domain'].toString().toLowerCase().indexOf('www-dcep-qa.lufthansa.com'.toLowerCase())<0&&d['dom.domain'].toString().toLowerCase().indexOf('www-dcep-prep.lufthansa.com'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'232':try{c[232]|=(d['dom.domain'].toString().indexOf('miles-and-more.com')<0&&d['dom.domain'].toString().indexOf('enrolment/enrolment-completion.html?client_id')<0)}catch(e){utag.DB(e)};break;case'233':try{c[233]|=(typeof d['platformId']!='undefined'&&d['platformId']=='adcb2')}catch(e){utag.DB(e)};break;case'234':try{c[234]|=(typeof d['platformId']=='undefined')||(d['platformId']!='adcb2')}catch(e){utag.DB(e)};break;case'241':try{c[241]|=(typeof d['conversion.funnel.funnelStep']!='undefined'&&d['conversion.funnel.funnelStep'].toString().toLowerCase()=='bkco'.toLowerCase())||(typeof d['platformId']!='undefined'&&d['platformId']=='adcb2'&&typeof d['page.pageInfo.pageID']!='undefined'&&d['page.pageInfo.pageID'].toString().toLowerCase()=='confirmation'.toLowerCase()&&typeof d['page.category.primaryCategory']!='undefined'&&d['page.category.primaryCategory'].toString().toLowerCase()=='booking'.toLowerCase())}catch(e){utag.DB(e)};break;case'244':try{c[244]|=(typeof d['page_was_reloaded']!='undefined'&&d['page_was_reloaded'].toString().indexOf('true')<0)}catch(e){utag.DB(e)};break;case'245':try{c[245]|=(typeof d['ut.event']!='undefined'&&d['ut.event'].toString().toLowerCase()=='view'.toLowerCase())}catch(e){utag.DB(e)};break;case'248':try{c[248]|=(typeof d['page.pageInfo.pageID']!='undefined'&&d['page.pageInfo.pageID'].toString().toLowerCase().indexOf('FPPOUTBOUND'.toLowerCase())>-1&&typeof d['page.category.primaryCategory']!='undefined'&&d['page.category.primaryCategory'].toString().toLowerCase().indexOf('Booking'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'255':try{c[255]|=(d['dom.domain']!='once.lufthansa.com')}catch(e){utag.DB(e)};break;case'266':try{c[266]|=(d['dom.domain'].toString().indexOf('once')<0)}catch(e){utag.DB(e)};break;case'272':try{c[272]|=(d['tealium_environment'].toString().toLowerCase().indexOf('prod'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'273':try{c[273]|=(typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase().indexOf('homepage'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'279':try{c[279]|=(typeof d['order_id']!='undefined'&&d['order_id'].toString().toLowerCase().indexOf('null'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'286':try{c[286]|=(typeof d['dom.domain']!='undefined'&&d['dom.domain'].toString().toLowerCase().indexOf('once.lufthansa.com'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'287':try{c[287]|=(typeof d['platformId']!='undefined'&&d['platformId'].toString().toLowerCase().indexOf('adcb2'.toLowerCase())>-1&&d['dom.domain'].toString().toLowerCase()=='shop.lufthansa.com'.toLowerCase()&&typeof d['page.category.primaryCategory']!='undefined')}catch(e){utag.DB(e)};break;case'288':try{c[288]|=(d['dom.domain'].toString().toLowerCase()=='www.lufthansa.com'.toLowerCase()&&typeof d['platformId']!='undefined'&&d['platformId'].toString().toLowerCase().indexOf('adcb1'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'294':try{c[294]|=(typeof d['page.pageInfo.country']!='undefined'&&d['page.pageInfo.country'].toString().toLowerCase()=='us'.toLowerCase())}catch(e){utag.DB(e)};break;case'297':try{c[297]|=(typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase()=='contact-center'.toLowerCase())}catch(e){utag.DB(e)};break;case'309':try{c[309]|=(typeof d['platformId']!='undefined'&&d['platformId'].toString().toLowerCase().indexOf('adcb1'.toLowerCase())>-1&&d['dom.domain'].toString().toLowerCase()=='book.lufthansa.com'.toLowerCase()&&d['conversion.funnel.funnelName'].toString().toLowerCase().indexOf('booking flow'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'321':try{c[321]|=(d['dom.domain'].toString().toLowerCase()=='lufthansa.miles-and-more.com'.toLowerCase())}catch(e){utag.DB(e)};break;case'323':try{c[323]|=(typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase()=='support'.toLowerCase())||(typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase()=='help'.toLowerCase())}catch(e){utag.DB(e)};break;case'328':try{c[328]|=(typeof d['ga_eventCategory']!='undefined')||(d['tealium_event'].toString().toLowerCase().indexOf('view'.toLowerCase())>-1&&typeof d['platformId']!='undefined'&&d['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase())}catch(e){utag.DB(e)};break;case'331':try{c[331]|=(typeof d['cp.CONSENTMGR']!='undefined')}catch(e){utag.DB(e)};break;case'336':try{c[336]|=(typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase().indexOf('refund-request'.toLowerCase())>-1)||(typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase().indexOf('refund review page'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'338':try{c[338]|=(typeof d['eventname_destvalue']!='undefined'&&d['eventname_destvalue'].toString().toLowerCase()=='true'.toLowerCase())}catch(e){utag.DB(e)};break;case'346':try{c[346]|=(typeof d['conversion.funnel.funnelName']!='undefined'&&d['conversion.funnel.funnelName'].toString().toLowerCase()=='booking'.toLowerCase())}catch(e){utag.DB(e)};break;case'349':try{c[349]|=(typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase()=='homepage'.toLowerCase())}catch(e){utag.DB(e)};break;case'350':try{c[350]|=(typeof d['page.category.primaryCategory']!='undefined'&&d['page.category.primaryCategory'].toString().toLowerCase()=='rebooking'.toLowerCase())}catch(e){utag.DB(e)};break;case'351':try{c[351]|=(typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase().indexOf('baggage-irregularities'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'353':try{c[353]|=(typeof d['consent_value']!='undefined'&&d['consent_value'].toString().indexOf('s1')>-1)||(typeof d['cp.CONSENTMGR']!='undefined'&&d['cp.CONSENTMGR'].toString().toLowerCase().indexOf('c2:1'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'354':try{c[354]|=(typeof d['page.category.primaryCategory']!='undefined'&&d['page.category.primaryCategory'].toString().toLowerCase()=='rebooking'.toLowerCase())||(typeof d['clean.url']!='undefined'&&d['clean.url'].toString().toLowerCase()=='/manage-booking/confirmation'.toLowerCase())}catch(e){utag.DB(e)};break;case'355':try{c[355]|=(typeof d['conversion.funnel.funnelName']!='undefined'&&d['conversion.funnel.funnelName'].toString().toLowerCase()=='booking'.toLowerCase())}catch(e){utag.DB(e)};break;case'356':try{c[356]|=(typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase().indexOf('Confirmation page'.toLowerCase())>-1&&typeof d['nullcheckerfl']!='undefined'&&d['nullcheckerfl'].toString().toLowerCase().indexOf('false'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'362':try{c[362]|=(typeof d['page.pageInfo.language']!='undefined'&&/en|de|es|it|fr/.test(d['page.pageInfo.language'])&&typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase()!='emergency-contact'.toLowerCase()&&/help|support|contact|travel-information|infohub-travel-safely|refund|cancellation-and-refund|check-in-information/.test(d['page.pageInfo.pageName']))||(typeof d['page.pageInfo.language']!='undefined'&&/en|de|es|it|fr/.test(d['page.pageInfo.language'])&&typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase()!='emergency-contact'.toLowerCase()&&typeof d['pathname_cleaned']!='undefined'&&d['pathname_cleaned'].toString().toLowerCase()=='/booking/services/BAGGAGE'.toLowerCase()&&typeof d['platformId']!='undefined'&&d['platformId'].toString().toLowerCase()!='adcb1'.toLowerCase())||(typeof d['page.pageInfo.language']!='undefined'&&/en|de|es|it|fr/.test(d['page.pageInfo.language'])&&typeof d['page.pageInfo.pageName']!='undefined'&&d['page.pageInfo.pageName'].toString().toLowerCase()!='emergency-contact'.toLowerCase()&&typeof d['platformId']!='undefined'&&d['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase()&&typeof d['cognigy_chat_load']!='undefined'&&d['cognigy_chat_load'].toString().toLowerCase()=='TRUE'.toLowerCase())||(typeof d['page.pageInfo.language']!='undefined'&&/en/.test(d['page.pageInfo.language'])&&typeof d['page.pageInfo.country']!='undefined'&&/lt/.test(d['page.pageInfo.country'])&&typeof d['page.pageInfo.pageName']!='undefined'&&/customer-dashboard/.test(d['page.pageInfo.pageName']))}catch(e){utag.DB(e)};break;case'363':try{c[363]|=(parseFloat(d['transaction.total.priceBreakdown.baseFarePrice.amount_EURO'])>parseFloat(0))}catch(e){utag.DB(e)};break;}}};utag.pre=function(){utag.loader.initdata();utag.pagevars();try{utag.loader.RD(utag.data)}catch(e){utag.DB(e)};utag.loader.loadrules();};utag.loader.GET=function(){utag.cl={'_all_':1};utag.pre();utag.handler.extend=[function(a,b){try{if(b['dom.domain'].toString().toLowerCase().indexOf('miles-and-more.com'.toLowerCase())>-1||b['dom.domain'].toString().toLowerCase()=='qa-www.lufthansa.com'.toLowerCase()||b['dom.domain'].toString().toLowerCase().indexOf('www.lufthansa.com'.toLowerCase())>-1||b['dom.domain'].toString().toLowerCase().indexOf('book.lufthansa.com'.toLowerCase())>-1||b['dom.domain'].toString().toLowerCase()=='book-uat'.toLowerCase()||b['dom.domain'].toString().toLowerCase().indexOf('once.lufthansa.com'.toLowerCase())>-1||(typeof b['platformId']!='undefined'&&b['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase())){if(typeof window.lhgData==='object'&&typeof teal==='object'){if(a==='view'&&typeof teal.flattenArray==='function'){if(window.lhgData.product){teal.flattenArray("layover","product","");teal.flattenArray("segment","product","productInfo");teal.flattenArray("bundle","product","productInfo");}
if(window.lhgData.cart){if(utag_data['dom.domain'].includes("once")&&!window.lhgData.cart.item){window.lhgData.cart.item=[];}
teal.flattenArray("layover","cart.item","");teal.flattenArray("segment","cart.item","productInfo");}
if(window.lhgData.transaction){teal.flattenArray("segment","transaction.item","productInfo");teal.flattenArray("layover","transaction.item","");}}
if(typeof teal.flattenObject==='function'){utag_data=Object.assign(b,teal.flattenObject(window.lhgData));}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var patterns=[{name:'email',pattern:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/},{name:'creditCard',pattern:/\b(?:\d[ -]*?){13,16}\b/},{name:'pnr',pattern:/^[A-Z0-9]{6}$/}];function validateValue(value){return patterns.some(item=>item.pattern.test(value));}
if(utag_data&&utag_data['filter.element.userInput']){var userinputLength=utag_data['filter.element.userInput'].length;for(var i=0;i<userinputLength;i++){if(validateValue(utag_data['filter.element.userInput'][i])){utag_data['filter.element.userInput'][i]="";}}
}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(window.lhgData){utag.DB("adcb1");b['platformId']="adcb1";}else if(window.digitalData){utag.DB("adcb2");b['platformId']="adcb2";}else if(window.utag_data){utag.DB("lh0");b['platformId']="lh0";}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var convertPrices={'product.price.basePrice':1,'cart.price.total':1,'cart.price.subtotal':1,'cart.item.price.basePrice':1,'transaction.total.netFare':1,'transaction.total.opc':1,'transaction.total.conversionFees':1,'transaction.total.fees':1,'transaction.total.promotionDiscount':1,'transaction.total.surcharge':1,'transaction.total.tax':1,'transaction.total.transactionTotal':1,'transaction.item.price.basePrice':1};var convertCurrencies={'currency':1,'cart.price.currency':1,'cart.item.price.currency':1,'product.price.currency':1,'transaction.total.currency':1,'transaction.item.price.currency':1};var orig_suffix='_ORIG';var eur_code='eur';if(typeof utag_data.exchangeRate!=='undefined'&&utag_data.exchangeRate!==''){var doArr;var flag=false;var xchange=parseFloat(utag_data.exchangeRate);if(utag_data.exchangeRate==='1'){var notEUR=false;}else{var notEUR=true;}
for(var key in convertCurrencies){if(convertCurrencies.hasOwnProperty(key)&&utag_data[key]){if(typeof utag_data[key]==='object'){doArr=false;if(typeof utag_data[key+orig_suffix]!=='object'||(typeof utag_data[key+orig_suffix]==='object'&&utag_data[key+orig_suffix].length!==utag_data[key].length)){doArr=true;utag_data[key+orig_suffix]=[];}
var len=utag_data[key].length;for(var i=0;i<len;i++){if(doArr){utag_data[key+orig_suffix].push(utag_data[key][i]);}
if(notEUR&&utag_data[key+orig_suffix][i]===utag_data[key][i]){utag_data[key][i]=eur_code;}}}else{if(typeof utag_data[key+orig_suffix]!=='string'){utag_data[key+orig_suffix]=utag_data[key];}
if(notEUR&&utag_data[key+orig_suffix]===utag_data[key]){utag_data[key]=eur_code;}}}}
for(var key in convertPrices){if(convertPrices.hasOwnProperty(key)&&utag_data[key]){if(typeof utag_data[key]==='object'){doArr=false;if(typeof utag_data[key+orig_suffix]!=='object'||(typeof utag_data[key+orig_suffix]==='object'&&utag_data[key+orig_suffix].length!==utag_data[key].length)){doArr=true;utag_data[key+orig_suffix]=[];}
var len=utag_data[key].length;for(var i=0;i<len;i++){if(typeof utag_data[key][i]==='number')utag_data[key][i]=utag_data[key][i].toString();if(utag_data[key][i]==='')utag_data[key][i]='0.00';if(utag_data[key][i].indexOf('.')===-1)utag_data[key][i]=utag_data[key][i]+'.00';if(doArr){utag_data[key+orig_suffix].push(utag_data[key][i]);}
if(notEUR&&utag_data[key+orig_suffix][i]===utag_data[key][i]){utag_data[key][i]=(utag_data[key][i]*xchange).toFixed(2);flag=true;}}}else{if(typeof utag_data[key]==='number')utag_data[key]=utag_data[key].toString();if(utag_data[key]==='')utag_data[key]='0.00';if(utag_data[key].indexOf('.')===-1)utag_data[key]=utag_data[key]+'.00';if(typeof utag_data[key+orig_suffix]==='undefined'){utag_data[key+orig_suffix]=utag_data[key];}
if(notEUR&&utag_data[key+orig_suffix]===utag_data[key]){utag_data[key]=(utag_data[key]*xchange).toFixed(2);flag=true;}}}}
if(flag)utag_data.currency_was_converted='yes';}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){function concatCats(path){try{if(utag_data[path+'.category.category1']&&utag_data[path+'.category.category1'].length>0){var catAll=[],cat1=utag_data[path+'.category.category1'],cat2=utag_data[path+'.category.category2'],cat3=utag_data[path+'.category.category3'],cat4=utag_data[path+'.category.category4'],cat5=utag_data[path+'.category.category5'];if(typeof cat1==='object'){for(var i=0,len=cat1.length;i<len;i++){var fullCat=[cat1[i]];if(typeof cat2[i]==='string'&&cat2[i]!=='')fullCat.push(cat2[i]);if(typeof cat3[i]==='string'&&cat3[i]!=='')fullCat.push(cat3[i]);if(typeof cat4[i]==='string'&&cat4[i]!=='')fullCat.push(cat4[i]);if(typeof cat5[i]==='string'&&cat5[i]!=='')fullCat.push(cat5[i]);catAll.push(fullCat.join('/'));}}else if(typeof cat1==='string'){var fullCat=[cat1];if(typeof cat2==='string'&&cat2!=='')fullCat.push(cat2);if(typeof cat3==='string'&&cat3!=='')fullCat.push(cat3);if(typeof cat4==='string'&&cat4!=='')fullCat.push(cat4);if(typeof cat5==='string'&&cat5!=='')fullCat.push(cat5);catAll.push(fullCat.join('/'));}
utag_data[path+'.categoryAll']=catAll;}}catch(e){}}
concatCats('product');concatCats('cart.item');concatCats('transaction.item');concatCats('filter');}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(utag_data['conversion.funnel.funnelStep']==='upco'){if(utag_data['transaction.total.currency_ORIG']==='miles'){utag_data['transaction.total.currency']='eur';utag_data['transaction.total.transactionTotal']="0.00";utag_data['transaction.total.transactionTotal_ORIG']="0.00";if(typeof utag_data['transaction.transactionId']!=='undefined')delete utag_data['transaction.transactionId'];}
if(typeof utag_data['transaction.item.price.currency_ORIG']==='object'&&utag_data['transaction.item.price.currency_ORIG'].length>0&&utag_data['transaction.item.price.currency_ORIG'][0]==='miles'){for(var i=0;i<utag_data['transaction.item.price.currency'].length;i++){utag_data['transaction.item.price.currency'][i]='eur';utag_data['transaction.item.price.basePrice'][i]='0.00';utag_data['transaction.item.price.basePrice_ORIG'][i]='0.00';}}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){utag.DB('utag_data Init: start');try{var na_string='(not set)';var no_datalayer='(no lhgdata)';var orig_suffix='_ORIG';var tmp;var getRandom=function(min,max){var r;do{r=Math.random();}
while(r==1.0);return min+parseInt(r*(max-min+1));};utag_data._random=getRandom(10000,99999);utag_data._one=1;utag_data._blank='';utag_data.portal='lh';utag_data['dom.domain']=utag_data['dom.domain']||location.hostname;utag_data['dom.referrer']=utag_data['dom.referrer']||document.referrer;utag_data['dom.title']=utag_data['dom.title']||""+document.title;utag_data['dom.query_string']=utag_data['dom.query_string']||(""+location.search).substring(1);utag_data['dom.hash']=utag_data['dom.hash']||(""+location.hash).substring(1);utag_data['dom.url']=utag_data['dom.url']||""+document.URL;utag_data['dom.pathname']=utag_data['dom.pathname']||""+location.pathname;utag_data['dom.viewport_height']=utag_data['dom.viewport_height']||(window.innerHeight||(d.documentElement?d.documentElement.clientHeight:960));utag_data['dom.viewport_width']=utag_data['dom.viewport_width']||(window.innerWidth||(d.documentElement?d.documentElement.clientWidth:960));utag_data.pathname_cleaned=(utag_data['dom.pathname'].indexOf(';jsessionid=')>-1)?utag_data['dom.pathname'].split(';jsessionid=')[0]:utag_data['dom.pathname'];utag_data.mmPageID_firstPart=window.mmPageID?window.mmPageID.split('_')[0]:'';}catch(e){utag.DB(e)};try{if(utag_data['page.pageInfo.country']){utag_data.market=utag_data['page.pageInfo.country'].toUpperCase();}else if(utag_data.wt_dcsext_market){utag_data.market=utag_data.wt_dcsext_market.toUpperCase();}else if(utag_data['meta.X-Portal-Site']){utag_data.market=utag_data['meta.X-Portal-Site'].toUpperCase();}else if(window.mmPageID&&window.mmPageID.split('_').length>=3){tmp=window.mmPageID.split('_');tmp=tmp[tmp.length-2].toUpperCase();utag_data.market=tmp.length===2?tmp:na_string;}else{utag_data.market=na_string;}
if(utag_data.market==='UK')utag_data.market='GB';if(typeof utag_data.market==='string')utag_data['page.pageInfo.country']=utag_data.market.toLowerCase();if(utag_data['page.pageInfo.language']){utag_data.language=utag_data['page.pageInfo.language'].toLowerCase();}else if(typeof utag_data.wt_dcsext_language==='string'){utag_data.language=utag_data.wt_dcsext_language.split('_')[0].toLowerCase();}else if(utag_data['meta.X-Portal-Language']){utag_data.language=utag_data['meta.X-Portal-Language'].toLowerCase();}else if(window.mmPageID&&window.mmPageID.split('_').length>=3){tmp=window.mmPageID.split('_');tmp=tmp[tmp.length-1].toLowerCase();utag_data.language=tmp.length===2?tmp:na_string;}else{utag_data.language=na_string;}
if(utag_data.language==='gb')utag_data.language='en';else if(utag_data.language==='ka')utag_data.language='hk';else if(utag_data.language==='mi')utag_data.language='zh';if(typeof utag_data.language==='string')utag_data['page.pageInfo.language']=utag_data.language.toLowerCase();var currentDate=new Date();var s_c_day=("0"+currentDate.getDate()).slice(-2);var s_c_month=("0"+(currentDate.getMonth()+1)).slice(-2);var s_c_year=currentDate.getFullYear().toString();utag_data.date_of_bookingDMY=s_c_day+s_c_month+s_c_year;utag_data.date_of_booking=s_c_year+'-'+s_c_month+'-'+s_c_day;utag_data.date_of_bookingYMD=s_c_year+s_c_month+s_c_day;utag_data.timestamp=Date.now().toString();utag_data.pagetype='';var pageName=utag_data['page.pageInfo.pageName']||'';utag_data.current_page=pageName;if(window.mmPageID){if(window.mmPageID.indexOf('_bS-')===2){utag_data.mmPageID_SEOpage='yes';utag_data.pagetype="parser";utag_data.current_page="SEO page";}else{utag_data.mmPageID_SEOpage='no';}}}catch(e){utag.DB(e)};try{utag_data.personalizationConsent='0';var consent_cookie=window.utag.gdpr.getCookieValues()||{};if(consent_cookie&&consent_cookie.consent=='true'){if(consent_cookie.c4==='1')utag_data.personalizationConsent='1';}}catch(e){utag.DB(e)};if(utag_data['dom.domain']==='www.lufthansa.com'||utag_data['dom.domain']==='www-dcep-prep.lufthansa.com'||utag_data['dom.domain']==='www-dcep-qa.lufthansa.com'){try{if(pageName==='homepage')utag_data.pagetype='home';}catch(e){utag.DB(e)};}else{try{var step=false,legs=-1,flights=-1;if(utag_data['transaction.item.category.category1']){step='transaction';}else if(utag_data['cart.item.category.category1']){step='cart';}else if(utag_data['filter.element.userInput']){step='filter';}
var LCabName={'economy':[1,'demall'],'premium economy':[3,'demall'],'business':[4,'decall'],'first':[5,'defall']};if(utag_data.mmPageID_firstPart==='FOFP'||utag_data.mmPageID_firstPart==='FFPP'||utag_data.mmPageID_firstPart==='FOMS'||utag_data.mmPageID_firstPart==='FOSD'){utag_data.pagetype='searchresults';}else if(utag_data.mmPageID_firstPart==='BKCO'){utag_data.pagetype="purchase";}else{if(window.location.pathname.indexOf('air-lh/servicing/')>-1){utag_data.pagetype="product";}else{utag_data.pagetype="cart";}}}catch(e){utag.DB(e)};try{if(typeof(clientSideData)!=='undefined'&&typeof(clientSideData.PAGE)!=='undefined'&&typeof(clientSideData.PAGE.DATA)!=='undefined'){if(utag_data.mmPageID_firstPart==='BKCO')utag_data.booking_type=clientSideData.PAGE.DATA.IS_BOOKING_ON_HOLD?'boh':'sale';if(clientSideData.PAGE.DATA.FLIGHT_IS_CONTINENTAL)utag_data.BFT='K';if(clientSideData.PAGE.DATA.FLIGHT_IS_DOMESTIC)utag_data.BFT='D';if(clientSideData.PAGE.DATA.FLIGHT_IS_INTERNATIONAL)utag_data.BFT='IK';if(step==='filter'){tmp=clientSideData.PAGE.DATA.TRIP_TYPE||'';if(tmp==='R')utag_data.trip_type='rt';else if(tmp==='O')utag_data.trip_type='ow';else if(tmp==='M')utag_data.trip_type='ms';}
}else{if(utag_data.wt_dcsext_bft)utag_data.BFT=utag_data.wt_dcsext_bft.replace(/;/g,'|');if(step==='filter'&&utag_data.wt_dcsext_bftriptype){tmp=utag_data.wt_dcsext_bftriptype||'';if(tmp==='RT')utag_data.trip_type='rt';else if(tmp==='OW')utag_data.trip_type='ow';else if(tmp==='MS')utag_data.trip_type='ms';}}}catch(e){utag.DB(e)};if(step&&(step==='cart'||step==='transaction')){try{if(utag_data[step+'.item.productInfo.segment.number']){var highest=0;var index;var len=utag_data[step+'.item.productInfo.segment.number'].length;for(var i=0;i<len;i++){index=parseInt(utag_data[step+'.item.productInfo.segment.number'][i]);if(index>highest)highest=index;}
legs=highest;utag_data.legs_amt=legs.toString();}
if(utag_data[step+'.item.productInfo.segment.flightAssociation']){var highest=0;var index;var len=utag_data[step+'.item.productInfo.segment.flightAssociation'].length;for(var i=0;i<len;i++){index=parseInt(utag_data[step+'.item.productInfo.segment.flightAssociation'][i]);if(index>highest)highest=index;}
flights=highest;}
if(utag_data[step+'.item.productInfo.segment.origin']&&utag_data[step+'.item.productInfo.segment.destination']){tmp='';var ori=[],des=[];for(var i=0;i<legs;i++){tmp+=utag_data[step+'.item.productInfo.segment.origin'][i]+'-'+utag_data[step+'.item.productInfo.segment.destination'][i]+';';ori.push(utag_data[step+'.item.productInfo.segment.origin'][i]);des.push(utag_data[step+'.item.productInfo.segment.destination'][i]);}
utag_data.flight_itinery=tmp.slice(0,-1);utag_data.origins=ori.join('|');utag_data.destinations=des.join('|');}
if(utag_data[step+'.item.productInfo.segment.oCarrier']){tmp=[];for(var i=0;i<legs;i++){tmp.push(utag_data[step+'.item.productInfo.segment.oCarrier'][i]);}
utag_data.carrier_list=tmp.join('|');}}catch(e){utag.DB(e)};try{if(utag_data[step+'.item.attributes.paxAdult']){utag_data.pax_adult_amt=utag_data[step+'.item.attributes.paxAdult'][0];}
if(utag_data[step+'.item.attributes.paxChild']){utag_data.pax_child_amt=utag_data[step+'.item.attributes.paxChild'][0];}
if(utag_data[step+'.item.attributes.paxInfant']){utag_data.pax_baby_amt=utag_data[step+'.item.attributes.paxInfant'][0];}
utag_data.pax_amt=(parseInt(utag_data.pax_adult_amt)+parseInt(utag_data.pax_child_amt)+parseInt(utag_data.pax_baby_amt)).toString();utag_data.tickets=(parseInt(utag_data.pax_adult_amt)+parseInt(utag_data.pax_child_amt)).toString();}catch(e){utag.DB(e)};try{if(utag_data[step+'.item.productInfo.departure']){utag_data.outboundDate=utag_data[step+'.item.productInfo.departure'][0].split(' ')[0];if(flights&&flights>1){utag_data.inboundDate=utag_data[step+'.item.productInfo.departure'][flights-1].split(' ')[0];}}}catch(e){utag.DB(e)};try{if(utag_data[step+'.item.productInfo.origin']){utag_data.departure_airport=utag_data[step+'.item.productInfo.origin'][0];}
if(utag_data[step+'.item.productInfo.destination']){utag_data.destination_airport=utag_data[step+'.item.productInfo.destination'][0];}}catch(e){utag.DB(e)};try{if(utag_data[step+'.item.productInfo.segment.class']){tmp=[];for(var i=0;i<legs;i++){tmp.push(utag_data[step+'.item.productInfo.segment.class'][i]);}
utag_data.booking_class_detail=tmp.join('|');}
if(utag_data[step+'.item.productInfo.bundle']){tmp=[];for(var i=0;i<flights;i++){tmp.push(utag_data[step+'.item.productInfo.bundle'][i]);}
utag_data.cabin_class_detail=tmp.join('|');var len=tmp.length;var newCab;var cleanCabs=[];var highestCab='';for(var i=0;i<len;i++){newCab=tmp[i].toLowerCase();if(newCab.indexOf('premium economy')>-1)cleanCabs.push('premium economy');else if(newCab.indexOf('economy')>-1)cleanCabs.push('economy');else if(newCab.indexOf('business')>-1)cleanCabs.push('business');else if(newCab.indexOf('first')>-1)cleanCabs.push('first');}
len=cleanCabs.length;if(len>0){highestCab=cleanCabs[0];for(var i=1;i<len;i++){newCab=cleanCabs[i];if(LCabName[newCab][0]>LCabName[highestCab][0])highestCab=newCab;}
utag_data.cabin_class=highestCab;utag_data.booking_class=LCabName[highestCab][1];}}}catch(e){utag.DB(e)};try{if(utag_data[step+'.item.productInfo.farebase']){var y_lgt=0;var n_lgt=0;tmp=[];for(var i=0;i<flights;i++){if(utag_data[step+'.item.productInfo.farebase'][i].indexOf('lgt')>-1)y_lgt++;else n_lgt++;tmp.push(utag_data[step+'.item.productInfo.farebase'][i]);}
if(y_lgt&&n_lgt)utag_data.bag_status=1;if(y_lgt&&!n_lgt)utag_data.bag_status=2;if(!y_lgt&&n_lgt)utag_data.bag_status=3;utag_data.farebase_codes=tmp.join('|');}}catch(e){utag.DB(e)};try{if(utag_data[step+'.item.categoryAll']){tmp=utag_data[step+'.item.categoryAll'][0]||'';if(tmp.indexOf('roundtrip')>=0){utag_data.trip_type='rt';}else if(tmp.indexOf('oneway')>=0){utag_data.trip_type='ow';}else if(tmp.indexOf('openjaw')>=0){utag_data.trip_type='ms';}else if(tmp.indexOf('multistop')>=0){utag_data.trip_type='ms';}else{utag_data.trip_type='na';}}}catch(e){utag.DB(e)};try{if(utag_data['cart.item.price.currency']&&utag_data['cart.price.currency'+orig_suffix]){utag_data.currency=utag_data['cart.price.currency'+orig_suffix];}else if(utag_data['transaction.total.currency'+orig_suffix]){utag_data.currency=utag_data['transaction.total.currency'+orig_suffix];}
if(utag_data['transaction.total.netFare'])utag_data.BFNetfareEUR=parseFloat(utag_data['transaction.total.netFare']).toFixed(2);if(utag_data['transaction.total.netFare'+orig_suffix])utag_data.BFNetfare=parseFloat(utag_data['transaction.total.netFare'+orig_suffix]).toFixed(2);if(utag_data['transaction.total.transactionTotal'])utag_data.revenueEUR=parseFloat(utag_data['transaction.total.transactionTotal']).toFixed(2);else if(utag_data['cart.price.total']&&utag_data['cart.price.total']!=='0.00')utag_data.revenueEUR=parseFloat(utag_data['cart.price.total']).toFixed(2);if(utag_data['transaction.total.transactionTotal'+orig_suffix])utag_data.revenue=parseFloat(utag_data['transaction.total.transactionTotal'+orig_suffix]).toFixed(2);else if(utag_data['cart.price.total'+orig_suffix]&&utag_data['cart.price.total'+orig_suffix]!=='0.00')utag_data.revenue=parseFloat(utag_data['cart.price.total'+orig_suffix]).toFixed(2);if(utag_data['transaction.total.fees'])utag_data.TSCEUR=parseFloat(utag_data['transaction.total.fees']).toFixed(2);if(utag_data['transaction.total.fees'+orig_suffix])utag_data.TSC=parseFloat(utag_data['transaction.total.fees'+orig_suffix]).toFixed(2);if(utag_data['transaction.total.opc'])utag_data.OPCEUR=parseFloat(utag_data['transaction.total.opc']).toFixed(2);if(utag_data['transaction.total.opc'+orig_suffix])utag_data.OPC=parseFloat(utag_data['transaction.total.opc'+orig_suffix]).toFixed(2);if(utag_data['transaction.total.tax'])utag_data.taxEUR=parseFloat(utag_data['transaction.total.tax']).toFixed(2);if(utag_data['transaction.total.tax'+orig_suffix])utag_data.tax=parseFloat(utag_data['transaction.total.tax'+orig_suffix]).toFixed(2);if(utag_data['transaction.total.surcharge'])utag_data.YQEUR=parseFloat(utag_data['transaction.total.surcharge']).toFixed(2);if(utag_data['transaction.total.surcharge'+orig_suffix])utag_data.YQ=parseFloat(utag_data['transaction.total.surcharge'+orig_suffix]).toFixed(2);if(typeof(utag_data.revenue)!=='undefined'&&parseInt(utag_data.revenue)===parseInt(utag_data.revenue)){utag_data.BFRev_INT=parseInt(utag_data.revenue).toString();}
if(typeof(utag_data.revenueEUR)!=='undefined'&&parseInt(utag_data.revenueEUR)===parseInt(utag_data.revenueEUR)){utag_data.BFRev_INTEUR=parseInt(utag_data.revenueEUR).toString();}
if(utag_data.TSCEUR&&utag_data.taxEUR&&utag_data['transaction.total.conversionFees']&&utag_data.YQEUR){tmp=parseFloat(utag_data.TSCEUR)+parseFloat(utag_data.taxEUR)+parseFloat(utag_data['transaction.total.conversionFees'])+parseFloat(utag_data.YQEUR);utag_data.taxesEUR=tmp.toFixed(2);}
if(utag_data.TSC&&utag_data.tax&&utag_data['transaction.total.conversionFees'+orig_suffix]&&utag_data.YQ){tmp=parseFloat(utag_data.TSC)+parseFloat(utag_data.tax)+parseFloat(utag_data['transaction.total.conversionFees'+orig_suffix])+parseFloat(utag_data.YQ);utag_data.taxes=tmp.toFixed(2);}}catch(e){utag.DB(e)};try{if(utag_data.BFNetfareEUR&&utag_data.revenueEUR){var net=parseFloat(utag_data.BFNetfareEUR);var rev=parseFloat(utag_data.revenueEUR);if(net===net&&rev===rev){if(net>=rev)utag_data.netfare_error_blocker='yes';}}}catch(e){utag.DB(e)};try{var anc_list=[];var anc_price_list=[];if(utag_data[step+'.item.category.category1']){var flightPrice=0;var ca=utag_data[step+'.item.category.category1'];for(var i=0;i<ca.length;i++){if(ca[i]==='flight'){flightPrice+=parseFloat(utag_data[step+'.item.price.basePrice'][i]);}}
if(flightPrice>0){anc_list.push('flight');anc_price_list.push(flightPrice.toFixed(2));}}
if(utag_data[step+'.item.categoryAll']){var ancNames={'ancillary/non flight related/travel services/insurance':'insu','ancillary/non flight related/travel services/car':'car','ancillary/flight related/asr':'seat','ancillary/flight related/upgrade/atc upgrade':'upgrade','ancillary/flight related/upgrade/cash upgrade':'upgrade','ancillary/flight related/baggage':'baggage','ancillary/flight related/other inflight services/catering':'meal','ancillary/flight related/other ground services/ground transport/airport transfer':'railAndFly'};var ancPrices={'insu':[0,0],'car':[0,0],'seat':[0,0,0,0],'upgrade':[0,0],'baggage':[0,0],'meal':[0,0],'railAndFly':[0,0]};utag_data.anc_insu='no';utag_data.anc_car='no';utag_data.anc_seat='no';utag_data.anc_upgrade='no';utag_data.anc_baggage='no';utag_data.anc_meal='no';utag_data.anc_railAndFly='no';var key,pv=utag_data[step+'.item.attributes.variant'],ca=utag_data[step+'.item.categoryAll'];for(var i=0;i<ca.length;i++){if(ca[i]in ancNames){key=ancNames[ca[i]];utag_data['anc_'+key]='yes';tmp=parseFloat(utag_data[step+'.item.price.basePrice'][i]);ancPrices[key][0]+=tmp;ancPrices[key][1]+=1;if(key==='seat'){if(tmp>0){ancPrices[key][2]+=1;if(pv&&pv[i]){if(pv[i]!=='')pv[i]+=' ';pv[i]+='chargeable';}}else{ancPrices[key][3]+=1;if(pv&&pv[i]){if(pv[i]!=='')pv[i]+=' ';pv[i]+='free';}}}}}
if(utag_data.anc_seat==='yes'){utag_data.anc_price_seat=ancPrices['seat'][0].toFixed(2);utag_data.anc_amt_seat=ancPrices['seat'][1];utag_data.anc_amt_seat_cost=ancPrices['seat'][2];utag_data.anc_amt_seat_free=ancPrices['seat'][3];anc_list.push('seat');anc_price_list.push(utag_data.anc_price_seat);}
if(utag_data.anc_baggage==='yes'){utag_data.anc_price_baggage=ancPrices['baggage'][0].toFixed(2);utag_data.anc_amt_baggage=ancPrices['baggage'][1];anc_list.push('baggage');anc_price_list.push(utag_data.anc_price_baggage);}
if(utag_data.anc_upgrade==='yes'){utag_data.anc_price_upgrade=ancPrices['upgrade'][0].toFixed(2);utag_data.anc_amt_upgrade=ancPrices['upgrade'][1];anc_list.push('upgrade');anc_price_list.push(utag_data.anc_price_upgrade);}
if(utag_data.anc_insu==='yes'){utag_data.anc_price_insu=ancPrices['insu'][0].toFixed(2);utag_data.anc_amt_insu=ancPrices['insu'][1];anc_list.push('insu');anc_price_list.push(utag_data.anc_price_insu);}
if(step==='transaction')utag_data.insu=utag_data.anc_insu;if(utag_data.anc_car==='yes'){utag_data.anc_price_car=ancPrices['car'][0].toFixed(2);utag_data.anc_amt_car=ancPrices['car'][1];anc_list.push('car');anc_price_list.push(utag_data.anc_price_car);}
if(utag_data.anc_meal==='yes'){utag_data.anc_price_meal=ancPrices['meal'][0].toFixed(2);utag_data.anc_amt_meal=ancPrices['meal'][1];anc_list.push('meal');anc_price_list.push(utag_data.anc_price_meal);}
if(utag_data.anc_railAndFly==='yes'){utag_data.anc_price_railAndFly=ancPrices['railAndFly'][0].toFixed(2);utag_data.anc_amt_railAndFly=ancPrices['railAndFly'][1];anc_list.push('railAndFly');anc_price_list.push(utag_data.anc_price_railAndFly);}}
utag_data.anc_list=anc_list.join(';');utag_data.anc_price_list=anc_price_list.join(';');}catch(e){utag.DB(e)};}else if(step&&step==='filter'){try{legs=0;if(utag_data['filter.element.elementName']&&utag_data['filter.element.userInput']){var filter={};var len=Math.min(utag_data['filter.element.elementName'].length,utag_data['filter.element.userInput'].length);for(var i=0;i<len;i++){filter[utag_data['filter.element.elementName'][i]]=utag_data['filter.element.userInput'][i];}
utag_data.flight_itinery=filter['origin']+'-'+filter['destination'];utag_data.pax_adult_amt=filter['adults'];utag_data.pax_child_amt=filter['children'];utag_data.pax_baby_amt=filter['infants'];utag_data.pax_amt=(parseInt(utag_data.pax_adult_amt)+parseInt(utag_data.pax_child_amt)+parseInt(utag_data.pax_baby_amt)).toString();utag_data.outboundDate=filter['outbound-date'];if(filter['inbound-date']){utag_data.inboundDate=filter['inbound-date'];}
utag_data.departure_airport=filter['origin'];utag_data.destination_airport=filter['destination'];utag_data.cabin_class=filter['class']?filter['class'].toLowerCase():filter['class'];if(utag_data.cabin_class!==undefined)
{utag_data.booking_class=LCabName[utag_data.cabin_class][1]}
else
{utag_data.booking_class='';}
utag_data.cabin_class_detail='';utag_data.booking_class_detail='';}}catch(e){utag.DB(e)};}
try{if(typeof utag_data.outboundDate==='string'&&utag_data.outboundDate.length==10){var s_o_day=utag_data.outboundDate.substr(8,2);var s_o_month=utag_data.outboundDate.substr(5,2);var s_o_year=utag_data.outboundDate.substr(0,4);utag_data.outboundDateYDM=s_o_year+s_o_month+s_o_day;utag_data.outboundDateMY=s_o_month+'-'+s_o_year;utag_data.outboundDateDMY=s_o_day+'-'+s_o_month+'-'+s_o_year;utag_data.outboundDateDMYdot=s_o_day+'.'+s_o_month+'.'+s_o_year;}
if(typeof utag_data.inboundDate==='string'&&utag_data.inboundDate.length==10){var s_i_day=utag_data.inboundDate.substr(8,2);var s_i_month=utag_data.inboundDate.substr(5,2);var s_i_year=utag_data.inboundDate.substr(0,4);utag_data.inboundDateYMD=s_i_year+s_i_month+s_i_day;utag_data.inboundDateDMY=s_i_day+'-'+s_i_month+'-'+s_i_year;}
if(s_o_year&&s_c_year){var depDate=new Date(s_o_year,s_o_month-1,s_o_day);var bookDate=new Date(s_c_year,s_c_month-1,s_c_day);var diffDays=Math.round(Math.abs((bookDate.getTime()-depDate.getTime())/(24*60*60*1000)));utag_data.daysUntilDep=diffDays;if(s_i_year){var retDate=new Date(s_i_year,s_i_month-1,s_i_day);diffDays=Math.round(Math.abs((depDate.getTime()-retDate.getTime())/(24*60*60*1000)));utag_data.trip_duration=diffDays;var weekday=depDate.getDay();if(utag_data.daysUntilDep>=42){if(utag_data.trip_duration>=3){utag_data.estimated_trip_reason='leis';}else{if(weekday==5||weekday==6){utag_data.estimated_trip_reason='leis';}else{utag_data.estimated_trip_reason='corp';}}}else{if(utag_data.trip_duration>=7){utag_data.estimated_trip_reason='leis';}else{utag_data.estimated_trip_reason='corp';}}}}}catch(e){utag.DB(e)};try{if(utag_data.mmPageID_firstPart==='BKCO')utag_data.confirmation_type=utag_data.booking_type;else if(utag_data.mmPageID_firstPart==='RBCO'||(utag_data.mmPageID_firstPart==='BKGD'&&utag_data['transaction.transactionId']&&utag_data['transaction.transactionId']!==''))utag_data.confirmation_type='Rebook';else if(utag_data.mmPageID_firstPart==='RFCO')utag_data.confirmation_type='Refund';else if(utag_data.mmPageID_firstPart==='REPC')utag_data.confirmation_type='ReservationConfirmation';else if(utag_data.mmPageID_firstPart==='UPCO'||utag_data.mmPageID_firstPart==='UPCC')utag_data.confirmation_type='Upgrade';}catch(e){utag.DB(e)};}
try{if(utag_data.pagetype==='')utag_data.pagetype='product';var re_domain=new RegExp("^\\w+:\/\/([^\/:]+)[\\w\\W]*$");utag_data.refdomain=utag_data['dom.referrer'].replace(re_domain,'$1');if(utag_data.refdomain==='-')utag_data.refdomain='';if(typeof jQuery==='function'&&typeof jQuery.fn!=='undefined'&&typeof jQuery.fn.jquery!=='undefined'){utag_data.jQueryVersion=jQuery.fn.jquery;}}catch(e){utag.DB(e)};try{if(typeof utag_data['qp.WT.mc_id']==='string')utag_data.wt_campaign=utag_data['qp.WT.mc_id'];else if(typeof utag_data['qp.wt.mc_id']==='string')utag_data.wt_campaign=utag_data['qp.wt.mc_id'];if(typeof utag_data['qp.utm_campaign']==='string')utag_data.utm_campaign=utag_data['qp.utm_campaign'];if(typeof utag_data['qp.utm_content']==='string')utag_data.utm_content=utag_data['qp.utm_content'];if(typeof utag_data['qp.utm_source']==='string')utag_data.utm_source=utag_data['qp.utm_source'];if(typeof utag_data['qp.utm_medium']==='string')utag_data.utm_medium=utag_data['qp.utm_medium'];if(typeof utag_data['qp.utm_term']==='string')utag_data.utm_term=utag_data['qp.utm_term'];if(typeof utag_data['qp.aaaid']==='string')utag_data.aaaid=utag_data['qp.aaaid'];if(typeof utag_data['qp.internalcampaign']==='string')utag_data.intcamp=utag_data['qp.internalcampaign'];if(typeof utag_data['qp.intcamp']==='string')utag_data.intcamp=utag_data['qp.intcamp'];if(typeof utag_data['qp.ses_mark']==='string')utag_data.ses_mark=utag_data['qp.ses_mark'];if(typeof(window.dwmwr)!=='undefined'&&window.dwmwr!==''){utag.DB('dwmwr:');utag.DB(window.dwmwr);var erg=/utm_campaign=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.utm_campaign=erg[1];erg=/utm_source=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.utm_source=erg[1];erg=/utm_medium=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.utm_medium=erg[1];erg=/utm_term=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.utm_term=erg[1];erg=/aaaid=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.aaaid=erg[1];erg=/utm_content=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.utm_content=erg[1];erg=/WT\.mc_id=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.wt_campaign=erg[1];erg=/MSE_LH\.clickid=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.mse_clickid=erg[1];erg=/internalcampaign=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.intcamp=erg[1];erg=/intcamp=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.intcamp=erg[1];erg=/ses_mark=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.ses_mark=erg[1];}else{utag.DB('dwmwr NOT found');}}catch(e){utag.DB(e)};utag.DB('utag_data Init: end');}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(utag_data['dom.domain']==='app.lufthansa.com'||(utag_data['dom.pathname']&&utag_data['dom.pathname'].indexOf('.solo_continue')>-1)||(typeof utag_data['meta.lh_app_referrer']==='string'&&utag_data['meta.lh_app_referrer']!=='')){b.app_webview=utag_data.app_webview='yes';}else{b.app_webview=utag_data.app_webview='no';}
b.group_app='no';if(b['js_page.navigator.userAgent']&&b['js_page.navigator.userAgent']!==''){if(b['js_page.navigator.userAgent'].includes('GROUPAPP')){b.app_webview='yes';b.group_app='yes';}}
if(b['dom.domain']!==undefined&&b['dom.query_string']!==undefined){if(b['dom.domain'].indexOf('miles-and-more.com')>-1&&b['dom.query_string'].indexOf('groupapp')>-1){b.app_webview='yes';b.group_app='yes';}}
if(b.app_webview==='yes'){b.ga_datasource='app';if(typeof b['qp.session_id']==='string'&&b['qp.session_id']!==''){b.ga_webview_session=b['qp.session_id'];}}else{b.ga_datasource='web';}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var blockedHostnames={'wav.lufthansa.com':1,'www-dcep-prep.lufthansa.com':1,'www-dcep-qa.lufthansa.com':1,'pcm.uat.lufthansa.com':1,'lh-ncebpm1065aph01.etv.nce.amadeus.net':1,'lufthansa-ncebpm1307aph01.etv.nce.amadeus.net':1,'lh-ncebpm1393aph01.etv.nce.amadeus.net':1,'localhost':1,'02.uat2.aereww.amadeus.com':1,'acpt-1.lh.sapient.de':1,'acpt-2.lh.sapient.de':1,'acpt-3.lh.sapient.de':1,'acpt1-mobile.lufthansa.com':1,'acpt2-mobile.lufthansa.com':1,'acpt3-mobile.lufthansa.com':1,'app-acpt-2.lh.sapient.de':1,'app-acpt-3.lh.sapient.de':1,'app-int-3.lh.sapient.de':1,'app-int-4.lh.sapient.de':1,'acpt2-app.lufthansa.com':1,'acpt3-app.lufthansa.com':1,'an.yandex.ru':1,'author-prod.dcep.dlh.de':1,'author-qa.dcep.dlh.de':1,'dev1.dcep.lufthansa.com':1,'int-1.lh.sapient.de':1,'int-2.lh.sapient.de':1,'int-3.lh.sapient.de':1,'int-4.lh.sapient.de':1,'lh3.acpt.sapient.de':1,'origin-lh1.acpt.sapient.de':1,'origin-mobile.lufthansa.com':1,'rsb-dcep-qa.lufthansa.com':1,'slh-ams03-dev-aut01.dcep.dlh.de':1,'privatebase.lufthansa.com':1,'ebase2go.lufthansa.com':1,'translate.googleusercontent.com':1,'webcache.googleusercontent.com':1,'www.translatoruser.net':1,'pcm.uat06.amadeus.com':1};var tester=utag_data['dom.domain'].toLowerCase();utag_data.domain_filter_loadrule='go';if(blockedHostnames[tester]&&blockedHostnames.hasOwnProperty(tester))utag_data.domain_filter_loadrule='block';}}catch(e){utag.DB(e)}},function(a,b){try{if(1){let pii_data={"email":1,"e-mail":1,"mail":1,"firstname":1,"lastname":1,"direct_retrieve_lastname":1,"name":1,"fname":1,"lname":1,"filekey":1,"filekey_name":1,"fkey":1,"orderid":1,"pnr":1,"mobpnr":1,"mobpnrs":1,"rec_loc":1,"password":1,"passw":1,"wcr":1,"enc":1,"ENC":1,"cartId":1,"cartid":1,};let mask='******';let validate=function(field){var pnrvalue=field.split('=')[1];var emailvalue=field.split('=')[1];emailvalue=decodeURIComponent(emailvalue);field=field.split('=')[0].toLowerCase();var pnrPattern=/^[A-Z0-9]{6}$/;var emailPattern=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;if((pii_data[field]&&pii_data.hasOwnProperty(field))||pnrPattern.test(pnrvalue)==true||emailPattern.test(emailvalue))return false;return true;};function maskCartIdInState(val){return encodeURIComponent(decodeURIComponent(val).replace(/cartId=[^&]+/i,'cartId='+mask));}
let processQueryParams=function(q_arr){let clean_query=[];for(let i=0,len=q_arr.length;i<len;i++){let field=q_arr[i];let f=field.split('=');let key=f[0].toLowerCase();if(key==='state'&&f.length>1){clean_query.push(f[0]+'='+maskCartIdInState(f[1]));}else if(validate(field)){clean_query.push(field);}else{if(field.includes('ENC')||field.includes('enc'))
{mask='redacted';}
else
{mask='******';}
let f=field.split('=');if(f.length===1){clean_query.push(f[0]);}else{clean_query.push(f[0]+'='+mask);}}}
return clean_query.join('&');};let query_params=b['dom.query_string'].split('&');b['clean.query_string']=processQueryParams(query_params);b['clean.url']=location.protocol+'//'+b['dom.domain']+b['dom.pathname']+(b['clean.query_string']?'?'+b['clean.query_string']:'')+(b['dom.hash']?'#'+b['dom.hash']:'');let referrer=b['dom.referrer'].split('?');if(referrer.length>1){let ref_query=referrer[1].split('&');b['clean.referrer']=referrer[0]+'?'+processQueryParams(ref_query);}else if(referrer[0]&&referrer[0].indexOf(';jsessionid=')>-1){referrer=referrer[0].split(';');b['clean.referrer']=referrer[0];}else{b['clean.referrer']=referrer[0];}
let erg=/^(https?:\/\/www\.famiglienelmondo\.it\/).*$/i.exec(b['clean.referrer']);if(erg!==null&&erg[1]!=='')b['clean.referrer']=erg[1];erg=/^(https?:\/\/lafamiglia\.spsts\.de\/).*$/i.exec(b['clean.referrer']);if(erg!==null&&erg[1]!=='')b['clean.referrer']=erg[1];}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(typeof clientSideData!=='undefined'&&typeof clientSideData.PAGE!=='undefined'&&typeof clientSideData.PAGE.DATA!=='undefined'&&typeof clientSideData.PAGE.DATA.LH_FRONTEND_URL!=='undefined'){utag_data.LH_FRONTEND_URL=clientSideData.PAGE.DATA.LH_FRONTEND_URL;}else{utag_data.LH_FRONTEND_URL='';}}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['page.pageInfo.pageName']!='undefined'&&b['page.pageInfo.pageName'].toString().toLowerCase().indexOf('homepage'.toLowerCase())>-1)){document.cookie="HomepageMarket="+b['page.pageInfo.country']+";path=/;domain="+utag.cfg.domain+";expires=";b['cp.HomepageMarket']=b['page.pageInfo.country'];}}catch(e){utag.DB(e);}},function(a,b){try{if(1){try{b['HomepageMarket']=(typeof utag.loader.RC("HomepageMarket")=="string")?utag.loader.RC("HomepageMarket").toUpperCase():'undefined';}catch(e){}}}catch(e){utag.DB(e);}},function(a,b){try{if(1){utag_data.device_mobile=((function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))return true})(navigator.userAgent||navigator.vendor||window.opera))?'true':'false';utag_data.device_tablet=((function(a){if(/ipad|android.+\d safari|tablet/i.test(a))return true})(navigator.userAgent||navigator.vendor||window.opera))?'true':'false';}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['cart.item.productInfo.bundle']!='undefined'&&b['cart.item.productInfo.bundle'].toString().indexOf('student')>-1)){utag.loader.SC('utag_main',{'aemGF2010edu':'aemGF'+';exp-session'});b['cp.utag_main_aemGF2010edu']='aemGF';}}catch(e){utag.DB(e);}},function(a,b){try{if((typeof b['platformId']!='undefined'&&b['platformId']!='adcb2')){try{var na_string='(not set)';var no_datalayer='(no lhgdata)';var login_status=na_string;var login_type=na_string;var membership_status=na_string;var permissions=na_string;var customerStatus='ANONYMOUS';if(utag_data['user.profile.loginStatus']){if(utag_data['user.profile.loginStatus'].toString()==='true'||utag_data['user.profile.loginStatus'].toString()==='1'){login_status='logged in';if(typeof utag_data['user.profile.loginType']==='string'){if(utag_data['user.profile.loginType']==="travelid basic"){login_type="TravelID Basic";}else if(utag_data['user.profile.loginType']==="travelid ffp"){login_type="TravelID FFP";}else if(utag_data['user.profile.loginType']==='UDH'){login_type='personal profile';}else{login_type=utag_data['user.profile.loginType'];}}
if(typeof utag_data['user.profile.membership.status']==='string'){if(utag_data['user.profile.membership.status']===''||utag_data['user.profile.membership.status']==='none'){customerStatus=membership_status='no MAM account | airline ID only';}else if(utag_data['user.profile.membership.status']==='mam'){customerStatus=membership_status="base";}else{customerStatus=membership_status=utag_data['user.profile.membership.status'].toLowerCase();}}
if(typeof utag_data['user.profile.profileInfo.permissions']==='string'){if(utag_data['user.profile.profileInfo.permissions']===''){permissions='no permissions';}else{permissions=utag_data['user.profile.profileInfo.permissions'];}}}else{login_status=login_type=membership_status=permissions='logged out';}}else{if(window.lhgData){login_status=login_type=membership_status=permissions=na_string;}else{login_status=login_type=membership_status=permissions=no_datalayer;}}
b.customerStatus=utag_data.customerStatus=customerStatus;b.logged_in=utag_data.logged_in=login_status;b['user.profile.loginType']=utag_data['user.profile.loginType']=login_type;b['user.profile.membership.status']=utag_data['user.profile.membership.status']=membership_status;b['user.profile.profileInfo.permissions']=utag_data['user.profile.profileInfo.permissions']=permissions;if(b['dom.domain'].includes("miles-and-more")&&typeof b['page.pageInfo.pageId']==='undefined'){var market=b['page.pageInfo.country']||'xx';var lang=b['page.pageInfo.language']||'xx';var pname=b['page.pageInfo.pageName']||na_string;b['page.pageInfo.pageId']=pname+'_'+market+'_'+lang;}}catch(e){utag.DB(e)
gtag('event','crash',{'event_category':'debug','event_label':'OneID ext -'+e});}}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['platformId']!='undefined'&&b['platformId']=='adcb2')){try{if(typeof utag_data['qp.WT.mc_id']==='string')utag_data.wt_campaign=utag_data['qp.WT.mc_id'];else if(typeof utag_data['qp.wt.mc_id']==='string')utag_data.wt_campaign=utag_data['qp.wt.mc_id'];if(typeof utag_data['qp.utm_campaign']==='string')utag_data.utm_campaign=utag_data['qp.utm_campaign'];if(typeof utag_data['qp.utm_content']==='string')utag_data.utm_content=utag_data['qp.utm_content'];if(typeof utag_data['qp.utm_source']==='string')utag_data.utm_source=utag_data['qp.utm_source'];if(typeof utag_data['qp.utm_medium']==='string')utag_data.utm_medium=utag_data['qp.utm_medium'];if(typeof utag_data['qp.utm_term']==='string')utag_data.utm_term=utag_data['qp.utm_term'];if(typeof utag_data['qp.aaaid']==='string')utag_data.aaaid=utag_data['qp.aaaid'];if(typeof utag_data['qp.ns_campaign']==='string')utag_data.ns_campaign=utag_data['qp.ns_campaign'];if(typeof utag_data['qp.clickID']==='string')utag_data.clickID=utag_data['qp.clickID'];if(typeof utag_data['qp.MSE_LH.clickid']==='string')utag_data.mse_clickid=utag_data['qp.MSE_LH.clickid'];if(typeof utag_data['qp.internalcampaign']==='string')utag_data.intcamp=utag_data['qp.internalcampaign'];if(typeof utag_data['qp.intcamp']==='string')utag_data.intcamp=utag_data['qp.intcamp'];if(typeof utag_data['qp.ses_mark']==='string')utag_data.ses_mark=utag_data['qp.ses_mark'];}catch(e){}}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['platformId']!='undefined'&&b['platformId']=='adcb2'&&typeof b['page.category.primaryCategory']!='undefined'&&b['page.category.primaryCategory'].toString().toLowerCase()!='Servicing'.toLowerCase()&&b['page.category.primaryCategory'].toString().toLowerCase()!='Invol Rebooking'.toLowerCase())){var convertPrices={'cart.price.priceBreakdown.tax.surcharge.amount':1,'cart.price.pricePerTravellerType.totalPrice.amount':1,'cart.price.totalPrice.amount':1,'product.productInfo.productDetails.ancillaryService.price.totalPrice.amount':1,'product.productInfo.productDetails.insurance.price.totalPrice.amount':1,'product.productInfo.productDetails.flightTicket.bound.price.priceBreakdown.baseFarePrice.amount':1,'product.productInfo.productDetails.flightTicket.bound.price.pricePerTravellerType.totalPrice.amount':1,'product.productInfo.productDetails.flightTicket.bound.price.totalPrice.amount':1,'product.productInfo.productDetails.flightTicket.itineraryPrice.totalPrice.amount':1,'transaction.payment.price.priceBreakdown.baseFarePrice.amount':1,'transaction.payment.price.pricePerTravellerType.totalPrice.amount':1,'transaction.payment.price.totalPrice.amount':1,'transaction.total.priceBreakdown.ancillaryServicePrice.amount':1,'transaction.total.priceBreakdown.baseFarePrice.amount':1,'transaction.total.priceBreakdown.serviceFee.amount':1,'transaction.total.priceBreakdown.tax.surcharge.amount':1,'transaction.total.priceBreakdown.tax.totalTax.amount':1,'transaction.total.pricePerTravellerType.totalPrice.amount':1,'transaction.total.totalPrice.amount':1,'transaction.total.refundDetails.refund.amount':1};var convertCurrencies={'currency':1,'cart.price.pricePerTravellerType.totalPrice.currency':1,'cart.price.priceBreakdown.tax.surcharge.currency':1,'cart.price.totalPrice.currency':1,'digitalTouchpoint.touchpointInfo.currency':1,'product.productInfo.productDetails.ancillaryService.price.totalPrice.currency':1,'product.productInfo.productDetails.insurance.price.totalPrice.currency':1,'product.productInfo.productDetails.flightTicket.bound.price.totalPrice.currency':1,'product.productInfo.productDetails.flightTicket.bound.price.priceBreakdown.baseFarePrice.currency':1,'product.productInfo.productDetails.flightTicket.bound.price.pricePerTravellerType.totalPrice.currency':1,'transaction.payment.price.priceBreakdown.baseFarePrice.currency':1,'transaction.payment.price.priceBreakdown.ancillaryServicePrice.currency':1,'transaction.payment.price.priceBreakdown.insurancePrice.currency':1,'transaction.payment.price.pricePerTravellerType.totalPrice.currency':1,'transaction.payment.price.totalPrice.currency':1,'transaction.total.priceBreakdown.ancillaryServicePrice.currency':1,'transaction.total.priceBreakdown.insurancePrice.currency':1,'transaction.total.priceBreakdown.baseFarePrice.currency':1,'transaction.total.priceBreakdown.serviceFee.currency':1,'transaction.total.priceBreakdown.tax.surcharge.currency':1,'transaction.total.priceBreakdown.tax.totalTax.currency':1,'transaction.total.pricePerTravellerType.totalPrice.currency':1,'transaction.total.totalPrice.currency':1,'transaction.total.refundDetails.refund.currency':1};var orig_suffix='_ORIG';var eur_code='EUR';try{if(utag_data['digitalTouchpoint.touchpointInfo.currency']&&utag_data['digitalTouchpoint.touchpointInfo.currency'+orig_suffix]){utag_data.currency=utag_data['digitalTouchpoint.touchpointInfo.currency'+orig_suffix];}
else if(utag_data['cart.price.totalPrice.currency']&&utag_data['cart.price.totalPrice.currency'+orig_suffix]){utag_data.currency=utag_data['cart.price.totalPrice.currency'+orig_suffix];}
else if(utag_data['transaction.total.totalPrice.currency']&&utag_data['transaction.total.totalPrice.currency'+orig_suffix]){utag_data.currency=utag_data['transaction.total.totalPrice.currency'+orig_suffix];}
else if(utag_data['transaction.total.refundDetails.refund.currency']&&utag_data['transaction.total.refundDetails.refund.currency'+orig_suffix]){utag_data.currency=utag_data['transaction.total.refundDetails.refund.currency'+orig_suffix];}
else if(utag_data['digitalTouchpoint.touchpointInfo.currency']){utag_data.currency=utag_data['digitalTouchpoint.touchpointInfo.currency'];}
else if(utag_data['cart.price.totalPrice.currency']){utag_data.currency=utag_data['cart.price.totalPrice.currency'];}
else if(utag_data['transaction.total.totalPrice.currency']){utag_data.currency=utag_data['transaction.total.totalPrice.currency'];}
else if(utag_data['transaction.total.refundDetails.refund.currency']){utag_data.currency=utag_data['transaction.total.refundDetails.refund.currency'];}
if(typeof utag_data.currency==='string'&&utag_data.currency.length>0){var doArr;var flag=false;var xchange=parseFloat(tealiumiq_currency.convert("1","EUR",utag_data.currency));if(xchange.toString()==='1'){var notEUR=false;}else{var notEUR=true;}
for(var key in convertCurrencies){if(convertCurrencies.hasOwnProperty(key)&&utag_data[key]){if(typeof utag_data[key]==='object'){doArr=false;if(typeof utag_data[key+orig_suffix]!=='object'||(typeof utag_data[key+orig_suffix]==='object'&&utag_data[key+orig_suffix].length!==utag_data[key].length)){doArr=true;utag_data[key+orig_suffix]=[];}
var len=utag_data[key].length;for(var i=0;i<len;i++){if(doArr){utag_data[key+orig_suffix].push(utag_data[key][i]);}
if(notEUR&&utag_data[key+orig_suffix][i]===utag_data[key][i]){utag_data[key][i]=eur_code;}}}else{if(typeof utag_data[key+orig_suffix]!=='string'){utag_data[key+orig_suffix]=utag_data[key];}
if(notEUR&&utag_data[key+orig_suffix]===utag_data[key]){utag_data[key]=eur_code;}}}}
for(var key in convertPrices){if(convertPrices.hasOwnProperty(key)&&utag_data[key]){if(typeof utag_data[key]==='object'){doArr=false;if(typeof utag_data[key+orig_suffix]!=='object'||(typeof utag_data[key+orig_suffix]==='object'&&utag_data[key+orig_suffix].length!==utag_data[key].length)){doArr=true;utag_data[key+orig_suffix]=[];}
var len=utag_data[key].length;for(var i=0;i<len;i++){if(typeof utag_data[key][i]==='number')utag_data[key][i]=utag_data[key][i].toString();if(utag_data[key][i]==='')utag_data[key][i]='0.00';if(utag_data[key][i].indexOf('.')===-1)utag_data[key][i]=utag_data[key][i]+'.00';if(utag_data[key][i].split('.')[1]&&utag_data[key][i].split('.')[1].length===1)utag_data[key][i]=utag_data[key][i]+'0';if(doArr){utag_data[key+orig_suffix].push(parseFloat(utag_data[key][i]).toFixed(2));}
if(notEUR&&utag_data[key+orig_suffix][i]===utag_data[key][i]){utag_data[key][i]=(utag_data[key][i]/xchange).toFixed(2);flag=true;}}}else{if(typeof utag_data[key]==='number')utag_data[key]=utag_data[key].toString();if(utag_data[key]==='')utag_data[key]='0.00';if(utag_data[key].indexOf('.')===-1)utag_data[key]=utag_data[key]+'.00';if(utag_data[key].split('.')[1]&&utag_data[key].split('.')[1].length===1)utag_data[key]=utag_data[key]+'0';if(typeof utag_data[key+orig_suffix]==='undefined'){utag_data[key+orig_suffix]=parseFloat(utag_data[key]).toFixed(2);}
if(notEUR&&utag_data[key+orig_suffix]===utag_data[key]){utag_data[key]=(utag_data[key]/xchange).toFixed(2);flag=true;}}}}
if(flag)utag_data.currency_was_converted='yes';}}catch(e){utag.DB('DEBUG: currency conversion extension crashed: '+e);gtag('event','crash',{'event_category':'debug','event_label':'cc '+e});}}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['platformId']!='undefined'&&b['platformId'].toString().indexOf('lho')>-1)||(typeof b['platformId']!='undefined'&&b['platformId'].toString().indexOf('adcb1')>-1)){var digitalDataPrices={'cart':{},'transaction':{},'product':[]};Object.assign(digitalDataPrices.cart,lhgData.cart);Object.assign(digitalDataPrices.transaction,lhgData.transaction);Object.assign(digitalDataPrices.product,lhgData.product);var flatDigitalDataPrices=teal.flattenObject(digitalDataPrices);var propertiesToConvert={'transaction.item.price.basePrices':'transaction.item.price.currency','transaction.total.transactionTotal':'transaction.total.currency',};var eur_suffix='_EURO';for(var property in propertiesToConvert){if(propertiesToConvert.hasOwnProperty(property)&&flatDigitalDataPrices[property]){if(typeof flatDigitalDataPrices[property]==='object'){if(flatDigitalDataPrices[property]!=='undefined'&&flatDigitalDataPrices[property].length>0){b[property+eur_suffix]=[];}
var len=flatDigitalDataPrices[property].length;for(var i=0;i<len;i++){if(flatDigitalDataPrices[property]!==undefined&&flatDigitalDataPrices[propertiesToConvert[property]]!==undefined){var uppercaseCurrency=flatDigitalDataPrices[propertiesToConvert[property]].map(element=>element.toUpperCase());var propertyKey=property;b[propertyKey+eur_suffix].push(tealiumiq_currency.convert(flatDigitalDataPrices[property][i].toString(),uppercaseCurrency[i],"EUR"));}}}else if(typeof flatDigitalDataPrices[property]==='string'){if(flatDigitalDataPrices[property]!==undefined&&flatDigitalDataPrices[propertiesToConvert[property]]!==undefined){var propertyKey=property;b[propertyKey+eur_suffix]=tealiumiq_currency.convert(flatDigitalDataPrices[property].toString(),flatDigitalDataPrices[propertiesToConvert[property]].toUpperCase(),"EUR");}}}}
if(typeof utag_data['transaction.item.price.basePrices_EURO']!=='undefined'){b['transaction.item.price.basePrices_EURO']=utag_data['transaction.item.price.basePrices_EURO'];}
if(typeof utag_data['transaction.total.transactionTotal_EURO']!=='undefined'){b['transaction.total.transactionTotal_EURO']=utag_data['transaction.total.transactionTotal_EURO'];}
}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['platformId']!='undefined'&&b['platformId'].toString().toLowerCase()=='adcb2'.toLowerCase())){var digitalDataPrices={'cart':{},'transaction':{},'product':[]};Object.assign(digitalDataPrices.cart,digitalData.cart);Object.assign(digitalDataPrices.transaction,digitalData.transaction);Object.assign(digitalDataPrices.product,digitalData.product);var flatDigitalDataPrices=teal.flattenObject(digitalDataPrices);var propertiesToConvert={'product.productInfo.productDetails.ancillaryService.price.totalPrice.amount':'product.productInfo.productDetails.ancillaryService.price.totalPrice.currency','product.productInfo.productDetails.insurance.price.totalPrice.amount':'product.productInfo.productDetails.insurance.price.totalPrice.currency','product.productInfo.productDetails.flightTicket.itineraryPrice.priceBreakdown.baseFarePrice.amount':'product.productInfo.productDetails.flightTicket.itineraryPrice.priceBreakdown.baseFarePrice.currency','product.productInfo.productDetails.flightTicket.itineraryPrice.pricePerTravellerType.totalPrice.amount':'product.productInfo.productDetails.flightTicket.itineraryPrice.pricePerTravellerType.totalPrice.currency','product.productInfo.productDetails.flightTicket.itineraryPrice.totalPrice.amount':'product.productInfo.productDetails.flightTicket.itineraryPrice.totalPrice.currency','product.productInfo.productDetails.flightTicket.bound.price.priceBreakdown.baseFarePrice.amount':'product.productInfo.productDetails.flightTicket.bound.price.priceBreakdown.baseFarePrice.currency','product.productInfo.productDetails.flightTicket.bound.price.pricePerTravellerType.totalPrice.amount':'product.productInfo.productDetails.flightTicket.bound.price.pricePerTravellerType.totalPrice.currency','product.productInfo.productDetails.flightTicket.bound.price.totalPrice.amount':'product.productInfo.productDetails.flightTicket.bound.price.totalPrice.currency','cart.price.priceBreakdown.tax.surcharge.amount':'cart.price.priceBreakdown.tax.surcharge.currency','cart.price.pricePerTravellerType.totalPrice.amount':'cart.price.pricePerTravellerType.totalPrice.currency','cart.price.totalPrice.amount':'cart.price.totalPrice.currency','cart.price.priceBreakdown.tax.totalTax.amount':'cart.price.priceBreakdown.tax.totalTax.currency','cart.price.priceBreakdown.ancillaryServicePrice.amount':'cart.price.priceBreakdown.ancillaryServicePrice.currency','transaction.payment.price.priceBreakdown.baseFarePrice.amount':'transaction.payment.price.priceBreakdown.baseFarePrice.currency','transaction.payment.price.pricePerTravellerType.totalPrice.amount':'transaction.payment.price.pricePerTravellerType.totalPrice.currency','transaction.payment.price.totalPrice.amount':'transaction.payment.price.totalPrice.currency','transaction.total.priceBreakdown.ancillaryServicePrice.amount':'transaction.total.priceBreakdown.ancillaryServicePrice.currency','transaction.total.priceBreakdown.baseFarePrice.amount':'transaction.total.priceBreakdown.baseFarePrice.currency','transaction.total.priceBreakdown.serviceFee.amount':'transaction.total.priceBreakdown.serviceFee.currency','transaction.total.priceBreakdown.tax.surcharge.amount':'transaction.total.priceBreakdown.tax.surcharge.currency','transaction.total.priceBreakdown.tax.totalTax.amount':'transaction.total.priceBreakdown.tax.totalTax.currency','transaction.payment.price.discount.discountFixedValue.amount':'transaction.payment.price.discount.discountFixedValue.currency','transaction.payment.price.discount.initialPrice.amount':'transaction.payment.price.discount.initialPrice.currency','transaction.total.pricePerTravellerType.totalPrice.amount':'transaction.total.pricePerTravellerType.totalPrice.currency','transaction.payment.price.priceBreakdown.ancillaryServicePrice.amount':'transaction.payment.price.priceBreakdown.ancillaryServicePrice.currency','transaction.total.totalPrice.amount':'transaction.total.totalPrice.currency'};var eur_suffix='_EURO';for(var property in propertiesToConvert){if(propertiesToConvert.hasOwnProperty(property)&&flatDigitalDataPrices[property]){if(typeof flatDigitalDataPrices[property]==='object'){if(flatDigitalDataPrices[property]!=='undefined'&&flatDigitalDataPrices[property].length>0){b[property+eur_suffix]=[];}
var len=flatDigitalDataPrices[property].length;for(var i=0;i<len;i++){if(flatDigitalDataPrices[property]!==undefined&&flatDigitalDataPrices[propertiesToConvert[property]]!==undefined){var uppercaseCurrency=flatDigitalDataPrices[propertiesToConvert[property]].map(element=>element.toUpperCase());var propertyKey=property;b[propertyKey+eur_suffix].push(tealiumiq_currency.convert(flatDigitalDataPrices[property][i].toString(),uppercaseCurrency[i],"EUR"));}}}else if(typeof flatDigitalDataPrices[property]==='string'){if(flatDigitalDataPrices[property]!==undefined&&flatDigitalDataPrices[propertiesToConvert[property]]!==undefined){var propertyKey=property;b[propertyKey+eur_suffix]=tealiumiq_currency.convert(flatDigitalDataPrices[property].toString(),flatDigitalDataPrices[propertiesToConvert[property]].toUpperCase(),"EUR");}}}}
if(typeof utag_data['cart.price.totalPrice.amount_EURO']!=='undefined'){b['cart.price.total_EURO']=utag_data['cart.price.totalPrice.amount_EURO'];}
if(typeof utag_data['transaction.total.totalPrice.amount_EURO']!=='undefined'){b['transaction.total.transactionTotal_EURO']=utag_data['transaction.total.totalPrice.amount_EURO'];}
if(typeof utag_data['transaction.total.priceBreakdown.tax.surcharge.amount_EURO']!=='undefined'){b['transaction.total.surcharge_EURO']=utag_data['transaction.total.priceBreakdown.tax.surcharge.amount_EURO'];}
if(typeof utag_data['transaction.total.totalPrice.amount_EURO']!=='undefined'){b['revenue_EURO']=utag_data['transaction.total.totalPrice.amount_EURO'];}else if(typeof utag_data['cart.price.totalPrice.amount_EURO']!=='undefined'){b['revenue_EURO']=utag_data['cart.price.totalPrice.amount_EURO'];}
if(typeof utag_data['cart.price.totalPrice.amount_EURO']!=='undefined'){if(utag_data['transaction.total.priceBreakdown.baseFarePrice.amount_EURO']===0){utag_data['transaction.total.priceBreakdown.baseFarePrice.amount_EURO']=b['transaction.total.priceBreakdown.tax.totalTax.amount_EURO']=null}}
if(typeof utag_data['transaction.total.priceBreakdown.baseFarePrice.amount_EURO']!=='undefined'){b['transaction.total.netFare_EURO']=utag_data['transaction.total.priceBreakdown.baseFarePrice.amount_EURO'];b['BFNetfare_EURO']=utag_data['transaction.total.priceBreakdown.baseFarePrice.amount_EURO'];}
if(typeof utag_data['transaction.total.priceBreakdown.tax.surcharge.amount_EURO']!=='undefined'){b['YQ_EURO']=utag_data['transaction.total.priceBreakdown.tax.surcharge.amount_EURO'];}
if(digitalData?.page?.category?.primaryCategory==='MMB'||digitalData?.page?.category?.primaryCategory==='Services'){b['transaction.total.priceBreakdown.tax.totalTax.amount_EURO']=null;b['transaction.total.priceBreakdown.baseFarePrice.amount_EURO']=null;b['transaction.total.priceBreakdown.serviceFee.amount_EURO']=null;b['transaction.total.priceBreakdown.tax.surcharge.amount_EURO']=null;var anc_status=flatDigitalDataPrices['product.productInfo.productDetails.ancillaryService.status'];var serviceCodes=flatDigitalDataPrices['product.productInfo.productDetails.ancillaryService.serviceCode'];var is_UPGD_booking=false;var UPGD_index=0;if(anc_status&&serviceCodes){for(var i=0;i<serviceCodes.length;i++){var item=serviceCodes[i];if(item==="UPGD"&&anc_status[i]==="selected"){is_UPGD_booking=true;UPGD_index=i;break;}}}
if(anc_status&&anc_status.length>0&&anc_status.includes('selected')){var transaction_revenue=0;var initial_transaction_revenue=0;var anc_revenues=utag_data['product.productInfo.productDetails.ancillaryService.price.totalPrice.amount_EURO'];if(anc_revenues&&anc_revenues.length>0){for(var i=0;i<anc_revenues.length;i++){if(typeof anc_status[i]!=='undefined'&&anc_status[i]==="selected"&&typeof anc_revenues[i]!=='undefined'&&parseFloat(anc_revenues[i])&&(!is_UPGD_booking||i===UPGD_index)){transaction_revenue+=parseFloat(anc_revenues[i])}}}
b['transaction.total.totalPrice.amount_EURO']=b['transaction.total.transactionTotal_EURO']=transaction_revenue.toString();}else{b['transaction.total.totalPrice.amount_EURO']=b['transaction.total.transactionTotal_EURO']=null;}}
if(b['platformId']!==undefined&&b['platformId']=="adcb2"){for(var key in utag_data){if(utag_data.hasOwnProperty(key)){if(utag_data[key]!==undefined||utag_data[key]!=="undefined"||utag_data[key]!=='(not set)'||utag_data[key].length>0){utag.data[key]=utag_data[key];}}}}}}catch(e){utag.DB(e)}},function(a,b){try{if(typeof b['digitalTouchpoint_sessionID']!='undefined'){document.cookie="fpc_digitalTouchpoint_sessionID="+b['digitalTouchpoint_sessionID']+";path=/;domain="+utag.cfg.domain+";expires=";b['cp.fpc_digitalTouchpoint_sessionID']=b['digitalTouchpoint_sessionID'];}}catch(e){utag.DB(e);}},function(a,b){try{if((typeof b['platformId']!='undefined'&&b['platformId'].toString().toLowerCase()=='adcb2'.toLowerCase())){try{var na_string='(not set)';function getFormattedDateTime(datetime){if(typeof datetime==='string'){var date=new Date(datetime);var year=date.getFullYear();var month=('0'+(date.getMonth()+1)).slice(-2);var day=('0'+date.getDate()).slice(-2);return year+'-'+month+'-'+day;}else{return na_string;}}
var readCookie=function(cookieName){var re=new RegExp('[; ]'+cookieName+'=([^\\s;]*)');var sMatch=(' '+document.cookie).match(re);if(cookieName&&sMatch)return unescape(sMatch[1]);return'';};function getConcatenatedWithPipe(arr){if(arr.length>0){return arr.join('|');}else{return na_string;}}
function cleanProfileId(inputString){return inputString?.toLowerCase().replace(/[^a-z0-9 ]/g,'').replace(/hash/g,'')||'';}
var flights=-1,query_string='',anchor_tags='',arrival='',departure='',days_to_dep='',destination='',origin='',ond='',origin_con='',f
destination_con='',pax_age_group='',pax_total='',trip_type='',com_fare_family='',clientID='',trip_reason='',cabin='',journey_length='',bundle='',aircraft_code='',ffamily_code='',farebase_code='',coupon_status='',bk_class='',flowtype='',flight_revenue='';var dep_weekDay='',trip_duration='',traveller_count=typeof b['traveller.travellerID']!=='undefined'?b['traveller.travellerID'].length:0;b.consent_value=b.consent_value||na_string;b.consent_timestamp=b.consent_timestamp||na_string;if(b['error.errorInfo.errorCode']=="7959"&&b['clean.url'].includes('booking/availability/0'))
{b['page.category.primaryCategory']="Booking";b['page.pageInfo.pageID']="FPPOUTBOUND";}
else if(b['error.errorInfo.errorCode']=="7959"&&b['clean.url'].includes('booking/availability/1'))
{b['page.category.primaryCategory']="Booking";b['page.pageInfo.pageID']="FPPINBOUND";}
if((window.location.href.indexOf('/booking/cart')!=-1||window.location.href.indexOf('/booking/confirmation')!=-1)&&b['tealium_event']=="view"){b['decisionId_PBF']=digitalData.decisionId||'(not set)';}
if(b['page.pageInfo.pageID']&&b['page.pageInfo.pageID']==='SHOPPINGCART'){if(b['transaction.PNR.recLoc']){b['page.pageInfo.pageID']='SHOPPINGCART_order_based';}
else{b['page.pageInfo.pageID']='SHOPPINGCART_cart_based';var flight_revenues=b['product.productInfo.productDetails.flightTicket.itineraryPrice.totalPrice.amount'];if(a!=='link'&&flight_revenues&&typeof flight_revenues[0]!=='undefined'){flight_revenue=flight_revenues[0];}}}
var market=b['digitalTouchpoint.touchpointInfo.market']||na_string;b['digitalTouchpoint.touchpointInfo.market']=market.toLowerCase();var entity=b['digitalTouchpoint.touchpointInfo.airlineCode']||na_string;b['digitalTouchpoint.touchpointInfo.airlineCode']=entity.toLowerCase();var pname=b['page.pageInfo.pageName']||na_string,slang=b['digitalTouchpoint.touchpointInfo.language']||na_string,smarket=b['digitalTouchpoint.touchpointInfo.market']||na_string;b['page.pageInfo.pageName']=pname.toLowerCase()
b.ga_pagename_market_lang=(pname+'_'+smarket+'_'+slang).toLowerCase();b.ga_pathname_cleaned=(window.location.pathname.indexOf(';jsessionid=')>-1)?window.location.pathname.split(';jsessionid=')[0]:window.location.pathname;if(typeof b['clean.query_string']==='string'&&b['clean.query_string']!==''){query_string='?'+b['clean.query_string'];}
if(typeof b['dom.hash']==='string'&&b['dom.hash']!==''){anchor_tags='#'+b['dom.hash'];}
if(b['product.productInfo.productDetails.flightTicket.bound.departure.dateTime']&&b['product.productInfo.productDetails.flightTicket.bound.departure.dateTime'].length>0&&b['product.productInfo.productDetails.flightTicket.bound.arrival.dateTime']&&b['product.productInfo.productDetails.flightTicket.bound.arrival.dateTime'].length>0){var last_index=b['product.productInfo.productDetails.flightTicket.bound.arrival.dateTime'].length-1;departure=getFormattedDateTime(b['product.productInfo.productDetails.flightTicket.bound.departure.dateTime'][0]);arrival=getFormattedDateTime(b['product.productInfo.productDetails.flightTicket.bound.arrival.dateTime'][last_index]);}else if(b['searchInput.searchInputInfo.flightDetails.departure.dateTime']&&b['searchInput.searchInputInfo.flightDetails.departure.dateTime'].length>0){var last_index=b['searchInput.searchInputInfo.flightDetails.departure.dateTime'].length-1;departure=getFormattedDateTime(b['searchInput.searchInputInfo.flightDetails.departure.dateTime'][0]);arrival=getFormattedDateTime(b['searchInput.searchInputInfo.flightDetails.departure.dateTime'][last_index]);}
if(departure){var bookDate=new Date();var depDate=new Date(departure);days_to_dep=Math.round(Math.abs((bookDate.getTime()-depDate.getTime())/(24*60*60*1000)));}
if(b['searchInput.searchInputInfo.flowType']){flowtype=b['searchInput.searchInputInfo.flowType']||na_string;}
flowtype=flowtype.toLowerCase();if(b['product.productInfo.productDetails.flightTicket.bound.arrival.airportCode']&&b['product.productInfo.productDetails.flightTicket.bound.arrival.airportCode'].length>0){destination=b['product.productInfo.productDetails.flightTicket.bound.arrival.airportCode'][0]||na_string;}else if(b['searchInput.searchInputInfo.flightDetails.arrival.locationCode']&&b['searchInput.searchInputInfo.flightDetails.arrival.locationCode'].length>0){destination=b['searchInput.searchInputInfo.flightDetails.arrival.locationCode'][0]||na_string;}
destination=destination.toLowerCase();if(b['product.productInfo.productDetails.flightTicket.bound.departure.airportCode']&&b['product.productInfo.productDetails.flightTicket.bound.departure.airportCode'].length>0){origin=b['product.productInfo.productDetails.flightTicket.bound.departure.airportCode'][0]||na_string;}else if(b['searchInput.searchInputInfo.flightDetails.departure.locationCode']&&b['searchInput.searchInputInfo.flightDetails.departure.locationCode'].length>0){origin=b['searchInput.searchInputInfo.flightDetails.departure.locationCode'][0]||na_string;}
origin=origin.toLowerCase();if(origin&&destination){ond=origin+'-'+destination;}
if(b['product.productInfo.productDetails.flightTicket.bound.departure.airportCode']&&b['product.productInfo.productDetails.flightTicket.bound.departure.airportCode'].length>0){origin_con=getConcatenatedWithPipe(b['product.productInfo.productDetails.flightTicket.bound.departure.airportCode']);}else if(b['searchInput.searchInputInfo.flightDetails.departure.locationCode']&&b['searchInput.searchInputInfo.flightDetails.departure.locationCode'].length>0){origin_con=getConcatenatedWithPipe(b['searchInput.searchInputInfo.flightDetails.departure.locationCode']);}
origin_con=origin_con.toLowerCase();if(b['product.productInfo.productDetails.flightTicket.bound.arrival.airportCode']&&b['product.productInfo.productDetails.flightTicket.bound.arrival.airportCode'].length>0){destination_con=getConcatenatedWithPipe(b['product.productInfo.productDetails.flightTicket.bound.arrival.airportCode']);}else if(b['searchInput.searchInputInfo.flightDetails.arrival.locationCode']&&b['searchInput.searchInputInfo.flightDetails.arrival.locationCode'].length>0){destination_con=getConcatenatedWithPipe(b['searchInput.searchInputInfo.flightDetails.arrival.locationCode']);}
destination_con=destination_con.toLowerCase();var tt_short="";if(b['product.productInfo.productDetails.flightTicket.tripType']&&b['product.productInfo.productDetails.flightTicket.tripType'].length>0){tt_short=b['product.productInfo.productDetails.flightTicket.tripType'];}else if(b['searchInput.searchInputInfo.flightDetails.tripType']&&b['searchInput.searchInputInfo.flightDetails.tripType'].length>0){var tt_lastIndex=b['searchInput.searchInputInfo.flightDetails.tripType'].length-1;tt_short=b['searchInput.searchInputInfo.flightDetails.tripType'][tt_lastIndex];}
if(tt_short.indexOf('O')>=0){trip_type='oneway';}else if(tt_short.indexOf('R')>=0){trip_type='roundtrip';}else if(tt_short.indexOf('J')>=0){trip_type='openjaw'}else if(tt_short.indexOf('M')>=0){trip_type='multistop';}else{trip_type='other';}
try{if(window.digitalData&&typeof digitalData.searchInput==='object'&&typeof digitalData.searchInput.searchInputInfo==='object'&&typeof digitalData.searchInput.searchInputInfo.flightDetails==='object'&&digitalData.searchInput.searchInputInfo.flightDetails.length>0){var last_flight_entry=digitalData.searchInput.searchInputInfo.flightDetails[digitalData.searchInput.searchInputInfo.flightDetails.length-1];var pax_length=last_flight_entry&&last_flight_entry['passenger']?last_flight_entry['passenger'].length:0;var pax_amounts={'adt':0,'b15':0,'chd':0,'inf':0};var pax_age_arr=[];pax_total=0;for(var i=0;i<pax_length;i++){var pax_obj=last_flight_entry['passenger'][i];var pax_type=pax_obj&&pax_obj['passengerTypeCode']?pax_obj['passengerTypeCode'].toLowerCase():na_string;var pax_num=pax_obj&&pax_obj['numberOfPassengers']?pax_obj['numberOfPassengers']:na_string;if(typeof pax_amounts[pax_type]!=='undefined'&&typeof pax_num==='number'){pax_amounts[pax_type]=pax_amounts[pax_type]+pax_num;pax_total=pax_total+pax_num;pax_age_arr.push(pax_type+':'+pax_num);}}
if(pax_age_arr.length>0){pax_age_group=pax_age_arr.join('|');}
b.pax_amt=pax_total;b.pax_adult_amt=pax_amounts['adt'];b.pax_child_amt=pax_amounts['chd'];b.pax_baby_amt=pax_amounts['inf'];b.tickets=pax_amounts['adt']+pax_amounts['chd'];}}catch(e){utag.DB('DEBUG: following error in hs extension occured: '+e);gtag('event','crash',{'event_category':'debug','event_label':'pax age group'+e});}
if(b['searchInput.searchInputInfo.flightDetails.commercialFareFamily.code']&&b['searchInput.searchInputInfo.flightDetails.commercialFareFamily.code'].length>0){var last_index=b['searchInput.searchInputInfo.flightDetails.commercialFareFamily.code'].length-1;com_fare_family=b['searchInput.searchInputInfo.flightDetails.commercialFareFamily.code'][last_index]||na_string;}
if(departure&&arrival){var arr_date=new Date(arrival);var dep_date=new Date(departure);dep_weekDay=dep_date.getDay();trip_duration=Math.round(Math.abs((arr_date.getTime()-dep_date.getTime())/(24*60*60*1000)));}
if(typeof dep_weekDay==='number'&&typeof days_to_dep==='number'&&typeof trip_duration==='number'){if(days_to_dep>=42){if(trip_duration>=3){trip_reason='leis';}else{if(dep_weekDay==5||dep_weekDay==6){trip_reason='leis';}else{trip_reason='corp';}}}else{if(trip_duration>=7){trip_reason='leis';}else{trip_reason='corp';}}}
clientID=readCookie('_ga').split('.').slice(-2).join('.');b['digitalTouchpoint.touchpointInfo.sessionID']=digitalData.digitalTouchpoint.touchpointInfo.sessionID||null;b['digitalTouchpoint_sessionID']=digitalData.digitalTouchpoint.touchpointInfo.sessionID||null;if(b['product.productInfo.productDetails.flightTicket.journeyLength']&&b['product.productInfo.productDetails.flightTicket.journeyLength'][0]){journey_length=b['product.productInfo.productDetails.flightTicket.journeyLength'][0];}
if(b['product.productInfo.productDetails.flightTicket.bound.fareFamilyName']&&b['product.productInfo.productDetails.flightTicket.bound.fareFamilyName'].length>0){bundle=getConcatenatedWithPipe(b['product.productInfo.productDetails.flightTicket.bound.fareFamilyName']);}
if(b['product.productInfo.productDetails.flightTicket.bound.segment.aircraftCode']&&b['product.productInfo.productDetails.flightTicket.bound.segment.aircraftCode'].length>0){aircraft_code=getConcatenatedWithPipe(b['product.productInfo.productDetails.flightTicket.bound.segment.aircraftCode']);}
if(b['product.productInfo.productDetails.flightTicket.bound.fareFamilyCode']&&b['product.productInfo.productDetails.flightTicket.bound.fareFamilyCode'].length>0){ffamily_code=getConcatenatedWithPipe(b['product.productInfo.productDetails.flightTicket.bound.fareFamilyCode']);}
if(b['page.pageInfo.pageID']==='CONFIRMATION'){if(b['product.productInfo.productDetails.flightTicket.bound.segment.fareBasis']&&b['product.productInfo.productDetails.flightTicket.bound.segment.fareBasis'].length>0){farebase_code=getConcatenatedWithPipe(b['product.productInfo.productDetails.flightTicket.bound.segment.fareBasis']);farebase_code=farebase_code.toLowerCase();}
else if(b['product.productInfo.productDetails.flightTicket.fareBasis']&&b['product.productInfo.productDetails.flightTicket.fareBasis'].length>0){farebase_code=getConcatenatedWithPipe(b['product.productInfo.productDetails.flightTicket.fareBasis']);farebase_code=farebase_code.toLowerCase();}
else{farebase_code=na_string;}}
if(b['product.productInfo.productDetails.flightTicket.bound.segment.cabin']){cabin=getConcatenatedWithPipe(b['product.productInfo.productDetails.flightTicket.bound.segment.cabin']);}
if(traveller_count>0&&b['product.productInfo.productDetails.flightTicket.bound.segment.coupon.status']&&b['product.productInfo.productDetails.flightTicket.bound.segment.coupon.status'].length>0){var coupon_status_src=b['product.productInfo.productDetails.flightTicket.bound.segment.coupon.status'];var coupon_status_arr=[];for(var i=0;i<coupon_status_src.length;i=i+traveller_count){coupon_status_arr.push(coupon_status_src[i]);}
coupon_status=getConcatenatedWithPipe(coupon_status_arr);}
if(b['product.productInfo.productDetails.flightTicket.bound.segment.bookingClass']&&b['product.productInfo.productDetails.flightTicket.bound.segment.bookingClass'].length>0){bk_class=getConcatenatedWithPipe(b['product.productInfo.productDetails.flightTicket.bound.segment.bookingClass']);bk_class=bk_class.toLowerCase();}
b.carrier_list='';if(b['product.productInfo.productDetails.flightTicket.bound.segment.operatedBy.airlineCode']&&b['product.productInfo.productDetails.flightTicket.bound.segment.operatedBy.airlineCode'].length>0){b.carrier_list=getConcatenatedWithPipe(b['product.productInfo.productDetails.flightTicket.bound.segment.operatedBy.airlineCode']);}
b.booking_class_detail='';if(b['product.productInfo.productDetails.flightTicket.bound.segment.bookingClass']&&b['product.productInfo.productDetails.flightTicket.bound.segment.bookingClass'].length>0){b.booking_class_detail=getConcatenatedWithPipe(b['product.productInfo.productDetails.flightTicket.bound.segment.bookingClass']);}
b.customerStatus='ANONYMOUS';if(typeof b['user.profile.profileInfo.loginStatus']!=='undefined'){if(b['user.profile.profileInfo.loginStatus'].toString()==='true'){b.ga_loginStatus='logged in';b.customerStatus=na_string;b.ga_loginType=na_string;b.ga_membership_status=na_string;if(digitalData?.user?.[0]?.profile?.[0]?.profileInfo?.profileId){let rawProfileId=digitalData.user[0].profile[0].profileInfo.profileId;if(rawProfileId&&rawProfileId!==null&&rawProfileId!==""){let lowerCaseProfileId=rawProfileId.toLowerCase();if(lowerCaseProfileId.includes('hash')){let cleanedProfileId=cleanProfileId(lowerCaseProfileId);b.ga_profileId=cleanedProfileId;b.newuserid=cleanedProfileId;}
else
{b.ga_profileId=lowerCaseProfileId;b.newuserid=lowerCaseProfileId;}}}
b.ga_profile_permissions=na_string;}else{b.ga_loginStatus=b.ga_loginType=b.ga_membership_status=b.ga_profile_permissions='logged out';}}else{b.ga_loginStatus=b.ga_loginType=b.ga_membership_status=b.ga_profile_permissions=na_string;}
if(query_string){b.ga_hs_querystring=query_string;}
if(anchor_tags){b.ga_hs_anchor=anchor_tags;}
if(arrival){b.ga_hs_arrival=arrival;}
if(departure){b.ga_hs_departure=departure;}
if(days_to_dep){b.daysUntilDep=days_to_dep;}
if(flowtype){b.ga_hs_flowtype=flowtype;}
if(destination){b.ga_hs_destination=destination;}
if(origin){b.ga_hs_origin=origin;}
if(ond){b.ga_hs_ond=ond;}
if(origin_con){b.ga_hs_origin_con=origin_con;}
if(destination_con){b.ga_hs_destination_con=destination_con;}
if(pax_age_group){b.ga_hs_paxAgeGroup=pax_age_group;}
if(pax_total){b.ga_hs_pax=pax_total;}
if(trip_type){b.ga_hs_triptype=trip_type;}
if(com_fare_family){b.ga_hs_com_ff=com_fare_family;}
if(cabin){b.ga_hs_cabin=cabin;}
if(trip_reason){b.ga_hs_trip_reason=trip_reason;}
if(clientID){b.ga_ss_clientId=clientID;}
if(journey_length){b.ga_journeyLength=journey_length;}
if(bundle){b.ga_hs_bundle=bundle;}
if(ffamily_code){b.ga_ffamily_code=ffamily_code;}
if(aircraft_code){b.ga_aircraft_code=aircraft_code;}
if(farebase_code){b.ga_hs_farebase=farebase_code;}
if(coupon_status){b.ga_hs_couponStatus=coupon_status;}
if(bk_class){b.ga_hs_booking_class=bk_class;}
}catch(e){utag.DB('DEBUG: following error in hs extension occured: '+e);gtag('event','crash',{'event_category':'debug','event_label':'hs ext -'+e});}}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['platformId']!='undefined'&&b['platformId']=='adcb2')){try{var funnel=b['page.category.primaryCategory'];var funnelStep=b['page.pageInfo.pageID'];var supported_funnels=['Booking','MMB','Voluntary Refund','Involuntary Refund','Invol Refund','Invol Rebooking','Rebooking','Manage my booking','Services','Amadeus Service Changer','Self reaccommodation'];var tid=b['transaction.PNR.transactionId'];var track_transaction=false;if(tid&&tid!="(not set)"&&a==="view"){if(b['page.pageInfo.pageID']==='CONFIRMATION'||b['page.pageInfo.pageID']==='OVERVIEW'||b['dom.pathname'].includes("confirmation")){if(supported_funnels.includes(funnel)){track_transaction=true;}}}
function timetothink(){if(funnel==='Booking'){var anct2t=b['product.productInfo.productDetails.ancillaryService.serviceCode'];if(anct2t&&anct2t.length>0){for(var i=0;i<anct2t.length;i++){var t2t=anct2t[i];if(t2t&&t2t=="TIME"){var items=b['transaction.payment.item.productInfo.productID'];var itemstring=[];if(items&&items.length>=0){for(var j=0;j<items.length;j++){if(items[j].indexOf("FlightTicket")==-1){itemstring.push(items[j])}}
if(items.length>0&&itemstring.length==items.length){return true;}else{return false}}}}
return false}else{return false}}}
var t2t=timetothink();if(track_transaction){var cookie_prefix='tid=';if(funnel==='Invol Refund'||funnel==='Voluntary Refund'||funnel==='Involuntary Refund'){cookie_prefix='tid_refund=';}else if(funnel==='Invol Rebooking'){cookie_prefix='tid_rebooking=';}
var cookie_val=cookie_prefix+tid+';';if(document.cookie.indexOf(cookie_val)>=0){track_transaction=false;}
var d=new Date();d.setTime(d.getTime()+(7*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cookie_val+expires+';';}
if(track_transaction){var transaction_with_anc=typeof b['product.productInfo.productDetails.ancillaryService.categoryCode']!=='undefined'&&b['product.productInfo.productDetails.ancillaryService.categoryCode'].length>0;if(funnel==="Booking"){b.ga_eventAction='purchase';b.order_id=tid;if(!t2t&&b.ga_eventAction==='purchase'){b.booking_counter=1;}
if(!t2t&&b.booking_counter===1){b.ga_hs_flightRevenue=b['product.productInfo.productDetails.flightTicket.itineraryPrice.totalPrice.amount_EURO']}}else if(funnel==="MMB"||funnel==="Manage my booking"||funnel==="Services"||funnel==="Rebooking"||funnel==="Amadeus Service Changer"){b.booking_counter=null;b.flight_bookings_co2=null;b['transaction.total.priceBreakdown.tax.totalTax.amount']=null
b['transaction.total.priceBreakdown.serviceFee.amount']=null;b['transaction.total.priceBreakdown.tax.surcharge.amount']=null;b['transaction.total.priceBreakdown.baseFarePrice.amount']=null;b['transaction.total.priceBreakdown.baseFarePrice_EUR']=null;if(funnel==='Rebooking'||(funnel==="Amadeus Service Changer"&&funnelStep!="ASCCONFIRMATION")){if(funnel==='Rebooking'){if(typeof b.ga_conversion_fees==="undefined"){var ChangeFeesAmount=b['product.productInfo.productDetails.flightTicket.bound.price.rebookingDetails.changeFees.amount'];if(Array.isArray(ChangeFeesAmount)){var conversionfee=ChangeFeesAmount.reduce(function(sum,val){var num=parseFloat(val);return isNaN(num)?sum:sum+num;},0);var penalty_fees=parseFloat(conversionfee.toFixed(2));if(penalty_fees<1000){b.ga_conversion_fees=penalty_fees;}
else{b.ga_conversion_fees=null;}}
else{b.ga_conversion_fees=null;}}
else{b.ga_conversion_fees=null;}}
b.order_id=tid;b.ga_eventAction="purchase";b.booking_counter=null;b.ga_flight_rebookings_vol=1;b.ga_flight_rebookings_vol_with_anc=transaction_with_anc?1:0;b.ga_flight_rebookings_vol_amt=b['transaction.total.totalPrice.amount'];}else{var is_UPGD_booking=false;var UPGD_index=0;var anc_status=b['product.productInfo.productDetails.ancillaryService.status'];var serviceCodes=b['product.productInfo.productDetails.ancillaryService.serviceCode'];if(anc_status&&serviceCodes){for(var i=0;i<serviceCodes.length;i++){var item=serviceCodes[i];if(item==="UPGD"&&anc_status[i]==="selected"){is_UPGD_booking=true;UPGD_index=i;break;}}}
if(anc_status&&anc_status.length>0&&anc_status.includes('selected')){b.ga_eventAction='purchase';b.order_id=tid;var transaction_revenue=0;var initial_transaction_revenue=0;var anc_revenues=b['product.productInfo.productDetails.ancillaryService.price.totalPrice.amount'];var anc_init_revenues=b['product.productInfo.productDetails.ancillaryService.price.totalPrice.amount_ORIG'];if(anc_revenues&&anc_revenues.length>0){for(var i=0;i<anc_revenues.length;i++){if(typeof anc_status[i]!=='undefined'&&anc_status[i]==="selected"&&typeof anc_revenues[i]!=='undefined'&&parseFloat(anc_revenues[i])&&(!is_UPGD_booking||i===UPGD_index)){transaction_revenue+=parseFloat(anc_revenues[i])}}}
if(anc_init_revenues&&anc_init_revenues.length>0){for(var i=0;i<anc_init_revenues.length;i++){if(typeof anc_status[i]!=='undefined'&&anc_status[i]==="selected"&&typeof anc_init_revenues[i]!=='undefined'&&parseFloat(anc_init_revenues[i])&&(!is_UPGD_booking||i===UPGD_index)){initial_transaction_revenue+=parseFloat(anc_init_revenues[i])}}}
b['transaction.total.totalPrice.amount']=transaction_revenue;b['transaction.total.totalPrice.amount_ORIG']=initial_transaction_revenue;}else{track_transaction=false;b['transaction.total.totalPrice.amount']=null;b['transaction.total.totalPrice.amount_ORIG']=null;b['transaction.payment.price.priceBreakdown.baseFarePrice.amount_EURO']=null;b['transaction.total.miles.cashPaidInMiles.amount']=null;b['transaction.total.miles.milesAmount']=null;}}
}else if(funnel==='Invol Refund'||funnel==='Voluntary Refund'||funnel==='Involuntary Refund'){b.ga_flight_refunds=1;b.ga_refunds_amt=b['transaction.total.refundDetails.refund.amount'];b.ga_refunds_with_anc=transaction_with_anc?1:0;b.order_id=null;b.booking_counter=null;}else if(funnel==='Invol Rebooking'||funnel==="Self reaccommodation"){b.ga_flight_rebookings=1;b.ga_rebookings_with_anc=transaction_with_anc?1:0;b.order_id=null;b.booking_counter=null;}
if(b['transaction.payment.paymentType']){var paymentTypes=b['transaction.payment.paymentType'];var paymentTypes_arr=[];for(var i=0;i<paymentTypes.length;i++){var paymentMethods=b['transaction.payment.methodOfPayment'];var paymentMethod=paymentMethods&&paymentMethods[i]?paymentMethods[i]:"";if(typeof paymentTypes[i]==='string'&&paymentTypes[i].length>0){var pt_short=paymentTypes[i].toLowerCase();paymentTypes_arr.push(pt_short);}else{paymentTypes_arr.push('(not set)');}
}
b.ga_hs_paymentMethod=paymentTypes_arr.length>0?paymentTypes_arr.join('|'):'(not set)';}
if(b['transaction.payment.methodOfPayment']){var paymentMethods=b['transaction.payment.methodOfPayment'];var paymentMethods_arr=[];for(var i=0;i<paymentMethods.length;i++){if(typeof paymentMethods[i]==='string'&&paymentMethods[i].length>0){paymentMethods_arr.push(paymentMethods[i].toLowerCase());}else{paymentMethods_arr.push('(not set)');}}
b.ga_hs_methodOfPayment=paymentMethods_arr.length>0?paymentMethods_arr.join('|'):'(not set)';}
}
if(a==='link'||!track_transaction){b.order_id=null;b.booking_counter=null;b.flight_bookings_co2=null;b.ga_flight_refunds=null;b.ga_refunds_amt=null;b.ga_refunds_with_anc=null;b.ga_flight_rebookings=null;b.ga_rebookings_with_anc=null;b.ga_flight_rebookings_vol=null;b.ga_flight_rebookings_vol_with_anc=null;b.ga_flight_rebookings_vol_amt=null;b.ga_hs_paymentMethod=null;b.ga_hs_methodOfPayment=null;b['transaction.total.totalPrice.currency']=null;b['transaction.total.totalPrice.currency_ORIG']=null;b['transaction.total.totalPrice.amount']=null;b['transaction.payment.price.priceBreakdown.baseFarePrice.amount_EURO']=null;b['transaction.total.miles.cashPaidInMiles.amount']=null;b['transaction.total.miles.milesAmount']=null;b['transaction.total.totalPrice.amount_ORIG']=undefined;b['transaction.total.priceBreakdown.serviceFee.amount']=null;b['transaction.total.priceBreakdown.tax.totalTax.amount']=null;b['transaction.total.priceBreakdown.tax.surcharge.amount']=null;b['transaction.total.priceBreakdown.baseFarePrice.amount']=null;}
if(!b.ga_eventCategory||(b.ga_eventCategory!=='error'&&b.ga_eventCategory!=='Warning')){b.ga_errorType=null;b.ga_errorCode=null;b.ga_errorMessage=null;b.error_counter=null;}
if((b.ga_eventCategory==='error'&&b.ga_eventAction!=='FormErrorOccurred')||(b.ga_eventCategory==='consent manager'&&b.ga_eventAction==='view')){b.ga_nonInteraction=true;}else{b.ga_nonInteraction=false;}}catch(e){utag.DB('DEBUG: following error in hs extension occured: '+e);gtag('event','crash',{'event_category':'debug','event_label':'error transaction ext -'+e});}}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['platformId']!='undefined'&&b['platformId']=='adcb2')){try{var na_string='(not set)';var funnel=b['page.category.primaryCategory'];var products=digitalData.product;var f_path='product.productInfo.productDetails.flightTicket.bound.';var anc_path='product.productInfo.productDetails.ancillaryService.';var ttype=b['ga_hs_triptype']||na_string;var ttype_short=na_string;var traveller=b['traveller.passengerTypeCode']&&b['traveller.passengerTypeCode'].length>0?b['traveller.passengerTypeCode']:'';var sub_cat=b['page.category.primaryCategory']||na_string;var flight_count=0;var anc_count=0;var seat_count=0;var baggage_count=0;var petc_count=0;var upgrade_count=0;var railAndFly_count=0;var co2_count=0;var meal_count=0;function getTimeString(dateString){var date=new Date(dateString);var hours=('0'+date.getHours()).slice(-2);var minutes=('0'+date.getMinutes()).slice(-2);var seconds=('0'+date.getSeconds()).slice(-2);return hours+':'+minutes+':'+seconds;}
function getDateString(dateString){var date=new Date(dateString);var year=date.getFullYear();var month=('0'+(date.getMonth()+1)).slice(-2);var day=('0'+date.getDate()).slice(-2);return year+'-'+month+'-'+day;}
function getDateAndTimeFormat(dateString){if(typeof dateString==='string'){return getDateString(dateString)+' '+getTimeString(dateString);}else{return na_string;}}
function getWeekDayAndTimeFormat(dateString){if(typeof dateString==='string'){var week_days=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];var date=new Date(dateString);return week_days[date.getDay()]+' '+getTimeString(dateString);}else{return na_string;}}
function getConcatenatedCategories(c1,c2,c3,c4){var fullCat=[];if(typeof c1==='string'&&c1!=='')fullCat.push(c1);if(typeof c2==='string'&&c2!=='')fullCat.push(c2);if(typeof c3==='string'&&c3!=='')fullCat.push(c3);if(typeof c4==='string'&&c4!=='')fullCat.push(c4);return fullCat.join('/');}
function getConcatenatedWithPipe(arr){if(arr.length>0){return arr.join('|');}else{return na_string;}}
if(ttype==='oneway'){ttype_short='OW';}else if(ttype==='roundtrip'){ttype_short='RT';}else if(ttype==='complex'){ttype_short='CP';}
var p_names=[];var p_ids=[];var p_quantities=[];var p_cats=[];var p_variants=[];var p_brands=[];var p_revenues=[];var p_revenues_EURO=[];var p_arrivals=[];var p_bookingClasses=[];var p_bundles=[];var p_departures=[];var p_destinations=[];var p_origins=[];var p_paxAgeGroups=[];var p_segIDs=[];var p_segOperatingCarriers=[];var p_layoverAirports=[];var p_segArrivals=[];var p_segDepartures=[];var p_segDestinations=[];var p_segAssociations=[];var p_segFlightNums=[];var p_segCarriers=[];var p_segNums=[];var p_segOrigins=[];var p_segCouponStatus=[];var p_farebaseCodes=[]
var p_cabins=[];var p_couponcode=[];var p_discountcode=[];var flight_quantities=[];var seg_quantities=[];var anc_quantities=[];var coupon_quantities=[];if((b['page.pageInfo.pageID']==='CONFIRMATION'||b['page.pageInfo.pageID']==='OVERVIEW'||b['dom.pathname'].includes("confirmation"))&&b['ga_eventAction']==='purchase'&&products&&traveller&&typeof funnel==='string'){function pushAttributes(attr){p_names.push(attr.name);p_ids.push(attr.id);p_quantities.push(attr.quantity);p_cats.push(attr.category);p_variants.push(attr.variant);p_brands.push(attr.brand);p_revenues.push(attr.revenue);p_revenues_EURO.push(attr.revenue_EURO)
p_arrivals.push(attr.arrival);p_bookingClasses.push(attr.seg_bkClass);p_bundles.push(attr.bundle);p_departures.push(attr.departure);p_destinations.push(attr.destination);p_origins.push(attr.origin);p_paxAgeGroups.push(attr.paxAgeGroup);p_segIDs.push(attr.seg_ID);p_segOperatingCarriers.push(attr.segOperatingCarrier);p_layoverAirports.push(attr.layover);p_segArrivals.push(attr.seg_arrival);p_segDepartures.push(attr.seg_departure);p_segDestinations.push(attr.seg_destination);p_segAssociations.push(attr.seg_f_association);p_segFlightNums.push(attr.seg_flightNum);p_segCarriers.push(attr.seg_carrier);p_cabins.push(attr.cabin);p_segNums.push(attr.seg_number);p_segOrigins.push(attr.seg_origin);p_segCouponStatus.push(attr.segCouponStatus);p_farebaseCodes.push(attr.seg_farebaseCode);p_couponcode.push(attr.coupon);p_discountcode.push(attr.discount);flight_quantities.push(attr.f_quantity);seg_quantities.push(attr.seg_quantity);anc_quantities.push(attr.anc_quantity);coupon_quantities.push(attr.c_quantity);}
function timetothink(){if(funnel==='Booking'){for(var i=0;i<products.length;i++){var cat=products[i].category?products[i].category.primaryCategory:'';if(cat&&cat=="AncillaryService"){var t2t=products[i].productInfo.productDetails.ancillaryService?(products[i].productInfo.productDetails.ancillaryService.categoryCode?products[i].productInfo.productDetails.ancillaryService.categoryCode:(products[i].productInfo.productDetails.ancillaryService.serviceCode?products[i].productInfo.productDetails.ancillaryService.serviceCode:'')):''
if(t2t&&t2t=="TIME"){var items=digitalData.transaction?digitalData.transaction.payment[0].item:[],itemstring=[];for(var j=0;j<items.length;j++){if(items[j].productInfo.productID.indexOf("FlightTicket")==-1){itemstring.push(items[j].productInfo.productID)}}
if(items.length>0&&itemstring.length==items.length){return true;}else{return false}}}}
return false}}
function setProductAttributes(p_cat,anc_categoryCode,anc_ServiceCode,p_index,f_index,seg_index,anc_index,segments){var bound_IDs=b['product.productInfo.productDetails.flightTicket.bound.boundID'];var bound_length=bound_IDs.length||0;var bound_type=na_string;var ond=na_string;var flightCodeAndNum=[];var attr={'category':na_string,'name':na_string,'id':na_string,'quantity':na_string,'variant':na_string,'brand':na_string,'revenue':na_string,'revenue_EURO':na_string,'origin':na_string,'destination':na_string,'departure':na_string,'arrival':na_string,'paxAgeGroup':na_string,'bundle':na_string,'seg_ID':[],'segOperatingCarrier':[],'seg_bkClass':[],'seg_origin':[],'segCouponStatus':[],'seg_destination':[],'seg_departure':[],'seg_arrival':[],'seg_f_association':[],'seg_flightNum':[],'seg_carrier':[],'seg_number':[],'seg_farebaseCode':[],'layover':[],'cabin':[],'f_quantity':na_string,'seg_quantity':na_string,'anc_quantity':na_string,'c_quantity':na_string,'coupon':na_string,'discount':na_string}
if(bound_length>0){bound_type=f_index===0||(f_index<bound_length-1)?'outbound':'inbound';}
var origin=na_string;var destination=na_string;if(f_index<0){origin=b['ga_hs_origin']||na_string;destination=b['ga_hs_destination']||na_string;}else if(b[f_path+'departure.airportCode']&&b[f_path+'arrival.airportCode']){origin=b[f_path+'departure.airportCode'][f_index]||na_string;destination=b[f_path+'arrival.airportCode'][f_index]||na_string;}
ond=origin+' '+destination;attr.origin=origin.toLowerCase();attr.destination=destination.toLowerCase();if(f_index<0&&b[f_path+'departure.dateTime']&&b[f_path+'departure.dateTime'][0]){attr.departure=getDateAndTimeFormat(b[f_path+'departure.dateTime'][0]);}else if(b[f_path+'departure.dateTime']&&b[f_path+'departure.dateTime'][f_index]){attr.departure=getDateAndTimeFormat(b[f_path+'departure.dateTime'][f_index]);}
if(f_index<0&&b[f_path+'arrival.dateTime']&&b[f_path+'arrival.dateTime'][bound_length-1]){attr.arrival=getDateAndTimeFormat(b[f_path+'arrival.dateTime'][bound_length-1]);}else if(b[f_path+'arrival.dateTime']&&b[f_path+'arrival.dateTime'][f_index]){attr.arrival=getDateAndTimeFormat(b[f_path+'arrival.dateTime'][f_index]);}
if(segments[0].operatedBy&&segments[0].operatedBy.airlineCode){attr.brand=segments[0].operatedBy.airlineCode.toLowerCase();}
if(b.ga_hs_paxAgeGroup){attr.paxAgeGroup=b.ga_hs_paxAgeGroup;}
if(f_index<0){attr.bundle=b['ga_hs_bundle'];}else if(b[f_path+'fareFamilyName']){attr.bundle=b[f_path+'fareFamilyName'][f_index]||na_string;}
for(var k=0;k<segments.length;k++){try{attr.seg_ID.push(segments[k].segmentID?segments[k].segmentID:na_string);attr.seg_bkClass.push(segments[k].bookingClass?segments[k].bookingClass.toLowerCase():na_string);attr.seg_origin.push((segments[k].departure&&segments[k].departure.airportCode)?segments[k].departure.airportCode.toLowerCase():na_string);attr.segCouponStatus.push(segments[k].coupon&&segments[k].coupon[0]&&segments[k].coupon[0].status?segments[k].coupon[0].status:na_string);attr.seg_destination.push((segments[k].arrival&&segments[k].arrival.airportCode)?segments[k].arrival.airportCode.toLowerCase():na_string);attr.seg_departure.push((segments[k].departure&&segments[k].departure.dateTime)?getDateAndTimeFormat(segments[k].departure.dateTime):na_string);attr.seg_arrival.push((segments[k].arrival&&segments[k].arrival.dateTime)?getDateAndTimeFormat(segments[k].arrival.dateTime):na_string);if(f_index>=0)attr.seg_f_association.push(f_index+1);attr.seg_flightNum.push(segments[k].marketingFlightNumber?segments[k].marketingFlightNumber:na_string);attr.seg_carrier.push(segments[k].marketingAirlineCode?segments[k].marketingAirlineCode.toLowerCase():na_string);attr.seg_farebaseCode.push(segments[k].fareBasis?segments[k].fareBasis.toLowerCase():na_string)
attr.segOperatingCarrier.push((segments[0].operatedBy&&segments[0].operatedBy.airlineCode)?segments[0].operatedBy.airlineCode.toLowerCase():na_string);attr.cabin.push(segments[k].cabin?segments[k].cabin:na_string);flightCodeAndNum.push((segments[k].marketingAirlineCode&&segments[k].marketingFlightNumber)?segments[k].marketingAirlineCode+segments[k].marketingFlightNumber:na_string);if(k>0){attr.layover.push((segments[k].departure&&segments[k].departure.airportCode)?segments[k].departure.airportCode.toLowerCase():na_string);}
if(b[f_path+'segment.segmentID']&&segments[k].segmentID&&b[f_path+'segment.segmentID'].indexOf(segments[k].segmentID)>-1){attr.seg_number.push(b[f_path+'segment.segmentID'].indexOf(segments[k].segmentID)+1)}else{attr.seg_number.push(na_string);}}catch(e){utag.DB('DEBUG: Product tracking extension crashed: '+e);gtag('event','crash',{'event_category':'debug','event_label':'product tracking extension error pt1'});}}
attr.seg_ID=getConcatenatedWithPipe(attr.seg_ID);attr.seg_bkClass=getConcatenatedWithPipe(attr.seg_bkClass);attr.seg_origin=getConcatenatedWithPipe(attr.seg_origin);attr.segCouponStatus=getConcatenatedWithPipe(attr.segCouponStatus);attr.seg_destination=getConcatenatedWithPipe(attr.seg_destination);attr.seg_departure=getConcatenatedWithPipe(attr.seg_departure);attr.seg_arrival=getConcatenatedWithPipe(attr.seg_arrival);attr.seg_f_association=attr.seg_f_association.length>0?getConcatenatedWithPipe(attr.seg_f_association):"journey";attr.seg_flightNum=getConcatenatedWithPipe(attr.seg_flightNum);attr.seg_carrier=getConcatenatedWithPipe(attr.seg_carrier);attr.seg_farebaseCode=getConcatenatedWithPipe(attr.seg_farebaseCode);attr.segOperatingCarrier=getConcatenatedWithPipe(attr.segOperatingCarrier);attr.cabin=getConcatenatedWithPipe(attr.cabin);attr.layover=getConcatenatedWithPipe(attr.layover);attr.seg_number=getConcatenatedWithPipe(attr.seg_number);flightCodeAndNum=getConcatenatedWithPipe(flightCodeAndNum);if((p_cat==='FlightTicket')||(p_cat==='RebookedFlightTicket')){var cat1='flight';var cat2=ttype;var cat3=sub_cat.toLowerCase();var cat4="chargeable";if(p_cat==='RebookedFlightTicket'&&products[p_index].productInfo.productDetails.flightTicket.bound[f_index].price.rebookingDetails.balance.amount<=0)
{cat4="free-of-charge";}
attr.category=getConcatenatedCategories(cat1,cat2,cat3,cat4);attr.name=cat1+' '+ond+' '+bound_type;attr.id=cat1+' '+ond+' '+ttype_short+' '+flightCodeAndNum+' '+bound_type;if(b[f_path+'departure.dateTime']&&b[f_path+'departure.dateTime'][f_index]){attr.variant=getWeekDayAndTimeFormat(b[f_path+'departure.dateTime'][f_index]);}
attr.quantity=1;attr.f_quantity=attr.quantity;attr.seg_quantity=segments.length*attr.f_quantity;attr.anc_quantity=0;attr.c_quantity=attr.seg_quantity+attr.anc_quantity;if(b[f_path+'price.totalPrice.amount']&&b[f_path+'price.totalPrice.amount'][f_index]){attr.revenue=b[f_path+'price.totalPrice.amount'][f_index];}
if(b[f_path+'price.totalPrice.amount_EURO']&&b[f_path+'price.totalPrice.amount_EURO'][f_index]){attr.revenue_EURO=b[f_path+'price.totalPrice.amount_EURO'][f_index];}
if(b["product.productInfo.productDetails.flightTicket.itineraryPrice.discount.discountPercentValue"]){var percentilevalue=b["product.productInfo.productDetails.flightTicket.itineraryPrice.discount.discountPercentValue"];var checkingArray=[];if(Array.isArray(percentilevalue)){for(var i=0;i<percentilevalue.length;i++){if(percentilevalue[i]>=0){checkingArray.push(percentilevalue[i]);}}}
if(checkingArray.length>0){var concatenatedpercenttilevalue=checkingArray.join('|');}
if(concatenatedpercenttilevalue){ga4_percentilecoupon=concatenatedpercenttilevalue;}}
if(b["product.productInfo.productDetails.flightTicket.itineraryPrice.discount.discountFixedValue.amount"]){var discountFixedamount=b["product.productInfo.productDetails.flightTicket.itineraryPrice.discount.discountFixedValue.amount"];var checkedArray=[];if(Array.isArray(discountFixedamount)){for(var j=0;j<discountFixedamount.length;j++){if(discountFixedamount[j]>=0){checkedArray.push(discountFixedamount[j]);}}}
if(checkedArray.length>0){var concatenatedfixedamount=checkedArray.join('|');}
if(concatenatedfixedamount){attr.discount=concatenatedfixedamount;}}
if(b["product.productInfo.productDetails.flightTicket.itineraryPrice.discount.discountCode"])
{var discountCodes=b["product.productInfo.productDetails.flightTicket.itineraryPrice.discount.discountCode"];if(discountCodes.length>0){var concatenatedCodes=discountCodes.join('|');}
if(concatenatedCodes){let couponpv=concatenatedCodes+"|"+concatenatedfixedamount+"|"+ga4_percentilecoupon;attr.coupon=couponpv;}}
pushAttributes(attr);}else if(p_cat==='AncillaryService'){var cat1='ancillary';var cat2=na_string;var cat3=sub_cat.toLowerCase();var cat4=na_string
if(b[anc_path+'categoryCode']&&b[anc_path+'categoryCode'][anc_index]){cat2=b[anc_path+'categoryCode'][anc_index].toLowerCase();if(funnel==='Rebooking')
{if(products[p_index].productInfo.productDetails.ancillaryService.isASCSeatInATC){cat2="ASCSeatInATC";}}
if(anc_categoryCode==="ASCSEAT")
{cat2="ascseat";}}
var anc_price_obj=products[p_index].productInfo.productDetails.ancillaryService.price;var anc_price=anc_price_obj?anc_price_obj.totalPrice.amount:0;var cat4=anc_price&&anc_price>0?"chargeable":"free-of-charge";var anc_scope=na_string;var product_variant=na_string;if(anc_ServiceCode==='SEAT'||anc_ServiceCode==='ASCSEAT'||anc_ServiceCode==='ASCSeatInATC'||anc_ServiceCode==='UPGD'||anc_ServiceCode==='RLFF'||anc_ServiceCode==='RLFY'||anc_categoryCode==='MEAL'){anc_scope='seg'+(seg_index+1);if(anc_ServiceCode==='RLFF'||anc_ServiceCode==='RLFY'){product_variant=anc_ServiceCode==='RLFF'?'FIRST CLASS':'SECOND CLASS';}else if(anc_categoryCode==='MEAL'){product_variant=anc_ServiceCode;}else{var characteristics=products[p_index].productInfo.productDetails.ancillaryService.characteristics;characteristics=characteristics?characteristics.map(a=>a.value):false;product_variant=characteristics?getConcatenatedWithPipe(characteristics):na_string;}}else if(anc_ServiceCode==='FBAG'||anc_ServiceCode==='SBAG'||anc_ServiceCode==='MBAG'||anc_ServiceCode==='KBAG'||anc_ServiceCode==='JBAG'||anc_ServiceCode==='IBAG'){anc_scope=bound_type;product_variant=anc_ServiceCode;}
else if(anc_ServiceCode==='PETC'){anc_scope=bound_type;product_variant=anc_ServiceCode;}
else if(anc_ServiceCode==='TIME'){product_variant=anc_ServiceCode;}else if(anc_ServiceCode==="ASAF"||anc_ServiceCode==="BCOZ"){anc_scope="journey";var characteristics=products[p_index].productInfo.productDetails.characteristics;characteristics=characteristics&&characteristics[0]&&characteristics[0].value?characteristics[0].value:false;product_variant=characteristics?anc_ServiceCode+"_"+characteristics:na_string;}
var anc_productID=na_string;if(b[anc_path+'serviceCode']&&b[anc_path+'serviceCode'][anc_index]){anc_productID=b[anc_path+'serviceCode'][anc_index];}
attr.category=getConcatenatedCategories(cat1,cat2,cat3,cat4);attr.name=cat1+' '+ond+' '+anc_scope+' '+anc_ServiceCode;attr.id=anc_productID;attr.quantity=1;attr.variant=product_variant;attr.f_quantity=0;attr.seg_quantity=0;attr.anc_quantity=1;attr.c_quantity=attr.seg_quantity+attr.anc_quantity;if(b[anc_path+'price.totalPrice.amount']&&b[anc_path+'price.totalPrice.amount'][anc_index]){attr.revenue=b[anc_path+'price.totalPrice.amount'][anc_index];}
if(b[anc_path+'price.totalPrice.amount_EURO']&&b[anc_path+'price.totalPrice.amount_EURO'][anc_index]){attr.revenue_EURO=b[anc_path+'price.totalPrice.amount_EURO'][anc_index];}
pushAttributes(attr);}}
for(var i=0;i<products.length;i++){var t2t=timetothink();var cat=b['product.category.primaryCategory']?b['product.category.primaryCategory'][i]:na_string;if((funnel==='Booking'&&cat==='FlightTicket'&&!t2t)||(funnel==='Rebooking'&&cat==='RebookedFlightTicket')){var bounds=products[i].productInfo.productDetails.flightTicket.bound;for(var j=0;j<bounds.length;j++){flight_count++;var anc_categoryCode='';var anc_serviceCode='';var p_index=i;var f_index=j;var anc_index=0;var seg_index=-1;var segments=bounds[j].segment;if(cat==="RebookedFlightTicket"&&bounds[j].price.rebookingDetails!==undefined)
{var segments=bounds[j].segment;}
if(cat==="FlightTicket")
{var segments=bounds[j].segment;}
if(segments){setProductAttributes(cat,anc_categoryCode,anc_serviceCode,p_index,f_index,seg_index,anc_index,segments);}}}else if(cat==='AncillaryService'){anc_count++;var anc_categoryCode='';var anc_serviceCode='';var p_index=i;var f_index=null;var seg_index=null;var anc_index=anc_count-1;var segments=[];var anc_status=b[anc_path+'status'];var serviceCodes=b[anc_path+"serviceCode"];var do_not_track=false;if(b[anc_path+'categoryCode']&&b[anc_path+'categoryCode'][anc_index]){anc_categoryCode=b[anc_path+'categoryCode'][anc_index];if(products[i].productInfo.productDetails.ancillaryService.isASCSeat!=undefined)
{if(anc_categoryCode==='SEAT'&&products[i].productInfo.productDetails.ancillaryService.isASCSeat===true)
{anc_categoryCode="ASCSEAT";}}
if(funnel==='Rebooking'){if(products[i].productInfo.productDetails.ancillaryService.isASCSeatInATC!=undefined){if(products[i].productInfo.productDetails.ancillaryService.isASCSeatInATC===true){anc_categoryCode="ASCSeatInATC";}}}}
if(b[anc_path+'serviceCode']&&b[anc_path+'serviceCode'][anc_index]){anc_serviceCode=b[anc_path+'serviceCode'][anc_index];if(products[i].productInfo.productDetails.ancillaryService.isASCSeat!=undefined)
{if(anc_serviceCode==='SEAT'&&products[i].productInfo.productDetails.ancillaryService.isASCSeat===true)
{anc_serviceCode="ASCSEAT";}}}
if((funnel==="MMB"||funnel==="Manage my booking"||funnel==="Services"||funnel==="Amadeus Service Changer"||funnel==="Rebooking")&&anc_status&&anc_status[anc_index]&&serviceCodes){var is_paid=anc_status[anc_index].includes('paid');var is_UPGD_booking=false;var is_SEAT_booking=false;var is_PETC_selected=false;var item=anc_serviceCode;if(item==="UPGD"&&anc_status[anc_index]==="selected"){is_UPGD_booking=true;}
if(item==="SEAT"&&anc_status[anc_index]==="selected"){is_SEAT_booking=true;}
if(item==="PETC"&&anc_status[anc_index]==="selected"){is_PETC_selected=true;}
do_not_track=is_paid||(is_UPGD_booking&&anc_serviceCode!=='UPGD')||(is_SEAT_booking&&anc_serviceCode!=='SEAT')||(is_PETC_selected&&anc_serviceCode!=='PETC');}
if(anc_serviceCode==='SEAT'||anc_serviceCode==='ASCSEAT'||anc_serviceCode==='UPGD'||anc_serviceCode==='RLFF'||anc_serviceCode==='RLFY'||anc_categoryCode==='MEAL'){if(anc_serviceCode==='SEAT'||anc_serviceCode==='ASCSEAT'){seat_count++;}else if(anc_serviceCode==='RLFF'||anc_serviceCode==='RLFY'){railAndFly_count++;}else if(anc_serviceCode==='UPGD'){upgrade_count++;}else if(anc_categoryCode==='MEAL'){meal_count++;}
if(funnel==='Rebooking')
{if(digitalData.product[i].productInfo.productDetails.ancillaryService.isASCSeatInATC){anc_serviceCode=digitalData.product[i].productInfo.productDetails.ancillaryService.isASCSeatInATC===true?"ASCSeatInATC":digitalData.product[i].productInfo.productDetails.ancillaryService.categoryCode}}
var anc_segID='';var f_seg_index=null;var bound=null;if(products[i].productInfo.productDetails.ancillaryService.segmentID){anc_segID=products[i].productInfo.productDetails.ancillaryService.segmentID;}
if(b['product.productInfo.productDetails.flightTicket.bound.segment.segmentID']){seg_index=b['product.productInfo.productDetails.flightTicket.bound.segment.segmentID'].indexOf(anc_segID)
if(seg_index===-1)seg_index=null;}
for(var j=0;j<products.length;j++){if(products[j].productInfo.productDetails.flightTicket){var bounds=products[j].productInfo.productDetails.flightTicket.bound;for(var k=0;k<bounds.length;k++){var segs=bounds[k].segment
for(var l=0;l<segs.length;l++){if(segs[l].segmentID===anc_segID){bound=products[j].productInfo.productDetails.flightTicket.bound;f_index=k;f_seg_index=l;break;}}}}}
if(bound&&typeof seg_index==='number'&&!do_not_track){segments.push(bound[f_index].segment[f_seg_index]);setProductAttributes(cat,anc_categoryCode,anc_serviceCode,p_index,f_index,seg_index,anc_index,segments);}}
else if(anc_serviceCode==='FBAG'||anc_serviceCode==='SBAG'||anc_serviceCode==='MBAG'||anc_serviceCode==='KBAG'||anc_serviceCode==='JBAG'||anc_serviceCode==='IBAG'){baggage_count++;var bound_ID=products[i].productInfo.productDetails.ancillaryService.boundID||null;seg_index=0;if(bound_ID&&b[f_path+'boundID']){var bound_ids=b[f_path+'boundID'];for(var j=0;j<bound_ids.length;j++){if(bound_ID===bound_ids[j]){f_index=j;break;}}}
if(typeof f_index==='number'){for(var j=0;j<products.length;j++){if(products[j].productInfo.productDetails.flightTicket){segments=products[j].productInfo.productDetails.flightTicket.bound[f_index].segment;}}}
if(segments.length>0&&!do_not_track){setProductAttributes(cat,anc_categoryCode,anc_serviceCode,p_index,f_index,seg_index,anc_index,segments);}}
else if(anc_serviceCode==='PETC'){petc_count++;var bound_ID=products[i].productInfo.productDetails.ancillaryService.boundID||null;seg_index=0;if(bound_ID&&b[f_path+'boundID']){var bound_ids=b[f_path+'boundID'];for(var j=0;j<bound_ids.length;j++){if(bound_ID===bound_ids[j]){f_index=j;break;}}}
if(typeof f_index==='number'){for(var j=0;j<products.length;j++){if(products[j].productInfo.productDetails.flightTicket){segments=products[j].productInfo.productDetails.flightTicket.bound[f_index].segment;}}}
if(segments.length>0&&!do_not_track){setProductAttributes(cat,anc_categoryCode,anc_serviceCode,p_index,f_index,seg_index,anc_index,segments);}}
else if(anc_serviceCode==="ASAF"||anc_serviceCode==="BCOZ"||(t2t&&anc_serviceCode==="TIME")){if(anc_serviceCode==="ASAF"||anc_serviceCode==="BCOZ"||anc_serviceCode!="TIME"){if((funnel==="MMB"||funnel==="Manage my booking"||funnel==="Services")){if(products[i].productInfo.productDetails.ancillaryService.status==="selected"){co2_count++;b.flight_bookings_co2=1;}}else{co2_count++;b.flight_bookings_co2=1;}}
f_index=-1;seg_index=-1;for(var j=0;j<products.length;j++){if(products[j].productInfo.productDetails.flightTicket){var bound=products[j].productInfo.productDetails.flightTicket.bound;for(var k=0;k<bound.length;k++){if(bound[k].segment){segments=segments.concat(bound[k].segment);}}}}
if(segments.length>0&&!do_not_track){setProductAttributes(cat,anc_categoryCode,anc_serviceCode,p_index,f_index,seg_index,anc_index,segments);}}}}
if(p_names.length>0){b.ga_product_name=p_names;}
if(p_ids.length>0){b.ga_product_id=p_ids;}
if(p_quantities.length>0){b.ga_product_quantity=p_quantities;}
if(p_cats.length>0){b.ga_product_category=p_cats;}
if(p_variants.length>0){b.ga_product_variant=p_variants;}
if(p_brands.length>0){b.ga_product_brand=p_brands;}
if(p_revenues.length>0){b.ga_product_revenue=p_revenues;}
if(p_revenues_EURO.length>0){b.ga_product_revenue_EURO=p_revenues_EURO;}
if(p_arrivals.length>0){b.ga_product_arr=p_arrivals;}
if(p_bookingClasses.length>0){b.ga_product_bkClass=p_bookingClasses;}
if(p_departures.length>0){b.ga_product_dep=p_departures;}
if(p_destinations.length>0){b.ga_product_dest=p_destinations;}
if(p_origins.length>0){b.ga_product_origin=p_origins;}
if(p_paxAgeGroups.length>0){b.ga_product_paxAgeGroup=p_paxAgeGroups;}
if(p_segIDs.length>0){b.ga_product_segID=p_segIDs;}
if(p_segOperatingCarriers.length>0){b.ga_product_segOperatingCarr=p_segOperatingCarriers;}
if(p_layoverAirports.length>0){b.ga_product_layoverAP=p_layoverAirports;}
if(p_segArrivals.length>0){b.ga_product_segArr=p_segArrivals;}
if(p_segDepartures.length>0){b.ga_product_segDep=p_segDepartures;}
if(p_segDestinations.length>0){b.ga_product_segDest=p_segDestinations;}
if(p_segAssociations.length>0){b.ga_product_segAss=p_segAssociations;}
if(p_segFlightNums.length>0){b.ga_product_segFlightNums=p_segFlightNums;}
if(p_segCarriers.length>0){b.ga_product_segCarrier=p_segCarriers;}
if(p_segNums.length>0){b.ga_product_segNum=p_segNums;}
if(p_segOrigins.length>0){b.ga_product_segOrigin=p_segOrigins;}
if(p_segCouponStatus.length>0){b.ga_product_segCouponStatus=p_segCouponStatus;}
if(p_cabins.length>0){b.ga_product_cabin=p_cabins;}
if(p_farebaseCodes.length>0){b.ga_product_farebase=p_farebaseCodes;}
if(p_bundles.length>0){b.ga_product_bundle=p_bundles;}
if(flight_quantities.length>0){b.ga_flight_quantity=flight_quantities;}
if(seg_quantities.length>0){b.ga_flight_seg_quantity=seg_quantities;}
if(anc_quantities.length>0){b.ga_anc_quantity=anc_quantities;}
if(coupon_quantities.length>0){b.ga_coupon_quantity=coupon_quantities;}
if(p_couponcode.length>0){b.ga4_promocoupon=p_couponcode;}
if(p_discountcode.length>0){b.ga4_discountcode=p_discountcode;}}}catch(e){utag.DB('DEBUG: Product tracking extension crashed: '+e);gtag('event','crash',{'event_category':'debug','event_label':'product tracking extension error'});}
}}catch(e){utag.DB(e)}},function(a,b){try{if(b['page.pageInfo.pageName'].toString().toLowerCase().indexOf('confirmation'.toLowerCase())>-1){try{if(b['ga_eventAction']==='purchase'&&digitalData.product.length>0){for(var i=0;i<digitalData.product.length;i++){if(digitalData.product[i].category.primaryCategory==='Insurance'){var na_string='(not set)',ga_mapping={'ga_product_name':'insurance','ga_product_id':digitalData.product[i].productInfo.productID,'ga_product_category':['ancillary','insurance','booking','chargeable'].join('/').toLowerCase(),'ga_product_revenue':digitalData.product[i].productInfo.productDetails.insurance.price.totalPrice.amount,'ga_product_revenue_EURO':tealiumiq_currency.convert(digitalData.product[i].productInfo.productDetails.insurance.price.totalPrice.amount.toString(),digitalData.product[i].productInfo.productDetails.insurance.price.totalPrice.currency,'EUR'),'ga_product_brand':na_string,'ga_product_variant':na_string,'ga_product_arr':na_string,'ga_product_bkClass':na_string,'ga_product_dep':na_string,'ga_product_dest':na_string,'ga_product_origin':na_string,'ga_product_paxAgeGroup':na_string,'ga_product_cabin':na_string,'ga_product_farebase':na_string,'ga_product_bundle':na_string,'ga_product_segID':window.lhgTealiumIQHelpers.extractFlightProductData('segment','segmentID'),'ga_product_segOperatingCarr':window.lhgTealiumIQHelpers.extractFlightProductData('segment','marketingAirlineCode'),'ga_product_layoverAP':na_string,'ga_product_segArr':window.lhgTealiumIQHelpers.extractFlightProductData('segment','arrival','dateTime'),'ga_product_segDep':window.lhgTealiumIQHelpers.extractFlightProductData('segment','departure','dateTime'),'ga_product_segDest':window.lhgTealiumIQHelpers.extractFlightProductData('segment','arrival','airportCode'),'ga_product_segAss':na_string,'ga_product_segFlightNums':window.lhgTealiumIQHelpers.extractFlightProductData('segment','marketingFlightNumber'),'ga_product_segCarrier':window.lhgTealiumIQHelpers.extractFlightProductData('segment','marketingAirlineCode'),'ga_product_segNum':na_string,'ga_product_segOrigin':window.lhgTealiumIQHelpers.extractFlightProductData('segment','departure','airportCode'),'ga_product_segCouponStatus':window.lhgTealiumIQHelpers.extractFlightProductData('segment','coupon','status')};for(var ga_property in ga_mapping){if(b[ga_property]&&b[ga_property].constructor===Array){b[ga_property].push(ga_mapping[ga_property]);}else{b[ga_property]=[];b[ga_property].push(ga_mapping[ga_property]);}}}}}}catch(err){utag.DB('DEBUG: Ext UID 372 crashed: '+err);}}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['platformId']!='undefined'&&b['platformId']=='adcb2')){try{var na_string='(not set)';b['page.pageInfo.pageId']=b['ga_pagename_market_lang'];b.mmPageID_firstPart=b['page.pageInfo.pageID'];b["conversion.funnel.funnelName"]=b["page.category.primaryCategory"];b["conversion.funnel.funnelStep"]=b['page.pageInfo.pageID'];if(b['page.pageInfo.pageID']==="FPPOUTBOUND"||b['page.pageInfo.pageID']==="FPPINBOUND"){b['pagetype']='searchresults';}else if(b['page.pageInfo.pageID']==='CONFIRMATION'&&b['page.category.primaryCategory']==='Booking'){b['pagetype']="purchase";b['booking_type']="sale";}else{if(b['page.category.primaryCategory']!=='Booking'){b['pagetype']="product";}else{b['pagetype']="cart";}}
b.current_page=b['page.pageInfo.pageName']||na_string;b['page.pageInfo.country']=b['digitalTouchpoint.touchpointInfo.market'];b["country_code"]=b["digitalTouchpoint.touchpointInfo.market"];b.market=na_string;if(b['digitalTouchpoint.touchpointInfo.market']&&b['digitalTouchpoint.touchpointInfo.market']!==na_string){b.market=b['digitalTouchpoint.touchpointInfo.market'].toUpperCase();}
if(b.market==='UK')b.market='GB';b.language=b['digitalTouchpoint.touchpointInfo.language']||na_string;b['page.pageInfo.language']=b.language;b.logged_in=b.ga_loginStatus;b['user.profile.loginType']=b.ga_loginType;b['user.profile.membership.status']=b.ga_membership_status;b['user.profile.profileInfo.permissions']=b.ga_profile_permissions;b.outboundDate=b.ga_hs_departure;b.inboundDate=b.ga_hs_arrival;b.destination_airport=b.ga_hs_destination;b.departure_airport=b.ga_hs_origin;b.trip_type=b.ga_hs_triptype;b.BFT=na_string;b.booking_class=b.ga_hs_com_ff;b.cabin_class=b.cabin_class_detail=b.ga_hs_cabin;b.farebase_codes=b.ga_hs_farebase;b.estimated_trip_reason=b.ga_hs_trip_reason;if(typeof b.outboundDate==='string'&&b.outboundDate.length==10){var s_o_day=b.outboundDate.substr(8,2);var s_o_month=b.outboundDate.substr(5,2);var s_o_year=b.outboundDate.substr(0,4);b.outboundDateYDM=s_o_year+s_o_month+s_o_day;b.outboundDateMY=s_o_month+'-'+s_o_year;b.outboundDateDMY=s_o_day+'-'+s_o_month+'-'+s_o_year;b.outboundDateDMYdot=s_o_day+'.'+s_o_month+'.'+s_o_year;}
if(typeof b.inboundDate==='string'&&b.inboundDate.length==10){var s_i_day=b.inboundDate.substr(8,2);var s_i_month=b.inboundDate.substr(5,2);var s_i_year=b.inboundDate.substr(0,4);b.inboundDateYMD=s_i_year+s_i_month+s_i_day;b.inboundDateDMY=s_i_day+'-'+s_i_month+'-'+s_i_year;}
b['cart.price.total']=b.revenueEUR=b['cart.price.totalPrice.amount'];b["cart.item.price.basePrice"]=b["product.productInfo.productDetails.flightTicket.bound.price.totalPrice.amount"];b["cart.item.productInfo.bookingClass"]=b["product.productInfo.productDetails.flightTicket.bound.segment.bookingClass"];b["cart.item.productInfo.bundle"]=b["product.productInfo.productDetails.flightTicket.bound.fareFamilyName"];b["cart.item.productInfo.arrival"]=b["product.productInfo.productDetails.flightTicket.bound.arrival.dateTime"];b["cart.item.productInfo.departure"]=b["product.productInfo.productDetails.flightTicket.bound.departure.dateTime"];b["cart.item.productInfo.destination"]=b["product.productInfo.productDetails.flightTicket.bound.arrival.airportCode"];b["cart.item.productInfo.origin"]=b["product.productInfo.productDetails.flightTicket.bound.departure.airportCode"];b['cart.item.productInfo.segment_flightNumber']=b['product.productInfo.productDetails.flightTicket.bound.segment.marketingFlightNumber'];if(window.digitalData&&window.digitalData["transaction"]){b["transaction.item.price.basePrice"]=b["transaction.total.priceBreakdown.baseFarePrice.amount"];b["transaction.item.productInfo.arrival"]=b["product.productInfo.productDetails.flightTicket.bound.arrival.airportCode"];b["transaction.item.productInfo.bookingClass"]=b["product.productInfo.productDetails.flightTicket.bound.segment.bookingClass"];b["transaction.item.productInfo.bundle"]=b["product.productInfo.productDetails.flightTicket.bound.fareFamilyName"];b["transaction.item.productInfo.departure"]=b["product.productInfo.productDetails.flightTicket.bound.segment.departure.dateTime"];b["transaction.item.productInfo.destination"]=b["product.productInfo.productDetails.flightTicket.bound.departure.airportCode"];b["transaction.item.productInfo.origin"]=b["product.productInfo.productDetails.flightTicket.bound.arrival.airportCode"];b['transaction.item.productInfo.segment_flightNumber']=b['product.productInfo.productDetails.flightTicket.bound.segment.marketingFlightNumber'];b["transaction.total.netFare"]=b["transaction.total.priceBreakdown.baseFarePrice.amount"];b["transaction.total.netFare_EUR"]=b['BFNetfareEUR']=b["transaction.total.priceBreakdown.baseFarePrice_EUR"];b["transaction.total.netFare_ORIG"]=b['BFNetfare']=b["transaction.total.priceBreakdown.baseFarePrice.amount_ORIG"];b["transaction.total.transactionTotal"]=b.revenueEUR=b["transaction.total.totalPrice.amount"];b["transaction.total.transactionTotal_ORIG"]=b.revenue=b["transaction.total.totalPrice.amount_ORIG"];b.taxesEUR=b['transaction.total.priceBreakdown.tax.totalTax.amount'];b.taxes=b['transaction.total.priceBreakdown.tax.totalTax.amount_ORIG'];b["transaction.total.surcharge"]=b.YQEUR=b["transaction.total.priceBreakdown.tax.surcharge.amount"];b["transaction.total.surcharge_ORIG"]=b.YQ=b["transaction.total.priceBreakdown.tax.surcharge.amount_ORIG"]
b['transaction.total.currency']=b['transaction.total.totalPrice.currency'];b["transaction.transactionId"]=b["random_number"];b['transaction.pnr']=b.random_number;b['transaction.attributes.payment.paymentMethod']=b.ga_hs_paymentMethod;}
b['error.errorInfo.errorCode']=b.ga_errorCode;b['error.errorInfo.message']=b.ga_errorMessage;b['error.errorInfo.detail']=b.ga_errorDetail;b['segments_origin']=b["product.productInfo.productDetails.flightTicket.bound.arrival.airportCode"];b['segments_destination']=b["product.productInfo.productDetails.flightTicket.bound.departure.airportCode"];b['segments_compartment']=b['segments_class']=b["product.productInfo.productDetails.flightTicket.bound.segment.bookingClass"];b['segments_bundle']=b["product.productInfo.productDetails.flightTicket.bound.fareFamilyName"];b['segments_flightNumber']=b['product.productInfo.productDetails.flightTicket.bound.segment.marketingFlightNumber'];b['segments_departure']=[];if(b['transaction.item.productInfo.departure']){for(var i=b['transaction.item.productInfo.departure'].length-1;i>=0;i--){var index_end=b['transaction.item.productInfo.departure'][i].indexOf('T');b['segments_departure'].push(b['transaction.item.productInfo.departure'][i].slice(0,index_end))}}
b['anc_flight']='no';b['anc_other']='no'
var anc_codes=b['product.productInfo.productDetails.ancillaryService.categoryCode'];if(typeof anc_codes!=='undefined'&&anc_codes.length>0){b['anc_flight']='yes'}}
catch(ex){console.log(ex);gtag('event','crash',{'event_category':'debug','event_label':'B2 marketing mapping ext -'+ex});}}}catch(e){utag.DB(e)}},function(a,b,c,d,e,f,g){if(1){d=b['ut.env'];if(typeof d=='undefined')return;c=[{'dev':'G-HYH4HQH4DX'},{'qa':'G-HYH4HQH4DX'},{'prod':'G-EJMWHEJGLX'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['ga4_measurement_id']=c[e][f];m=true};};if(m)break};if(!m)b['ga4_measurement_id']='';}},function(a,b,c,d,e,f,g){if(1){d=b['cp.CONSENTMGR'];if(typeof d=='undefined')return;c=[{'c1:1|c2:1|c3:1|c4:1':'true'},{'c1:1|c2:0|c3:0|c4:0':'false'},{'c1:1|c2:1|c3:0|c4:0':'true'},{'c1:1|c2:1|c3:1|c4:0':'true'},{'c1:1|c2:0|c3:1|c4:0':'false'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d.toString().indexOf(f)>-1){b['ga4_google_signals_analytics_storage']=c[e][f];m=true};};if(m)break};if(!m)b['ga4_google_signals_analytics_storage']='false';}},function(a,b,c,d,e,f,g){if(1){d=b['cp.CONSENTMGR'];if(typeof d=='undefined')return;c=[{'c1:1|c2:1|c3:1|c4:1':'true'},{'c1:1|c2:0|c3:0|c4:0':'false'},{'c1:1|c2:1|c3:0|c4:0':'false'},{'c1:1|c2:1|c3:1|c4:0':'false'},{'c1:1|c2:0|c3:1|c4:0':'false'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d.toString().indexOf(f)>-1){b['ga4_google_signals_ad_storage']=c[e][f];m=true};};if(m)break};if(!m)b['ga4_google_signals_ad_storage']='false';}},function(a,b){try{if(b['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase()){var lh_classLookup={f:'First',o:'First',c:'Business',d:'Business',i:'Business',j:'Business',p:'Business',r:'Business',z:'Business',e:'PremiumEconomy',g:'PremiumEconomy',n:'PremiumEconomy',b:'Economy',h:'Economy',k:'Economy',l:'Economy',m:'Economy',q:'Economy',s:'Economy',t:'Economy',u:'Economy',v:'Economy',w:'Economy',x:'Economy',y:'Economy'};var lx_classLookup={firstclass:'First',business:'Business',economy:'Economy'};function gFormatDate(dateString){var newDate=new Date(dateString);var result;if(newDate.getTime()!==newDate.getTime()&&typeof dateString==="string"){var dotSpaced=dateString.split('.');if(dotSpaced.length>2){result=dotSpaced[2]+"-"+dotSpaced[1]+"-"+dotSpaced[0]}}else if(newDate.getTime()===newDate.getTime()){var splt=newDate.toISOString();result=splt.split("T")[0];}
return result;}
function getSegments(datalayerLevel){b["segments_origin"]=[];b["segments_destination"]=[];b["segments_departure"]=[];b["segments_bundle"]=[];b["segments_class"]=[];b["segments_compartment"]=[];b["segments_flightNumber"]=[];b["segments_mCarrier"]=[];var segments=[];var osFlag=false;if(datalayerLevel.item[0]&&typeof(datalayerLevel.item[0])=="object"){if(datalayerLevel.item[0].productInfo.segments&&datalayerLevel.item[0].productInfo.segments[0].mCarrier.split("/").length>0){osFlag=true;b["segments_mCarrier"]=datalayerLevel.item[0].productInfo.segments[0].mCarrier.split("/");}
for(var i=0;i<datalayerLevel.item.length;i++){let item=datalayerLevel.item[i];if(typeof(item.category)=="object"){if(item.category.category1==="flight"){if(item.productInfo){if(item.productInfo.hasOwnProperty("segment")||item.productInfo.hasOwnProperty("segments")){let segments=item.productInfo.segment||item.productInfo.segments;for(var j=0;j<segments.length;j++){var fns=[];if(osFlag){var fn=segments[j].flightNumber.split("/");for(var k=0;k<fn.length;k++){var car=b["segments_mCarrier"].shift().toUpperCase();fns.push(car+fn[k]);}
b["segments_flightNumber"].push(fns.join("/"));}else{b["segments_flightNumber"].push(segments[j]["mCarrier"].toUpperCase()+segments[j]["flightNumber"]);}
b["segments_origin"].push(segments[j]["origin"].toUpperCase());b["segments_destination"].push(segments[j]["destination"].toUpperCase());b["segments_departure"].push(gFormatDate(segments[j]["departure"]));b["segments_bundle"].push(segments[j]["bundle"]||item.productInfo.bundle);b["segments_class"].push(segments[j]["class"]||item.productInfo.bookingClass);if(b["lhg_tenant"]&&b["lhg_tenant"]==="lx"){let compartment=lx_classLookup[item.productInfo.productId.split(" ").pop()];b["segments_compartment"].push(compartment);}else if(b["lhg_tenant"]&&b["lhg_tenant"]==="lh"){let compartment=lh_classLookup[segments[j]["class"]];b["segments_compartment"].push(compartment);}}}}}}}}}
if(window.lhgData){try{let domain=b['dom.domain'];if(/.*swiss\.com/.test(domain)){b.lhg_tenant="lx";}else if(/.*lufthansa\.com/.test(domain)){b.lhg_tenant="lh";}else if(/(.*austrian|auaweb-int\.2e-systems)\.com/.test(domain)){b.lhg_tenant="os";}else if(/.*brusselsairlines\.com/.test(domain)){b.lhg_tenant="sn";}else if(/.*amadeus\.com/.test(domain)){let path=b['dom.pathname'];if(/\/lh\/.*/.test(path)){b.lhg_tenant="lh";}else if(/\/lx\/.*/.test(path)){b.lhg_tenant="lx";}else if(/\/os\/.*/.test(path)){b.lhg_tenant="os";}else if(/\/sn\/.*/.test(path)){b.lhg_tenant="sn";}}else{b.lhg_tenant=undefined;}
if(window.lhgData.transaction){getSegments(window.lhgData.transaction);b.lhg_refundFlag=0;if(window.lhgData.transaction.total){b.lhg_netfare=window.tmParam.net_fare||window.lhgData.transaction.total.netfare||window.lhgData.transaction.total.netFare||"";if(window.lhgData.transaction.total.voucher&&window.lhgData.transaction.total.voucher.voucherId){if(window.lhgData.transaction.total.voucher.voucherId.indexOf("ref")!==-1){b.lhg_refundFlag=1}
}else if(b.ga_evoucher){if(b.ga_evoucher!=="no_evoucher"){b.lhg_refundFlag=0}else if(b.ga_evoucher.indexOf("ref")!==-1){b.lhg_refundFlag=1}
}else if(window.lhgData.transaction.attributes){}}}}catch(ex){}}
else{}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){b['key']='g59nks972akqbga396shmdf4'}}catch(e){utag.DB(e);}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[281]=='undefined'){utag.runonce.ext[281]=1;if(1){(function(){window.lhgEvent={fire:function(customData,eventCategory,eventAction,eventLabel,eventValue=null,tealiumEventName=null){try{if(customData){let tmp=Object.assign({},utag.data);if(tealiumEventName)tmp.tealium_event=tealiumEventName;tmp.ga_eventCategory=eventCategory;tmp.ga_eventAction=eventAction;tmp.ga_eventLabel=eventLabel;tmp.ga_eventProduct=tmp.event_product=customData.product;if(eventValue)tmp.ga_eventValue=eventValue;tmp=Object.assign(tmp,customData);tmp['error.errorInfo.elementName']=null;tmp['error.errorInfo.type']=null;tmp['error.errorInfo.errorCode']=null;tmp['error.errorInfo.message']=null;tmp['error.errorInfo.detail']=null;tmp['error_counter']=null;tmp.ga_errorType=null;tmp.ga_errorCode=null;tmp.ga_errorMessage=null;tmp.ga_errorDetail=null;utag.link(tmp);}}
catch(ex){}}};})();}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[290]=='undefined'){utag.runonce.ext[290]=1;if(1){function cleanPageType(myPT){if(typeof myPT==="undefined"||myPT===null){return"NA "+window.location.pathname;}
var cleanedCharacter="";var cleanedPT=myPT.replace(/\s/g,cleanedCharacter);return cleanedPT;}
function capitalizePax(str){return str.charAt(0).toUpperCase()+str.slice(1);}
function kiboConvert(myPrice){return parseFloat(myPrice)*kiboExchange;}
function monCleanDate(flightDateValue){const parsedDate=new Date(flightDateValue);if(isNaN(parsedDate)){return'20000101';}
const year=parsedDate.getFullYear();const month=String(parsedDate.getMonth()+1).padStart(2,'0');const day=String(parsedDate.getDate()).padStart(2,'0');const formattedDate=year.toString()+month.toString()+day.toString();return(formattedDate);}
function triggerMonetateEvent(evName,evCat,evValue){if(typeof gtag==="function"){gtag('event',evName,{event_category:evCat+"_"+window.location.href,event_label:evValue,value:evValue});}else{debuglog("gtag is not available ...yet...");}}
function getCookieTID(cname){let name=cname+"=";let decodedCookie=decodeURIComponent(document.cookie);let ca=decodedCookie.split(';');for(let i=0;i<ca.length;i++){let c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return"";}
function resetmonetateNonPageView(){window.expNonPageView=false;}
window.monetateSetPageType="";function getPageType(){var setPageType='default';if(window.location.pathname.indexOf('/booking/availability/0')>-1){setPageType='FPPOUTBOUND';}else if(window.location.pathname.indexOf('/booking/availability/1')>-1){setPageType='FPPINBOUND';}else if(window.location.pathname.indexOf('/booking/cart')>-1){var PNRRecLoc=(digitalData?.transaction?.PNR?.recLoc?.length>0)?"_ORDER_BASED":"_CART_BASED";setPageType=(digitalData&&digitalData.page.pageInfo.pageID&&/BASED/.test(digitalData?.page?.pageInfo?.pageID?.toUpperCase()))?digitalData?.page?.pageInfo?.pageID?.toUpperCase():"SHOPPINGCART"+PNRRecLoc;}else if(window.location.pathname.indexOf('/booking/traveler/')>-1){setPageType='TRAVELER';}else if(window.location.pathname.indexOf('/booking/services/BAGGAGE')>-1){setPageType='BAGGAGE';}else if(window.location.pathname.indexOf('/booking/seatmap/')>-1){setPageType='SEATMAP';}else if(window.location.pathname.indexOf('/services/ACKI')>-1){setPageType='ACKI';}else if(window.location.pathname.indexOf('/booking/confirmation')>-1){setPageType='CONFIRMATION';}else if(window.location.pathname.indexOf('/manage-booking/confirmation')>-1){setPageType='CONFIRMATION';}else if(window.location.pathname.indexOf('/booking/contact-info')>-1){setPageType='CONTACT-INFO';}else if(digitalData?.page?.pageInfo?.pageID!==undefined){setPageType=digitalData.page.pageInfo.pageID;}else{setPageType=window.location.pathname;}
return setPageType}
function trackData(){return true
}
function setCustomVariable(name,value){if(value===undefined||value=="n/a"){return null}else{try{let cvArgs={name:name,value:value,};return cvArgs;}catch(e){return null;}}}
function getCurrencyFromSessionStorage(){const SESSION_KEY='airBounds';try{const sessionData=sessionStorage.getItem(SESSION_KEY);if(!sessionData){debuglog(`Session storage item'${SESSION_KEY}'not found.`);return null;}
const airBoundsObject=JSON.parse(sessionData);const currencyCode=airBoundsObject?.entries?.[0]?.airBoundGroups?.[0]?.airBounds?.[0]?.prices?.totalPrices?.[0]?.currencyCode;if(currencyCode){return currencyCode;}else{debuglog("Currency code is undefined in the airBounds structure.");return null;}}catch(error){debuglog("Error parsing airBounds session data or accessing properties:",error);return null;}}
function getCurrencyFromElement(){const selector='.mcp-currency-selectbox mat-select-trigger';const currencyElement=document.querySelector(selector);if(currencyElement){const fullText=currencyElement.textContent.trim();const regexMatch=fullText.match(/\((\w{3})\)/);if(regexMatch&&regexMatch[1]){return regexMatch[1];}}
return null;}
function isSetPageTypePopulated(objArray){return true;}
function calculateDaysBetweenDates(date1Str,date2Str){const date1=new Date(date1Str.slice(0,4)+'-'+date1Str.slice(4,6)+'-'+date1Str.slice(6,8));const date2=new Date(date2Str.slice(0,4)+'-'+date2Str.slice(4,6)+'-'+date2Str.slice(6,8));const differenceMs=Math.abs(date2-date1);const days=Math.ceil(differenceMs/(1000*60*60*24));return days;}
function generateBFT(){let EU_IATA=["AGA","AHU","DJE","HRG","MIR","NBE","NDR","OUD","RAK","RBA","RMF","SSH","TLV","TNG","SJJ","SOF","BUD","SKP","BUH","OTP","EVN","BAK","MSQ","OMO","BOJ","GOZ","ROU","SLS","TGV","VAR","VID","DBV","LSZ","OSI","PUY","RJK","SPU","ZAD","ZAG","QUF","TLL","TBS","RIX","VNO","OHD","CND","AER","KHV","HTA","IKT","KZN","MRV","MOW","DME","SVO","VKO","MMK","OVB","LED","UUD","VLU","ARH","YKS","BTS","LJU","MBX","KBP","IEV","LWO","NLV","ODS","SIP","BEG","INI","QND","TGD","PRN","TIV","TIA","INN","SZG","VIE","CPH","HEL","BER","SXF","TXL","DRS","HAM","ATH","HEW","CFU","KGS","JMK","MJT","RHO","SKG","IBZ","ORK","DUB","GWY","KIR","NOC","SNN","CAG","MLA","BGO","OSL","TRF","KRK","WAW","LIS","PDL","PMI","SVQ","VLC","GOT","STO","ARN","BMA","BHD","BFS","PIK","GLA","INV","ALV","GRZ","KLU","LNZ","ANR","BRU","LGG","AKT","LCA","QLI","NIC","PFO","PRG","AAR","AAL","BLL","EBJ","FAE","KRP","ODE","RNN","SKS","SGD","TED","ENF","IVL","JOE","JYV","KAJ","KHJ","KEM","KTT","KOK","KUO","KAO","LPP","MHQ","MIK","OUL","POR","RVN","SVL","SJY","SOT","TMP","TKU","VAA","VRK","AJA","LBI","NCY","AUR","BIA","BIQ","BOD","BES","CLY","CMF","CFE","DNR","FSC","FRJ","GNB","LRH","LAI","LIL","LIG","LRT","LDE","LYS","MRS","MZM","MPL","MLH","ENC","NTE","NCE","FNI","PAR","CDG","LBG","ORY","PUF","PGF","UIP","RNS","RNE","RDZ","SBK","EBU","SXB","TLS","AGB","BYU","BRE","CGN","DTM","DUS","ERF","FRA","HNN","FDH","HAJ","HOQ","FKB","KEL","CGN","LEJ","MUC","FMO","MSR","NUE","PAD","SCN","STR","GWT","WIE","GIB","GPA","CHQ","JKH","HER","KLX","AOK","KVA","PVK","SKG","SMI","JSI","JTR","ZTH","CXI","EGS","REK","KEF","SXL","AHO","AOI","BRI","BGY","BLQ","VBS","BDS","CTA","FLR","GOA","SUF","LMP","MIL","LIN","MXP","BGY","NAP","OLB","PMO","PNL","PEG","PSR","PSA","REG","RMI","ROM","CIA","FCO","TPS","TSF","TRS","TRN","VCE","VBS","VRN","LUX","AMS","HAG","EIN","LEY","MST","RTM","AES","ALF","BDU","BOO","BNN","EVE","FRO","HFT","HAU","KKN","KRS","KSU","LKL","SOG","SVG","TOS","TRD","GDN","POZ","SZZ","FAO","FNC","HOR","OPO","PXO","SMA","TER","ALC","LEI","ACE","BJZ","BCN","BIO","ODB","FUE","GRO","GRX","XRY","LCG","LPA","MAD","MAH","AGP","MJV","OVD","REU","EAS","SPC","SDR","SCQ","TCI","TFS","TFN","VLL","VDE","VGO","VIT","ZAZ","LYR","JHE","JKG","KLR","KSD","KRN","KID","LDK","LLA","MMA","MMX","NRK","ORB","RNB","SDL","VXO","VST","VBY","ACH","BSL","BRN","ZDJ","GVA","LUG","ZRH","EAP","TFN","TFS","SZD","ABZ","BHX","BRS","CBG","CWL","EMA","LDY","EDI","GCI","HUY","IOM","JER","LBA","LPL","LON","LCY","LGW","LHR","LTN","STN","MAN","NCL","KOI","SOU","SEN","STN","SYY","LSI","MME","WIC"];let origin=digitalData?.searchInput?.searchInputInfo?.flightDetails?.[0]?.departure?.locationCode
let destination=digitalData?.searchInput?.searchInputInfo?.flightDetails?.[0]?.arrival?.locationCode;if(!origin||!destination){return"N/A";}
var flightBFT=(EU_IATA.includes(origin?.toUpperCase())&&EU_IATA.includes(destination?.toUpperCase()))?"K":"IK"
return flightBFT;}
function validateAncCartTable(ancCartTable){const errors=[];ancCartTable.forEach((item,index)=>{const itemErrors=[];if(typeof item.productId!=="string"||item.productId.trim()===""){itemErrors.push("productId must be a non-empty string.");}
if(!Number.isInteger(item.quantity)||item.quantity<=0){itemErrors.push("quantity must be an integer greater than 0.");}
if(!(Number.isInteger(item.unitPrice)||(typeof item.unitPrice==="string"&&/^\d+\.\d{2}$/.test(item.unitPrice)))){itemErrors.push('unitPrice must be an integer or a string in the format "0000.00".');}
if(typeof item.currency!=="string"||item.currency.trim()===""){itemErrors.push("currency must be a non-empty string.");}
if(itemErrors.length>0){errors.push({index,errors:itemErrors,});}});return errors.length===0?{valid:true,errors:[]}:{valid:false,errors};}
function validateReviewObject(bookingObject){const errors=[];if(Object.keys(bookingObject).length===0){return{valid:true,errors:[]};}
const requiredFields={depDate:(value)=>typeof value==="string"&&/^\d{8}$/.test(value),destination:(value)=>typeof value==="string"&&value.trim()!=="",origin:(value)=>typeof value==="string"&&value.trim()!=="",travelers:(value)=>(Number.isInteger(value)&&value>0)||/^[1-9]\d*$/.test(value),};const optionalFields={adults:(value)=>(Number.isInteger(value)&&value>=0)||/^\d+$/.test(value),infants:(value)=>(Number.isInteger(value)&&value>=0)||/^\d+$/.test(value),minors:(value)=>(Number.isInteger(value)&&value>=0)||/^\d+$/.test(value),seniors:(value)=>(Number.isInteger(value)&&value>=0)||/^\d+$/.test(value),retDate:(value)=>typeof value==="string"&&/^\d{8}$/.test(value),serviceClass:(value)=>typeof value==="string"&&value.trim()!=="",};const validateField=(field,rules,obj,isOptional=false)=>{const value=obj[field]?.[0];if(value===undefined&&isOptional)return;if(!rules[field](value)){errors.push(field+' is invalid or missing: '+value);}};Object.keys(requiredFields).forEach((field)=>{validateField(field,requiredFields,bookingObject);});Object.keys(optionalFields).forEach((field)=>{validateField(field,optionalFields,bookingObject,true);});return errors.length===0?{valid:true,errors:[]}:{valid:false,errors};}
function populateReviewObj(){if(digitalData?.digitalTouchpoint?.touchpointInfo?.bookingFlow=="Booking"){var flightDetailsPax=digitalData.searchInput.searchInputInfo.flightDetails[0].passenger;var paxCounts=flightDetailsPax.reduce(function(acc,passenger){var passengerCountFix=Math.floor(parseFloat(passenger.numberOfPassengers)||0);acc.totalPassengers+=passengerCountFix;if(passenger.passengerTypeCode==="ADT"){acc.countADT+=passengerCountFix;}else if(passenger.passengerTypeCode==="CHD"){acc.countCHD+=passengerCountFix;}else if(passenger.passengerTypeCode==="INF"){acc.countINF+=passengerCountFix;}
return acc;},{totalPassengers:0,countADT:0,countCHD:0,countINF:0});var serviceClass='';let flightTicketIndex=-1;for(let i=0;i<digitalData.product.length;i++){const product=digitalData.product[i];if(product.category.primaryCategory==="FlightTicket"){serviceClass=product.productInfo.productDetails.flightTicket.bound[0].segment[0].bookingClass;flightTicketIndex=i;break;}}
if(typeof digitalData?.product[flightTicketIndex]?.productInfo?.productDetails?.flightTicket?.bound?.[0]?.segment?.[0]?.bookingClass!=="undefined"){serviceClass=digitalData.product[flightTicketIndex].productInfo.productDetails.flightTicket.bound[0].segment[0].bookingClass;const serviceClassMapping={'Y':'Economy','B':'Economy','M':'Economy','U':'Economy','H':'Economy','Q':'Economy','V':'Economy','W':'Economy','S':'Economy','T':'Economy','X':'Economy','N':'Economy','L':'Economy','K':'Economy','J':'Business','C':'Business','D':'Business','Z':'Business','P':'Business','I':'Business','R':'Business','F':'First','A':'First','O':'First'};serviceClass=serviceClassMapping[serviceClass]||'Economy';}
reviewObject={'depDate':[digitalData?.searchInput?.searchInputInfo?.flightDetails?.[0].departure.dateTime.replaceAll('-','')],'destination':[digitalData?.searchInput?.searchInputInfo?.flightDetails?.[0].arrival.locationCode.toLowerCase()],'origin':[digitalData?.searchInput?.searchInputInfo?.flightDetails?.[0].departure.locationCode.toLowerCase()],'travelers':[paxCounts.totalPassengers],'adults':[paxCounts.countADT],'infants':[paxCounts.countCHD],'minors':[paxCounts.countINF],'retDate':(digitalData?.searchInput?.searchInputInfo?.flightDetails?.[0]?.tripType==='R')?[digitalData?.searchInput?.searchInputInfo?.flightDetails?.[1].departure.dateTime.replaceAll('-','')]:[''],'serviceClass':[serviceClass]}
reviewObject=Object.fromEntries(Object.entries(reviewObject).filter(([key,value])=>!(Array.isArray(value)&&value.length===1&&(value[0]===0||value[0]===''))));return reviewObject;}else{return{};}}
function getFormattedFlightInfo(){const pageType=window?.monetateSetPageType;const flightDetails=digitalData?.searchInput?.searchInputInfo?.flightDetails;if(!flightDetails||!Array.isArray(flightDetails))return null;const index=pageType==="FPPOUTBOUND"?0:pageType==="FPPINBOUND"?1:null;if(index===null||!flightDetails[index])return null;const segment=flightDetails[index];const departureCode=segment?.departure?.locationCode;const arrivalCode=segment?.arrival?.locationCode;const departureDate=segment?.departure?.dateTime?.replaceAll('-','');if(departureCode&&arrivalCode&&departureDate){return departureCode+'-'+arrivalCode+'-'+departureDate;}
return null;}
function pushFlightsToCartRow(){const flightsTable=[];const products=digitalData?.product;if(!Array.isArray(products))return false;const flightProduct=products.find(p=>p?.category?.primaryCategory==='FlightTicket');const bounds=flightProduct?.productInfo?.productDetails?.flightTicket?.bound;if(Array.isArray(bounds)){bounds.forEach(bound=>{const departureCode=bound?.departure?.airportCode;const arrivalCode=bound?.arrival?.airportCode;const rawDateTime=bound?.departure?.dateTime;const dateMatch=rawDateTime?.match(/^(\d{4})-(\d{2})-(\d{2})/);const formattedDate=dateMatch?dateMatch[1].toString()+dateMatch[2].toString()+dateMatch[3].toString():null;if(departureCode&&arrivalCode&&formattedDate){const productId=departureCode+'-'+arrivalCode+'-'+formattedDate;flightsTable.push({productId:productId,quantity:"1",unitPrice:"0",currency:"EUR"});}});}
return flightsTable.length>0?flightsTable:false;}
function pushFlightsToPurchaseRow(confOrderID){const flightsTable=[];const products=digitalData?.product;if(!Array.isArray(products))return false;const flightProduct=products.find(p=>p?.category?.primaryCategory==='FlightTicket');const bounds=flightProduct?.productInfo?.productDetails?.flightTicket?.bound;if(Array.isArray(bounds)){bounds.forEach(bound=>{const departureCode=bound?.departure?.airportCode;const arrivalCode=bound?.arrival?.airportCode;const rawDateTime=bound?.departure?.dateTime;const dateMatch=rawDateTime?.match(/^(\d{4})-(\d{2})-(\d{2})/);const formattedDate=dateMatch?dateMatch[1].toString()+dateMatch[2].toString()+dateMatch[3].toString():null;if(departureCode&&arrivalCode&&formattedDate){const productId=departureCode+'-'+arrivalCode+'-'+formattedDate;flightsTable.push({purchaseId:confOrderID,productId:productId,quantity:"1",unitPrice:"0",currency:"EUR"});}});}
return flightsTable.length>0?flightsTable:false;}
function generateReviewObjectVariables(reviewObject){const additionalVars=[];const days=['sun','mon','tue','wed','thu','fri','sat'];const months=['jan','feb','mar','apr','may','jun','jul','aug','sep','oct','nov','dec'];const parseDay=(dateStr)=>{const d=new Date(dateStr.slice(0,4)+'-'+dateStr.slice(4,6)+'-'+dateStr.slice(6));return days[d.getUTCDay()]||'invalid';};const parseMonth=(dateStr)=>{const d=new Date(dateStr.slice(0,4)+'-'+dateStr.slice(4,6)+'-'+dateStr.slice(6));return months[d.getUTCMonth()]||'invalid';};if(Array.isArray(reviewObject?.depDate)&&reviewObject.depDate[0]){additionalVars.push(setCustomVariable("depDay",parseDay(reviewObject.depDate[0])));additionalVars.push(setCustomVariable("depMonth",parseMonth(reviewObject.depDate[0])));}
if(Array.isArray(reviewObject?.retDate)&&reviewObject.retDate[0]){additionalVars.push(setCustomVariable("retDay",parseDay(reviewObject.retDate[0])));additionalVars.push(setCustomVariable("retMonth",parseMonth(reviewObject.retDate[0])));const dep=new Date(reviewObject.depDate[0].slice(0,4)+'-'+reviewObject.depDate[0].slice(4,6)+'-'+reviewObject.depDate[0].slice(6));const ret=new Date(reviewObject.retDate[0].slice(0,4)+'-'+reviewObject.retDate[0].slice(4,6)+'-'+reviewObject.retDate[0].slice(6));const msPerDay=1000*60*60*24;const tripLength=Math.round((ret-dep)/msPerDay);if(!isNaN(tripLength)){additionalVars.push(setCustomVariable("tripLength",tripLength));}}
["destination","origin","travelers","adults","minors","infants"].forEach((key)=>{if(Array.isArray(reviewObject?.[key])&&reviewObject[key][0]!==undefined){additionalVars.push(setCustomVariable(key,reviewObject[key][0]));}});const loginStatus=digitalData?.user?.[0]?.profile?.[0]?.profileInfo?.loginStatus;if(typeof loginStatus==='boolean'){additionalVars.push(setCustomVariable("loginStatus",loginStatus?"loggedIn":"loggedOut"));}
return additionalVars;}
function digitaldataRetrack(expCustomVar){if(bannedURLS()){if(typeof digitalData?.digitalTouchpoint?.category!=="object"){debuglog("digitalData.digitalTouchpoint.category is not available. Retrying in 3 seconds...");setTimeout(window.initiateMonetate,3000);defaultTrack();return;}
window.monetateQ=window.monetateQ||[];var ancCartRows={};var ancCartTable=[];var ancillaryExists=false;var pageType=getPageType();window.monetateSetPageType=pageType;var FunnelExt=(digitalData?.digitalTouchpoint?.touchpointInfo?.bookingFlow==="Servicing")?"_MMB":"";window.monetatePageType=pageType;window.monetateQ.push(["setPageType",cleanPageType(pageType+FunnelExt)]);debuglog('after (b2) normal mQ.push pageType: ',pageType);try{const confOrderID=digitalData?.transaction?.PNR?.transactionId||(getCookieTID('tid')!==""?getCookieTID('tid'):digitalData?.transaction?.PNR?.recLoc)||"";var reviewObject=populateReviewObj();monetateQ.push(['setCustomVariables',[setCustomVariable("market",digitalData?.digitalTouchpoint?.touchpointInfo?.market),setCustomVariable("language",digitalData?.digitalTouchpoint?.touchpointInfo?.language||(document.querySelector("html").getAttribute("lang")||"").split("-")[0]||"not defined"),setCustomVariable("bookingFlow",digitalData?.digitalTouchpoint?.touchpointInfo?.bookingFlow),...(window?.flightExpand===true?[setCustomVariable("flightExpand","true")]:[]),...(getCurrencyFromElement()?[setCustomVariable("converter_currency",getCurrencyFromElement())]:[]),...(getCurrencyFromSessionStorage()?[setCustomVariable("original_currency",getCurrencyFromSessionStorage())]:[]),...(typeof expCustomVar==='object'&&expCustomVar!==null&&!Array.isArray(expCustomVar)?Object.entries(expCustomVar).map(([k,v])=>setCustomVariable(k,v)):[]),...(digitalData?.digitalTouchpoint?.touchpointInfo?.bookingFlow==="Booking"?[setCustomVariable("tripType",typeof digitalData?.searchInput?.searchInputInfo?.flightDetails?.[0]?.tripType==='string'?digitalData?.searchInput?.searchInputInfo?.flightDetails?.[0]?.tripType:"n/a"),setCustomVariable("bft",generateBFT()),setCustomVariable("daysToDeparture",(typeof digitalData?.searchInput?.searchInputInfo?.dateTime==='string'&&typeof digitalData?.searchInput?.searchInputInfo?.flightDetails?.[0]?.departure?.dateTime==='string')?calculateDaysBetweenDates(monCleanDate(digitalData?.searchInput?.searchInputInfo?.dateTime),monCleanDate(digitalData?.searchInput?.searchInputInfo?.flightDetails?.[0]?.departure?.dateTime)):"n/a"),setCustomVariable("lengthOfStay",(typeof digitalData.product?.[0]?.category?.primaryCategory==="string"&&digitalData.product?.[0]?.category?.primaryCategory==="FlightTicket"&&typeof digitalData.product?.[0]?.productInfo?.productDetails?.flightTicket?.journeyLength==='number')?digitalData.product?.[0]?.productInfo?.productDetails?.flightTicket?.journeyLength:"n/a"),setCustomVariable("cabin",reviewObject.hasOwnProperty("serviceClass")?reviewObject.serviceClass:"n/a"),...generateReviewObjectVariables(reviewObject)]:[])].filter(Boolean)]);let MonetatePageCat=(typeof digitalData?.digitalTouchpoint?.touchpointInfo?.bookingFlow==='string')?digitalData?.digitalTouchpoint?.touchpointInfo?.bookingFlow:"N/A";window.monetateQ.push(["addCategories",[MonetatePageCat]]);if(pageType=='FPPOUTBOUND'||pageType=='FPPINBOUND'){if(Object.keys(reviewObject).length!==0){window.monetateQ.push(['addFlightSearch',reviewObject]);window.monetateQ.push(["addProductDetails",[getFormattedFlightInfo()]]);if(!window.__fareDetection?.started){fareDetectionStart({debounceMs:40,onDetect:({source,cabin,code,panelId,stops})=>{window.monetateNonPageView=true;try{digitaldataRetrack({expanded_fare_cabin:cabin,expanded_lowest_fare_family_code:code,expanded_flight_id:panelId,expanded_flight_stops:stops,flightExpand:'true'});}finally{if(typeof resetmonetateNonPageView==="function"){resetmonetateNonPageView();}else{window.monetateNonPageView=false;}}},});}}}else{if(window.__fareDetection?.started){window.__fareDetection.teardown();}}
var ancillaryExists=false;var flightPid='';var flightPrice='';if(digitalData.product.length>0&&FunnelExt===''){for(var i=0;i<digitalData.product.length;i++){if(digitalData.product[i].category.primaryCategory=='FlightTicket'&&typeof digitalData?.product[i]?.productInfo?.productDetails?.flightTicket?.itineraryPrice?.totalPrice?.amount=="number"){var returnPID=(typeof reviewObject.retDate==='undefined')?"":digitalData.product[i].productInfo.productDetails.flightTicket.bound[1].departure.airportCode.toLowerCase()+'-'+digitalData.product[i].productInfo.productDetails.flightTicket.bound[1].arrival.airportCode.toLowerCase();flightPid=digitalData.product[i].productInfo.productDetails.flightTicket.bound[0].departure.airportCode.toLowerCase()+'-'+digitalData.product[i].productInfo.productDetails.flightTicket.bound[0].arrival.airportCode.toLowerCase()+';'+returnPID+'-'+digitalData.product[i].productInfo.productDetails.flightTicket.tripType.toLowerCase();flightPrice=tealiumiq_currency.convert(digitalData.product[i].productInfo.productDetails.flightTicket.itineraryPrice.totalPrice.amount.toString(),digitalData.product[i].productInfo.productDetails.flightTicket.itineraryPrice.totalPrice.currency,'EUR');}else if(digitalData.product[i].category.primaryCategory=='AncillaryService'&&typeof digitalData?.product[i]?.productInfo?.productDetails?.ancillaryService?.price?.totalPrice?.amount=="number"){ancillaryExists=true;var newAncillary={};if(pageType==="CONFIRMATION"&&digitalData?.digitalTouchpoint?.touchpointInfo?.bookingFlow==="Booking"&&confOrderID?.length>0){newAncillary.purchaseId=confOrderID;}
newAncillary.productId=digitalData.product[i].productInfo.productDetails.ancillaryService.serviceCode+"_"+digitalData.product[i].productInfo.productDetails.ancillaryService.serviceID;newAncillary.quantity=digitalData.product[i].productInfo.productDetails.ancillaryService.quantity;newAncillary.unitPrice=tealiumiq_currency.convert(digitalData.product[i].productInfo.productDetails.ancillaryService.price.totalPrice.amount.toString(),digitalData.product[i].productInfo.productDetails.ancillaryService.price.totalPrice.currency,'EUR');newAncillary.currency="EUR";ancCartTable.push(newAncillary);}else if(digitalData.product[i].category.primaryCategory=='Insurance'){ancillaryExists=true;var newAncillary={};if(pageType==="CONFIRMATION"&&digitalData?.digitalTouchpoint?.touchpointInfo?.bookingFlow==="Booking"&&confOrderID?.length>0){newAncillary.purchaseId=confOrderID;}
newAncillary.productId=digitalData.product[i].productInfo.productDetails.insurance.code;newAncillary.quantity=1;newAncillary.unitPrice=tealiumiq_currency.convert(digitalData.product[i].productInfo.productDetails.insurance.price.totalPrice.amount.toString(),digitalData.product[i].productInfo.productDetails.insurance.price.totalPrice.currency,'EUR');newAncillary.currency="EUR";ancCartTable.push(newAncillary);}}}
const validationAncResult=validateAncCartTable(ancCartTable);if(validationAncResult.valid){}else{ancillaryExists=false;debuglog("Validation ancillaries errors found:",validationAncResult.errors);triggerMonetateEvent("monetate_error","AncillaryError",JSON.stringify(validationAncResult.errors));}
const validationReviewResult=validateReviewObject(reviewObject);if(validationReviewResult.valid){debuglog("Review object is valid.");}else{if(Object.keys(reviewObject).length>0){debuglog("Validation reviewObject errors found:",validationReviewResult.errors);triggerMonetateEvent("monetate_error","Review Object","v1.92: "+JSON.stringify(validationReviewResult.errors));var newUtagData=Object.assign({},utag_data);newUtagData.tealium_event="monetate_error";newUtagData.totoErrorPax=JSON.stringify(digitalData?.searchInput?.searchInputInfo?.flightDetails?.[0]?.passenger);newUtagData.totoNumbers=typeof digitalData?.searchInput?.searchInputInfo?.flightDetails?.[0]?.passenger[0].numberOfPassengers+" "+digitalData?.searchInput?.searchInputInfo?.flightDetails?.[0]?.passenger[0].numberOfPassengers.toString();newUtagData.totoErrorObj=JSON.stringify(reviewObject);newUtagData.totoValidError=JSON.stringify(validationReviewResult.errors);newUtagData.totoVersion="1.92";utag.link(newUtagData);}}
if(/SHOPPINGCART|TRAVELER/.test(pageType)&&validationReviewResult.valid){if(Object.keys(reviewObject).length!==0){window.monetateQ.push(['addFlightReview',reviewObject,flightPid,1,flightPrice,'EUR']);var flightCartRow=pushFlightsToCartRow();if(flightCartRow){window.monetateQ.push(["addCartRows",flightCartRow]);}}
if(ancillaryExists){window.monetateQ.push(["addCartRows",ancCartTable]);}}
if(pageType=='CONFIRMATION'&&digitalData?.digitalTouchpoint?.touchpointInfo?.bookingFlow==="Booking"&&validationReviewResult.valid){if(confOrderID.length>0){if(Object.keys(reviewObject).length!==0){window.monetateQ.push(['addFlightBooking',reviewObject,confOrderID,flightPid,1,flightPrice,'EUR']);}
if(ancillaryExists){window.monetateQ.push(["addPurchaseRows",ancCartTable]);}
var flightPurchaseRow=pushFlightsToPurchaseRow(confOrderID);if(flightPurchaseRow){window.monetateQ.push(["addPurchaseRows",flightPurchaseRow]);}}else{defaultTrack();setTimeout(window.initiateMonetate,3000);return}}
debuglog('MonetateQ',monetateQ);if(trackData()){window.monetateQ.push(["trackData",{"nonPageView":window.monetateNonPageView}]);resetmonetateNonPageView();}}catch(error){debuglog('MonetateQ error',monetateQ);if(trackData()){window.monetateQ.push(['trackData',{"nonPageView":window.monetateNonPageView}]);resetmonetateNonPageView();}
debuglog(error,"error while TRY CATCH");triggerMonetateEvent("monetate_error","TryCatch",error.toString());var newUtagData=Object.assign({},utag_data);newUtagData.tealium_event="monetate_error";newUtagData.totoVersion="1.97";newUtagData.totoTrack='digitaldataTrack';newUtagData.totoReviewObj=(typeof reviewObject==='object')?JSON.stringify(reviewObject):'n/a';newUtagData.totoSearchInput=JSON.stringify(digitalData?.searchInput);lhgDataTrack
newUtagData.totoError=error.toString();if(pageType=='CONFIRMATION'&&digitalData?.digitalTouchpoint?.touchpointInfo?.bookingFlow==="Booking"){newUtagData.tealium_event="monetate_conf_error";newUtagData.totoVersion="1.99";newUtagData.totoTrack='confirmation';newUtagData.totoReviewObj=JSON.stringify(reviewObject);newUtagData.totoflightPrice=flightPrice;newUtagData.totoflightPid=flightPid;newUtagData.totoconfOrderID=confOrderID;}
utag.link(newUtagData);}}else{defaultTrack();}}
function lhgDataTrack(expCustomVar){window.monetateQ=window.monetateQ||[];var pageType;if(lhgData.page?.pageInfo?.pageName){pageType=(lhgData.page.pageInfo.pageName==='homepage')?"main":lhgData.page.pageInfo.pageName;}else if(lhgData.page.category?.category1&&lhgData.page.category?.category2){pageType=lhgData.page.category.category1+lhgData.page.category.category2;}else{pageType=cleanPageType(window.location.pathname);}
window.monetatePageType=pageType;window.monetateQ.push(["setPageType",cleanPageType(pageType)]);debuglog('after normal (b1/aem) mQ.push pageType: ',pageType);const customVariables=[{name:'market',value:lhgData?.page?.pageInfo?.country?.toUpperCase()},{name:'language',value:lhgData?.page?.pageInfo?.language},...(typeof expCustomVar==='object'&&expCustomVar!=null?(()=>{const key=Object.keys(expCustomVar)[0];return key?[{name:key,value:expCustomVar[key]}]:[];})():[])];monetateQ.push(['setCustomVariables',customVariables]);if(trackData()){if(!isSetPageTypePopulated(monetateQ)){triggerMonetateEvent("monetate_error","MonetateErrorQ","noPageType");}
window.monetateQ.push(['trackData',{"nonPageView":window.monetateNonPageView}]);resetmonetateNonPageView();}}
window.lhgdataRetrack=function(){try{if(lhgData.page?.pageInfo?.pageId?.indexOf('payment')<0||window.location.host.indexOf("miles-and-more.com")>=0){var kiboExchange=parseFloat(lhgData.exchangeRate);lhgDataTrack(false);startMenuObserver();const lhgDataPageName=lhgData.page?.pageInfo?.pageName;const modalValidPages=['offers','offers-and-destination','offers-and-destinations','our-destinations'];if(modalValidPages.includes(lhgDataPageName)){startModalObserver();}}}catch(error){window.monetateQ=window.monetateQ||[];window.monetatePageType=window.location.pathname;window.monetateQ.push(["setPageType",cleanPageType(window.location.pathname)]);debuglog('after error mQ.push pageType: ',window.monetatePageType);if(trackData()){window.monetateQ.push(['trackData',{"nonPageView":window.monetateNonPageView}]);resetmonetateNonPageView();}
debuglog('after mQ.push pageType: ',window.monetatePageType);debuglog("error",error);triggerMonetateEvent("monetate_error","lhgdataRetrackTryFailed",error.toString());var newUtagData=Object.assign({},utag_data);newUtagData.tealium_event="monetate_error";newUtagData.totoVersion="1.92";newUtagData.totoTrack='lhgDataTrack';newUtagData.totoError=error.toString();utag.link(newUtagData);}}
function fareDetectionStart(options={}){if(window.__fareDetection?.started)return window.__fareDetection.teardown;const{debounceMs=40,onDetect=null}=options;const panelState=new WeakMap();const allObservers=new Set();const classifyCabinByFareCode=(code="")=>{if(/^BFEUM/i.test(code))return"ECO";if(/^BFEUC/i.test(code))return"BUSINESS";return"UNKNOWN";};const fallbackCabinFromClasses=(fareCardEl)=>{const pc=fareCardEl?.querySelector(".refx-price-card");if(!pc)return"UNKNOWN";let token=Array.from(pc.classList).find(c=>c.startsWith("cabin-"));if(!token){const m=String(pc.className).match(/(?:^|\s|,)(cabin-[^\s,]+)/i);if(m)token=m[1];}
if(!token)return"UNKNOWN";const suffix=token.slice(6).toUpperCase();if(/^ECO/i.test(suffix))return"ECO";if(/^BUSINESS/i.test(suffix))return"BUSINESS";return suffix||"UNKNOWN";};const getFirstFareCard=(panel)=>panel.querySelector("refx-carousel ul.carousel li.fare-card-list-item:first-of-type refx-fare-card")||panel.querySelector("refx-carousel ul.carousel li refx-fare-card");const extractCabin=(panel)=>{const card=getFirstFareCard(panel);if(!card)return{cabin:"UNKNOWN",code:"",card:null};const code=card.getAttribute("data-fare-family-code")||card.dataset?.fareFamilyCode||"";let cabin=classifyCabinByFareCode(code);if(cabin==="UNKNOWN")cabin=fallbackCabinFromClasses(card);return{cabin,code,card};};const getStopsFromPanel=(panel)=>{const upsell=panel.closest("refx-upsell-premium-row-pres, lhg-upsell-premium-row-pres");const ag=upsell?.getAttribute?.("airboundgroupid");if(ag&&typeof ag==="string"){const segs=ag.split(":").filter(Boolean).length;return Math.max(0,segs-1);}
const txt=panel.querySelector(".bound-nb-stop-container .bound-stop-text")?.textContent||panel.querySelector(".sr-nb-stops")?.textContent||"";const m=txt.match(/\d+/);if(m)return parseInt(m[0],10);if(/direct/i.test(txt))return 0;return null;};const emitIfChanged=(panel,source)=>{const{cabin,code}=extractCabin(panel);const state=panelState.get(panel)||{};const prev=state.lastCabin;if(cabin&&cabin!==prev){state.lastCabin=cabin;panelState.set(panel,state);const panelId=panel.id;const stops=getStopsFromPanel(panel);(window.debuglog||console.log).call(console,"[Fare detected]",{source,cabin,code,panelId,stops});panel.dispatchEvent(new CustomEvent("refx:faredetected",{bubbles:true,detail:{source,cabin,code,panelId,stops},}));if(typeof onDetect==="function"){onDetect({source,cabin,code,panelId,stops});}
return true;}
return false;};const scheduleCheck=(panel,source)=>{const state=panelState.get(panel)||{};clearTimeout(state.debounceTimer);state.debounceTimer=setTimeout(()=>emitIfChanged(panel,source),debounceMs);panelState.set(panel,state);};const tryImmediateEmit=(panel,source)=>{const{card}=extractCabin(panel);if(!card)return false;return emitIfChanged(panel,source);};const ensureCarouselObserver=(panel)=>{const state=panelState.get(panel)||{};if(state.carObsAttached)return;const carousel=panel.querySelector("refx-carousel ul.carousel");if(!carousel)return;const carObs=new MutationObserver(()=>{scheduleCheck(panel,"carousel-mutations");});carObs.observe(carousel,{subtree:true,childList:true,attributes:true,attributeFilter:["data-fare-family-code","class","aria-selected"],});state.carObs=carObs;state.carObsAttached=true;panelState.set(panel,state);allObservers.add(carObs);scheduleCheck(panel,"carousel-attached");};const watchPanel=(panel)=>{const classObs=new MutationObserver((muts)=>{for(const m of muts){if(m.type!=="attributes"||m.attributeName!=="class")continue;const wasExpanded=m.oldValue?.includes("mat-expanded");const isExpanded=panel.classList.contains("mat-expanded");if(!wasExpanded&&isExpanded){const st=panelState.get(panel)||{};st.lastCabin=undefined;panelState.set(panel,st);const tryAttach=()=>{const hasCarousel=panel.querySelector("refx-carousel ul.carousel");if(hasCarousel){ensureCarouselObserver(panel);return true;}
return false;};const attached=tryAttach();if(!tryImmediateEmit(panel,"mat-expanded-fast")){requestAnimationFrame(()=>{if(!tryImmediateEmit(panel,"mat-expanded-raf")){scheduleCheck(panel,"mat-expanded-debounced");}});}
if(!attached){const temp=new MutationObserver(()=>{if(tryAttach())temp.disconnect();});temp.observe(panel,{subtree:true,childList:true});allObservers.add(temp);setTimeout(()=>temp.disconnect(),10_000);}}}});classObs.observe(panel,{attributes:true,attributeFilter:["class"],attributeOldValue:true});allObservers.add(classObs);if(panel.classList.contains("mat-expanded")){const st=panelState.get(panel)||{};st.lastCabin=undefined;panelState.set(panel,st);ensureCarouselObserver(panel);if(!tryImmediateEmit(panel,"initial-fast")){requestAnimationFrame(()=>{if(!tryImmediateEmit(panel,"initial-raf")){scheduleCheck(panel,"initial-debounced");}});}}
panel.querySelectorAll('.flight-card-button-desktop-view[role="tab"][data-fare-family-group]')
.forEach((btn)=>{const btnObs=new MutationObserver(()=>{if(btn.getAttribute("aria-selected")==="true"){scheduleCheck(panel,`tab:${btn.getAttribute("data-fare-family-group")}`);}});btnObs.observe(btn,{attributes:true,attributeFilter:["aria-selected"]});allObservers.add(btnObs);const st=panelState.get(panel)||{};(st.btnObs||=[]).push(btnObs);panelState.set(panel,st);});};document.querySelectorAll(".mat-expansion-panel").forEach(watchPanel);const rootObs=new MutationObserver((mutations)=>{for(const m of mutations){for(const node of m.addedNodes){if(!(node instanceof Element))continue;if(node.matches(".mat-expansion-panel"))watchPanel(node);node.querySelectorAll?.(".mat-expansion-panel").forEach(watchPanel);}}});rootObs.observe(document.documentElement,{childList:true,subtree:true});allObservers.add(rootObs);const teardown=()=>{allObservers.forEach((obs)=>obs.disconnect());allObservers.clear();window.__fareDetection={started:false,teardown:()=>{}};};window.__fareDetection={started:true,teardown};return teardown;}
const MODAL_SELECTOR='maui-modal.df-offer-modal';const TAB_PANEL_TAG='maui-tab-control-panel';const ACTIVE_ATTR='active';const tabPanelObservers=new Map();let modalObserver=null;let modalWasOpen=false;function triggerDFtab(dataKey){debuglog(" triggerDFtab fired with data-key:",dataKey);lhgDataTrack({tabOpened:dataKey});}
function observeTabPanel(tabPanel){if(tabPanelObservers.has(tabPanel)){debuglog(" Tab panel already being observed:",tabPanel);return;}
debuglog(" Observing tab panel:",tabPanel);const observer=new MutationObserver(()=>{if(tabPanel.hasAttribute(ACTIVE_ATTR)){const dataKey=tabPanel.getAttribute('data-key');debuglog(" Tab panel became active. data-key:",dataKey);if(dataKey){triggerDFtab(dataKey);}}});observer.observe(tabPanel,{attributes:true,attributeFilter:[ACTIVE_ATTR]});tabPanelObservers.set(tabPanel,observer);}
function attachTabPanelListeners(modal){const tabPanels=modal.querySelectorAll(TAB_PANEL_TAG);debuglog(` Found ${tabPanels.length}tab panels to observe`);tabPanels.forEach(observeTabPanel);}
function disconnectAllTabPanelObservers(){debuglog(" Disconnecting all tab panel observers...");tabPanelObservers.forEach((observer,tabPanel)=>{debuglog(" Disconnected observer for:",tabPanel);observer.disconnect();});tabPanelObservers.clear();}
function observeModal(modal){debuglog(" Observing modal for 'open' attribute changes:",modal);modalObserver=new MutationObserver(()=>{const isOpenNow=modal.getAttribute('open')==='open';const isClosedNow=modal.getAttribute('open')!=='open';debuglog(` Modal'open'attribute changed:opened=${isOpenNow},closed=${isClosedNow},wasOpen=${modalWasOpen}`);if(!modalWasOpen&&isOpenNow){debuglog(" Modal just opened  attaching tab panel listeners");attachTabPanelListeners(modal);}
if(modalWasOpen&&isClosedNow){debuglog(" Modal just closed  disconnecting observers");disconnectAllTabPanelObservers();}
modalWasOpen=isOpenNow;});modalObserver.observe(modal,{attributes:true,attributeFilter:['open']});}
function waitForModal(){const interval=setInterval(()=>{const modal=document.querySelector(MODAL_SELECTOR);debuglog(" Waiting for modal...",modal);if(modal){clearInterval(interval);const initiallyOpen=modal.classList.contains('react-modal-opened');modalWasOpen=initiallyOpen;debuglog(" Modal found. Initial open state:",modalWasOpen);observeModal(modal);}},200);}
function startModalObserver(){if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',waitForModal);}else{waitForModal();}}
const menu_listItemsSelector='.header-navigation > ul > li';function observeMenu(){const navRoot=document.querySelector('#nav');if(!navRoot){debuglog('.header-navigation not found');return;}
const liObservers=new Map();const attachLiObservers=()=>{const menu_listItems=document.querySelectorAll(menu_listItemsSelector);menu_listItems.forEach((li,index)=>{if(liObservers.has(li))return;const observer=new MutationObserver((mutations)=>{for(const mutation of mutations){for(const node of mutation.addedNodes){if(node.nodeType===Node.ELEMENT_NODE&&(node.matches('.header-navigation-megadropdown')||node.querySelector('.header-navigation-megadropdown'))){debuglog("RETrack Menu");lhgDataTrack({menuOpened:index});return;}}}});observer.observe(li,{childList:true,subtree:true});liObservers.set(li,observer);});};attachLiObservers();const globalObserver=new MutationObserver(()=>{attachLiObservers();});globalObserver.observe(navRoot,{childList:true,subtree:true});setTimeout(()=>{globalObserver.disconnect();debuglog('Stopped observing .header-navigation after 15s');},15000);}
function observeMenuBurger(){const navRoot=document.querySelector('#nav');if(!navRoot){debuglog('#nav not found, cannot observe burger menu.');return;}
let currentObservedBurgerMenu=null;let burgerObserver=null;let lastState=null;const attachBurgerObserver=(burgerMenu)=>{if(burgerObserver)burgerObserver.disconnect();burgerObserver=new MutationObserver(()=>{const directChildren=Array.from(burgerMenu.children);const hasSlideIn=directChildren.some(child=>child.classList.contains('header-navigation-burgermenu-slide-in'));if(hasSlideIn!==lastState){lastState=hasSlideIn;if(hasSlideIn){debuglog("Will fire lhgDataTrack({ burgerMenuOpened: true });");lhgDataTrack({burgerMenuOpened:true});}else{debuglog("Will fire lhgDataTrack({ burgerMenuClosed: true });");lhgDataTrack({burgerMenuClosed:true});}}});burgerObserver.observe(burgerMenu,{childList:true});currentObservedBurgerMenu=burgerMenu;};const globalObserver=new MutationObserver(()=>{const burgerMenu=document.querySelector('.header-navigation-burgermenu');if(burgerMenu&&burgerMenu!==currentObservedBurgerMenu){debuglog('New or replaced burger menu detected, re-attaching observer.');attachBurgerObserver(burgerMenu);}});globalObserver.observe(navRoot,{childList:true,subtree:true});setTimeout(()=>{debuglog('Stopping observation of #nav after 15 seconds.');globalObserver.disconnect();},15000);const initialBurgerMenu=document.querySelector('.header-navigation-burgermenu');if(initialBurgerMenu){attachBurgerObserver(initialBurgerMenu);}}
function waitForMenu(){const interval=setInterval(()=>{const menu_listItems=document.querySelectorAll(menu_listItemsSelector);debuglog(" Waiting for menu...",menu_listItems);if(menu_listItems){clearInterval(interval);debuglog(" Menu found.");observeMenu();observeMenuBurger();}},200);}
function startMenuObserver(){if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',waitForMenu);}else{waitForMenu();}}
function watchLoadingBlock(){const spinner=document.getElementById("spinner");if(!spinner){return;}
const hiddenBlock=spinner.querySelector(".cdk-visually-hidden");if(!hiddenBlock){return;}
const observer=new MutationObserver((mutations)=>{mutations.forEach((mutation)=>{if(mutation.removedNodes.length>0&&mutation.removedNodes[0]?.className.includes("loading")){genericRetrack();}});});observer.observe(spinner,{childList:true});}
let offers_wrapper;let b2_spinner;let offers_skeletonsDetected;let b2_spinnerVisible;let b2_spinnerCheckInterval;let offers_skeletonCheckInterval;let offers_skeletonObserver;let b2_spinnerObserver;function startOffersWatchers(){offers_wrapper=document.querySelector(".content-wrapper");b2_spinner=document.querySelector("#spinner");offers_skeletonsDetected=false;b2_spinnerVisible=false;b2_spinnerCheckInterval=null;offers_skeletonCheckInterval=null;if(!offers_wrapper){debuglog("No .offer-container found.");}else{startSkeletonCycleWatcher();}
if(!b2_spinner){debuglog("No #spinner found.");}else{startSpinnerWatcher();}}
function offers_waitForSkeletonsThenTrack(){if(offers_skeletonCheckInterval)return;offers_skeletonCheckInterval=setInterval(()=>{offers_wrapper=document.querySelector(".content-wrapper");const remaining=offers_wrapper.querySelectorAll("ngx-skeleton-loader");debuglog(`[skeleton]Polling:${remaining.length}remaining`);if(remaining.length===0){clearInterval(offers_skeletonCheckInterval);offers_skeletonCheckInterval=null;offers_skeletonsDetected=false;debuglog("[skeleton] All removed  genericRetrack()");genericRetrack();if(offers_skeletonObserver&&offers_wrapper){offers_skeletonObserver.observe(offers_wrapper,{childList:true,subtree:true});}}},200);}
function startSkeletonCycleWatcher(){offers_skeletonObserver=new MutationObserver(()=>{const offers_skeletons=offers_wrapper.querySelectorAll("ngx-skeleton-loader");debuglog(`[skeleton]Mutation:${offers_skeletons.length}ngx-skeleton-loader(s)`);if(!offers_skeletonsDetected&&offers_skeletons.length>0){offers_skeletonsDetected=true;debuglog("[skeleton] Detected at least one ngx-skeleton-loader, waiting for removal...");offers_skeletonObserver.disconnect();offers_waitForSkeletonsThenTrack();}});offers_skeletonObserver.observe(offers_wrapper,{childList:true,subtree:true});debuglog("[skeleton] Observer started");}
function startSpinnerWatcher(){b2_spinnerObserver=new MutationObserver(()=>{const loadingVisible=!!b2_spinner.querySelector(".loading-container");if(!b2_spinnerVisible&&loadingVisible){b2_spinnerVisible=true;debuglog("[spinner] Detected .loading-container, waiting for disappearance...");b2_spinnerCheckInterval=setInterval(()=>{const stillVisible=!!b2_spinner.querySelector(".loading-container");debuglog(`[spinner]Polling:still visible?${stillVisible}`);if(!stillVisible){clearInterval(b2_spinnerCheckInterval);b2_spinnerVisible=false;debuglog("[spinner] Loading container removed");const skeletons=offers_wrapper?.querySelectorAll("ngx-skeleton-loader")||[];if(skeletons.length>0){debuglog(`[spinner]Found ${skeletons.length}ngx-skeleton-loader(s),waiting for them before genericRetrack()`);offers_waitForSkeletonsThenTrack();}else{debuglog("[spinner] No skeletons present  genericRetrack()");genericRetrack();}}},200);}});b2_spinnerObserver.observe(b2_spinner,{childList:true,subtree:true});debuglog("[spinner] Observer started");}
var previousUrl='';function urlListener(){const observer=new MutationObserver(function(mutations){if(previousUrl==''){previousUrl=location.href;}else if(location.href!==previousUrl){previousUrl=location.href;if(window.monetateSetPageType!==getPageType()){genericRetrack();}else{setTimeout(()=>{genericRetrack();},"500");}}});const config={subtree:true,childList:true};observer.observe(document,config);}
function defaultTrack(){window.monetateQ=window.monetateQ||[];window.monetateQ.push(["setPageType",cleanPageType(document.querySelector("head title").innerText)]);window.monetateSetPageType=document.querySelector("head title").innerText;window.monetateQ.push(['trackData',{"nonPageView":window.monetateNonPageView}]);resetmonetateNonPageView();}
function genericRetrack(){if(typeof digitalData!=='undefined'){digitaldataRetrack();}else if(typeof lhgData!=='undefined'){window.lhgdataRetrack();}}
function checkCookieCM(){const consentCookie=document.cookie
.split('; ')
.find(row=>row.startsWith('CONSENTMGR='));if(consentCookie&&consentCookie.includes('c3:1')){genericRetrack();debuglog('c3:1 exists');}else{debuglog('c3:1 does no exists');}}
function checkHtmlForLangChange(){let htmlElementForChange=document.querySelector('html');var observerForChange=new MutationObserver(function(mutationsList){for(var mutation of mutationsList){if(mutation.type==='attributes'&&mutation.attributeName==='lang'){var newLang=htmlElementForChange.getAttribute('lang');debuglog('lang attribute changed:',newLang);genericRetrack();observerForChange.disconnect();}}});observerForChange.observe(htmlElementForChange,{attributes:true,attributeFilter:['lang']});}
function handleClickCM(event){let targetId=event.target.id;if(targetId==='cm-acceptAll'||targetId==='cm-acceptNone'||targetId==='cm-selectSpecific'||targetId==='selectAllCheckboxes'){setTimeout(checkCookieCM,800);}
let targetElementLang=event.target;if(targetElementLang.closest('button.confirm-language-selection-button')){checkHtmlForLangChange();}else if(targetElementLang.closest("#modify-button")&&typeof digitalData!=='undefined'){setTimeout(function(){digitaldataRetrack();},500);}
}
function waitForDatalayer(objectPaths,callback,interval=100){let availableObjectPath=null;function checkAndCallbackLayer(){for(var i=0;i<objectPaths.length;i++){var objectPath=objectPaths[i];if(eval("typeof "+objectPath)!=="undefined"){var obj=eval(objectPath);if(obj&&typeof obj.page!=="undefined"){availableObjectPath=objectPath;}}}
if(availableObjectPath!==null){clearInterval(intervalId);callback(eval(availableObjectPath));}}
checkAndCallbackLayer();if(availableObjectPath===null){var intervalId=setInterval(checkAndCallbackLayer,interval);}}
function waitForCurrency(objectCur,callback,interval=100){let currencyAvailable=null;function checkAndCallbackCurr(){if(eval("typeof "+objectCur)!=="undefined"){if(typeof eval(objectCur)!=="undefined"&&typeof eval(objectCur+".convert")==="function"){currencyAvailable=true;}
if(currencyAvailable!==null){clearInterval(intervalId);callback(currencyAvailable);}}}
checkAndCallbackCurr();if(currencyAvailable===null){var intervalId=setInterval(checkAndCallbackCurr,interval);}}
function consentListener(){document.body.addEventListener('click',handleClickCM);}
function digitalDataEventTrack(){if(!window.digitalData||!window.digitalData.event)return;const originalEvents=window.digitalData.event;const originalPush=originalEvents.push;originalEvents.push=function(){const result=originalPush.apply(this,arguments);const evt=arguments[0];if(evt?.eventInfo?.eventName==="Multi-currency-pricing Selected"){if(window.__mtNonPVTimer)clearTimeout(window.__mtNonPVTimer);window.__mtNonPVTimer=setTimeout(()=>{window.monetateNonPageView=true;try{if(typeof window.digitaldataRetrack==="function"){window.digitaldataRetrack();}else if(typeof digitaldataRetrack==="function"){digitaldataRetrack();}}finally{window.monetateNonPageView=false;window.__mtNonPVTimer=null;}},50);}
if(window.expDigitalDataEvents?.length>0){window.expDigitalDataEvents.forEach((event,index)=>{try{if(event&&evt&&event.digitalData_eventInfo_key===evt.eventInfo.key){window.monetateQ=window.monetateQ||[];window.monetateQ.push(["trackEvent",[event.exp_API_eventKey]]);window.expDigitalDataEvents.splice(index,1);}}catch(_){}});}
return result;};}
function b2tEventTrack(){if(!Array.isArray(window.monetateB2TQueue))return;const originalQueue=window.monetateB2TQueue;const originalPushB2t=originalQueue.push;originalQueue.push=function(){const resultB2t=originalPushB2t.apply(this,arguments);const evtB2t=arguments[0];if(Array.isArray(window.expMonetateB2TEvents)&&evtB2t?.concatValue){for(let i=window.expMonetateB2TEvents.length-1;i>=0;i--){const expEvent=window.expMonetateB2TEvents[i];try{if(expEvent&&expEvent.concatValue===evtB2t.concatValue){window.monetateQ=window.monetateQ||[];window.monetateQ.push(["trackEvent",[expEvent.exp_API_eventKey_b2t]]);debuglog(` Monetate B2T API Event Triggered:'${expEvent.exp_API_eventKey_b2t}'for'${evtB2t.concatValue}'`);window.expMonetateB2TEvents.splice(i,1);}}catch(_){}}}
return resultB2t;};}
function waitForB2t(objPath,callback,interval=100,timeout=6000){const start=Date.now();let attempts=0;const timer=setInterval(()=>{attempts++;const obj=objPath.split('.').reduce((acc,key)=>acc?.[key],window);if(obj){clearInterval(timer);debuglog(`[SUCCESS]Found"${objPath}"after ${attempts}attempts in ${Date.now()-start}ms`);callback(obj);}else if(Date.now()-start>=timeout){clearInterval(timer);debuglog(`[TIMEOUT]"${objPath}"not found within ${timeout}ms.Attempts:${attempts},Interval:${interval}ms`);}},interval);}
function dataLayerSwitch(){if(!window.monetateB2TInitialized){window.monetateB2TInitialized=true;waitForB2t("monetateB2TQueue",()=>{debuglog("monetateB2TQueue ready  initializing b2tEventTrack()");b2tEventTrack();});}
if(typeof digitalData!=='undefined'){startOffersWatchers();consentListener();digitalDataEventTrack();digitaldataRetrack();}else if(typeof lhgData!=='undefined'){consentListener();window.lhgdataRetrack();}}
(function installMonetateFirstArrayThenTee(){if(window.__mtShadowFinal?.installed)return window.__mtShadowFinal.teardown;const MAX_BATCHES=20;const isCmd=(x)=>Array.isArray(x)&&typeof x[0]==="string";const isTrackData=(x)=>isCmd(x)&&x[0]==="trackData";const clone=(v)=>{try{return JSON.parse(JSON.stringify(v));}catch{return v;}};const valueOfCmd=(arr)=>(arr.length===1?true:arr.length===2?clone(arr[1]):clone(arr.slice(1)));const mergeCmd=(batchObj,arr)=>{const name=arr[0];const val=valueOfCmd(arr);if(!(name in batchObj)){batchObj[name]=val;}else if(Array.isArray(batchObj[name])&&batchObj[name].__mtMulti===true){batchObj[name].push(val);}else{const multi=[batchObj[name],val];Object.defineProperty(multi,"__mtMulti",{value:true});batchObj[name]=multi;}};if(!Array.isArray(window.monetateShadow))window.monetateShadow=[];let currentBatch={};let firstBatchDone=false;const pushClosedBatch=(batchObj)=>{if(!batchObj||!Object.keys(batchObj).length)return;while(window.monetateShadow.length>=MAX_BATCHES){window.monetateShadow.shift();}
window.monetateShadow.push(batchObj);};const closeBatch=()=>{pushClosedBatch(currentBatch);currentBatch={};};let arrayPollTimer=null;let processedIndex=0;const processArrayQueueOnce=(q)=>{if(!Array.isArray(q)||firstBatchDone)return;for(let i=processedIndex;i<q.length;i++){const raw=q[i];if(!isCmd(raw))continue;mergeCmd(currentBatch,raw);if(isTrackData(raw)){closeBatch();firstBatchDone=true;stopArrayPoller();break;}}
processedIndex=q.length;};const startArrayPoller=()=>{if(arrayPollTimer||firstBatchDone)return;arrayPollTimer=setInterval(()=>{if(Array.isArray(window.monetateQ)){processArrayQueueOnce(window.monetateQ);}else{stopArrayPoller();}},40);};const stopArrayPoller=()=>{if(arrayPollTimer){clearInterval(arrayPollTimer);arrayPollTimer=null;}};if(Array.isArray(window.monetateQ)){processedIndex=0;processArrayQueueOnce(window.monetateQ);if(!firstBatchDone)startArrayPoller();}
let teeInstalled=false;let origPush=null;const pushIntoShadow=(raw)=>{if(!isCmd(raw))return;mergeCmd(currentBatch,raw);if(isTrackData(raw)){closeBatch();}};const tryInstallTee=()=>{if(teeInstalled)return;const q=window.monetateQ;if(!q||typeof q.push!=="function")return;origPush=q.push.bind(q);q.push=function(...items){for(const raw of items)pushIntoShadow(raw);return origPush(...items);};teeInstalled=true;};const swapTimer=setInterval(()=>{if(!teeInstalled&&!Array.isArray(window.monetateQ))tryInstallTee();if(!arrayPollTimer&&Array.isArray(window.monetateQ)&&!firstBatchDone)startArrayPoller();},200);if(!Array.isArray(window.monetateQ))tryInstallTee();const teardown=()=>{stopArrayPoller();clearInterval(swapTimer);if(teeInstalled&&window.monetateQ&&typeof window.monetateQ.push==="function"&&origPush){try{window.monetateQ.push=origPush;}catch{}}
teeInstalled=false;origPush=null;if(window.__mtShadowFinal)window.__mtShadowFinal.installed=false;};const resetShadow=()=>{window.monetateShadow=[];currentBatch={};processedIndex=0;firstBatchDone=false;};window.__mtShadowFinal={installed:true,teardown,resetShadow};})();window.initiateMonetate=function(){window.monetateFired=true;window.monetateNonPageView=false;if(typeof tealiumiq_currency!=='undefined'&&typeof tealiumiq_currency.convert==='function'){debuglog('tealiumiq_currency.convert is defined, proceed to WaitForDataLayer');waitForDatalayer(["window.lhgData","window.digitalData"],function(object){dataLayerSwitch();});}else{triggerMonetateEvent("monetate_error","'scriptLoad","failed to load tealiumiq_currency");debuglog('tealiumiq_currency.convert is not defined but we try again in a callback');waitForCurrency("tealiumiq_currency",function(object){dataLayerSwitch();});}}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var readCookie=function(cookieName){var re=new RegExp('[; ]'+cookieName+'=([^\\s;]*)');var sMatch=(' '+document.cookie).match(re);if(cookieName&&sMatch)return unescape(sMatch[1]);return'';};b.clientID=readCookie('_ga').split('.').slice(-2).join('.');}}catch(e){utag.DB(e)}},function(a,b){try{if(1){try{b['page_was_reloaded']=window.performance.getEntriesByType('navigation').map((nav)=>nav.type).includes('reload');}catch(e){}}}catch(e){utag.DB(e);}},function(a,b){try{if(typeof b['platformId']!='undefined'){try{const ec=b['ga_eventCategory'],ea=b['ga_eventAction'],el=b['ga_eventLabel'],pagename=b['page.pageInfo.pageName'],type=b['action_type'],bookingClass=b['ga_hs_booking_class']?b['ga_hs_booking_class']:'no';let transaction_id;const isFlightManager=(ec==="flightmanager"||ec==="FlightManagerLegacy")&&(ea==="submit"||ea==="submit requested")&&el==="search flights";const isBestPriceSearch=(ec==="Best Price Search BookNowCTA"&&ea==="click"&&pagename==="offers-and-destination");const isOffersSearch=(ec==="df modal button"&&ea==="click"&&el==="cta search flights");const isRecentSearches=(ec==="recent searches"&&ea==="click"&&el==="submit"&&(type==="app/RecentSearches/TRIGGER_RECENT_SEARCH"||type==="b2t/FlightManager/recent searches_click_submit"));const isDestinationSearches=(ec==="ond button"&&ea==="click"&&el==="cta search flights"&&type==="b2t/ondcity/ond-button_click_cta-search-flights");if(isFlightManager||isBestPriceSearch||isRecentSearches||isOffersSearch||isDestinationSearches){const cookieNames=['Search_Meta','Search_Exactag','Search_Marigold','Search_floodlight'];cookieNames.forEach(cookieName=>window.cookieSetter(cookieName,bookingClass));const m_trk=window.cookieExtractor("m_trk");if(m_trk){transaction_id=`${m_trk.substring(0,20)}_${b["ga_hs_origin"].toUpperCase()}-${b["ga_hs_destination"].toUpperCase()}_${b["tealium_timestamp_utc"].split("T")[0].replaceAll("-","")}`;window.cookieSetter("m_trkID_event",transaction_id,30/1440);}}
if(b["platformId"]==="adcb2"){var currentDate=new Date();var s_c_day=("0"+currentDate.getDate()).slice(-2);var s_c_month=("0"+(currentDate.getMonth()+1)).slice(-2);var s_c_year=currentDate.getFullYear().toString();utag_data.date_of_booking=s_c_year+'-'+s_c_month+'-'+s_c_day;}
const pagePathMap={'footer-newsletter':'/footer-pages/subscribe-newsletter','travel-id':'/travel-id','internet-on-board':'/flynet','subscribe-newsletter':'/discover-lufthansa/register-newsletter'};const currentPath=window.location.pathname;if(Object.values(pagePathMap).some(path=>currentPath.includes(path))){const mauiElements=document.querySelectorAll("maui-button-link, maui-navigation-link");mauiElements.forEach((element)=>{const href=element.getAttribute("href");if(href&&(href.includes("lufthansa.miles-and-more.com")||href.includes("lufthansa-uat1.miles-and-more.com"))){try{const url=new URL(href);const encodedPath=encodeURI(currentPath);if(url.searchParams.has("state")){url.searchParams.set("state",encodedPath);}else{url.searchParams.append("state",encodedPath);}
element.setAttribute("href",url.toString());}catch(e){}}});}
}
catch(e){utag.DB(e)}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){b['FLNetfare']='';b['FLOrdertotal']='';if(b['platformId']=='adcb2')
{b['FLNetfare']=b['transaction.total.priceBreakdown.baseFarePrice.amount_EURO'];}
else if(b['platformId']=='adcb1')
{b['FLNetfare']=b['BFNetfareEUR'];}}}catch(e){utag.DB(e)}},function(a,b,c,d,e,f,g){if(1){d=b['market'];if(typeof d=='undefined')return;c=[{'AE':'779119s'},{'AL':'865079s'},{'AM':'766813s'},{'AR':'766758s'},{'AT':'125305s'},{'AU':'253289s'},{'AZ':'766803s'},{'BE':'125308s'},{'BG':'641399s'},{'BH':'766804s'},{'BR':'766757s'},{'BY':'766801s'},{'CA':'253285s'},{'CD':'766773s'},{'CH':'125306s'},{'CL':'766759s'},{'CN':'253271s'},{'CO':'766768s'},{'CY':'766760s'},{'CZ':'253267s'},{'DE':'63874s'},{'DK':'125303s'},{'EE':'779120s'},{'EG':'766761s'},{'ES':'221694s'},{'ET':'766915s'},{'FI':'125304s'},{'FR':'221692s'},{'GH':'766805s'},{'GQ':'766914s'},{'GR':'253263s'},{'HK':'253272s'},{'HR':'864154s'},{'HU':'253269s'},{'ID':'536601s'},{'IE':'719583s'},{'IL':'253274s'},{'IN':'253273s'},{'IQ':'766771s'},{'IR':'766774s'},{'IS':'766806s'},{'IT':'221693s'},{'JO':'766916s'},{'JP':'291094s'},{'KR':'536602s'},{'KW':'766762s'},{'KZ':'766807s'},{'LB':'766917s'},{'LT':'779122s'},{'LU':'253264s'},{'LV':'779121s'},{'LY':'766775s'},{'MA':'253280s'},{'MT':'766763s'},{'MX':'253286s'},{'MY':'253275s'},{'NG':'766777s'},{'NL':'125307s'},{'NO':'125301s'},{'NZ':'766767s'},{'OM':'766808s'},{'PH':'253276s'},{'PK':'779123s'},{'PL':'253265s'},{'PT':'125309s'},{'QA':'766764s'},{'RO':'779117s'},{'RS':'766809s'},{'RU':'253266s'},{'SA':'766765s'},{'SE':'125302s'},{'SG':'253277s'},{'SK':'864151s'},{'SL':'864152s'},{'TH':'253279s'},{'TM':'766810s'},{'TN':'766918s'},{'TR':'253268s'},{'TW':'253278s'},{'UA':'766778s'},{'UK':'63875s'},{'GB':'63875s'},{'US':'253287s'},{'VE':'253288s'},{'VN':'555696s'},{'ZA':'779118s'},{'PA':'767009s'},{'KE':'767010s'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['group_tag_string']=c[e][f];m=true};};if(m)break};if(!m)b['group_tag_string']='NA';}},function(a,b,c,d,e,f,g){if(1){d=b['dom.domain'];if(typeof d=='undefined')return;c=[{'lufthansa.com':'https://www.lufthansa.com/xx/en/common/privacy-statement/cookie-policy'},{'discover-airlines.com':'https://www.discover-airlines.com/xx/en/common/privacy-statement/cookie-policy'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d.toString().indexOf(f)>-1){b['cookie_policy_url']=c[e][f];m=true};};if(m)break};if(!m)b['cookie_policy_url']='';}},function(a,b,c,d,e,f,g){if(1){d=b['dom.domain'];if(typeof d=='undefined')return;c=[{'lufthansa.com':'https://www.lufthansa.com/xx/en/common/privacy-statement/info'},{'discover-airlines.com':'https://www.discover-airlines.com/en/privacy-policy/'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d.toString().indexOf(f)>-1){b['privacy_policy_url']=c[e][f];m=true};};if(m)break};if(!m)b['privacy_policy_url']='';}},function(a,b,c,d,e,f,g){if(1){d=b['dom.domain'];if(typeof d=='undefined')return;c=[{'lufthansa.com':'https://www.lufthansa.com/xx/en/imprint'},{'discover-airlines.com':'https://www.discover-airlines.com/en/imprint/'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d.toString().indexOf(f)>-1){b['imprint']=c[e][f];m=true};};if(m)break};if(!m)b['imprint']='';}},function(a,b){try{if(1){let eventAction=(b['ga_eventAction']||'').trim().replaceAll(' ','').toLowerCase();let eventCategory=(b['ga_eventCategory']||'').trim().replaceAll(' ','').toLowerCase();let pageId=(b['page.pageInfo.pageID']||'').trim().replaceAll(' ','').toLowerCase();let pageName=(b["page.pageInfo.pageName"]||'').trim().toLowerCase();let utEvent=b["ut.event"];b['eventname_lookupValue']="";const categoryActionPairs=[["flightmanager","submit"],["page_view","purchase"],["consent_manager","submit_selection"],["consent_manager","accept_none"],["consent_manager","accept_all"]];const categoryActionPageIdTriplets=[["userevent","gotonextpagewhenselectingafarefamily","fppoutbound"],["userevent","gotonextpagewhenselectingafarefamily","fppinbound"],["userevent","fillpassengerdetailsbutton","shoppingcart_cart_based"],["userevent","confirmtravelerdetails","traveler"],["userevent","upsellproposalselected","shoppingcart_cart_based"],];for(const[cat,act]of categoryActionPairs){if(eventCategory===cat&&eventAction===act){b['eventname_lookupValue']='navigationmanual';break;}}
if(!b['eventname_lookupValue']){for(const[cat,act,pid]of categoryActionPageIdTriplets){if(eventCategory===cat&&eventAction===act&&pageId===pid){b['eventname_lookupValue']='navigationmanual';break;}}}
if(utEvent==="view"&&pageName==="homepage"){b['eventname_lookupValue']='navigationmanual';}
if(utEvent==="view"&&pageId==="fppoutbound"){b['eventname_lookupValue']='navigationmanual';}
if(utEvent==="view"&&pageId==="shoppingcart_cart_based"){b['eventname_lookupValue']='navigationmanual';}
if(utEvent==="view"&&pageId==="shoppingcart_order_based"){b['eventname_lookupValue']='navigationmanual';}
if(utEvent==="view"&&pageId==="fppcomplexflow"){b['eventname_lookupValue']='navigationmanual';}
if(utEvent==="view"&&pageId==="baggage"){b['eventname_lookupValue']='navigationmanual';}
if(utEvent==="view"&&pageId==="co2 neutralisation"){b['eventname_lookupValue']='navigationmanual';}
if(utEvent==="view"&&pageId==="co2neutralisation"){b['eventname_lookupValue']='navigationmanual';}
if(utEvent==="view"&&pageId==="railandfly"){b['eventname_lookupValue']='navigationmanual';}
if(utEvent==="view"&&pageId==="seatmap"){b['eventname_lookupValue']='navigationmanual';}
const viewPages=["confirmation page",];if(utEvent==="view"&&viewPages.includes(pageName)){b['eventname_lookupValue']='navigationmanual';}}}catch(e){utag.DB(e)}},function(a,b,c,d,e,f,g){if(typeof b['eventname_lookupValue']!='undefined'){d=b['eventname_lookupValue'];if(typeof d=='undefined')return;c=[{'navigationmanual':'true'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['eventname_destvalue']=c[e][f];m=true};};if(m)break};if(!m)b['eventname_destvalue']='';}},function(a,b){try{if(1){b['FLNetfare']='';b['nullcheckerfl']='';var netfarefl="";if(b['platformId']==='adcb2'){var baseFare=digitalData?.transaction?.total?.priceBreakdown?.baseFarePrice??0;if(baseFare!=0)
{netfarefl=(baseFare.amount===0)?"":tealiumiq_currency.convert(baseFare.amount.toString(),baseFare.currency,"EUR");}
b['FLNetfare']=netfarefl;b['nullcheckerfl']=(netfarefl!=="")?"true":"false";}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(!window.ExpStore){b.exp_experiments_list=[];b.exp_experiments_csv='';b.exp_experiments_count=0;b.exp_first_touch='';b.exp_last_touch='';for(var i=1;i<=10;i++)b['exp'+i]='';b.ga4_monetate_campaign_name='';b.ga4_monetate_campaign_type='';}else{var listPairs=window.ExpStore.listPairs();var csv=listPairs.join('|');b.exp_experiments_list=listPairs;b.exp_experiments_csv=csv;b.exp_experiments_count=listPairs.length;b.exp_first_touch=window.ExpStore.firstTouch();b.exp_last_touch=window.ExpStore.lastTouch();for(var i=0;i<10;i++)b['exp'+(i+1)]=listPairs[i]||'';var entries=(window.ExpStore.list&&window.ExpStore.list())||[];var ids=[];for(var i1=0;i1<entries.length;i1++){var id=entries[i1]&&entries[i1].id;if(id)ids.push(String(id));}
var seenId={};var idsDedup=[];for(var j1=0;j1<ids.length;j1++){if(!seenId[ids[j1]]){seenId[ids[j1]]=1;idsDedup.push(ids[j1]);}}
b.ga4_monetate_campaign_name=idsDedup.join(',');var idPairs=[];for(var i2=0;i2<entries.length;i2++){var cid=entries[i2]&&entries[i2].id;var rid=entries[i2]&&(entries[i2].recipeId||entries[i2].variantId||'');if(cid&&rid)idPairs.push(String(cid)+'|'+String(rid));}
var seenPair={};var pairsDedup=[];for(var j2=0;j2<idPairs.length;j2++){if(!seenPair[idPairs[j2]]){seenPair[idPairs[j2]]=1;pairsDedup.push(idPairs[j2]);}}
b.ga4_monetate_campaign_type=pairsDedup.join(',');}}}catch(e){utag.DB(e)}},function(a,b,c,d,e,f,g){if(1){d=b['clean.url'];if(typeof d=='undefined')return;c=[{'/flight-information':'TRUE|TRUE'},{'/fluginformationen':'TRUE|TRUE'},{'/gepaeck':'TRUE|TRUE|baggage'},{'/carry-on-baggage':'TRUE|TRUE|carryon-baggage_rules'},{'/handgepaeck':'TRUE|TRUE|carryon-baggage_rules'},{'/prepare-for-your-trip/baggage/electronic-devices-and-batteries':'TRUE|TRUE|electronicdevices-baggage_rules'},{'/gefaehrliche-gegenstaende':'TRUE|TRUE|dangerousGoods'},{'/excess-baggage':'TRUE|TRUE|baggage_excess'},{'/sports-baggage':'TRUE|TRUE|baggage_sports'},{'/travelling-with-animals':'TRUE|TRUE|pets-travelPetsInCabin'},{'/travelling-healthy':'TRUE|TRUE|travelHealthIssues'},{'/free-baggage':'TRUE|TRUE'},{'/sportgepaeck':'TRUE|TRUE'},{'/uebergepaeck':'TRUE|TRUE'},{'/gesund-reisen':'TRUE|TRUE'},{'/freigepaeck-regeln':'TRUE|TRUE'},{'/all-check-in':'TRUE|TRUE|checkin-otherCheckinQuestions'},{'/online-check-in-info':'TRUE|TRUE|onlinecheckin-otherCheckinQuestions'},{'/check-in-online-informacion':'TRUE|TRUE|onlinecheckin-otherCheckinQuestions'},{'/informazioni-sul-check-in-online':'TRUE|TRUE|onlinecheckin-otherCheckinQuestions'},{'/informations-enregistrement-en-ligne':'TRUE|TRUE|onlinecheckin-otherCheckinQuestions'},{'/automatic-check-in':'TRUE|TRUE|automaticcheckin-otherCheckinQuestions'},{'/pre-check-in':'TRUE|TRUE|precheckin-otherCheckinQuestions'},{'/check-in-deadlines':'TRUE|TRUE|checkindeadlines -otherCheckinQuestions'},{'/tempi-limite-di-accettazione':'TRUE|TRUE|checkindeadlines -otherCheckinQuestions'},{'/tiempos-limite-de-check-in':'TRUE|TRUE|checkindeadlines -otherCheckinQuestions'},{'/heures-limites-d-enregistrement':'TRUE|TRUE|checkindeadlines -otherCheckinQuestions'},{'/check-in-baggage':'TRUE|TRUE|checkinbaggage-otherCheckinQuestions'},{'/gepaeckaufgabe':'TRUE|TRUE|checkinbaggage-otherCheckinQuestions'},{'/lounges':'TRUE|TRUE|Lounges'},{'/admission-rules':'TRUE|TRUE|lounges-admissionrules-Lounges'},{'/unaccompanied-minors':'TRUE|TRUE|unaccomponiedMinors'},{'/alleinreisende-kinder':'TRUE|TRUE|unaccomponiedMinors'},{'/special-meals':'TRUE|TRUE|specialMeal'},{'/sondermahlzeiten':'TRUE|TRUE|specialMeal'},{'/accessible-travel':'TRUE|TRUE|accessibletravel-moreAccessibleTravel'},{'/fliegen-mit-kindern':'TRUE|TRUE|families-travellingwithchildren'},{'/planning-with-kids':'TRUE|TRUE|families-planningwithkids'},{'/with-children-at-the-airport':'TRUE|TRUE|families-childrenattheairport'},{'/mit-kindern-am-flughafen':'TRUE|TRUE|families-childrenattheairport'},{'/childrens-menus-on-board':'TRUE|TRUE|families-childrenmenusonboard'},{'/baggage':'TRUE|TRUE|baggage'},{'/BAGGAGE':'TRUE|TRUE|baggageshop-baggage'},{'/kinder-an-bord':'TRUE|TRUE|families-childrenonboard'},{'/children-on-board':'TRUE|TRUE|families-childrenonboard'},{'/airport-information':'TRUE|TRUE|attheairport'},{'/flughafeninformation':'TRUE|TRUE|attheairport'},{'/travelling-with-children':'TRUE|TRUE|families-travellingwithchildren'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d.toString().indexOf(f)>-1){b['chat_cognigy_config']=c[e][f];m=true};};if(m)break};}},function(a,b){try{if((typeof b['user.profile.loginStatus']!='undefined'&&b['user.profile.loginStatus'].toString().toLowerCase()=='true'.toLowerCase()&&typeof b['platformId']!='undefined'&&b['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase())){b['newuserid']=b['user.profile.profileInfo.profileId']}}catch(e){utag.DB(e);}},function(a,b){try{if((typeof b['chat_cognigy_config']!='undefined'&&typeof b['chat_cognigy_config']!='undefined'&&b['chat_cognigy_config']!='')){try{b['cognigy_chat_load']=b['chat_cognigy_config'].includes('|')?b['chat_cognigy_config'].split('|')[0]:b['chat_cognigy_config']}catch(e){};try{b['cognigy_chat_initial_open']=b['chat_cognigy_config'].includes('|')?b['chat_cognigy_config'].split('|').length>1?b['chat_cognigy_config'].split('|')[1]:'':''}catch(e){};try{b['cognigy_chat_dynamic_params']=b['chat_cognigy_config'].includes('|')?b['chat_cognigy_config'].split('|').length>2?b['chat_cognigy_config'].split('|')[2]:'':''}catch(e){}}}catch(e){utag.DB(e);}},function(a,b){try{if(1){var consent_cookie=window.utag.gdpr.getCookieValues()||{};var gcsConsent=b['gcs_consent'];var formattedGcsConsent="";if(gcsConsent!==undefined)
{var gcsParts=gcsConsent.split("|");formattedGcsConsent=(gcsParts[0].includes('granted')?"s1":"s0")+"|"+(gcsParts[1].includes('granted')?"c1":"c0")+"|"+(gcsParts[2].includes('granted')?"p1":"p0");}
if(consent_cookie&&consent_cookie.consent=='true'){b.consent_value="s".concat(consent_cookie.c2).concat('|c').concat(consent_cookie.c3).concat('|p').concat(consent_cookie.c4);b.consent_timestamp=consent_cookie.ts;}else if(formattedGcsConsent){b.consent_value=formattedGcsConsent;const c_timestamp_new=Date.now();b.consent_timestamp=c_timestamp_new;}else{const c_timestamp=Date.now();b.consent_value="s0|c0|p0";b.consent_timestamp=c_timestamp;}
var newconsentdecision=(tealiumConsentRegister&&tealiumConsentRegister.currentDecision)||[];new_affiliates=newconsentdecision.indexOf('affiliates')!==-1?'1':'0';new_search=newconsentdecision.indexOf('search')!==-1?'1':'0';new_display_ads=newconsentdecision.indexOf('display_ads')!==-1?'1':'0';if(new_affiliates==="1"||new_search==="1"||new_display_ads==="1"){window.utag_cfg_ovrd.nocookie=false;window.utag.cfg.nocookie=false;}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){try{b['random_number']=parseInt(Math.random()*1E13,0)}catch(e){}}}catch(e){utag.DB(e);}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[297]=='undefined'){utag.runonce.ext[297]=1;if(b['page.pageInfo.pageName'].toString().toLowerCase()=='udh-profile'.toLowerCase()||b['page.pageInfo.pageName'].toString().toLowerCase()=='my-account'.toLowerCase()){(function(){try{}
catch(ex){}})();}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['platformId'].toString().toLowerCase()=='adcb2'.toLowerCase()){if((typeof lhgData!=='undefined'||digitalData!=='undefined')&&(typeof utag_data.BFT=='undefined'||utag_data.BFT=='(not set)')){let EU_IATA=["AGA","AHU","DJE","HRG","MIR","NBE","NDR","OUD","RAK","RBA","RMF","SSH","TLV","TNG","SJJ","SOF","BUD","SKP","BUH","OTP","EVN","BAK","MSQ","OMO","BOJ","GOZ","ROU","SLS","TGV","VAR","VID","DBV","LSZ","OSI","PUY","RJK","SPU","ZAD","ZAG","QUF","TLL","TBS","RIX","VNO","OHD","CND","AER","KHV","HTA","IKT","KZN","MRV","MOW","DME","SVO","VKO","MMK","OVB","LED","UUD","VLU","ARH","YKS","BTS","LJU","MBX","KBP","IEV","LWO","NLV","ODS","SIP","BEG","INI","QND","TGD","PRN","TIV","TIA","INN","SZG","VIE","CPH","HEL","BER","SXF","TXL","DRS","HAM","ATH","HEW","CFU","KGS","JMK","MJT","RHO","SKG","IBZ","ORK","DUB","GWY","KIR","NOC","SNN","CAG","MLA","BGO","OSL","TRF","KRK","WAW","LIS","PDL","PMI","SVQ","VLC","GOT","STO","ARN","BMA","BHD","BFS","PIK","GLA","INV","ALV","GRZ","KLU","LNZ","ANR","BRU","LGG","AKT","LCA","QLI","NIC","PFO","PRG","AAR","AAL","BLL","EBJ","FAE","KRP","ODE","RNN","SKS","SGD","TED","ENF","IVL","JOE","JYV","KAJ","KHJ","KEM","KTT","KOK","KUO","KAO","LPP","MHQ","MIK","OUL","POR","RVN","SVL","SJY","SOT","TMP","TKU","VAA","VRK","AJA","LBI","NCY","AUR","BIA","BIQ","BOD","BES","CLY","CMF","CFE","DNR","FSC","FRJ","GNB","LRH","LAI","LIL","LIG","LRT","LDE","LYS","MRS","MZM","MPL","MLH","ENC","NTE","NCE","FNI","PAR","CDG","LBG","ORY","PUF","PGF","UIP","RNS","RNE","RDZ","SBK","EBU","SXB","TLS","AGB","BYU","BRE","CGN","DTM","DUS","ERF","FRA","HNN","FDH","HAJ","HOQ","FKB","KEL","CGN","LEJ","MUC","FMO","MSR","NUE","PAD","SCN","STR","GWT","WIE","GIB","GPA","CHQ","JKH","HER","KLX","AOK","KVA","PVK","SKG","SMI","JSI","JTR","ZTH","CXI","EGS","REK","KEF","SXL","AHO","AOI","BRI","BGY","BLQ","VBS","BDS","CTA","FLR","GOA","SUF","LMP","MIL","LIN","MXP","BGY","NAP","OLB","PMO","PNL","PEG","PSR","PSA","REG","RMI","ROM","CIA","FCO","TPS","TSF","TRS","TRN","VCE","VBS","VRN","LUX","AMS","HAG","EIN","LEY","MST","RTM","AES","ALF","BDU","BOO","BNN","EVE","FRO","HFT","HAU","KKN","KRS","KSU","LKL","SOG","SVG","TOS","TRD","GDN","POZ","SZZ","FAO","FNC","HOR","OPO","PXO","SMA","TER","ALC","LEI","ACE","BJZ","BCN","BIO","ODB","FUE","GRO","GRX","XRY","LCG","LPA","MAD","MAH","AGP","MJV","OVD","REU","EAS","SPC","SDR","SCQ","TCI","TFS","TFN","VLL","VDE","VGO","VIT","ZAZ","LYR","JHE","JKG","KLR","KSD","KRN","KID","LDK","LLA","MMA","MMX","NRK","ORB","RNB","SDL","VXO","VST","VBY","ACH","BSL","BRN","ZDJ","GVA","LUG","ZRH","EAP","TFN","TFS","SZD","ABZ","BHX","BRS","CBG","CWL","EMA","LDY","EDI","GCI","HUY","IOM","JER","LBA","LPL","LON","LCY","LGW","LHR","LTN","STN","MAN","NCL","KOI","SOU","SEN","STN","SYY","LSI","MME","WIC"];let origin;let destination;if(typeof lhgData!=='undefined'){if(lhgData.cart.item.length>0){origin=lhgData.cart.item[0].productInfo.origin;destination=lhgData.cart.item[0].productInfo.destination;}else{let tempIata=lhgData.filter.filterInfo.term.split("/")[0].split("-");origin=tempIata[0];destination=tempIata[1];}}else if(digitalData!=='undefined'){origin=digitalData.searchInput.searchInputInfo.flightDetails[0].departure.locationCode;destination=digitalData.searchInput.searchInputInfo.flightDetails[0].arrival.locationCode}
var flightBFT=(EU_IATA.includes(origin.toUpperCase())&&EU_IATA.includes(destination.toUpperCase()))?"K":"IK"
utag_data.BFT=flightBFT;utag.data.BFT=flightBFT;b.BFT=flightBFT;}}}catch(e){utag.DB(e)}},function(a,b){try{if(typeof b['qp.utm_medium']!='undefined'){document.cookie="exactagutmcookie_utmMedium="+b['qp.utm_medium']+";path=/;domain="+utag.cfg.domain+";expires="+(function(){var d=new Date();d.setTime(d.getTime()+(30*6e4));return d.toGMTString();})()+"";b['cp.exactagutmcookie_utmMedium']=b['qp.utm_medium'];}}catch(e){utag.DB(e);}},function(a,b){try{if(typeof b['qp.utm_source']!='undefined'){document.cookie="exactagutmcookie_utmSource="+b['qp.utm_source']+";path=/;domain="+utag.cfg.domain+";expires="+(function(){var d=new Date();d.setTime(d.getTime()+(30*6e4));return d.toGMTString();})()+"";b['cp.exactagutmcookie_utmSource']=b['qp.utm_source'];}}catch(e){utag.DB(e);}},function(a,b){try{if(typeof b['qp.utm_term']!='undefined'){document.cookie="exactagutmcookie_utmTerm="+b['qp.utm_term']+";path=/;domain="+utag.cfg.domain+";expires="+(function(){var d=new Date();d.setTime(d.getTime()+(30*6e4));return d.toGMTString();})()+"";b['cp.exactagutmcookie_utmTerm']=b['qp.utm_term'];}}catch(e){utag.DB(e);}},function(a,b){try{if(typeof b['qp.utm_campaign']!='undefined'){document.cookie="exactagutmcookie_utmCampaign="+b['qp.utm_campaign']+";path=/;domain="+utag.cfg.domain+";expires="+(function(){var d=new Date();d.setTime(d.getTime()+(30*6e4));return d.toGMTString();})()+"";b['cp.exactagutmcookie_utmCampaign']=b['qp.utm_campaign'];}}catch(e){utag.DB(e);}},function(a,b){try{if(typeof b['feedbackai_surveyAlreadyShown']!='undefined'&&b['feedbackai_surveyAlreadyShown']!=''){if(typeof b['cp.feedbackai_surveyAlreadyShown']=='undefined'){document.cookie="feedbackai_surveyAlreadyShown="+b['feedbackai_surveyAlreadyShown']+";path=/;domain="+utag.cfg.domain+";expires=";b['cp.feedbackai_surveyAlreadyShown']=b['feedbackai_surveyAlreadyShown'];}}}catch(e){utag.DB(e);}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[405]=='undefined'){utag.runonce.ext[405]=1;if((b['dom.domain']=='shop-uat.lufthansa.com'&&b['platformId'].toString().toLowerCase()=='adcb2'.toLowerCase())||(b['dom.domain'].toString().toLowerCase()=='shop.lufthansa.com'.toLowerCase()&&b['platformId'].toString().toLowerCase()=='adcb2'.toLowerCase())||(b['dom.domain'].toString().toLowerCase()=='localhost'.toLowerCase()&&b['platformId'].toString().toLowerCase()=='adcb2'.toLowerCase())){console.log('####### B2T on RefX - Event Callback Init: window.utag_eventCallback defined #######');window.utag_eventCallback=function(a,u,s,p){try{let tv='',ea='',ec='',el='',ev='undefined',cd={},fire=false,error=false;if(a.indexOf("b2t")===0){var ga_params=a.split("/").pop().split("_");if(ga_params.length===3){fire=true;tv=ga_params[2].replace(/-/g," ");ec=ga_params[0].replace(/-/g," ");ea=ga_params[1].replace(/-/g," ");el=ga_params[2].replace(/-/g," ");}
if(/view|click/.test(ea.toLowerCase())){cd['ga_event'+ea.charAt(0).toUpperCase()+ea.slice(1)]="1";}
if(p&&p.CD['ga_errorMessage']){p.CD['error_counter']="1";}
if(p&&p.CD){var CDPermittedTable=["filter.element.elementName","filter.element.elementType","filter.element.elementValue","filter.element.userInput","ga_hs_arrival","ga_hs_booking_class","ga_hs_bundle","ga_hs_departure","ga_hs_destination","ga_hs_origin","ga_hs_adult","ga_hs_child","ga_hs_componentId","ga_hs_order","ga_hs_infant","ga_hs_pax","ga_hs_triptype","ga_hs_price","daysUntilDep","ga_hs_flowtype","ga_eventClick","ga_eventView","ga_errorElementName","ga_errorType","ga_errorCode","ga_errorDetail","ga_errorMessage","intcamp","ga_journeyLength","ga_hs_trip_reason","ga_hs_cabin","ga_hs_couponStatus","ga_ffamily_code","topic_1","topic_2","topic_3","optionType","recommendation"];for(var cdKey in p.CD){if(p.CD.hasOwnProperty(cdKey)&&CDPermittedTable.includes(cdKey)){cd[cdKey]=p.CD[cdKey];}}}}
if(fire){if(cd&&cd['ga_errorMessage']){error=true;}
let tmp=Object.assign({},utag_data);tmp.tealium_event=tv;tmp.ga_eventCategory=ec;tmp.ga_eventAction=ea;tmp.ga_eventLabel=el;tmp.ga_eventValue=ev;tmp.action_type=a;if(cd){for(let key in cd){if(cd.hasOwnProperty(key)){tmp[key]=cd[key];}}}
tmp['error.errorInfo.elementName']=tmp['ga_errorElementName'];tmp['error.errorInfo.type']=tmp['ga_errorType'];tmp['error.errorInfo.errorCode']=tmp['ga_errorCode'];tmp['error.errorInfo.message']=tmp['ga_errorMessage'];cd={};if(!error){delete tmp['error.errorInfo.elementName']
delete tmp['error.errorInfo.type']
delete tmp['error.errorInfo.errorCode']
delete tmp['error.errorInfo.message']
delete tmp['error_counter']
delete tmp['ga_errorElementName']
delete tmp['ga_errorType']
delete tmp['ga_errorCode']
delete tmp['ga_errorMessage']}
utag.link(tmp);delete tmp['optionType']
delete tmp['recommendation']}
return true;}catch(e){utag.DB(e)};};}}}catch(e){utag.DB(e)}},function(a,b){try{if(typeof b['qp.qp.fbclid']!='undefined'){document.cookie="exactag_qpfbclid="+b['qp.qp.fbclid']+";path=/;domain="+utag.cfg.domain+";expires="+(function(){var d=new Date();d.setTime(d.getTime()+(90*864e5));return d.toGMTString();})()+"";b['cp.exactag_qpfbclid']=b['qp.qp.fbclid'];}}catch(e){utag.DB(e);}},function(a,b){try{if(1){b.consent_decision=(tealiumConsentRegister&&tealiumConsentRegister.currentDecision)||[];b.google_ad_storage_consent=b.consent_decision.indexOf('search')!==-1?'granted':'denied';b.google_ad_user_data_consent=b.consent_decision.indexOf('search')!==-1?'granted':'denied';b.google_analytics_storage_consent=b.consent_decision.indexOf('affiliates')!==-1?'granted':'denied';b.google_ad_personalization_consent=b.consent_decision.indexOf('search')!==-1?'granted':'denied';b.google_ads_data_redaction=b.consent_decision.indexOf('search')===-1?'true':'false';b.google_url_passthrough=b.consent_decision.indexOf('search')!==-1?'true':'false';}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[174]=='undefined'){utag.runonce.ext[174]=1;if((b['dom.domain']=='www-dcep-qa.lufthansa.com'&&b['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase())||(b['dom.domain']=='www-dcep-prep.lufthansa.com'&&b['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase())||(b['dom.domain']=='www.lufthansa.com'&&b['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase())||(b['dom.domain']=='qa-www.lufthansa.com'&&b['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase())||(b['dom.domain']=='once.lufthansa.com'&&b['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase())||(b['dom.domain']=='once-int.lufthansa.com'&&b['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase())||(b['dom.domain']=='lh-once-dev-1.materna-ips.com'&&b['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase())||(b['dom.domain'].toString().toLowerCase().indexOf('qa-www.lufthansa.com'.toLowerCase())>-1&&b['platformId'].toString().toLowerCase()=='lh0'.toLowerCase())||(b['dom.domain'].toString().toLowerCase().indexOf('stage-www.lufthansa.com'.toLowerCase())>-1&&b['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase())||(b['dom.domain'].toString().toLowerCase().indexOf('www.lufthansa.com'.toLowerCase())>-1&&b['platformId'].toString().toLowerCase()=='lh0'.toLowerCase())||(b['dom.domain'].toString().toLowerCase().indexOf('once-uat.lufthansa.com'.toLowerCase())>-1&&b['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase())){window.gtagBestPriceConversionCall=function(){try{let countryIdLookUp={"AE":"779119s","AL":"865079s","AM":"766813s","AR":"766758s","AT":"125305s","AU":"253289s","AZ":"766803s","BE":"125308s","BG":"641399s","BH":"766804s","BR":"766757s","BY":"766801s","CA":"253285s","CD":"766773s","CH":"125306s","CL":"766759s","CN":"253271s","CO":"766768s","CY":"766760s","CZ":"253267s","DE":"63874s","DK":"125303s","EE":"779120s","EG":"766761s","ES":"221694s","ET":"766915s","FI":"125304s","FR":"221692s","GH":"766805s","GQ":"766914s","GR":"253263s","HK":"253272s","HR":"864154s","HU":"253269s","ID":"536601s","IE":"719583s","IL":"253274s","IN":"253273s","IQ":"766771s","IR":"766774s","IS":"766806s","IT":"221693s","JO":"766916s","JP":"291094s","KR":"536602s","KW":"766762s","KZ":"766807s","LB":"766917s","LT":"779122s","LU":"253264s","LV":"779121s","LY":"766775s","MA":"253280s","MT":"766763s","MX":"253286s","MY":"253275s","NG":"766777s","NL":"125307s","NO":"125301s","NZ":"766767s","OM":"766808s","PH":"253276s","PK":"779123s","PL":"253265s","PT":"125309s","QA":"766764s","RO":"779117s","RS":"766809s","RU":"253266s","SA":"766765s","SE":"125302s","SG":"253277s","SK":"864151s","SL":"864152s","TH":"253279s","TM":"766810s","TN":"766918s","TR":"253268s","TW":"253278s","UA":"766778s","UK":"63875s","GB":"63875s","US":"253287s","VE":"253288s","VN":"555696s","ZA":"779118s","PA":"767009s","KE":"767010s"};if(utag_data['HomepageMarket']){let market=utag_data['HomepageMarket'];if(countryIdLookUp.hasOwnProperty(market)){let countryId=countryIdLookUp[market];if(countryId){console.log("send gtag call to: ");console.log('DC-1016557/'+countryId+'/bestp0+transactions');gtag('event','purchase',{'allow_custom_scripts':true,'value':'0','transaction_id':'','send_to':'DC-1016557/'+countryId+'/bestp0+transactions'});}}}}
catch(ex){console.log(ex);}}
window.utag_eventData={tileLookup:{'WEX':['booking','weather'],'LNG':['booking','lounge'],'BID':['ancillary','bid upgrade'],'UPG':['ancillary','cash upgrade'],'ASR':['ancillary','advanced seat reservation'],'FBG':['ancillary','first bag'],'HTL':['ancillary','hotel'],'CAR':['ancillary','car'],'ELS':['ancillary','extra leg space'],'PZS':['ancillary','preferred zone seat'],'MSC':['ancillary','mobile sim card'],'TNA':['ancillary','tours and activities'],'INS':['ancillary','insurance'],'ALC':['ancillary','a la carte dining'],'FLB':['ancillary','FICE Business Extra Long Bed Seat'],'FPS':['ancillary','FICE Business Privacy Seat'],'FES':['ancillary','FICE Business Extra Space Seat'],'FST':['ancillary','FICE Business Suite'],'LNP':['ancillary','Lounge Pass'],'PRO':['ancillary','Food Pre-Order'],'CPS':['ancillary','Compensaid'],'FLS':['ancillary','FICE Economy Legroom Seat'],'PTR':['ancillary','Generic and Dedicated Airport Transfer'],'TAX':['ancillary','Generic Taxi and Prebooked Rides'],'GYG':['ancillary','Get Your Guide'],'ETX':['ancillary','Event Tickets'],'TRP':['ancillary','SBB - Daily/Weekly Swiss Pass'],'APG':['ancillary','Airport Parking'],'OUP':['ancillary','Cash Upgrade'],'OAS':['ancillary','Advanced Seat Reservation'],'OEL':['ancillary','Extra Leg Space'],'OPZ':['ancillary','Preferred Zone Seat'],'OPA':['ancillary','Business Class Extra Space Seat (formerly Business Privacy Seat)'],'OFL':['ancillary','(FICE/OS) Economy Legroom Seat'],'OFX':['ancillary','FICE Business Extra Long Bed Seat'],'OFP':['ancillary','FICE Business Privacy Seat'],'OFE':['ancillary','FICE Business Extra Space Seat'],'OFS':['ancillary','FICE Business Suite'],'OFF':['ancillary','FICE First Class Suite Plus'],'SYT':['inspirational','top 10 sights'],'ETQ':['inspirational','travel etiquette'],'INF':['inspirational','infant teaser'],'JOU':['inspirational','ejournal'],'BGG':['inspirational','baggage'],'RES':['inspirational','restaurant'],'GTA':['inspirational','getting around'],'HLT':['inspirational','health'],'GFT':['inspirational','general fleet'],'GET':['inspirational','general lh express'],'FCT':['inspirational','first class terminal'],'SLT':['inspirational','senator lounge'],'BLT':['inspirational','business lounge'],'WLT':['inspirational','welcome lounge'],'CLT':['inspirational','children teaser'],'FET':['inspirational','family entertainment'],'LHI':['inspirational','lh id teaser'],'MAT':['inspirational','general mobile app'],'FNT':['inspirational','general fly net'],'IFT':['inspirational','inflight entertainment'],'FIE':['inspirational','food and beverage intercont eco'],'FIP':['inspirational','food and beverage intercont premium eco'],'FIB':['inspirational','food and beverage intercont business'],'FIF':['inspirational','food and beverage intercont first'],'FCE':['inspirational','food and beverage cont eco'],'FCB':['inspirational','food and beverage cont business']},nfcMode:'regular next flight',nfcType:'collapsed',daysUntilDep:'',origin:'',destination:'',decisionID:'',decisionIDFTD:'',tiles:0,loginPortletBlocker:false,debugEventStack:"",load:0
};window.utag_eventCallback=function(a,u,s,p){try{let tv='',ea='',ec='',el='',ep='',ev=undefined,cd={},fire=false,error=false;const nfcStr='next flight component';const nftStr='next flight teaser';const na_string='(not set)';var firePpfiView=function(){let hasEx=false;try{let PI=[],PN=[],PC=[],PP=[];let sum=0;window.utag_eventData.nfcMode=document.querySelector('.ppfi-container .flight-details')?'flight monitor':'next flight';window.utag_eventData.nfcMode=document.querySelector('.ppfi-container #irreg-teaser-id')?'irregular '+window.utag_eventData.nfcMode:'regular '+window.utag_eventData.nfcMode;if(s&&s.PersonalisedPreflightInformation&&s.PersonalisedPreflightInformation.ppfimonitor_id&&s.PersonalisedPreflightInformation.ppfimonitor_id.data){let s_data=s.PersonalisedPreflightInformation.ppfimonitor_id.data;if(s_data.decisionID){window.utag_eventData.decisionID=s_data.decisionID;}
if(window.utag_eventData.nfcMode.indexOf('irregular flight monitor')===0){window.utag_eventData.nfcType='unfolded';window.utag_eventData.tiles=0;}else if(window.utag_eventData.nfcMode.indexOf('regular flight monitor')===0){window.utag_eventData.nfcType='unfolded';window.utag_eventData.tiles=4;}else{window.utag_eventData.nfcType=s.PersonalisedPreflightInformation.ppfimonitor_id.isExpanded?'unfolded':'collapsed';if(!document.querySelector('#ppfimonitor_id-collapsible .collapse-btn')){window.utag_eventData.nfcType='unfolded';window.utag_eventData.tiles=6;}else if(s.browser&&s.browser.mediaType){if(s.browser.mediaType==='infinity'){window.utag_eventData.tiles=window.utag_eventData.nfcType==='unfolded'?10:6;}else if(s.browser.mediaType==='xl'){window.utag_eventData.tiles=window.utag_eventData.nfcType==='unfolded'?10:7;}else if(s.browser.mediaType==='lg'){window.utag_eventData.tiles=window.utag_eventData.nfcType==='unfolded'?9:5;}else if(s.browser.mediaType==='md'){window.utag_eventData.tiles=window.utag_eventData.nfcType==='unfolded'?8:4;}else if(s.browser.mediaType==='sm'){window.utag_eventData.tiles=window.utag_eventData.nfcType==='unfolded'?8:4;}}}
if(s_data.tiles&&s_data.tiles.length>=window.utag_eventData.tiles){let t=s_data.tiles;for(let i=0;i<window.utag_eventData.tiles;i++){if(t[i].id&&t[i].rank){window.utag_eventData.tileLookup[t[i].id].push(t[i].rank);PI.push(t[i].rank);PN.push(window.utag_eventData.tileLookup[t[i].id][0]+'|'+window.utag_eventData.tileLookup[t[i].id][1]);PC.push(nfcStr);PP.push(utag_data['page.pageInfo.pageName']);if(typeof t[i].price==='number'&&!isNaN(t[i].price))sum+=t[i].price;}}}}
fire=true;tv='co view next flights';ec=nfcStr;ea='view '+window.utag_eventData.nfcMode;el=window.utag_eventData.nfcType;if(sum>0)ev=sum;cd.ga_eventPromoId=PI;cd.ga_eventPromoName=PN;cd.ga_eventPromoCreative=PC;cd.ga_eventPromoPosition=PP;cd['user.profile.segment.segmentId']=window.utag_eventData.decisionID;cd.ga_eventView='1';cd.daysUntilDep=window.utag_eventData.daysUntilDep;cd.ga_hs_origin=window.utag_eventData.origin;cd.ga_hs_destination=window.utag_eventData.destination;cd.ga_nonInteraction=true;}
catch(ex){cd.debug_string="ppfi | "+ex;console.log("-------- pffi ---------");console.log(ex);hasEx=true;}
if(hasEx){console.log("fire ppfi view - ex");}
else{console.log("fire ppfi view - no ex");}};if(a==='app/FlightMonitorPpfi/LOAD_FLIGHTMONITOR_PPFI_SUCCEEDED'){}else if(a==='app/PersonalisedPreflightInformation/FETCH_RECOMMENDATIONS_SUCCESS'){firePpfiView();}else if(a==='app/FareTeaserDynamic/FETCH_RECOMMENDATIONS_SUCCESS'){if(Object.keys(s.FareTeaserDynamic)[0].length>=1){var re=Object.keys(s.FareTeaserDynamic)[0];window.utag_eventData.decisionIDFTD=s.FareTeaserDynamic[re].recommendations.data.decisionId}}else if(a==='app/PersonalisedPreflightInformation/FETCH_RECOMMENDATIONS_FAIL'){}else if(a==='app/PersonalisedPreflightInformation/FETCH_RECOMMENDATIONS_REQUESTED'){window.utag_eventData.load=1;if(p){if(p.departureDate){let dep=new Date(p.departureDate);let now=new Date();window.utag_eventData.daysUntilDep=Math.round(Math.abs((now.getTime()-dep.getTime())/(24*60*60*1000)));}
if(p.originCode)window.utag_eventData.origin=p.originCode.toLowerCase();if(p.destinationCode)window.utag_eventData.destination=p.destinationCode.toLowerCase();}}else if(a==='app/PersonalisedPreflightInformation/SUBMIT_CHECKIN_REQUESTED'){if(u){fire=true;tv='co click next flights';ec=u==='ppfimonitor_id'?nfcStr:nftStr;if(window.utag_eventData.nfcMode==='irregular flight monitor'){ea='click irregular flight monitor';el='alternative flight';}else{ea='click regular next flight';el='check in';}
cd['user.profile.segment.segmentId']=window.utag_eventData.decisionID;cd.ga_eventClick='1';cd.daysUntilDep=window.utag_eventData.daysUntilDep;cd.ga_hs_origin=window.utag_eventData.origin;cd.ga_hs_destination=window.utag_eventData.destination;}}else if(a==='app/PersonalisedPreflightInformation/SET_MODAL_OPEN'){tv='co click next flights';ec=nfcStr;ea='click';if(p&&p.tileId==='WEX'){fire=true;if(p['open']===true){ea='click '+window.utag_eventData.nfcMode;el='booking offer';if(window.utag_eventData.tileLookup[p.tileId][0])el=window.utag_eventData.tileLookup[p.tileId][0]+' offer';let rank=0;if(window.utag_eventData.tileLookup[p.tileId][2]){rank=window.utag_eventData.tileLookup[p.tileId][2];}
cd.ga_eventPromoId=[rank.toString()];cd.ga_eventPromoName=[window.utag_eventData.tileLookup[p.tileId][0]+'|'+window.utag_eventData.tileLookup[p.tileId][1]];cd.ga_eventPromoCreative=[ec];cd.ga_eventPromoPosition=[utag_data['page.pageInfo.pageName']];if(rank==0){cd['debug_string']=window.utag_eventData.debugEventStack;utag_data['debug_string']=cd['debug_string'];}
else{cd['debug_string']="ok";utag_data['debug_string']=cd['debug_string'];}}
else if(p['open']===false)el='Weather3';}else if(p&&p.tileId==='LNG'){fire=true;if(p['open']===true){ea='click '+window.utag_eventData.nfcMode;el='booking offer';if(window.utag_eventData.tileLookup[p.tileId][0])el=window.utag_eventData.tileLookup[p.tileId][0]+' offer';let rank=0;if(window.utag_eventData.tileLookup[p.tileId][2]){rank=window.utag_eventData.tileLookup[p.tileId][2];}
cd.ga_eventPromoId=[rank.toString()];cd.ga_eventPromoName=[window.utag_eventData.tileLookup[p.tileId][0]+'|'+window.utag_eventData.tileLookup[p.tileId][1]];cd.ga_eventPromoCreative=[ec];cd.ga_eventPromoPosition=[utag_data['page.pageInfo.pageName']];if(rank==0){cd['debug_string']=window.utag_eventData.debugEventStack;utag_data['debug_string']=cd['debug_string'];}
else{cd['debug_string']="ok";utag_data['debug_string']=cd['debug_string'];}}
else if(p['open']===false)el='Lounge close';}
cd['user.profile.segment.segmentId']=window.utag_eventData.decisionID;cd.ga_eventClick='1';cd.daysUntilDep=window.utag_eventData.daysUntilDep;cd.ga_hs_origin=window.utag_eventData.origin;cd.ga_hs_destination=window.utag_eventData.destination;}
else if(a==='app/PersonalisedPreflightInformation/ANCILLARY_TILE'){if(p&&p.tileId){fire=true;tv='co click next flights';ec='next flight component';ea='click '+window.utag_eventData.nfcMode;el='ancillary offer';if(typeof p.price==='number'&&!isNaN(p.price))ev=p.price;if(window.utag_eventData.tileLookup[p.tileId][0])el=window.utag_eventData.tileLookup[p.tileId][0]+' offer';let rank=0;if(window.utag_eventData.tileLookup[p.tileId][2])rank=window.utag_eventData.tileLookup[p.tileId][2];cd.ga_eventPromoId=[rank.toString()];cd.ga_eventPromoName=[window.utag_eventData.tileLookup[p.tileId][0]+'|'+window.utag_eventData.tileLookup[p.tileId][1]];cd.ga_eventPromoCreative=[ec];cd.ga_eventPromoPosition=[utag_data['page.pageInfo.pageName']];cd['user.profile.segment.segmentId']=window.utag_eventData.decisionID;cd.ga_eventClick='1';cd.daysUntilDep=window.utag_eventData.daysUntilDep;if(rank==0){cd['debug_string']=window.utag_eventData.debugEventStack;utag_data['debug_string']=cd['debug_string'];}
else{cd['debug_string']="ok";utag_data['debug_string']=cd['debug_string'];}
}}
else if(a==='app/PersonalisedPreflightInformation/SET_EXPANDED'){if(s&&s.PersonalisedPreflightInformation&&s.PersonalisedPreflightInformation.ppfimonitor_id&&typeof s.PersonalisedPreflightInformation.ppfimonitor_id.isExpanded=='boolean'){s.PersonalisedPreflightInformation.ppfimonitor_id.isExpanded=s.PersonalisedPreflightInformation.ppfimonitor_id.isExpanded==true?false:true;}
firePpfiView();}else if(a==='app/PersonalisedPreflightInformation/SCROLL_TO_PPFI'){fire=true;tv='co click next flights';ec=nftStr;ea='click regular next flight';el='scroll to '+nfcStr;cd['user.profile.segment.segmentId']=window.utag_eventData.decisionID;cd.ga_eventClick='1';cd.daysUntilDep=window.utag_eventData.daysUntilDep;cd.ga_hs_origin=window.utag_eventData.origin;cd.ga_hs_destination=window.utag_eventData.destination;}else if(a==='app/GoodForTrain/AUTHENTICATION_SUCCESSFUL'){fire=true;tv='co click next flights';ec=nfcStr;ea='click irregular flight monitor';el='travel with train';cd['user.profile.segment.segmentId']=window.utag_eventData.decisionID;cd.ga_eventClick='1';cd.daysUntilDep=window.utag_eventData.daysUntilDep;cd.ga_hs_origin=window.utag_eventData.origin;cd.ga_hs_destination=window.utag_eventData.destination;}else if(a==='app/PersonalisedPreflightInformation/UPDATE_SELECTED_CITY'){fire=true;tv='co click next flights';ec=nfcStr;ea='click';el='dropdown';cd['user.profile.segment.segmentId']=window.utag_eventData.decisionID;cd.ga_eventClick='1';if(p){if(p.departureDate){let dep=new Date(p.departureDate);let now=new Date();window.utag_eventData.daysUntilDep=Math.round(Math.abs((now.getTime()-dep.getTime())/(24*60*60*1000)));}
if(p.originCode)window.utag_eventData.origin=p.originCode.toLowerCase();if(p.destinationCode)window.utag_eventData.destination=p.destinationCode.toLowerCase();}
cd.daysUntilDep=window.utag_eventData.daysUntilDep;cd.ga_hs_origin=window.utag_eventData.origin;cd.ga_hs_destination=window.utag_eventData.destination;}else if(a==='app/FlightManager/Flight/SUBMIT_SEARCH_REQUESTED'){if(p){fire=true;tv='co click flightmanager';ec='flightmanager';el='search flights';ea='submit';cd.ga_eventClick='1';if(p.flightSegments&&p.flightSegments.length>0){cd.ga_hs_origin=p.flightSegments[0].originCode?p.flightSegments[0].originCode.toLowerCase():'';cd.ga_hs_destination=p.flightSegments[0].destinationCode?p.flightSegments[0].destinationCode.toLowerCase():'';cd.ga_hs_departure=p.flightSegments[0].travelDatetime?p.flightSegments[0].travelDatetime.substr(0,10):'';if(p.flightSegments.length>1)cd.ga_hs_arrival=p.flightSegments[1].travelDatetime?p.flightSegments[1].travelDatetime.substr(0,10):'';}
cd.ga_hs_adult=p.adults||0;cd.ga_hs_child=p.children||0;cd.ga_hs_infant=p.infants||0;cd.ga_hs_pax=cd.ga_hs_adult+cd.ga_hs_child+cd.ga_hs_infant||0;if(p.cabin==='E')cd.ga_hs_booking_class='economy';else if(p.cabin==='N')cd.ga_hs_booking_class='premium economy';else if(p.cabin==='B')cd.ga_hs_booking_class='business';else if(p.cabin==='F')cd.ga_hs_booking_class='first';else cd.ga_hs_booking_class='';}
}
else if(a==='app/LoginForm/TRACK_LOGIN_SUBMIT_SUCCESS'){fire=true;tv='co click login';ec='user account';ea='log in';cd.ga_eventClick='1';utag_data.logged_in='logged in';cd['user.profile.loginStatus']='true';cd['user.profile.loginType']='personal profile';if(lhgData&&lhgData.user&&lhgData.user.profile){lhgData.user.profile.loginStatus='true';lhgData.user.profile.loginType='personal profile';}
if(p&&p.rememberMe){el='persistent';if(lhgData&&lhgData.user&&lhgData.user.profile)lhgData.user.profile.loginPersistence='true';}else{el='not persistent';if(lhgData&&lhgData.user&&lhgData.user.profile)lhgData.user.profile.loginPersistence='false';}
window.utag_eventData.loginPortletBlocker=true;}else if(a==='LOGOUT_USER'){fire=true;tv='co click login';ec='user account';ea='log out';cd.ga_eventClick='1';utag_data.logged_in='logged out';cd['user.profile.loginStatus']='false';cd['user.profile.loginType']='none';cd['user.profile.profileInfo.profileId']='';cd.ga_ss_userId='';if(lhgData&&lhgData.user&&lhgData.user.profile){lhgData.user.profile.loginStatus='false';lhgData.user.profile.loginType='none';if(lhgData.user.profile.profileInfo)lhgData.user.profile.profileInfo.profileId=undefined;}}else if(a==='app/LoginForm/TRACK_LOGIN_SUBMIT_FAIL'){fire=true;error=true;tv='co click login';ec='user account';ea='log in attempt';cd.ga_eventClick='1';utag_data.logged_in='logged out';cd['user.profile.loginStatus']='false';cd['user.profile.loginType']='none';if(p&&p.rememberMe){el='persistent';if(lhgData&&lhgData.user&&lhgData.user.profile)lhgData.user.profile.loginPersistence='true';}else{el='not persistent';if(lhgData&&lhgData.user&&lhgData.user.profile)lhgData.user.profile.loginPersistence='false';}
cd['error.errorInfo.elementName']='application';cd['error.errorInfo.type']='server';cd['error.errorInfo.errorCode']='';let tmp=document.querySelector('#error-id-dcep-lh-loginModule-loginLHID, #error-id-dcep-lh-loginModule-loginLMAM');if(tmp){cd['error.errorInfo.message']=tmp.textContent;}else{cd['error.errorInfo.message']='The user ID and password or the Miles & More card number and PIN you have entered are not valid. Please check your entry and try again.';}}else if(a==='app/QuickActions/CheckIn/SUBMIT_CHECKIN_REQUESTED'){fire=true;tv='co click quick actions';ec='quick actions';ea='click';el='check in';}
else if(a==='app/LoginPortlet/TOGGLE_MODAL'){fire=true;tv='co click login portlet';ec='login portlet';ea='click';el='open';cd.ga_eventClick='1';}
else if(a==='app/LoginPortlet/CLOSE_MODAL'){if(window.utag_eventData.loginPortletBlocker){window.utag_eventData.loginPortletBlocker=false;}
else{fire=true;tv='co click login portlet';ec='login portlet';ea='click';el='close';cd.ga_eventClick='1';}}
else if(a==='app/RecentSearches/DELETE_RECENT_FLIGHT'){if(p){fire=true;tv='co click recent searches';ec='recent searches';ea='click';el='delete';cd.ga_eventClick='1';if(p.originCode)cd.ga_hs_origin=p.originCode.toLowerCase();if(p.destinationCode)cd.ga_hs_destination=p.destinationCode.toLowerCase();}}
else if(a==='app/RecentSearches/TRIGGER_RECENT_SEARCH'){if(p){fire=true;tv='co click recent searches';ec='recent searches';ea='click';el='submit';cd.ga_eventClick='1';if(p.originCode)cd.ga_hs_origin=p.originCode.toLowerCase();if(p.destinationCode)cd.ga_hs_destination=p.destinationCode.toLowerCase();}}
else if(a==='app/FlightManager/Holiday/SUBMIT_SEARCH'){if(p&&p.params){fire=true;tv='co click flightmanager';ec='flightmanager';el='holiday';ea='search';cd.ga_eventClick='1';if(p.params["from"])cd.ga_hs_origin=p.params["from"].toLowerCase();if(p.params["to"])cd.ga_hs_destination=p.params["to"].toLowerCase();}}
else if(a==='app/FlightManager/Car/SUBMIT_SEARCH_REQUESTED'){if(p){fire=true;tv='co click flightmanager';ec='flightmanager';el='car';ea='search';cd.ga_eventClick='1';}}
else if(a==='app/FlightManager/Hotel/SUBMIT_SEARCH_REQUESTED'){if(p){fire=true;tv='co click flightmanager';ec='flightmanager';el='hotel';ea='search';cd.ga_eventClick='1';}}
else if(a==='app/FlightManager/UPDATE_ACTIVE_TAB'){if(p){fire=true;tv='co click flightmanager';ec='flightmanager';el='open | '+p.toLowerCase();ea='click';cd.ga_eventClick='1';}}
else if(a==='app/FareTeaserDynamic/UPDATE_ACTIVE_TAB'){if(p){fire=true;tv='co click fare teaser dynamic';ec='fare teaser dynamic';el='open | '+p.toLowerCase();ea='click';cd.ga_eventClick='1';}}
else if(a==='app/QuickActions/UPDATE_ACTIVE_TAB'){if(p){fire=true;tv='co click quickactions';ec='quick actions';el='open | '+p.toLowerCase();ea='click';cd.ga_eventClick='1';}}
else if(a==='app/BestPriceSearch/shared/MONTH_CHANGE'){if(p){fire=true;tv='co click best price search';ec='best price search';el='month change';ea='click';cd.ga_eventClick='1';if(p.origin)cd.ga_hs_origin=p.origin.toLowerCase();if(p.destination)cd.ga_hs_destination=p.destination.toLowerCase();window.gtagBestPriceConversionCall();}}
else if(a==='app/QuickActions/MY_BOOKINGS_LINK_CLICK'){fire=true;tv='co click quickactions';ec='quick actions';el='my bookings';ea='click';}
else if(a==='app/QuickActions/FlightStatus/SUBMIT_FLIGHT_STATUS'){if(p){fire=true;tv='co click quickactions';ec='quick actions';el='flight status';ea='click';}}
else if((a=='app/BaggageCalculator/SUBMIT_BAGGAGE_REQUESTED')||(a=='app/BaggageCalculator/SUBMIT_BAGGAGE_DROPDOWN_REQUESTED')){if(p){let valueObj=p["values"];if(valueObj){valueObj=valueObj["baggageCalculator"];if(valueObj){try{ea="click";ec="baggage_calculator";el="see-free-baggage";fire=true;tv="co click baggage calculator";cd.ga_eventClick='1';let origin=valueObj["origin"];let dest=valueObj["destination"];let airline=valueObj["airline"];let tclass=valueObj["travelClass"];if((a=='app/BaggageCalculator/SUBMIT_BAGGAGE_DROPDOWN_REQUESTED')){el="class switch - "+tclass.toLowerCase();}
let adults=0;let children=0;let infants=0;let infantsSeat=0;let travelers=valueObj["baggageTraveller"];let status={BASICMM:0,SEN:0,HON:0,SILVERSA:0,NOMM:0,GOLDSA:0,SWISSGOLF:0,FREQ:0};if(travelers){for(var i=0;i<travelers.length;i++){let itm=travelers[i];if(itm){if(itm["travellerType"]=="CHILD")children++;else if(itm["travellerType"]=="INF")infants++;else if(itm["travellerType"]=="INFS")infantsSeat++;else adults++;let istatus=itm["customerStatus"];status[istatus]=status[istatus]+1;}}}
let filter=[];filter.push(origin+"-"+dest);filter.push(airline);filter.push("adults-"+adults);filter.push("children-"+children);filter.push("infants-"+infants);filter.push("infantsseat-"+infantsSeat);for(var key in status){filter.push(key+"-"+status[key]);}
filter.push(tclass);let filterString=filter.join("/").toLowerCase();cd["filter.element.userInput"]=filterString;console.log("filter string");console.log(filterString);}
catch(ex){console.log("baggage calc error:");console.log(ex);}}}}}
else if(a==='app/PersonalisedPreflightInformation/UPDATE_ACTIVE_TAB'){if(p){fire=true;tv='co click ppfi';ec=nfcStr;ea='click';el="weather | "+p+" tab";}}
else if(a==='app/WeatherData/UPDATE_SELECTED_CLIMATE_GRAPH'){if(p){let params=JSON.parse(JSON.stringify(p));if(params){if(params["name"]){fire=true;tv='co click ppfi';ec=nfcStr;ea='click';el="weather | climate graph | "+params.name;}}}}
else if(a==='app/FlightManagerLegacy/Flight/SUBMIT_SEARCH_REQUESTED'){if(p){fire=true;tv='co click flightmanager';ec='FlightManagerLegacy';el='search flights';ea='submit requested';cd.ga_eventClick='1';if(p.flightSegments&&p.flightSegments.length>0){cd.ga_hs_origin=p.flightSegments[0].originCode?p.flightSegments[0].originCode.toLowerCase():'';cd.ga_hs_destination=p.flightSegments[0].destinationCode?p.flightSegments[0].destinationCode.toLowerCase():'';cd.ga_hs_departure=p.flightSegments[0].travelDatetime?p.flightSegments[0].travelDatetime.substr(0,10):'';if(p.flightSegments.length>1)cd.ga_hs_arrival=p.flightSegments[1].travelDatetime?p.flightSegments[1].travelDatetime.substr(0,10):'';}
cd.ga_hs_adult=p.adults||0;cd.ga_hs_child=p.children||0;cd.ga_hs_infant=p.infants||0;cd.ga_hs_pax=cd.ga_hs_adult+cd.ga_hs_child+cd.ga_hs_infant||0;if(p.cabin==='E')cd.ga_hs_booking_class='economy';else if(p.cabin==='N')cd.ga_hs_booking_class='premium economy';else if(p.cabin==='B')cd.ga_hs_booking_class='business';else if(p.cabin==='F')cd.ga_hs_booking_class='first';else cd.ga_hs_booking_class='';}}
else if(a==='app/FlightManagerLegacy/Flight/SUBMIT_SEARCH_SUCCEEDED'){if(p){fire=true;tv='co click flightmanager';ec='FlightManagerLegacy';el='search flights';ea='submit succeeded';cd.ga_eventClick='1';}}
else if(a==='@@redux-form/SET_SUBMIT_FAILED'&&(document.querySelectorAll(".healthdocumentinspector .progress-bar-container .col:not(.inactive) .index-indicator.text-center").length>0||document.querySelectorAll(".healthdocumentinspector .tab-links a").length>0)){fire=true;var myStep=(document.querySelectorAll(".healthdocumentinspector .progress-bar-container .col:not(.inactive) .index-indicator.text-center").length>0)?document.querySelector(".healthdocumentinspector .progress-bar-container .col:not(.inactive) .index-indicator.text-center").innerText:(document.querySelector(".healthdocumentinspector .tab-links .tab-nav-link-wrapper:nth-child(1) a").classList.value.indexOf("tab-active")>=0?"1 booking code":"2 ticket number");tv='co ddc error first step'+myStep+' fields empty';ec='digital doc check';ea='error';el=(myStep=="1")?'PNR DETAILS EMPTY':'ERROR FORM STEP'+myStep;}else if(a.indexOf("HealthDocumentInspector")>0){var step=parseInt(document.querySelector("div.container.contentpage-wrapper div.healthdocumentinspector div.progress-bar-container div.progress-bar-wrapper > span").getAttribute("style").split(":")[1].replace(/\D+/g,''))/25;var eventLabel=a.split("/HealthDocumentInspector/")[1].replace(/_/g," ").toLowerCase();fire=true;tv='co ddc click step '+step+' - '+eventLabel;ec='digital doc check';ea='click';el=eventLabel.toUpperCase();}
else if(a.indexOf("b2t")==0){var ga_params=a.split("/").pop().split("_");if(ga_params.length===3){fire=true;tv=ga_params[2].replace(/-/g," ");ec=ga_params[0].replace(/-/g," ");ea=ga_params[1].replace(/-/g," ");el=ga_params[2].replace(/-/g," ");ep=a.split("/")[1];}
if(/view|click/.test(ea.toLowerCase())){cd['ga_event'+ea.charAt(0).toUpperCase()+ea.slice(1)]="1";}
if(p&&p.CD['ga_errorMessage']){p.CD['error_counter']="1";}
if(p&&p.CD){var CDPermittedTable=["filter.element.elementName","filter.element.elementType","filter.element.elementValue","filter.element.userInput","ga_hs_arrival","ga_hs_booking_class","ga_hs_bundle","ga_hs_departure","ga_hs_destination","ga_hs_origin","ga_hs_adult","ga_hs_child","ga_hs_componentId","ga_hs_order","ga_hs_infant","ga_hs_pax","ga_hs_triptype","ga_hs_price","daysUntilDep","ga_hs_flowtype","ga_eventClick","ga_eventView","ga_errorElementName","ga_errorType","ga_errorCode","ga_errorDetail","ga_errorMessage","intcamp","ga_journeyLength","ga_hs_trip_reason","ga_hs_cabin","ga_hs_couponStatus","ga_ffamily_code","topic_1","topic_2","topic_3","optionType","recommendation","pnrSelected","teaser_id"];for(var cdKey in p.CD){if(p.CD.hasOwnProperty(cdKey)&&CDPermittedTable.includes(cdKey)){cd[cdKey]=p.CD[cdKey];}}}}
else if(a.includes('once')){if(a.includes('error-handling')){if(lhgData&&lhgData.error&&lhgData.error.length>0){var last_error=lhgData.error[lhgData.error.length-1];if(last_error.errorInfo){fire=true;error=true;var ename=last_error.errorInfo.elementName||na_string;var etype=last_error.errorInfo.type||na_string;var ecode=last_error.errorInfo.errorCode||na_string;var emessage=last_error.errorInfo.message||na_string;cd['error.errorInfo.elementName']=ename;cd['error.errorInfo.type']=etype;cd['error.errorInfo.errorCode']=ecode;cd['error.errorInfo.message']=emessage;cd['error_counter']=1;if(etype==='PAGE_ERROR'){tv='error view error message';ec='error';ea='view error message';el=ecode!==na_string?'error | '+ecode:'error | '+emessage;}else if(etype==='VALIDATION_ERROR'){tv='error view inline message';ec='error';ea='view inline message';el=ecode!==na_string?'error | '+ecode:'error | '+emessage;}else{fire=false;error=false;}}}}else if(a.includes('modal-opened')){fire=true;tv='cki modal opened';ec='cki modal';ea='opened';el=typeof u==='string'?u:na_string;}}
if(fire){if(cd&&cd['ga_errorMessage']){error=true;}
let tmp=Object.assign({},utag_data);tmp.tealium_event=tv;tmp.ga_eventCategory=ec;tmp.ga_eventAction=ea;tmp.ga_eventLabel=el;tmp.ga_eventValue=ev;tmp.action_type=a;tmp.event_product=ep;if(cd){for(let key in cd){if(cd.hasOwnProperty(key)){tmp[key]=cd[key];}}}
tmp['error.errorInfo.elementName']=tmp['ga_errorElementName'];tmp['error.errorInfo.type']=tmp['ga_errorType'];tmp['error.errorInfo.errorCode']=tmp['ga_errorCode'];tmp['error.errorInfo.message']=tmp['ga_errorMessage'];cd={};if(!error){delete tmp['error.errorInfo.elementName']
delete tmp['error.errorInfo.type']
delete tmp['error.errorInfo.errorCode']
delete tmp['error.errorInfo.message']
delete tmp['error_counter']
delete tmp['ga_errorElementName']
delete tmp['ga_errorType']
delete tmp['ga_errorCode']
delete tmp['ga_errorMessage']}
utag.link(tmp);delete tmp['optionType']
delete tmp['recommendation']}
return true;}catch(e){utag.DB(e)};};window.utag_linkCallback=function(c,p){try{let tv='',ea='',ec='',el='',ev=undefined,cd={},fire=false;if(c==='PersonalisedPreflightInformation'){if(p&&p.tileId){fire=true;tv='co click next flights';ec='next flight component';ea='click '+window.utag_eventData.nfcMode;el='ancillary offer';if(typeof p.price==='number'&&!isNaN(p.price))ev=p.price;if(window.utag_eventData.tileLookup[p.tileId][0])el=window.utag_eventData.tileLookup[p.tileId][0]+' offer';let rank=0;if(window.utag_eventData.tileLookup[p.tileId][2])rank=window.utag_eventData.tileLookup[p.tileId][2];cd.ga_eventPromoId=[rank.toString()];cd.ga_eventPromoName=[window.utag_eventData.tileLookup[p.tileId][0]+'|'+window.utag_eventData.tileLookup[p.tileId][1]];cd.ga_eventPromoCreative=[ec];cd.ga_eventPromoPosition=[utag_data['page.pageInfo.pageName']];cd['user.profile.segment.segmentId']=window.utag_eventData.decisionID;cd.ga_eventClick='1';cd.daysUntilDep=window.utag_eventData.daysUntilDep;if(rank==0){cd['debug_string']=window.utag_eventData.debugEventStack;utag_data['debug_string']=cd['debug_string'];}
else{cd['debug_string']="ok";utag_data['debug_string']=cd['debug_string'];}
}else if(p&&(p.href||p.name)){fire=true;tv='co click next flights';ec='next flight component';ea='click '+window.utag_eventData.nfcMode;el=p.href||p.name;cd['user.profile.segment.segmentId']=window.utag_eventData.decisionID;cd.ga_eventClick='1';cd.daysUntilDep=window.utag_eventData.daysUntilDep;}
}else if(c==='MegaDropdown'){if(p&&p.technicalName){fire=true;tv='co click navigation';ec='navigation main';ea='click';el=p.technicalName;cd.ga_eventClick='1';}
}else if(c==='Footer'){if(p&&p.technicalName){fire=true;tv='co click footer';ec='navigation footer';ea='click';el=p.technicalName;cd.ga_eventClick='1';}
}
else if((c==='FareTeaserOD')||(c==='FareTeaserStatic')){if(p&&p.type){fire=true;tv='co click fare teaser dynamic';ec='fare teaser dynamic';ea='click';el=p.type;if(c==='FareTeaserOD'){tv='co click fare teaser od';ec='fare teaser od';}
else if(c==='FareTeaserStatic'){tv='co click fare teaser static';ec='fare teaser static';}
if(p.topDeal){el+=' topdeal';}
cd.ga_eventClick='1';if(p.price&&p.currency)cd.ga_hs_price=p.price+" "+p.currency;if(p.tripType)cd.ga_hs_triptype=p.tripType.toLowerCase();if(p.origin)cd.ga_hs_origin=p.origin.toLowerCase();if(p.destination)cd.ga_hs_destination=p.destination.toLowerCase();cd['user.profile.segment.segmentId']=window.utag_eventData.decisionIDFTD;}}else if(c==='QuickActions'){if(p&&p.name&&p.linkType&&p.userType){fire=true;tv='co click quick actions';ec='quick actions';ea='click';el=(p.name+' '+p.linkType+' '+p.userType).toLowerCase();cd.ga_eventClick='1';}}else if(c==='DestinationFinder'){if(p&&p.position){fire=true;tv='co click destination finder';ec='destination finder';ea='click';el=''+p.position;if(p.topDeal){el+=' topdeal';}
cd.ga_eventClick='1';if(p['class']){let destFindClassLookup={'E':'economy','B':'business','N':'premium economy','F':'first'};let bookClass=p['class'];if(destFindClassLookup[bookClass]){bookClass=destFindClassLookup[bookClass];}
cd.ga_hs_booking_class=bookClass;}
if(p.originName)cd.ga_hs_origin=p.originName.toLowerCase();if(p.destinationName)cd.ga_hs_destination=p.destinationName.toLowerCase();}}else if(c==='LoginPortlet'){if(p&&p.name){fire=true;tv='co click login portlet';ec='login portlet';ea='click';el=p.name;cd.ga_eventClick='1';}}
if(fire){let tmp=Object.assign({},utag_data);tmp.tealium_event=tv;tmp.ga_eventCategory=ec;tmp.ga_eventAction=ea;tmp.ga_eventLabel=el;tmp.ga_eventValue=ev;if(cd){for(let key in cd){if(cd.hasOwnProperty(key)){tmp[key]=cd[key];}}}
tmp['error.errorInfo.elementName']=null;tmp['error.errorInfo.type']=null;tmp['error.errorInfo.errorCode']=null;tmp['error.errorInfo.message']=null;utag.link(tmp);}
return true;}catch(e){utag.DB(e)};};(function(){document.addEventListener('click',function(event){try{if(event.target.parentNode&&event.target.parentNode.matches('#megadropdown [data-technicalname]')){let p={};p.technicalName=event.target.parentNode.getAttribute('data-technicalname');window.utag_linkCallback('MegaDropdown',p);}
else if(event.target.matches('#megadropdown [data-technicalname]')){let p={};p.technicalName=event.target.getAttribute('data-technicalname');window.utag_linkCallback('MegaDropdown',p);}else if(event.target.matches('#megadropdown a')){let str,p={};str=event.target.hostname+event.target.pathname;p.technicalName=str;window.utag_linkCallback('MegaDropdown',p);}else if(event.target.matches('a.teaser.card')||event.target.closest('a.teaser.card')||(event.target.parentNode&&event.target.parentNode.matches('a.teaser.card'))||(event.target.parentNode.parentNode&&event.target.parentNode.parentNode.matches('a.teaser.card'))||(event.target.parentNode.parentNode.parentNode&&event.target.parentNode.parentNode.parentNode.matches('a.teaser.card'))||(event.target.parentNode.parentNode.parentNode.parentNode&&event.target.parentNode.parentNode.parentNode.parentNode.matches('a.teaser.card'))){let ele,str,p={};ele=event.target;str=ele.closest('[data-identifier]')?ele.closest('[data-identifier]').getAttribute('data-identifier'):'';p.technicalName=str;window.utag_linkCallback('Teaser',p);}else if(event.target.matches('a.stage-teaser-link')||event.target.closest('a.stage-teaser-link')||(event.target.parentNode&&event.target.parentNode.matches('a.stage-teaser-link'))||(event.target.parentNode.parentNode&&event.target.parentNode.parentNode.matches('a.stage-teaser-link'))||(event.target.parentNode.parentNode.parentNode&&event.target.parentNode.parentNode.parentNode.matches('a.stage-teaser-link'))){let ele,str,p={};ele=event.target;str=ele.closest('[data-identifier]')?ele.closest('[data-identifier]').getAttribute('data-identifier'):'';p.technicalName=str;window.utag_linkCallback('Stage',p);}else if(event.target.matches('footer [data-technicalname]')){let p={};p.technicalName=event.target.getAttribute('data-technicalname');window.utag_linkCallback('Footer',p);}else if(event.target.matches('footer a')){let str,p={};str=event.target.hostname+event.target.pathname;p.technicalName=str;window.utag_linkCallback('Footer',p);}}catch(e){utag.DB(e)}},false);})();}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){b.consent_decision=(tealiumConsentRegister&&tealiumConsentRegister.currentDecision)||[];b.microsoft_ad_storage=b.consent_decision.indexOf('search')!==-1?'granted':'denied';if(a==="view"){b["uet_event"]="update_consent";}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(b.google_analytics_storage_consent==='denied'&&(cookieExtractor('QuantumMetricEnabled')===null||cookieExtractor('QuantumMetricEnabled').indexOf('false')===-1)){QuantumMetricAPI.stopSession()
console.log('QM session stopped')}
else if(b.google_analytics_storage_consent==='granted'&&cookieExtractor('QuantumMetricEnabled').indexOf('true')===-1){QuantumMetricAPI.startSession()
console.log('QM session started')}}}catch(e){utag.DB(e)}},function(a,b){try{document.cookie="storekayakclickid="+b['clickID']+";path=/;domain="+utag.cfg.domain+";expires="+(function(){var d=new Date();d.setTime(d.getTime()+(30*6e4));return d.toGMTString();})()+"";b['cp.storekayakclickid']=b['clickID'];}catch(e){utag.DB(e);}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[472]=='undefined'){utag.runonce.ext[472]=1;if(1){b['data_layer_validator_sample']=Math.round(Math.random()*100);}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['platformId'].toString().toLowerCase()=='adcb1'.toLowerCase()){window.monetateB2TQueue=window.monetateB2TQueue||[];if(a==='link'&&b.action_type&&b.action_type.indexOf("b2t")===0&&b.ga_eventCategory.indexOf('monetate')==-1){if(typeof window.initiateMonetate==='function'&&window.monetateFired===true){var monetate_event_category=b.ga_eventCategory!==undefined&&b.ga_eventCategory!==null&&b.ga_eventCategory!=="(not set)"?b.ga_eventCategory.trim().replaceAll(' ','_').toLowerCase():"";var monetate_event_action=b.ga_eventAction!==undefined&&b.ga_eventAction!==null&&b.ga_eventAction!=="(not set)"?b.ga_eventAction.trim().replaceAll(' ','_').toLowerCase():"";if(monetate_event_category){if(monetate_event_action){var monEventName=monetate_event_category+'_'+monetate_event_action;b.monetate_event_label=(b.ga_eventLabel!==undefined&&b.ga_eventLabel!==null&&b.ga_eventLabel!=="(not set)"?b.ga_eventLabel.trim().replaceAll(' ','_').toLowerCase():"");window.monetateB2TQueue.push({monEventName:monEventName,monEventLabel:b.monetate_event_label||"",concatValue:monEventName+(b.monetate_event_label?":"+b.monetate_event_label:""),context:{category:monetate_event_category,action:monetate_event_action}});}}}}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['platformId'].toString().toLowerCase()=='adcb2'.toLowerCase()){window.monetateB2TQueue=window.monetateB2TQueue||[];if(a==='link'&&b.action_type&&b.action_type.indexOf("b2t")===0&&b.ga_eventCategory.indexOf('monetate')==-1){if(typeof window.initiateMonetate==='function'&&window.monetateFired===true){var monetate_event_category=b.ga_eventCategory&&b.ga_eventCategory!=="(not set)"?b.ga_eventCategory.trim().replaceAll(' ','_').toLowerCase():"";var monetate_event_action=b.ga_eventAction&&b.ga_eventAction!=="(not set)"?b.ga_eventAction.trim().replaceAll(' ','_').toLowerCase():"";if(monetate_event_category&&monetate_event_action){var monEventName=monetate_event_category+'_'+monetate_event_action;b.monetate_event_label=(b.ga_eventLabel&&b.ga_eventLabel!=="(not set)"?b.ga_eventLabel.trim().replaceAll(' ','_').toLowerCase():"");var monetateB2tObj={monEventName:monEventName,monEventLabel:b.monetate_event_label||"",concatValue:monEventName+(b.monetate_event_label?":"+b.monetate_event_label:""),context:{category:monetate_event_category,action:monetate_event_action}};if(b["filter.element.elementName"]&&b["filter.element.elementValue"]){monetateB2tObj.elementName=b["filter.element.elementName"];monetateB2tObj.elementValue=b["filter.element.elementValue"];}
window.monetateB2TQueue.push(monetateB2tObj);}}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(utag_data['transaction.transactionId']&&utag_data['transaction.transactionId']!==''){var val='ti='+utag_data['transaction.transactionId']+';';var d=new Date();d.setTime(d.getTime()+(7*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=val+expires+';path=/;domain=.lufthansa.com';}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){utag.loader.SC("xctg",{},"da");utag.loader.SC("xctg_trace",{},"da");}}catch(e){utag.DB(e)}},function(a,b,c,d,e,f,g,h,i,j,t,o){o={channel:'',category:'',exp:14};if(a=='view'){if(b['utm_term']=='google'&&b['utm_medium']=='fse'){o.channel='gfs';o.category='affiliate'}
else if(b['utm_term']=='kayak'&&b['utm_medium']=='fse'){o.channel='kayak';o.category='affiliate'}
var dd=(isNaN(utag.cfg.domain.replace('.','')))?utag.cfg.domain:location.hostname;dd=' domain='+dd+'; path=/;';if(o.channel!=''){var exp=new Date().getTime()+1209600000;var expd=new Date(new Date().getTime()+1209600000).toGMTString();if(typeof b['cp.channelflow']=='undefined'&&b['cp.channelflow']!=''){b['cp.channelflow']=o.channel+'|'+o.category+'|'+exp;}else{var ncf=[];var bcf=b['cp.channelflow'].split(',');for(var i=bcf.length-1;i>-1;i--){var chan=bcf[i].split('|');if(i==(bcf.length-1)&&chan[0]==o.channel&&chan[1]==o.category){bcf[i]=o.channel+'|'+o.category+'|'+exp;}else if(i==(bcf.length-1)&&chan[0]!=o.channel){ncf.push(o.channel+'|'+o.category+'|'+exp);}else if(parseInt(chan[2])<=(new Date().getTime()-86400000*o.exp)){bcf.splice(i,1);}}
bcf=bcf.concat(ncf);b['cp.channelflow']=bcf.join();}
document.cookie='channelflow='+b['cp.channelflow']+';'+' expires='+expd+';'+dd;if(typeof b['cp.channeloriginator']=='undefined'){b['cp.channeloriginator']=o.channel;document.cookie='channeloriginator='+o.channel+';'+' expires='+expd+';'+dd;}
b['cp.channelcloser']=o.channel;document.cookie='channelcloser='+o.channel+';'+' expires='+expd+';'+dd;}
if(typeof b['cp.channelflow']!='undefined'){c=b['cp.channelflow'].split(','),e=[],f=[];for(d=0;d<c.length;d++){g=c[d].split('|');if(!g[2]||g[2]==0||parseInt(g[2])>=(new Date().getTime()-86400000*o.exp)){e.push(g[0]);f.push(g[1])}};if(e.length>0){b['channel_originator']=e[0];b['channel_category_originator']=f[0];b['channel_closer']=e[e.length-1];b['channel_category_closer']=f[f.length-1];b['channel_path']=e.join(',');b['channel_category_path']=f.join(',');if(e.length==1){b['channel_influencer']=e[0];b['channel_category_influencer']=f[0];}else{e.pop();f.pop();e.shift();f.shift();t={};g=[];h=[];for(i=0;i<e.length;i++){if(t[e[i]+'|'+f[i]]!=1){g.push(e[i]);h.push(f[i])}else t[e[i]+'|'+f[i]]=1};e=g;f=h;b['channel_influencer']=e.join(',');b['channel_category_influencer']=f.join(',');b['channel_influencer_length']=e.length;}}else{b['channel_originator']='';b['channel_category_originator']='';b['channel_closer']='';b['channel_category_closer']='';b['channel_influencer']='';b['channel_category_influencer']='';b['channel_path']='';b['channel_category_path']='';}
var c={o:'0',i:'0',c:'100'},cc={o:0,i:0,c:0},cv=b[''];if(parseFloat(cv)>0){cc.o=cv*parseFloat(c.o/100);if(b['channel_influencer_length']<1)b['channel_influencer_length']=1;cc.i=parseFloat((cv*parseFloat(c.i/100))/b['channel_influencer_length']);cc.c=cv*parseFloat(c.c/100);for(i in utag.loader.GV(cc)){cc[i]=cc[i].toFixed(2);}};b['channel_influencer_credit']=cc.i;b['channel_originator_credit']=cc.o;b['channel_closer_credit']=cc.c;}}},function(a,b){try{if(typeof b['mse_clickid']!='undefined'){utag.loader.SC('utag_main',{'mseClickidCookie':b['mse_clickid']+';exp-session'});b['cp.utag_main_mseClickidCookie']=b['mse_clickid'];}}catch(e){utag.DB(e);}},function(a,b){try{if((typeof b['utm_term']!='undefined'&&b['utm_term'].toString().toLowerCase().indexOf('kayak'.toLowerCase())>-1)){utag.loader.SC('utag_main',{'clickID':b['clickID']+';exp-session'});b['cp.utag_main_clickID']=b['clickID'];}}catch(e){utag.DB(e);}},function(a,b){try{if((typeof b['clickID']!='undefined'&&typeof b['clickID']!='undefined'&&b['clickID']!='')){utag.loader.SC('utag_main',{'clickID':b['clickID']+';exp-session'});b['cp.utag_main_clickID']=b['clickID'];}}catch(e){utag.DB(e);}},function(a,b){try{if(typeof b['utm_campaign']!='undefined'){utag.loader.SC('utag_main',{'utmCampaignCookie':b['utm_campaign']+';exp-'+((new Date()).getTime()+(14*864e5))+'u'});b['cp.utag_main_utmCampaignCookie']=b['utm_campaign'];}}catch(e){utag.DB(e);}},function(a,b){try{if(typeof b['utm_source']!='undefined'){utag.loader.SC('utag_main',{'utmSourceCookie':b['utm_source']+';exp-'+((new Date()).getTime()+(14*864e5))+'u'});b['cp.utag_main_utmSourceCookie']=b['utm_source'];}}catch(e){utag.DB(e);}},function(a,b){try{if(typeof b['utm_medium']!='undefined'){utag.loader.SC('utag_main',{'utmMediumCookie':b['utm_medium']+';exp-'+((new Date()).getTime()+(14*864e5))+'u'});b['cp.utag_main_utmMediumCookie']=b['utm_medium'];}}catch(e){utag.DB(e);}},function(a,b){try{if(typeof b['utm_term']!='undefined'){utag.loader.SC('utag_main',{'utmTermCookie':b['utm_term']+';exp-'+((new Date()).getTime()+(14*864e5))+'u'});b['cp.utag_main_utmTermCookie']=b['utm_term'];}}catch(e){utag.DB(e);}},function(a,b){try{if(1){if(typeof b.wt_campaign==="string"){var setCampaignCookie=function(campaign){utag.loader.SC("utag_main",{"lastPaidCampaign":campaign+";exp-"+(new Date().getTime()+1209600000)+"u"});};var checkCampaignCookie=function(campaign){campaign=campaign.toLowerCase();if(campaign.indexOf('affiliate')===0||campaign.indexOf('seabrand')===0||campaign.indexOf('sea_')===0||campaign.indexOf('meta')===0||campaign.indexOf('onlad')===0){setCampaignCookie(campaign);}};checkCampaignCookie(b.wt_campaign);}}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['utm_medium']!='undefined'&&b['utm_medium']=='fse'&&typeof b['utm_term']!='undefined'&&/^artefact/.test(b['utm_term'])&&typeof b['aaaid']!='undefined'&&b['cp.CONSENTMGR'].toString().indexOf('c2:1')>-1)||(typeof b['utm_medium']!='undefined'&&b['utm_medium']=='affiliate'&&/^artefact/.test(b['utm_term'])&&typeof b['utm_term']!='undefined'&&typeof b['aaaid']!='undefined'&&b['cp.CONSENTMGR'].toString().indexOf('c2:1')>-1)){utag.loader.SC('utag_main',{'aaaid':b['aaaid']+';exp-'+((new Date()).getTime()+(14*864e5))+'u'});b['cp.utag_main_aaaid']=b['aaaid'];}}catch(e){utag.DB(e);}},function(a,b){try{if(typeof b['ses_mark']!='undefined'){utag.loader.SC('utag_main',{'sesMarkCookie':b['ses_mark']+';exp-session'});b['cp.utag_main_sesMarkCookie']=b['ses_mark'];}}catch(e){utag.DB(e);}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[89]=='undefined'){utag.runonce.ext[89]=1;if(1){var txt={en:'Change Cookie Settings',de:'Cookie-Einstellungen &auml;ndern',zh:'Cookie',ka:'Cookie',ja:'Cookie',es:'Modificar configuracin de cookies',el:'  cookies',fr:'Changer les paramtres des cookies',it:'Modifichi le impostazioni dei cookie',ko:'  ',pl:'Zmie ustawienia plikw cookie',pt:'Alterar definies dos cookies',ru:'   cookie',tr:'erez Ayarlarn Deitir'};var lang=utag_data.language||utag_data['page.pageInfo.language']||'en';if(lang==='gb')lang='en';if(lang==='hk')lang='ka';if(lang==='mi')lang='zh';if(!txt[lang])lang='en';if(utag_data.app_webview==='yes'){try{}catch(e){}}else if((utag_data['dom.domain']==='www.lufthansa.com'||utag_data['dom.domain']==='qa-www.lufthansa.com'||utag_data['dom.domain']==='www-dcep-prep.lufthansa.com'||utag_data['dom.domain']==='www-dcep-qa.lufthansa.com')&&window.lhgData&&document.getElementsByClassName('footer-area')){try{var footer=document.getElementsByClassName('footer-area');var footerLinks=footer[0].getElementsByClassName('horizontal');var ul=footerLinks[footerLinks.length-1];var li=document.createElement('li');li.setAttribute('id','privacymanager');li.innerHTML='<a href="#" class="link-small" onClick="utag.gdpr.showConsentPreferences(\''+lang+'\')"><i class="lh lh-arrow-right icon-left"></i>'+txt[lang]+'</a>';ul.appendChild(li);}catch(e){}}else if(utag_data['dom.domain']==='www.lufthansa.com'&&!window.lhgData&&document.getElementById('footer')){try{var footer=document.getElementById('footer');var footerLinks=footer.getElementsByClassName('footer-links');var ul=footerLinks[footerLinks.length-1];var li=document.createElement('li');li.setAttribute('id','privacymanager');li.innerHTML='<a href="#" onClick="utag.gdpr.showConsentPreferences(\''+lang+'\')">'+txt[lang]+'</a>';ul.appendChild(li);}catch(e){}}else if(utag_data['dom.domain']==='book.lufthansa.com'){try{(function __waitForJQuery(i){if(!window.jQuery||document.getElementsByClassName('menu').length<1){i++;if(i>50)return;setTimeout(function(){__waitForJQuery(i);},300);}else{var last_li=jQuery('nav.menu ul.links li:last')[0];var last_li_attr='_ngcontent-c18';for(var j=0,atts=last_li.attributes,n=atts.length;j<n;j++){if(atts[j].nodeName.indexOf('_ngcontent')===0){last_li_attr=atts[j].nodeName;break;}}
var last_a=jQuery('nav.menu ul.links li:last a')[0];var last_a_attr='_nghost-c16';for(var j=0,atts=last_a.attributes,n=atts.length;j<n;j++){if(atts[j].nodeName.indexOf('_nghost')===0){last_a_attr=atts[j].nodeName;break;}}
var html='<li '+last_li_attr+' class="linkContainer"><a href="#" onClick="utag.gdpr.showConsentPreferences(\''+lang+'\')" ui-link '+last_a_attr+'><span class="text footerLinkCollapsed" style="color:#FFFFFF;vertical-align: middle;">'+txt[lang]+'</span></a></li>';window.jQuery('nav.menu ul.links:last').append(html);}})(0);}catch(e){}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[123]=='undefined'){utag.runonce.ext[123]=1;if((typeof b['page.pageInfo.pageId']!='undefined'&&/^common\/privacy-statement\/info/i.test(b['page.pageInfo.pageId']))){var lang=utag_data.language||utag_data['page.pageInfo.language']||'en';if(lang==='gb')lang='en';if(lang==='hk')lang='ka';if(lang==='mi')lang='zh';window.gaOptout=function(){for(var i in disableGA){document.cookie=disableGA[i]+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/; domain=.lufthansa.com';window[disableGA[i]]=true;}
if(lang==='de')alert('Google Analytics wurde deaktiviert');else alert('Google Analytics is now disabled');};var link=document.querySelector('[title="223456"]');if(link){link.href='javascript:gaOptout()';link.removeAttribute('target');}
var block=document.getElementsByClassName('richtext limited-width')[12];if(block){var link=block.getElementsByTagName('a')[0];if(link){link.href='#';link.setAttribute('onclick','utag.gdpr.showConsentPreferences(\''+lang+'\')');link.removeAttribute('target');}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[196]=='undefined'){utag.runonce.ext[196]=1;if((b['dom.domain']!='once.lufthansa.com'&&b['dom.domain']!='once-int.lufthansa.com'&&b['dom.domain']!='lh-once-dev-1.materna-ips.com')){(function(){try{let errCode=utag_data['error.errorInfo.errorCode'];if(errCode){let tmp=Object.assign({},utag_data);tmp.tealium_event='error view error message';tmp.ga_eventCategory='error';tmp.ga_eventAction='view error message';tmp.ga_eventLabel='error | '+errCode;tmp.error_counter=1;utag.link(tmp);}}
catch(ex){}})();}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[191]=='undefined'){utag.runonce.ext[191]=1;if(1){(function(){try{if(typeof decibelInsight=='undefined'){return;}
if(window.decibelInsight){if(utag_data['page.category.category1']==='errors'){let code=utag_data['page.category.category2'];if(code){if(typeof decibelInsight!='undefined'){decibelInsight('sendHTTPError',parseInt(code));}}}
let errCode=utag_data['error.errorInfo.errorCode'];if(errCode){let errType=utag_data['error.errorInfo.type'];if(errType&&errType[0]==='server'){let ecode=utag_data['error.errorInfo.errorCode'][0];if(ecode){let filteredErrors=[46142,7076,7073,8703,7075,8183,7071];if(!filteredErrors.includes(parseInt(ecode))){if(utag_data['error.errorInfo.message']){let emsg=utag_data['error.errorInfo.message']+"";let re=/\(\d*.-.\d*\)$/;let matches=emsg.match(re);if(matches){if(matches.length){ecode=matches[0];ecode=ecode.replace("(","");ecode=ecode.replace(")","");ecode=ecode.replace(" - ","-");}}
}
if(typeof decibelInsight!='undefined'){decibelInsight('sendApplicationError',ecode);}}}}}}}
catch(ex){}})();}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[198]=='undefined'){utag.runonce.ext[198]=1;if(b['dom.domain'].toString().toLowerCase().indexOf('book.lufthansa.com'.toLowerCase())>-1){(function(){try{if(typeof decibelInsight=='undefined'){return;}
var fieldsets=document.getElementsByTagName("fieldset");if(fieldsets){for(var i=0;i<fieldsets.length;i++){var fset=fieldsets[i];if(fset){var legend=fset.getElementsByTagName("legend");if(legend){if(legend.length>0){legend=legend[0];if(legend){let formid=legend.textContent.trim().toLowerCase().split(" ").join("_");if(formid){fset.setAttribute("data-di-form-id",formid);fset.setAttribute("data-di-form-track","");}}}}}}}
let inputs=document.getElementsByTagName("input");if(inputs){for(var j=0;j<inputs.length;j++){let inp=inputs[j];if(inp){if(inp.id){inp.setAttribute("data-di-field-id",inp.id);}}}}
let selects=document.getElementsByClassName("data select");if(selects){for(var k=0;k<inputs.length;k++){let sel=selects[k];if(sel){if(sel.id){sel.setAttribute("data-di-field-id",sel.id);}}}}}
catch(exxxx){}})();(function(){try{if(typeof decibelInsight=='undefined'){return;}
let sesc_purf_error_list_array=[];let mutationsOccured=function(mutations){let errors=document.querySelectorAll('.message-error .link-follow');let tmp_error_list=[];if(errors!=null){for(var e=0;e<errors.length;e++){let err=errors[e];if(err){var err_id=err.id;var err_msg=err.textContent;tmp_error_list.push(err_id);if(!sesc_purf_error_list_array.includes(err_id)){sesc_purf_error_list_array.push(err_id);let elem=document.getElementById(err_id.replace("_ERROR",""));if(elem){elem.setAttribute('data-di-field-error',err_msg);}}}}}
sesc_purf_error_list_array=sesc_purf_error_list_array.filter(function(itm){return tmp_error_list.includes(itm);});};window.MutationObserver=window.MutationObserver||{};let is_ie=navigator.userAgent.includes('MSIE');let sesc_mut_errorNodes=document.getElementsByClassName('message-error wdk-errorpanel');if(is_ie){for(var en=0;en<sesc_mut_errorNodes.length;en++){let element=sesc_mut_errorNodes[en];if(element!=null){element.addEventListener("DOMNodeInserted",function(event){mutationsOccured(null);},false);}}
let loginPanel=document.getElementById('panel-login');if(loginPanel){loginPanel.addEventListener("DOMNodeInserted",function(event){mutationsOccured(null);},false);}}
else{var sesc_purf_mut_observer=new MutationObserver(mutationsOccured);var sesc_mut_config={attributes:true,childList:true,characterData:true,subtree:true};for(var en=0;en<sesc_mut_errorNodes.length;en++){sesc_purf_mut_observer.observe(sesc_mut_errorNodes[en],sesc_mut_config);}
let loginPanel=document.getElementById('panel-login');if(loginPanel){sesc_purf_mut_observer.observe(loginPanel,sesc_mut_config);}}}
catch(ex){}})();}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[199]=='undefined'){utag.runonce.ext[199]=1;if(typeof b['LH_FRONTEND_URL']!='undefined'&&b['LH_FRONTEND_URL']==''){window.decibelFormTaggingHasBeenDone=false;window.decibelFormTagging=function(){try{if(window.decibelFormTaggingHasBeenDone)return;let errorFormStrings=["flm-flight","flm-hotel","flm-car","flm-holiday","loginModule-loginLHID","loginModule-loginLMAM","mybookings","flightstatus-flightStatusByFlightNumberRequest","flm-checkin","flightStatusByFlightNumberRequest","flightStatusByFlightRouteRequest","flightStatusByAirportRequest","advs-flight","advs-multistop","advs-hotel","advs-car","loginBOOKING","loginLHID","loginLMAM","fktnCheckinRequest","frequentFlyerCardCheckinRequest","fullCharterCheckinRequest","feedbackForm","lid_input_30","lid_input_32","lid_input"];let errorFormLookup={"flm-flight":"flightmanager_flights","flm-hotel":"flightmanager_hotel","flm-car":"flightmanager_rentalcar","flm-holiday":"flightmanager_flights_hotel","loginModule-loginLHID":"loginportlet_lhid","loginModule-loginLMAM":"loginportlet_mm","mybookings":"quickactions_mybookings","flightstatus-flightStatusByFlightNumberRequest":"quickactions_flightstatus","flm-checkin":"quickactions_checkin","flightStatusByFlightNumberRequest":"flightstatus_by_flightnumber","flightStatusByFlightRouteRequest":"flightstatus_by_route","flightStatusByAirportRequest":"flightstatus_by_airport","advs-flight":"advs_flights_search","advs-multistop":"advs_multistop_search","advs-hotel":"advs_hotel_search","advs-car":"advs_rentalcar_search","loginBOOKING":"mybookings_pnr_login","loginLHID":utag.data["mmPageID_firstPart"]+"_lhid_login","loginLMAM":utag.data["mmPageID_firstPart"]+"_mm_login","fktnCheckinRequest":"checkin_pnr","frequentFlyerCardCheckinRequest":"checkin_frequentflyer_card","fullCharterCheckinRequest":"checkin_full_charter","feedbackForm":"feedback","lid_input_30":"forgotten_password_lhid","lid_input_32":"forgotten_password_mam","lid_input":"lhid_registration"};let inputs=document.querySelectorAll("input");for(var i=0;i<inputs.length;i++){let fieldelem=inputs[i];if(fieldelem&&fieldelem.id){let formName="default";let fieldIdBase=null;for(var x=0;x<errorFormStrings.length;x++){let formstr=errorFormStrings[x];let lowerFormstr=formstr.toLowerCase();let fieldelemid=fieldelem.id.toLowerCase();if(formstr){if(fieldelemid.includes(lowerFormstr)){if(errorFormLookup.hasOwnProperty(formstr)){formName=errorFormLookup[formstr];fieldIdBase=formstr;break;}}}}
let fform=fieldelem.form;if(fform){if(!fform.dataset.diFormId){fform.setAttribute("data-di-form-id",formName);if(formName!='default'){fform.setAttribute("data-di-form-track","");}}
}
if(!fieldelem.dataset.diFieldId){if(fieldIdBase!=null){let rule=new RegExp("dcep-(.*)"+fieldIdBase);let fid=fieldelem.id;let m=fid.match(rule);let secondGroup=m[1];fid=fid.replace(secondGroup,"");fieldelem.setAttribute("data-di-field-id",fid);}
else{fieldelem.setAttribute("data-di-field-id",fieldelem.id);}}}}}
catch(ex){}}
function submitDecibelErrorEvent(errorCode,errorMessage){if(errorCode){if(errorMessage){let el=errorCode+" | "+errorMessage;}}}
(function(){try{if(typeof decibelInsight=='undefined'){return;}
let sesc_purf_error_list_array=[];let mutationsOccured=function(mutations){window.decibelFormTagging();let errors=document.querySelectorAll('.error');let tmp_error_list=[];if(errors!=null){for(var e=0;e<errors.length;e++){let err=errors[e];if(err){err=err.firstChild;if(err){var err_id=err.id;var err_msg=err.textContent;tmp_error_list.push(err_id);if(!sesc_purf_error_list_array.includes(err_id)){sesc_purf_error_list_array.push(err_id);let errfor=err_id+"";errfor=errfor.replace("-error","");errfor=errfor.replace("error-id-","");let fieldelem=document.getElementById(errfor);if(fieldelem){fieldelem.setAttribute("data-di-field-id",errfor);fieldelem.setAttribute('data-di-field-error',err_msg);}
submitDecibelErrorEvent(err_id,err_msg);}}}}}
sesc_purf_error_list_array=sesc_purf_error_list_array.filter(function(itm){return tmp_error_list.includes(itm);});};window.MutationObserver=window.MutationObserver||{};let is_ie=navigator.userAgent.includes('MSIE');function appendErrNodes(className,results){let nodes=document.getElementsByClassName(className);if(nodes){for(var t=0;t<nodes.length;t++){results.push(nodes[t]);}}}
let sesc_mut_errorNodes=[document];if(is_ie){for(var en=0;en<sesc_mut_errorNodes.length;en++){let element=sesc_mut_errorNodes[en];if(element!=null){element.addEventListener("DOMNodeInserted",function(event){mutationsOccured(null);},false);}}}
else{var sesc_purf_mut_observer=new MutationObserver(mutationsOccured);var sesc_mut_config={childList:true,subtree:true};for(var en=0;en<sesc_mut_errorNodes.length;en++){sesc_purf_mut_observer.observe(sesc_mut_errorNodes[en],sesc_mut_config);}}
decibelFormTagging();}
catch(ex){}})();}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[207]=='undefined'){utag.runonce.ext[207]=1;if(b['mmPageID_firstPart'].toString().toLowerCase()=='ADVS'.toLowerCase()||b['mmPageID_firstPart'].toString().toLowerCase()=='FOMS'.toLowerCase()){(function(){try{let path=null;if(utag_data['pathname_cleaned']){if(utag_data["mmPageID_firstPart"]=='FOMS'){path=utag_data['pathname_cleaned']+"-foms"}
else{path=utag_data['pathname_cleaned']+"-advs"}}
if(path!=null){if(typeof decibelInsight!='undefined'){decibelInsight('trackPageView',path);}}}
catch(ex){}})();}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[213]=='undefined'){utag.runonce.ext[213]=1;if(1){(function(){try{if(utag_data['transaction.transactionId']){if(utag_data['transaction.total.transactionTotal']){if(typeof decibelInsight!='undefined'){decibelInsight('sendGoal','TransactionTotal',utag_data['transaction.total.transactionTotal']);}}}}
catch(ex){}})();}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[215]=='undefined'){utag.runonce.ext[215]=1;if(1){(function(){try{let submit=false;let ec="";let el="";let banner=document.querySelector('[data-identifier="stage_0919_co2"], [data-identifier="teaser_co2"]');if(banner){submit=true;ec="stage teaser";el=banner.dataset.identifier;}
banner=document.querySelector(".dwm-content");if(banner){if(banner.id){if(banner.id.includes("Compensaid")){submit=true;ec="booking flow teaser";el="co2";}}}
if(submit){let tmp=Object.assign({},utag_data);tmp.tealium_event="view co2 teaser";tmp.ga_eventCategory=ec;tmp.ga_eventAction="view";tmp.ga_eventLabel=el;tmp.ga_nonInteraction=true;delete tmp['error.errorInfo.elementName'];delete tmp['error.errorInfo.type'];delete tmp['error.errorInfo.errorCode'];delete tmp['error.errorInfo.message'];utag.link(tmp);}}
catch(ex){}})();}}}catch(e){utag.DB(e)}}];utag.handler.cfg_extend=[{"end":0,"id":"92","alr":0,"blr":1,"bwq":0},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"451"},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"287"},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"136"},{"end":0,"id":"99","alr":0,"blr":1,"bwq":0},{"end":0,"id":"173","alr":0,"blr":1,"bwq":0},{"alr":0,"id":"165","blr":1,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"178"},{"alr":0,"id":"158","blr":1,"bwq":0,"end":0},{"end":0,"id":"172","alr":0,"blr":1,"bwq":0},{"end":0,"id":"170","alr":0,"blr":1,"bwq":0},{"bwq":0,"blr":1,"id":"67","alr":0,"end":0},{"bwq":0,"blr":1,"id":"68","alr":0,"end":0},{"end":0,"id":"72","alr":0,"blr":1,"bwq":0},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"251"},{"end":0,"id":"296","alr":0,"blr":1,"bwq":0},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"298"},{"end":0,"id":"299","alr":0,"blr":1,"bwq":0},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"500"},{"end":0,"id":"342","alr":0,"blr":1,"bwq":0},{"bwq":0,"blr":1,"id":"403","alr":0,"end":0},{"bwq":0,"blr":1,"id":"481","alr":0,"end":0},{"bwq":0,"blr":1,"id":"331","alr":0,"end":0},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"333"},{"alr":0,"id":"372","blr":1,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"486"},{"bwq":0,"blr":1,"id":"255","alr":0,"end":0},{"alr":0,"id":"256","blr":1,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"268"},{"end":0,"id":"273","alr":0,"blr":1,"bwq":0},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"276"},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"281"},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"290"},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"308"},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"335"},{"bwq":0,"blr":1,"id":"345","alr":0,"end":0},{"bwq":0,"blr":1,"id":"401","alr":0,"end":0},{"bwq":0,"blr":1,"id":"404","alr":0,"end":0},{"bwq":0,"blr":1,"id":"412","alr":0,"end":0},{"bwq":0,"blr":1,"id":"413","alr":0,"end":0},{"bwq":0,"blr":1,"id":"414","alr":0,"end":0},{"alr":0,"id":"459","blr":1,"bwq":0,"end":0},{"alr":0,"id":"458","blr":1,"bwq":0,"end":0},{"alr":0,"id":"480","blr":1,"bwq":0,"end":0},{"bwq":0,"blr":1,"id":"484","alr":0,"end":0},{"end":0,"id":"507","alr":0,"blr":1,"bwq":0},{"end":0,"bwq":0,"blr":1,"alr":0,"id":"501"},{"alr":0,"id":"508","blr":1,"bwq":0,"end":0},{"alr":1,"id":"391","blr":0,"bwq":0,"end":0},{"alr":1,"id":"248","blr":0,"bwq":0,"end":0},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"297"},{"bwq":0,"blr":0,"id":"364","alr":1,"end":0},{"bwq":0,"blr":0,"id":"357","alr":1,"end":0},{"bwq":0,"blr":0,"id":"358","alr":1,"end":0},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"359"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"361"},{"alr":1,"id":"388","blr":0,"bwq":0,"end":0},{"end":0,"id":"405","alr":1,"blr":0,"bwq":0},{"alr":1,"id":"406","blr":0,"bwq":0,"end":0},{"end":0,"id":"370","alr":1,"blr":0,"bwq":0},{"alr":1,"id":"174","blr":0,"bwq":0,"end":0},{"end":0,"id":"483","alr":1,"blr":0,"bwq":0},{"alr":1,"id":"442","blr":0,"bwq":0,"end":0},{"end":0,"id":"471","alr":1,"blr":0,"bwq":0},{"end":0,"id":"472","alr":1,"blr":0,"bwq":0},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"498"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"499"},{"end":1,"bwq":0,"blr":0,"alr":0,"id":"321"},{"end":1,"id":"288","alr":0,"blr":0,"bwq":0},{"end":1,"id":"274","alr":0,"blr":0,"bwq":0},{"alr":0,"id":"151","blr":0,"bwq":0,"end":1},{"end":1,"bwq":0,"blr":0,"alr":0,"id":"368"},{"alr":0,"id":"479","blr":0,"bwq":0,"end":1},{"end":1,"id":"153","alr":0,"blr":0,"bwq":0},{"end":1,"id":"155","alr":0,"blr":0,"bwq":0},{"bwq":0,"blr":0,"id":"154","alr":0,"end":1},{"bwq":0,"blr":0,"id":"177","alr":0,"end":1},{"end":1,"id":"76","alr":0,"blr":0,"bwq":0},{"end":1,"bwq":0,"blr":0,"alr":0,"id":"218"},{"end":1,"id":"184","alr":0,"blr":0,"bwq":0},{"end":1,"bwq":0,"blr":0,"alr":0,"id":"89"},{"end":1,"id":"123","alr":0,"blr":0,"bwq":0},{"end":1,"bwq":0,"blr":0,"alr":0,"id":"196"},{"end":1,"id":"191","alr":0,"blr":0,"bwq":0},{"bwq":0,"blr":0,"id":"198","alr":0,"end":1},{"bwq":0,"blr":0,"id":"199","alr":0,"end":1},{"bwq":0,"blr":0,"id":"207","alr":0,"end":1},{"end":1,"bwq":0,"blr":0,"alr":0,"id":"213"},{"alr":0,"id":"215","blr":0,"bwq":0,"end":1}];if(utag.gdpr){var consentEnabled=true;var preferencesEnabled=true;var doNotSellEnabled=false;utag.gdpr.doNotSell=utag.gdpr.doNotSell||{};utag.gdpr.preferences_prompt=utag.gdpr.preferences_prompt||{};utag.gdpr.consent_prompt=utag.gdpr.consent_prompt||{};utag.gdpr.applyConsentState=function(){var enforcementMode=utag.gdpr.getEnforcementMode();if(enforcementMode==='none')return;utag.DB('Consent Manager: Applying consent');try{var i,lc=utag.loader.cfg,cs=utag.gdpr.getConsentState(),ot=utag.gdpr.omittedTags||{"243":1,"251":1,"250":1,"351":1,"257":1,"323":1,"238":1,"260":1,"341":1,"395":1,"237":1,"309":1,"416":1,"342":1,"344":1,"320":1,"241":1,"350":1};if(typeof cs==='number'){if((utag.gdpr.consent_prompt.isEnabled&&parseInt(cs)!==1)||((!consentEnabled&&preferencesEnabled&&enforcementMode==='opt-in')&&(parseInt(cs)===-1||parseInt(cs)===0))){utag.DB('Consent Manager: Setting all tags to off');for(i in utag.loader.GV(lc)){if(typeof ot[i]==='undefined'){lc[i].load=0;}}}}else if(((utag.gdpr.consent_prompt.isEnabled||utag.gdpr.preferences_prompt.isEnabled)||(!consentEnabled&&preferencesEnabled))&&enforcementMode==='opt-in'){utag.DB('Consent Manager: Partial Consent');for(i in utag.loader.GV(lc)){if(typeof ot[i]==='undefined'){if(lc[i].tcat>0&&cs[lc[i].tcat-1].ct!='1'){lc[i].load=0;}}}}var btl=utag.gdpr.dns?utag.gdpr.dns.getBlockedDnsTagLookup():null;utag.DB('Consent Manager: Do Not Sell Tags');if(enforcementMode==='opt-out'&&btl){for(i in utag.loader.GV(lc)){if(parseInt(btl[i])===1){lc[i].load=0;}}}try{if(window.tealiumConsentRegister&&window.tealiumConsentRegister.currentDecision===null){var cookieValues=utag.gdpr.getCookieValues();var hasDnsCookie=typeof cookieValues.dns==='string';var hasConsentCookie=typeof cookieValues.consent==='string';var decisionType=(enforcementMode==='opt-in'&&hasConsentCookie)||(enforcementMode==='opt-out'&&hasDnsCookie)?'explicit':'implicit';var decision=(decisionType==='implicit'&&enforcementMode==='opt-in')?[]:utag.gdpr.getSelectedCategories();decision.unshift('always_on');decision.type=decisionType;window.tealiumConsentRegister.addConsentDecision(decision);}}catch(e){utag.DB(e);}}catch(e){utag.DB(e);}};utag.gdpr.promptEnabledSetting=function(){if(!utag.gdpr.dr&&(utag.cfg.readywait||utag.cfg.waittimer)){utag.gdpr.dr=1;return;}utag.gdpr.consent_prompt.wasInitiallyEnabled=consentEnabled;utag.gdpr.preferences_prompt.wasInitiallyEnabled=preferencesEnabled;utag.gdpr.doNotSell.wasInitiallyEnabled=doNotSellEnabled;if(consentEnabled===true&&!(1)){utag.gdpr.consent_prompt.isEnabled=false;}if(preferencesEnabled===true&&(consentEnabled===true&&!(1))){utag.gdpr.preferences_prompt.isEnabled=false;}if(doNotSellEnabled===true&&!(1)){utag.gdpr.doNotSell.isEnabled=false;}if(preferencesEnabled===true&&consentEnabled===false&&!(1)){utag.gdpr.preferences_prompt.isEnabled=true;}};var splitGdprModules=false;if(typeof utag.gdpr.getEnforcementMode!=='function'){splitGdprModules=true;}utag.gdpr.getEnforcementMode=function(){utag.gdpr.promptEnabledSetting();var optInModulesAreActive=(utag.gdpr.consent_prompt&&utag.gdpr.consent_prompt.isEnabled===true);var optOutModuleIsActive=(utag.gdpr.doNotSell&&utag.gdpr.doNotSell.isEnabled===true);var optInPreferencesOnly=(!optInModulesAreActive&&!utag.gdpr.consent_prompt.wasInitiallyEnabled&&utag.gdpr.preferences_prompt.wasInitiallyEnabled&&!optOutModuleIsActive)||(splitGdprModules&&utag.gdpr.preferences_prompt&&utag.gdpr.preferences_prompt.wasInitiallyEnabled);var enforcementMode='opt-in';if(optOutModuleIsActive&&!optInModulesAreActive)enforcementMode='opt-out';if(!optOutModuleIsActive&&optInPreferencesOnly)enforcementMode='opt-in';if(!optOutModuleIsActive&&!optInModulesAreActive&&!optInPreferencesOnly)enforcementMode='none';return enforcementMode;};}utag.loader.initcfg=function(){utag.loader.cfg={"395":{load:4,tcat:1,send:1,v:202509181715,wait:0,tid:7143},"344":{load:(utag.cond[233]&&utag.cond[232]),tcat:1,send:0,v:202512221317,wait:0,tid:20060,src:"//tags.tiqcdn.com/utag/tiqapp/utag.currency.js"},"445":{load:4,send:(((utag.cond[182])&&(utag.cond[232])&&(utag.cond[233]))),tcat:4,v:202511060640,wait:0,tid:6037},"38":{load:(utag.cond[182]&&utag.cond[117]&&utag.cond[232]&&utag.cond[137]),tcat:4,send:1,v:202301311443,wait:1,tid:7114},"235":{load:(((utag.cond[182])&&(utag.cond[241])&&(utag.cond[232])&&(utag.cond[244])&&(utag.cond[245]))),tcat:4,send:1,v:202510010726,wait:1,tid:4049},"204":{load:(((utag.cond[137])&&(utag.cond[231])&&(utag.cond[255])&&(utag.cond[233]||utag.cond[309]||utag.cond[288]||utag.cond[321])&&(utag.cond[272]))),tcat:2,send:1,v:202512101357,wait:1,tid:20010},"186":{load:(((utag.cond[182])&&(utag.cond[241])&&(utag.cond[232])&&(utag.cond[155])&&(utag.cond[141])&&(utag.cond[198])&&(utag.cond[279])&&(utag.cond[363]))),tcat:2,send:1,v:202512151351,wait:1,tid:20010},"240":{load:(utag.cond[232]&&utag.cond[103]&&utag.cond[145]&&utag.cond[148]),tcat:4,send:1,v:202206090834,wait:1,tid:21005},"242":{load:(utag.cond[182]&&utag.cond[232]&&utag.cond[103]&&utag.cond[150]&&utag.cond[22]),tcat:4,send:1,v:202206090834,wait:1,tid:13111},"247":{load:(utag.cond[182]&&utag.cond[232]&&utag.cond[126]&&utag.cond[162]),tcat:2,send:1,v:202206090834,wait:1,tid:20067},"249":{load:(utag.cond[182]&&utag.cond[232]&&utag.cond[166]&&utag.cond[22]),tcat:2,send:1,v:202206090834,wait:1,tid:20067},"261":{load:(utag.cond[182]&&utag.cond[232]&&utag.cond[126]&&utag.cond[172]),tcat:2,send:1,v:202206090834,wait:1,tid:20067},"305":{load:(utag.cond[182]&&utag.cond[241]&&utag.cond[232]&&utag.cond[141]&&utag.cond[198]&&utag.cond[199]),tcat:2,send:1,v:202210121127,wait:1,tid:20010},"321":{load:(((utag.cond[182])&&(utag.cond[218])&&(utag.cond[232])&&(utag.cond[176])&&(utag.cond[144])&&(utag.cond[245]))),tcat:4,send:1,v:202510010726,wait:1,tid:4049},"329":{load:(utag.cond[182]&&utag.cond[224]&&utag.cond[227]&&utag.cond[232]),tcat:2,send:1,v:202208220933,wait:1,tid:7141},"342":{load:((((utag.cond[362])&&(utag.cond[232]))&&!(utag.cond[297]||utag.cond[323]||utag.cond[336]||utag.cond[351]))),tcat:1,send:1,v:202512221307,wait:1,tid:20010},"346":{load:((utag.cond[234])),tcat:2,send:1,v:202512110847,wait:1,tid:7142},"347":{load:(utag.cond[233]&&utag.cond[232]),tcat:2,send:1,v:202512171132,wait:1,tid:7142},"302":{load:((((utag.cond[182])&&(utag.cond[192])&&(utag.cond[197])&&(utag.cond[241])&&(utag.cond[232])&&(utag.cond[198])&&(utag.cond[279])&&(utag.cond[244]))&&!(utag.cond[350]))),tcat:2,send:1,v:202510010726,wait:1,tid:20010},"349":{load:(((utag.cond[241])&&(utag.cond[244])&&(utag.cond[245]))),tcat:4,send:1,v:202305221455,wait:1,tid:7132},"366":{load:(((utag.cond[248])&&(utag.cond[245]))),tcat:4,send:1,v:202305020951,wait:1,tid:7132},"374":{load:(((utag.cond[182])&&(utag.cond[176])&&(utag.cond[218])&&(utag.cond[255])&&(utag.cond[129])&&(utag.cond[272]))),tcat:4,send:1,v:202407240808,wait:1,tid:4049},"405":{load:1,tcat:3,send:1,v:202406201115,wait:1,tid:20010},"389":{load:((utag.cond[331]||utag.cond[288]||utag.cond[287]||utag.cond[286]||utag.cond[321])),tcat:2,send:1,v:202512101357,wait:1,tid:17013},"447":{load:(((utag.cond[182])&&(utag.cond[232])&&(utag.cond[234]))),tcat:4,send:1,v:202511060543,wait:1,tid:6037},"416":{load:(((utag.cond[232])&&(utag.cond[266])&&(utag.cond[328])&&(utag.cond[338])&&(utag.cond[346]||utag.cond[349])&&(utag.cond[353]))),tcat:8,send:1,v:202510071243,wait:1,tid:20064},"483":{load:(!(utag.cond[354]||utag.cond[356])),tcat:4,send:1,v:202510061149,wait:1,tid:2063},"476":{load:((utag.cond[355]||utag.cond[288])),tcat:4,send:1,v:202509041036,wait:1,tid:20010}};utag.loader.cfgsort=["395","344","445","38","235","204","186","240","242","247","249","261","305","321","329","342","346","347","302","349","366","374","405","389","447","416","483","476"];if(utag.gdpr&&utag.gdpr.getEnforcementMode()==='opt-in'){Object.keys(utag.loader.cfg).forEach(function(tagId){if(utag.loader.cfg[tagId].tcat===16){utag.DB('Consent Manager: Removing uncategorized tag from utag.loader.cfg in opt-in mode: '+tagId);delete utag.loader.cfg[tagId];utag.loader.cfgsort=utag.loader.cfgsort.filter(function(id){return id!==tagId;});}})}}
utag.loader.initcfg();try{utag.gdpr.applyConsentState();}catch(e){utag.DB(e)}}
utag.gdpr={consent_prompt:{noShow:false,isEnabled:true,content:{}},preferences_prompt:{single_cookie:false,noShow:false,isEnabled:true,defaultState:false,content:{},categories:{"misc":{"id":9,"enabled":"0"},"crm":{"enabled":"0","id":15},"email":{"enabled":"0","id":5},"cookiematch":{"id":10,"enabled":"0"},"mobile":{"enabled":"0","id":12},"cdp":{"enabled":"1","id":11},"social":{"id":7,"enabled":"0"},"display_ads":{"id":3,"enabled":"1"},"search":{"enabled":"1","id":4},"affiliates":{"id":2,"enabled":"1"},"analytics":{"enabled":"1","id":1},"uncategorized":{"enabled":"0","id":16},"big_data":{"enabled":"1","id":8},"personalization":{"enabled":"0","id":6},"monitoring":{"id":14,"enabled":"1"},"engagement":{"enabled":"0","id":13}}},doNotSell:{noShow:false,isEnabled:false},getCategories:function(onlyEnabledCats){if(!(utag.gdpr.preferences_prompt&&utag.gdpr.preferences_prompt.categories)){return[];}
var length=utag.gdpr.keys(utag.gdpr.preferences_prompt.categories).length,cats=new Array(length),gdpr_cats=utag.gdpr.preferences_prompt.categories;for(var cat in gdpr_cats){if(!gdpr_cats.hasOwnProperty(cat)){continue;}
var isCatEnabled=gdpr_cats[cat].enabled===true||gdpr_cats[cat].enabled==1;if(onlyEnabledCats&&!isCatEnabled){continue;}
cats[gdpr_cats[cat].id-1]=cat;}
for(var i=cats.length-1;i>=0;i--){if(cats[i]===undefined){cats.splice(i,1);}}
return cats;},getSelectedCategories:function(){var sc=[],gc=utag.gdpr.getCategories(true),cs=utag.gdpr.getConsentState(),i;try{if(typeof cs==="number"){return(parseInt(cs)===1)?gc:sc;}else{for(i in utag.loader.GV(cs)){if("1"===cs[i].ct){sc.push(cs[i].name);}}}}
catch(e){utag.DB(e);}
return sc;},getCategoryLanguage:function(category){if(!(utag.gdpr.preferences_prompt&&utag.gdpr.preferences_prompt.categories)){return[];}
var language=utag.gdpr.getLanguage(utag.gdpr.preferences_prompt);return utag.gdpr.preferences_prompt.languages[language].categories[category];},getConsentState:function(){var re=/^c\d+/,cd=utag.gdpr.getCookieValues(),np=1,gc=utag.gdpr.getCategories(),pc=(function(gc){var pc=[];for(var i=0;i<gc.length;i++){pc.push({ct:null,name:gc[i]});}
return pc;}(gc)),filteredCD=(function(cd){var d={};for(var prop in cd){if(!cd.hasOwnProperty(prop)){continue;}
if(re.test(prop)){d[prop]=cd[prop];}}
return d;}(cd));filteredCD=utag.gdpr.sortedObject(filteredCD,function(val1,val2){var idx1=parseInt((val1||"").substring(1),10),idx2=parseInt((val2||"").substring(1),10);if(isNaN(idx1)||isNaN(idx2)){return 0;}
return idx1>idx2?1:-1;});for(var cn in utag.loader.GV(filteredCD)){if(cn.match(re)){var idx=parseInt(cn.substring(1),10)-1,ct=gc[idx];pc[idx].ct=cd[cn];if(cd[cn]*1!==1){np=0;}}}
if(cd.consent){if(cd.consent===true||cd.consent==="true"){return np?np:pc;}else{return-1;}}else if(np===0){return pc;}else{return 0;}},getCookieValues:function(){var values={},rcd=(function(){var value="; "+document.cookie;var parts=value.split("; "+utag.gdpr.cookieNS+"=");if(parts.length==2)return utag.ut.decode(parts.pop().split(";").shift());}()),cd=utag.gdpr.typeOf(rcd)==="string"?rcd:"";if(utag.data&&cd){utag.data["cp."+utag.gdpr.cookieNS]=cd;}
if(cd){var i,optOut,optOutData=decodeURI(cd).split("|");for(i=0;i<optOutData.length;i++){optOut=optOutData[i].split(":");values[optOut[0]]=optOut[1];}}
utag.gdpr.values=values;return values;},getDeTokenizedContent:function(data,_lang){if(utag.gdpr.isEmpty(data))return null;var tokenRegExpPattern=/{{(.*?)}}/gm,token_match=/[{}]/g,two_part=/display_ads|big_data/;var lang=utag.gdpr.getLanguage(data,_lang),langData=utag.gdpr.clone(data.languages[lang]);for(var t1 in utag.gdpr.sortedObject(langData.common_tokens)){if(!langData.common_tokens.hasOwnProperty(t1)){continue;}
langData.common_tokens[t1]=tokenReplace(langData.common_tokens[t1]);}
for(var t2 in utag.gdpr.sortedObject(langData.custom_tokens)){if(!langData.custom_tokens.hasOwnProperty(t2)){continue;}
langData.custom_tokens[t2]=tokenReplace(langData.custom_tokens[t2]);}
function tokenReplace(str){if(!str)return str;var replacements=str.match(tokenRegExpPattern);if(!replacements)return str;for(var i=0;i<replacements.length;i++){var token=replacements[i].replace(token_match,"")||"";var regExpReplaceAll=new RegExp(replacements[i],"g");if(langData.common_tokens[token]){str=str.replace(regExpReplaceAll,langData.common_tokens[token]);}else if(langData.custom_tokens[token]){str=str.replace(regExpReplaceAll,langData.custom_tokens[token]);}else if(langData.categories&&token.indexOf("category_")>-1){var split_token=token.split("_");if(token.match(two_part)){split_token[1]=split_token[1]+"_"+split_token[2];split_token.splice(2,1);}
var category=langData.categories[split_token[1]],key={"title":"name","description":"notes"}[split_token[2]];if(category[key]){str=str.replace(regExpReplaceAll,category[key]);}}}
return str;}
return{language:lang,tokens:langData,js:tokenReplace(data.content.js),html:tokenReplace(data.content.html),css:tokenReplace(data.content.css)};},getLanguage:function(promptData,preferredLang){var udoName=window.utag.udoname||"utag_data";var dataObject=window.utag.data||window[udoName];var langLocale=(preferredLang||dataObject[window.utag.cfg.gdprDLRef]||(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)).toLowerCase();var lang=(langLocale||"").split("-")[0];if(!promptData){return langLocale;}
var languages=promptData.languages;return languages[langLocale]?langLocale:languages[lang]?lang:promptData.defaultLang;},getTokenLanguage:function(promptData,token,lang){if(utag.gdpr.isEmpty(promptData))return null;if(utag.gdpr.isEmpty(token))return null;var getDeTokenizedContent=utag.gdpr.getDeTokenizedContent(promptData,lang);var langData=getDeTokenizedContent.tokens;if(lang&&getDeTokenizedContent.language!==lang)return null;if(utag.gdpr.isEmpty(langData))return null;if(langData.common_tokens[token]){return langData.common_tokens[token];}else if(langData.custom_tokens[token]){return langData.custom_tokens[token];}else if(langData.categories&&token.indexOf("category_")>-1){var split_token=token.split("_"),category=langData.categories[split_token[1]];if(category[split_token[2]]){return category[split_token[2]];}}
return null;},refreshCookie:function(){if(utag&&utag.DB){utag.DB("utag.gdpr.refreshCookie has been deprecated");}},setCookie:function(cookieData){utag.DB("Consent Manager: Set Cookie");if(utag.gdpr.typeOf(cookieData)!=="object"){return;}
if(utag.gdpr.keys(cookieData).length===0){return;}
var consentType=utag.gdpr.typeOf(cookieData.consent);if(consentType==="number"){cookieData.consent=cookieData.consent==1;consentType=utag.gdpr.typeOf(cookieData.consent);}
if(consentType!=="boolean"&&!(consentType==="string"&&(cookieData.consent.toLowerCase()==="true"||cookieData.consent.toLowerCase()==="false"))){utag.DB("Invalid option sent to setCookie [consent must be true/false]");return;}
if(utag.gdpr.typeOf(cookieData.ts)!=="number"||(cookieData.ts.toString().length!==13)){cookieData.ts=new Date().getTime();}
utag.gdpr.values=cookieData;var mo2Val=[];for(var i in utag.loader.GV(cookieData)){if(/^(consent|dns|ts|id|c\d+)$/.test(i)){mo2Val.push(i+":"+cookieData[i]);}else{utag.DB("Invalid option sent to setCookie ["+i+"], is unknown");}}
var daysToSet=utag.gdpr.consentPeriod;if(!daysToSet){var expiryMonths=cookieData.dns==undefined?12:13;var today=new Date();today.setMonth(today.getMonth()+expiryMonths);daysToSet=Math.ceil((today.getTime()-new Date().getTime())/(1000*60*60*24));}
var expiry=new Date(cookieData.ts);expiry.setDate(expiry.getDate()+daysToSet);var cookie_string=[utag.gdpr.cookieNS+"="+encodeURI(mo2Val.join("|")),"path="+utag.gdpr.path,"expires="+expiry.toGMTString()];if(utag.gdpr.domain){cookie_string.push("domain="+utag.gdpr.domain);}
document.cookie=cookie_string.join("; ");utag.data["cp."+utag.gdpr.cookieNS]=mo2Val.join("|");},defaultConsentForDoNotSell:function(key,cookieData){if(key==='dns'){var consentType=utag.gdpr.typeOf(cookieData.consent);if(consentType==="undefined"){utag.DB("Consent Manager: Defaulting missing consent for Do Not Sell.");cookieData.consent="true";}}
return cookieData;},setCookieValue:function(key,value){utag.DB("Consent Manager: Set Cookie Value");if(!key||(utag.gdpr.typeOf(value)==="undefined"||utag.gdpr.typeOf(value)==="null"))return;var cookieData=utag.handler.C(utag.gdpr.getCookieValues());cookieData[key]=value;cookieData=utag.gdpr.defaultConsentForDoNotSell(key,cookieData);utag.gdpr.setCookie(cookieData);},setConsentValue:function(_response){utag.DB("Consent Manager: Set Consent Value: "+_response);var valid={true:1,"true":1,1:1,false:0,"false":0,0:0};if(!valid.hasOwnProperty(_response)){throw new Error("No response supplied");}
var response=valid[_response]===1;utag.gdpr.setCookieValue("ts",new Date().getTime());utag.gdpr.setCookieValue("consent",response);utag.gdpr.processQueue(response);try{var decision=response?utag.gdpr.getCategories(true):[]
decision.unshift('always_on');decision.type='explicit';window.tealiumConsentRegister.addConsentDecision(decision);}catch(e){utag.DB(e);}},setPreferencesValues:function(categories,noCollect){utag.DB("Consent Manager: Set Preferences Values");var i,fld,cookie_data=utag.gdpr.getCookieValues(),lookup={},rgx=/\D/,names=utag.gdpr.getCategories(),chosen_list=[],consent_seen=false,decline_seen=false,crgx=/c\d/;if(utag.gdpr.typeOf(categories)!=="object"){utag.DB("Categories is not type object.");return;}
try{for(i=0;i<names.length;i++){lookup[names[i]]="c"+(i+1);}
for(var cat in categories){if(!categories.hasOwnProperty(cat)){continue;}
if(categories[cat]!=="1"&&categories[cat]!=="0"&&categories[cat]!==1&&categories[cat]!==0){continue;}
if(cat.match(rgx)){cookie_data[lookup[cat]]=categories[cat];if(categories[cat]!=0){chosen_list.push(cat);}}else{cookie_data["c"+cat]=categories[cat];if(categories[cat]!=0){chosen_list.push(names[cat-1]);}}}
for(fld in utag.loader.GV(cookie_data)){if(fld.match(crgx)){if(cookie_data[fld]!=0){consent_seen=true;}else{decline_seen=true;}}}
cookie_data["ts"]=new Date().getTime();cookie_data["consent"]=consent_seen;utag.gdpr.setCookie(cookie_data);utag.gdpr.processQueue(consent_seen);}
catch(e){utag.DB(e);}
if(noCollect){return;}
try{var decision=(function(){var consentCategories;if(decline_seen){if(consent_seen){consentCategories=utag.gdpr.getSelectedCategories();}else{consentCategories=[];}}else if(!decline_seen&&consent_seen){consentCategories=utag.gdpr.getSelectedCategories();}
consentCategories.unshift('always_on');consentCategories.type='explicit';return consentCategories;}());decision.type='explicit';window.tealiumConsentRegister.addConsentDecision(decision);}catch(e){utag.DB(e);}},setAllCategories:function(state,noCollect){utag.DB("Consent Manager: Set Preferences All Categories: "+state);if(state===undefined)return;if(utag.gdpr.typeOf(state)!=="boolean")return;var allCats=utag.gdpr.getCategories(),prefs={};for(var i=0;i<allCats.length;i++){prefs[""+(i+1)]=state?"1":"0";}
utag.gdpr.setPreferencesValues(prefs,noCollect);},setPreferencesFromList:function(list){utag.DB("Consent Manager: Set Preferences From List");var prefs={},allCats=utag.gdpr.getCategories();if(utag.gdpr.typeOf(list)!=="array"){utag.DB("List should be of type array");return;}
for(var i=0;i<list.length;i++){prefs[list[i]]="1";}
for(var j=0;j<allCats.length;j++){if(!prefs[allCats[j]]){prefs[allCats[j]]="0";}}
utag.gdpr.setPreferencesValues(prefs);},processQueue:function(consent_seen){utag.DB("Consent Manager: Processing Consent Queue");if(utag.gdpr.noqueue){return;}
if(!consent_seen){utag.gdpr.queue=[];return;}
utag.DB("Consent Manager: Processing Consent Queue Length: "+utag.gdpr.queue.length);var event,data,conds={};utag.gdpr.merge(conds,utag.cond);for(var i=0;i<utag.gdpr.queue.length;i++){event=utag.gdpr.queue[i];if(!(event.cfg&&event.cfg.uids)){data={};utag.loader.RD(data,event.event);utag.gdpr.merge(data,event.data,true);for(var cond in conds){if(!conds.hasOwnProperty(cond)){continue;}
conds[cond]=0;}
utag.handler.RE(event.event,data,"blr");utag.loader.loadrules(data,conds);event.cfg=event.cfg||{};event.cfg.uids=[];event.data=data;utag.cond=conds;utag.loader.initcfg();utag.gdpr.applyConsentState();var consentState=utag.gdpr.getConsentState();var csType=utag.gdpr.typeOf(consentState);for(var id in utag.loader.GV(utag.loader.cfg)){if(utag.gdpr.omittedTags[id])continue;var tag=utag.loader.cfg[id];if(tag.load&&tag.send){if(tag.tcat!==0){if((csType==="array"&&consentState[tag.tcat-1].ct=="1")||(csType==="number"&&consentState==1)){event.cfg.uids.push(id);}}else if(tag.tcat===0){event.cfg.uids.push(id);}}}}
(function(event){setTimeout(function(){if(event.cfg.uids){for(var indexCfgUID=event.cfg.uids.length-1;indexCfgUID>-1;indexCfgUID--){if(!utag.gdpr.omittedTags[event.cfg.uids[indexCfgUID]])continue;event.cfg.uids.splice(indexCfgUID,1);}}
utag.track_old.call(this,event);},150*i);})(event);}
utag.gdpr.queue=[];},typeOf:function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();},merge:function(a,b,c,d){if(c){for(d in utag.loader.GV(b)){a[d]=b[d];}}else{for(d in utag.loader.GV(b)){if(typeof a[d]=="undefined")
a[d]=b[d];}}},getEnforcementMode:function(){utag.gdpr.promptEnabledSetting();var optOutModulesAreActive=(utag.gdpr.consent_prompt&&utag.gdpr.consent_prompt.isEnabled===true);var optInModuleIsActive=(utag.gdpr.doNotSell&&utag.gdpr.doNotSell.isEnabled===true);var enforcementMode='opt-in';if(!optOutModulesAreActive&&optInModuleIsActive)enforcementMode='opt-out';if(!optOutModulesAreActive&&!optInModuleIsActive)enforcementMode='none';return enforcementMode;},shouldBlockTag:function(taguid){if(!taguid)return true;var enforcementMode=utag.gdpr.getEnforcementMode();if(enforcementMode==='none')return false;var lc=utag.loader.cfg,cs=utag.gdpr.getConsentState(),uid=taguid;if(utag.gdpr.typeOf(uid)==="undefined")return true;utag.DB("Consent Manager: Applying consent: "+uid);var csTYpe=utag.gdpr.typeOf(cs);var tag=lc[uid];if(typeof tag!=="object"){utag.DB("Consent Manager: Missing/inactive tag: "+uid+" not allowed to send (nothing to fire anyway)");return true;}
var blockedTagLookup=utag.gdpr.dns?utag.gdpr.dns.getBlockedDnsTagLookup():{};if(enforcementMode==='opt-out'&&tag.send&&tag.tcat!==0){if(blockedTagLookup===null){utag.DB("Consent Manager: Applying consent: "+uid+" allowed to send (enforcement is off).");return false;}
if(parseInt(blockedTagLookup[uid])!==1){utag.DB("Consent Manager: Applying consent: "+uid+" allowed to send");return false;}}
if(enforcementMode==='opt-in'){if((utag.gdpr.omittedTags[uid]||tag.tcat==0)&&tag.send){utag.DB("Consent Manager: Omitted Tag: "+uid+" allowed to send");return false;}
if((csTYpe==="array"&&cs[tag.tcat-1].ct=="1")||(csTYpe==="number"&&cs==1)){utag.DB("Consent Manager: Applying consent: "+uid+" allowed to send");return false;}}
utag.DB("Consent Manager: Applying consent: "+uid+" not allowed to send");return true;},applyConsentState:function(){var enforcementMode=utag.gdpr.getEnforcementMode()
if(enforcementMode==='none')return;utag.DB("Consent Manager: Applying consent");try{var i,lc=utag.loader.cfg,cs=utag.gdpr.getConsentState(),ot=utag.gdpr.omittedTags;if(typeof cs==="number"){if((utag.gdpr.consent_prompt.isEnabled&&parseInt(cs)!==1)||((!utag.gdpr.consent_prompt.isEnabled&&utag.gdpr.preferences_prompt.isEnabled)&&parseInt(cs)===-1)){utag.DB("Consent Manager: Setting all tags to off");for(i in utag.loader.GV(lc)){if(typeof ot[i]==="undefined"){lc[i].load=0;}}}}else if(utag.gdpr.consent_prompt.isEnabled||utag.gdpr.preferences_prompt.isEnabled){utag.DB("Consent Manager: Partial Consent");for(i in utag.loader.GV(lc)){if(typeof ot[i]==="undefined"){if(lc[i].tcat>0&&cs[lc[i].tcat-1].ct!="1"){lc[i].load=0;}}}}
var btl=utag.gdpr.dns?utag.gdpr.dns.getBlockedDnsTagLookup():null;utag.DB("Consent Manager: Do Not Sell Tags");if(enforcementMode==='opt-out'&&btl){for(i in utag.loader.GV(lc)){if(parseInt(btl[i])===1){lc[i].load=0;}}}
try{if(window.tealiumConsentRegister&&window.tealiumConsentRegister.currentDecision===null){var cookieValues=utag.gdpr.getCookieValues();var hasDnsCookie=typeof cookieValues.dns==='string';var hasConsentCookie=typeof cookieValues.consent==='string';var decisionType=(enforcementMode==='opt-in'&&hasConsentCookie)||(enforcementMode==='opt-out'&&hasDnsCookie)?'explicit':'implicit';var decision=(decisionType==='implicit'&&enforcementMode==='opt-in')?[]:utag.gdpr.getSelectedCategories();decision.unshift('always_on');decision.type=decisionType;window.tealiumConsentRegister.addConsentDecision(decision);}}catch(e){utag.DB(e);}}
catch(e){utag.DB(e);}},updateConsentCookie:function(consent_categories){utag.DB("Consent Manager: Updating consent cookie");var list,listType=utag.gdpr.typeOf(consent_categories);if(listType==="string"){list=consent_categories.split(/\s*,\s*/);}else if(listType!=="array"){list=[];}else{list=consent_categories.slice();}
if(list.length===0){utag.gdpr.setConsentValue(false);utag.gdpr.setAllCategories(false);return;}
utag.gdpr.setPreferencesFromList(list);},keys:function(obj){if(Object.keys){return Object.keys(obj);}
var array=[];for(var prop in obj){if(!obj.hasOwnProperty(prop)){continue;}
array.push(prop);}
return array;},sortedObject:function(obj,func){var _obj={};if(obj!==undefined){var _k1=utag.gdpr.keys(obj).sort(func);for(var z=0;z<_k1.length;z++){_obj[_k1[z]]=obj[_k1[z]];}}
return _obj;},clone:function(a){var level=0;return cloner(a);function cloner(a){var b={};var c;level++;if(level===5)return a;for(c in utag.loader.GV(a)){if(utag.gdpr.typeOf(a[c])==="array"){b[c]=a[c].slice(0)}else if(utag.gdpr.typeOf(a[c])==="object"){b[c]=cloner(a[c]);}else{b[c]=a[c];}}
level--;return b;}},isEmpty:function(obj){var t=utag.gdpr.typeOf(obj);switch(t){case"string":case"array":return obj.length===0;case"object":for(var p in obj){if(!obj.hasOwnProperty(p)){continue;}
return false;}
default:return true;}},getTraceId:function(){var cookieName="trace_id=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(';');var cookie=ca.find(item=>item.trim().startsWith(cookieName));cookie=cookie?cookie.trim():cookie;return cookie?cookie.substring(cookieName.length,cookie.length):"";},setVisitorId:function(){var visitorId;var consentCookies=utag.gdpr.getCookieValues();if(consentCookies&&consentCookies.id){visitorId=consentCookies.id;}else if(utag.data['cp.utag_main_v_id']){visitorId=utag.data['cp.utag_main_v_id'];}else{visitorId=utag.ut.vi((new Date()).getTime());}
utag.gdpr.setCookieValue('id',visitorId)
return visitorId;},queue:[],domain:window.utag_cfg_ovrd&&window.utag_cfg_ovrd.domain||utag.cfg.domain,path:window.utag_cfg_ovrd&&window.utag_cfg_ovrd.cookie_path||"/",noqueue:window.utag_cfg_ovrd&&window.utag_cfg_ovrd.nogdprqueue||false,noview:window.utag_cfg_ovrd&&window.utag_cfg_ovrd.noview||false,consentPeriod:(window.utag_cfg_ovrd&&window.utag_cfg_ovrd.consentPeriod)||0,cookieNS:window.utag_cfg_ovrd&&window.utag_cfg_ovrd.cmcookiens||"CONSENTMGR",eventProfile:window.utag_cfg_ovrd&&window.utag_cfg_ovrd.cmeventprofile||"main"||"main",omittedTags:{"243":1,"251":1,"250":1,"351":1,"257":1,"323":1,"238":1,"260":1,"341":1,"395":1,"237":1,"309":1,"416":1,"342":1,"344":1,"320":1,"241":1,"350":1}};if(window.utag_cfg_ovrd&&window.utag_cfg_ovrd.domain==""){utag.gdpr.domain="";}
utag.loader.initdataOld=utag.loader.initdata;utag.loader.initdata=function(){utag.loader.initdataOld();if(utag.gdpr.getConsentState()!==0)return;if(utag.gdpr.noview)return;if(!utag.loader.rd_flag&&!utag.gdpr.noqueue){utag.gdpr.queue.push({event:"view",data:utag.handler.C(utag.data)});}};utag.gdpr.promptEnabledSetting=function(){if(!utag.gdpr.dr&&(utag.cfg.readywait||utag.cfg.waittimer)){utag.gdpr.dr=1;return;}
if(utag.gdpr.consent_prompt.isEnabled===true&&!(1)){utag.gdpr.consent_prompt.isEnabled=false;}
if(utag.gdpr.doNotSell.isEnabled===true&&!(1)){utag.gdpr.doNotSell.isEnabled=false;}}
utag.preOld=utag.pre;utag.pre=function(){utag.preOld();utag.gdpr.promptEnabledSetting();utag.pre=utag.preOld;};utag.gdpr.consent_prompt.languages={"en":{"isDefault":"true","common_tokens":{"message":"","confirmation_button":"","title":""}}};utag.gdpr.consent_prompt.content.css="";utag.gdpr.consent_prompt.content.html="<!-- You will not be able to see this text. -->";utag.gdpr.consent_prompt.content.js="";utag.gdpr.consent_prompt.defaultLang="en";utag.gdpr.showExplicitConsent=function(_lang){var cn=document.getElementById("__tealiumGDPRecStyle");if(cn){cn.parentNode.removeChild(cn);}var hn=document.getElementById("__tealiumGDPRecModal");if(hn){hn.parentNode.removeChild(hn);}var sn=document.getElementById("__tealiumGDPRecScript");if(sn){sn.parentNode.removeChild(sn);}var dtc=utag.gdpr.getDeTokenizedContent(utag.gdpr.consent_prompt,_lang);var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style"),mDiv=document.createElement("div"),scr=document.createElement("script"),body=document.body||document.getElementsByTagName("body")[0];style.type="text/css";style.id="__tealiumGDPRecStyle";if(style.styleSheet){style.styleSheet.cssText=dtc.css;}else{style.appendChild(document.createTextNode(dtc.css));}head.appendChild(style);mDiv.innerHTML=dtc.html;mDiv.id="__tealiumGDPRecModal";body.appendChild(mDiv);scr.language="javascript";scr.type="text/javascript";scr.text="try{"+dtc.js+"} catch(e){utag.DB(e)}";scr.id="__tealiumGDPRecScript";head.appendChild(scr);};utag.gdpr.preferences_prompt.languages={"ko":{"common_tokens":{"confirmation_button":"","title":" ","message":"         .     .        (IP ,  ,     ) , ,   .        .            .                .                  .       ,    .      .               .   <a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy policy - This link will be opened in a new tab\"> </a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie policy - This link will be opened in a new tab\"> </a>"},"categories":{"search":{"notes":"<ul>\n<li>      </li>\n<li>       </li>\n<li>            </li>\n</ul>","name":""},"social":{"name":"","notes":""},"display_ads":{"notes":"<ul>\n<li>      </li>\n<li>     .</li>\n<li>         </li>\n</ul>","name":""},"cdp":{"notes":"","name":""},"mobile":{"notes":"","name":""},"cookiematch":{"name":"","notes":""},"email":{"name":"","notes":""},"crm":{"notes":"","name":""},"misc":{"notes":"","name":""},"monitoring":{"notes":"","name":""},"engagement":{"notes":"","name":""},"personalization":{"name":"","notes":""},"uncategorized":{"notes":"","name":""},"analytics":{"name":"","notes":"     (:   )   .                      ."},"big_data":{"name":"","notes":""},"affiliates":{"notes":"<ul>\n<li>      </li>\n<li>      </li>\n<li>        ,\n    </li>\n</ul>","name":""}},"isDefault":"false","custom_tokens":{"privacy_policy_url":"https://www.lufthansa.com/xx/ko/common/privacy-statement/info","imprint_url":"https://www.lufthansa.com/xx/ko/common/imprint","company_logo_url":"","imprint":"","cookie_policy_url":"https://www.lufthansa.com/xx/en/common/privacy-statement/cookie-policy","notification":"       ","accept_all":"","confirm_specific":" ","show_more":" ","choose_all":" ","show_less":" ","accept_none":""}},"es":{"custom_tokens":{"privacy_policy_url":"https://www.lufthansa.com/xx/es/common/privacy-statement/info","cookie_policy_url":"https://www.lufthansa.com/xx/en/common/privacy-statement/cookie-policy","imprint_url":"https://www.lufthansa.com/xx/es/common/imprint","imprint":"Informacin legal ","company_logo_url":"","confirm_specific":"Guardar seleccin","accept_all":"De acuerdo","notification":"Al seleccionar esta categora, tambin se activarn las categoras Anlisis y Personalizacin.","show_less":"Mi configuracin","accept_none":"No estoy de acuerdo","show_more":"Mi configuracin","choose_all":"De acuerdo con todo"},"isDefault":"false","categories":{"affiliates":{"notes":"<ul>\n<li>Supervisar el trfico del sitio web y optimizar su experiencia de usuario</li>\n<li>Evalar qu canales de marketing estn funcionando mejor</li>\n<li>Analizar datos combinados sobre el uso del sitio web para comprender a nuestros clientes. Identificadores aleatorios compartidos con nuestros colaboradores.</li>\n</ul>","name":"Anlisis"},"personalization":{"name":"","notes":""},"uncategorized":{"notes":"","name":""},"analytics":{"notes":"Estas cookies son esenciales para el funcionamiento de las funciones principales de la pgina web, p.ej., funciones relacionadas con la seguridad. Con este tipo de cookies podemos detectar si desea permanecer conectado a su perfil y as proporcionarle nuestros servicios ms rpido cuando vuelva a visitar nuestra pgina web.","name":"Necesarias"},"big_data":{"notes":"","name":""},"engagement":{"name":"","notes":""},"monitoring":{"notes":"","name":""},"crm":{"notes":"","name":""},"misc":{"name":"","notes":""},"email":{"notes":"","name":""},"cookiematch":{"name":"","notes":""},"mobile":{"name":"","notes":""},"cdp":{"notes":"","name":""},"social":{"name":"","notes":""},"display_ads":{"name":"Personalizacin","notes":"<ul>\n<li>Almacenar sus preferencias en visitas anteriores</li>\n<li>Recoger la opinin de los usuarios para mejorar nuestro sitio web</li>\n<li>Evalar sus intereses para brindarle contenido y ofertas personalizadas.</li>\n</ul>"},"search":{"notes":"<ul>\n<li>Hacer que la publicidad online y en redes sociales sea ms relevante para usted</li>\n<li>Identificar grupos de clientes especficos e invitarlos a reconectarse a nuestros productos ms tarde</li>\n<li>Compartir datos especficos de clientes con socios publicitarios y de redes sociales para satisfacer las necesidades de nuestros clientes</li>\n</ul>","name":"Publicidad"}},"common_tokens":{"message":"Usamos cookies y tecnologas similares necesarias para el funcionamiento de la App y del sitio web. Las cookies adicionales slo se utilizarn slo con su previo consentimiento. Las utilizamos para acceder, analizar y almacenar informacin como las caractersticas de su dispositivo as como ciertos datos personales (direcciones IP, uso de navegacin, datos de geolocalizacin o identificadores nicos). El procesamiento de sus datos tiene varios propsitos: Las cookies de anlisis nos permiten analizar nuestro desempeo para ofrecerle una mejor experiencia de navegacin y evaluar la eficiencia de nuestras campaas. Las cookies de personalizacin le dan acceso a una experiencia personalizada de nuestro sitio web con ofertas y asistencia basadas en el uso. Finalmente, las cookies publicitarias son generadas por empresas externas que procesan sus datos para crear listas de audiencias para mostrar anuncios especficos en las redes sociales e Internet. Puede dar, rechazar o retirar libremente su consentimiento en cualquier momento utilizando el enlace que se proporciona en la parte inferior de cada pgina. Puede dar su consentimiento para nuestro uso de cookies haciendo clic en De acuerdo. Para obtener ms informacin sobre qu datos se recopilan y cmo se comparten con nuestros socios, lea nuestra poltica de privacidad y cookies: <a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy policy - This link will be opened in a new tab\">Poltica&nbsp;de&nbsp;privacidad</a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie policy - This link will be opened in a new tab\">Poltica&nbsp;de&nbsp;cookies</a>","category":"https://www.lufthansa.com/xx/en/cookie-policy","title":"Configuracin de privacidad","confirmation_button":""}},"el":{"custom_tokens":{"show_less":"  ","accept_none":" ","show_more":"  ","choose_all":"  ","accept_all":"","confirm_specific":" ","notification":"   ,         .","cookie_policy_url":"https://www.lufthansa.com/xx/en/common/privacy-statement/cookie-policy","imprint_url":"https://www.lufthansa.com/xx/el/common/imprint","company_logo_url":"","imprint":" ","privacy_policy_url":"https://www.lufthansa.com/xx/el/common/privacy-statement/info"},"common_tokens":{"message":" cookies              .  cookies      .    ,    ,      ,      ( IP,  ,      ).        :  cookies  Analytics                       .  cookies                . ,   cookie                          .    ,                     .       cookies    Agree ().               ,      cookies: <a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy policy - This link will be opened in a new tab\">&nbsp;</a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie policy - This link will be opened in a new tab\">&nbsp;Cookies</a>","confirmation_button":"","title":" "},"categories":{"social":{"notes":"","name":""},"display_ads":{"notes":"<ul>\n<li>       </li>\n<li>         </li>\n<li>           </li>\n</ul>","name":""},"search":{"notes":"<ul>\n<li>          </li>\n<li>              </li>\n<li>                       .</li>\n</ul>","name":""},"misc":{"notes":"","name":""},"crm":{"notes":"","name":""},"email":{"notes":"","name":""},"cookiematch":{"name":"","notes":""},"mobile":{"notes":"","name":""},"cdp":{"name":"","notes":""},"analytics":{"notes":"  cookies           , ..     .    cookies                           .","name":""},"uncategorized":{"notes":"","name":""},"big_data":{"notes":"","name":""},"personalization":{"notes":"","name":""},"engagement":{"name":"","notes":""},"monitoring":{"notes":"","name":""},"affiliates":{"name":" ","notes":"<ul>\n<li>           </li>\n<li>      </li>\n<li>              .      .\n</li>\n</ul>"}},"isDefault":"false"},"pt":{"categories":{"engagement":{"name":"","notes":""},"monitoring":{"notes":"","name":""},"analytics":{"notes":"Estes cookies so necessrios para comandar as funcionalidades principais desta pgina na Internet, ou seja, funes relacionadas com segurana. Com estes cookies podemos tambm detetar se deseja continuar ligado ao seu perfil, a fim de lhe facultar acesso rpido aos nossos servios aps voltar a visitar a nossa pgina na Internet.","name":"Necessrios"},"uncategorized":{"notes":"","name":""},"big_data":{"notes":"","name":""},"personalization":{"notes":"","name":""},"affiliates":{"notes":"<ul>\n<li>Monitorizar a utilizao do website e optimizar a experincia do utilizador</li>\n<li>Avalia quais os canais de marketing esto as ter o melhor desempenho e</li>\n<li>Analisar dados agregados sobre a utilizao do site para compreender os nossos clientes. Identificadores aleatrios partilhados com os parceiros. </li>\n</ul>","name":"Analtica"},"search":{"name":"Publicidade","notes":"<ul>\n<li>Tornar a publicidade online e social mais relevante para si</li>\n<li>Identificar grupos especficos de clientes e convid-los a ligarem-se novamente aos nossos produtos mais tarde</li>\n<li>Compartilhar os dados especficos do cliente com parceiros de publicidade e redes sociais para corresponder s necessidades dos nossos clientes</li>\n</ul>"},"social":{"notes":"","name":""},"display_ads":{"notes":"<ul>\n<li>Memorizao das suas preferncias de visitas anteriores</li>\n<li>Recolher feedback dos utilizadores para melhorar o nosso website</li>\n<li>Avalie os seus interesses para lhe oferecer contedos e ofertas personalizadas</li>\n</ul>","name":"Personalizao"},"cdp":{"name":"","notes":""},"mobile":{"notes":"","name":""},"cookiematch":{"notes":"","name":""},"email":{"name":"","notes":""},"misc":{"name":"","notes":""},"crm":{"notes":"","name":""}},"common_tokens":{"confirmation_button":"","title":"Configuraes de privacidade","message":"Usamos cookies e tecnologias semelhantes que so necessrias para executar o aplicativo e o site. Cookies adicionais so usados apenas com o seu consentimento. Ns usmo-los  para aceder, analisar e armazenar informaes, como as caractersticas do seu dispositivo, bem como certos dados pessoais (endereos IP, uso de navegao, dados de geolocalizao ou identificadores nicos). O processamento dos seus dados tem vrias finalidades: Os cookies analticos permitem-nos analisar o nosso desempenho para lhe oferecer uma melhor experincia online e avaliar a eficcia das nossas campanhas. Os cookies de personalizao fornecem acesso a uma experincia personalizada no nosso site com ofertas e suporte baseados no uso. Por fim, os cookies de publicidade so colocados por empresas terceiras que processam os seus dados para criar listas de pblico-alvo para fornecer anncios direcionados nas social media e na Internet. Pode dar, recusar ou retirar livremente o seu consentimento a qualquer momento usando o link fornecido no final de cada pgina. Pode consentir com o nosso uso de cookies clicando em Concordo. Para obter mais informaes sobre quais dados so coletados e como so compartilhados com os nossos parceiros, leia a nossa poltica de privacidade e cookies: <a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy policy - This link will be opened in a new tab\">Poltica&nbsp;de&nbsp;Privacidade</a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie policy - This link will be opened in a new tab\">Poltica&nbsp;de&nbsp;Cookies</a>"},"isDefault":"false","custom_tokens":{"accept_none":"No concordo","show_less":"As minhas configuraes","choose_all":"Concordo com tudo","show_more":"As minhas configuraes","accept_all":"Concordo","confirm_specific":"Guardar seleo","notification":"Ao selecionar esta categoria, as categorias Analtica e Personalizao tambm sero ativadas.","cookie_policy_url":"https://www.lufthansa.com/xx/en/common/privacy-statement/cookie-policy","imprint":"Informao legal","company_logo_url":"","imprint_url":"https://www.lufthansa.com/xx/pt/common/imprint","privacy_policy_url":"https://www.lufthansa.com/xx/pt/common/privacy-statement/info"}},"fr":{"isDefault":"false","common_tokens":{"title":"Paramtres de confidentialit","confirmation_button":"","message":"Nous utilisons des cookies et autres technologies similaires, indispensables pour lexcution de lapp et du site Web. Les autres cookies ne sont utiliss qu'avec votre consentement. Nous les utilisons pour laccs, lanalyse et le stockage des informations telles que les caractristiques de votre appareil ainsi que certaines donnes personnelles (adresses IP, navigation, donnes de golocalisation ou identifiants uniques). Le traitement de vos donnes rpond  diffrents objectifs : les cookies analytiques nous permettent d'analyser nos performances pour vous offrir une meilleure exprience en ligne et valuer l'efficacit de nos campagnes de communication. Les cookies de personnalisation nous permettent de vous offrir une experience unique de notre site, avec des offres et un support personnalis bass sur votre utilisation. Enfin, les cookies publicitaires sont gres par des socits externes traitant vos donnes pour crer des listes d'audiences afin de diffuser des publicits cibles sur les rseaux sociaux et sur Internet. Vous pouvez librement donner, refuser ou retirer votre consentement  tout moment en utilisant le lien fourni au bas de chaque page. Vous pouvez consentir  notre utilisation des cookies en cliquant sur  Accepter . Pour plus d'informations sur les donnes collectes et sur la manire dont elles sont partages avec nos partenaires, veuillez lire notre politique de confidentialit et de cookies: <a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy policy - This link will be opened in a new tab\">Politique&nbsp;de&nbsp;confidentialit</a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie policy - This link will be opened in a new tab\">Politique&nbsp;relative&nbsp;aux&nbsp;cookies</a>"},"categories":{"mobile":{"name":"","notes":""},"cdp":{"name":"","notes":""},"misc":{"name":"","notes":""},"crm":{"notes":"","name":""},"email":{"notes":"","name":""},"cookiematch":{"notes":"","name":""},"search":{"name":"Publicit","notes":"<ul>\n<li>Rendre les publicits en ligne et sur les rseaux sociaux plus pertinentes pour vous</li>\n<li>Identifier des groupes de clients spcifiques pour les inviter  se reconnecter  nos produits plus tard</li>\n<li>Nous partageons des donnes clients spcifiques avec nos partenaires publicitaires et de rseaux sociaux afin de rpondre aux besoins de nos clients</li>\n</ul>"},"display_ads":{"notes":"<ul>\n<li>Enregistrer vos prfrences lors de visites prcdentes</li>\n<li>Recueillir les commentaires des utilisateurs pour amliorer notre site web</li>\n<li>Evaluer vos intrts pour vous offrir des contenus et des offres personnaliss.</li>\n</ul>","name":"Personalisation"},"social":{"name":"","notes":""},"affiliates":{"name":"Analytique","notes":"<ul>\n<li>Surveiller le trafic du site et optimiser votre exprience utilisateur</li>\n<li>valuer les performances de nos campagnes marketing</li>\n<li>Analyser des donnes agrges sur lutilisation du site  pour comprendre nos clients. Identifiants alatoires partags avec les partenaires.</li>\n</ul>"},"monitoring":{"name":"","notes":""},"engagement":{"name":"","notes":""},"uncategorized":{"notes":"","name":""},"big_data":{"name":"","notes":""},"analytics":{"name":"Ncessaires","notes":"Ces cookies sont ncessaires  la gestion de cette page Internet, pour des fonctions de scurit par exemple. Grce  ces cookies, nous pouvons aussi savoir si vous souhaitez rester connect  votre profil afin de bnficier dun accs rapide  nos services quand vous revisitez notre page Internet."},"personalization":{"name":"","notes":""}},"custom_tokens":{"privacy_policy_url":"https://www.lufthansa.com/xx/fr/common/privacy-statement/info","cookie_policy_url":"https://www.lufthansa.com/xx/fr/common/privacy-statement/cookie-policy","company_logo_url":"","imprint":"Mentions lgales ","imprint_url":"https://www.lufthansa.com/xx/fr/common/imprint","accept_all":"Accepter","confirm_specific":"Confirmer la slection","notification":"En slectionnant cette catgorie, les catgories Analytique et Personnalisation seront galement actives.","accept_none":"Je ne suis pas d'accord","show_less":"Mes paramtres","choose_all":"Tout slectionner","show_more":"Mes paramtres"}},"zh":{"custom_tokens":{"privacy_policy_url":"https://www.lufthansa.com/xx/zh/common/privacy-statement/info","imprint_url":"https://www.lufthansa.com/xx/zh/common/imprint","imprint":"","company_logo_url":"","cookie_policy_url":"https://www.lufthansa.com/xx/en/common/privacy-statement/cookie-policy","notification":"","confirm_specific":"","accept_all":"","show_more":"","choose_all":"","show_less":"","accept_none":""},"categories":{"mobile":{"notes":"","name":""},"cdp":{"name":"","notes":""},"crm":{"name":"","notes":""},"misc":{"name":"","notes":""},"cookiematch":{"notes":"","name":""},"email":{"notes":"","name":""},"search":{"name":"","notes":"<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>"},"social":{"name":"","notes":""},"display_ads":{"notes":"<ul>\n<li></li>\n<li></li>\n<li></li>\n<ul>","name":""},"affiliates":{"notes":"<ul>\n<li></li>\n<li></li>\n<li> </li>\n</ul>","name":""},"engagement":{"name":"","notes":""},"monitoring":{"notes":"","name":""},"personalization":{"name":"","notes":""},"uncategorized":{"notes":"","name":""},"big_data":{"notes":"","name":""},"analytics":{"notes":"CookieCookie\n","name":""}},"common_tokens":{"title":"","confirmation_button":"","message":"CookieCookieIPcookiecookieCookiecookieCookie<a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy policy - This link will be opened in a new tab\"></a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie policy - This link will be opened in a new tab\">Cookie</a>\n"},"isDefault":"false"},"ka":{"custom_tokens":{"notification":"","accept_all":"","confirm_specific":"","show_more":"","choose_all":"","show_less":"","accept_none":"","privacy_policy_url":"https://www.lufthansa.com/xx/hk/common/privacy-statement/info ","imprint_url":"https://www.lufthansa.com/xx/hk/common/imprint","imprint":"","company_logo_url":"","cookie_policy_url":"https://www.lufthansa.com/xx/en/common/privacy-statement/cookie-policy"},"categories":{"affiliates":{"notes":"<ul>\n<li></li>\n<li></li>\n<li>\n</li>\n</ul>","name":""},"personalization":{"notes":"","name":""},"uncategorized":{"name":"","notes":""},"analytics":{"name":"","notes":" Cookie  Cookie\n"},"big_data":{"name":"","notes":""},"monitoring":{"notes":"","name":""},"engagement":{"notes":"","name":""},"crm":{"name":"","notes":""},"misc":{"name":"","notes":""},"cookiematch":{"name":"","notes":""},"email":{"notes":"","name":""},"mobile":{"name":"","notes":""},"cdp":{"notes":"","name":""},"display_ads":{"name":"","notes":"<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>"},"social":{"name":"","notes":""},"search":{"notes":"<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>","name":""}},"common_tokens":{"confirmation_button":"","title":"","message":"CookieCookieIPcookiecookieCookiecookieCookie <a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy policy - This link will be opened in a new tab\"></a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie policy - This link will be opened in a new tab\">Cookie</a>"},"isDefault":"false"},"en":{"custom_tokens":{"privacy_policy_url":"https://www.lufthansa.com/xx/en/common/privacy-statement/info","imprint_url":"https://www.lufthansa.com/xx/en/common/imprint","company_logo_url":"","imprint":"Imprint","cookie_policy_url":"https://www.lufthansa.com/xx/en/common/privacy-statement/cookie-policy","notification":"By selecting this category, the categories Analytics and Personalization will also be activated.","confirm_specific":"Save selection","accept_all":"Agree","show_more":"My settings","choose_all":"Agree to all","show_less":"My settings","accept_none":"I do not agree"},"isDefault":"true","common_tokens":{"description":"","confirmation_button":"","status":"","title":"Privacy settings","no":"","yes":"","category":"","message":"We use cookies and similar technologies that are necessary to run the app and the website. Additional cookies are only used with your consent. We use them to access, analyse and store information such as the characteristics of your device as well as certain personal data (IP addresses, navigation usage, geolocation data or unique identifiers). The processing of your data serves various purposes: Analytics cookies allow us to analyse our performance to offer you a better online experience and evaluate the efficiency of our campaigns. Personalisation cookies give you access to a customised experience of our website with usage-based offers and support. Finally, Advertising cookies are placed by third-party companies processing your data to create audiences lists to deliver targeted ads on social media and the internet.You may freely give, refuse or withdraw your consent at any time using the link provided at the bottom of each page. You can consent to our use of cookies by clicking on Agree. For more information on which data is collected and how it is shared with our partners please read our privacy and cookie policy: <a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy Policy - This link will be opened in a new tab\">Privacy&nbsp;Policy</a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie Policy - This link will be opened in a new tab\">Cookie&nbsp;Policy</a>"},"categories":{"engagement":{"name":"","notes":""},"monitoring":{"name":"","notes":""},"uncategorized":{"notes":"","name":""},"big_data":{"name":"","notes":""},"analytics":{"notes":"These cookies are necessary to run the core functionalities of this website, e.g. security related functions. With these cookies we can also detect if you want to stay logged into your profile to provide you with fast access to our services after revisiting our website.","name":"Necessary"},"personalization":{"notes":"","name":""},"affiliates":{"notes":"<ul>\n<li>Monitor website traffic and optimize your user experience</li>\n<li>Evaluate which marketing channels are performing better</li>\n<li>Analyse aggregated data about usage of the website to understand our customers. Randomized identifiers shared with partners.</li>\n</ul>","name":"Analytics"},"search":{"notes":"<ul>\n<li>Make online and social advertising more relevant for you</li>\n<li>Invite specific customer groups to reconnect with our products later</li>\n<li>Sharing the specific customer data with advertising and social media partners to match our customer needs</li>\n</ul>","name":"Advertising"},"social":{"notes":"","name":""},"display_ads":{"name":"Personalization","notes":"<ul>\n<li>Store your preferences from previous visits</li>\n<li>Collect user feedback to improve our website</li>\n<li>Evaluate your interests to provide you unique customised content and offers</li>\n</ul>"},"cdp":{"name":"","notes":""},"mobile":{"notes":"","name":""},"email":{"name":"","notes":""},"cookiematch":{"notes":"","name":""},"misc":{"name":"","notes":""},"crm":{"notes":"","name":""}}},"pl":{"isDefault":"false","common_tokens":{"confirmation_button":"","title":"Polityka prywatnoci","message":"Korzystamy z plikw cookie i podobnych technologii, ktre s niezbdne do dziaania aplikacji oraz strony internetowej. Dodatkowe pliki cookie s wykorzystywane jedynie po uzyskaniu Twojej zgody w celu uzyskiwania dostpu, analizowania i przechowywania informacji, takich jak charakterystyka Twojego urzdzenia, a take niektrych danych osobowych (adresw IP, sposobu nawigacji, danych geolokalizacyjnych lub unikalnych identyfikatorw). Przetwarzanie danych suy rnym celom: analityczne pliki cookie pozwalaj na ocen skutecznoci naszych kampanii oraz monitorowanie jakoci, aby nasza oferta online bya jak najlepsza. Personalizacyjne pliki cookie zapewniaj dostp do wsparcia oraz spersonalizowanej oferty naszej strony internetowej opartej na dotychczasowym wyszukiwaniu. Natomiast reklamowe pliki cookie s umieszczane przez firmy zewntrzne przetwarzajce dane i tworzce listy odbiorcw w celu dostarczania ukierunkowanych reklam w mediach spoecznociowych i internecie. Moesz w kadej chwili wyrazi zgod, odmwi lub wycofa swoj zgod korzystajc z linku podanego na dole kadej strony. Moesz wyrazi zgod na umieszczanie przez nas plikw cookie, klikajc przycisk Zgadzam si. Aby uzyska wicej informacji na temat gromadzonych danych i sposobu ich udostpniania naszym partnerom, zapoznaj si z nasz polityk prywatnoci i plikw cookie:\n<a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy policy - This link will be opened in a new tab\">Polityka&nbsp;prywatnoci</a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie policy - This link will be opened in a new tab\">Polityka&nbsp;plikw&nbsp;cookie</a>"},"categories":{"search":{"name":"Reklamowe pliki cookie","notes":"<ul>\n<li>Sprawiaj, e reklama internetowa oraz w mediach spoecznociowych jest bardziej dopasowana do Twoich zainteresowa </li>\n<li>Zapraszaj okrelone grupy klientw do ponownego zapoznania si z naszymi produktami </li>\n<li>Udostpnianie okrelonych danych klientw partnerom zbrany reklamowej imediw spoecznociowych wcelu dopasowania do potrzeb naszych klientw</li>\n</ul>"},"social":{"notes":"","name":""},"display_ads":{"notes":"<ul>\n<li>Zachowuj informacje o wyborach w czasie poprzednich wizyt</li>\n<li>Zbieranie informacji zwrotnych od uytkownikw w celu ulepszenia naszej strony internetowej</li>\n<li>Analizuj Twoje zainteresowania, aby otrzymywa unikalne, spersonalizowane informacje oraz oferty</li>\n</ul>","name":"Personalizacyjne pliki cookie"},"cdp":{"notes":"","name":""},"mobile":{"notes":"","name":""},"email":{"notes":"","name":""},"cookiematch":{"name":"","notes":""},"crm":{"notes":"","name":""},"misc":{"name":"","notes":""},"engagement":{"name":"","notes":""},"monitoring":{"notes":"","name":""},"personalization":{"name":"","notes":""},"analytics":{"name":"Niezbdne","notes":"Te pliki cookie s niezbdne do dziaania podstawowych funkcji niniejszej strony internetowej, takich jak funkcje zwizane zbezpieczestwem. Za pomoc tych plikw cookie moemy take wykrywa, czy chcesz pozosta zalogowany do swojego profilu. Wten sposb moemy zapewni Ci szybki dostp do naszych usug po ponownej wizycie na naszej stronie internetowej."},"big_data":{"name":"","notes":""},"uncategorized":{"notes":"","name":""},"affiliates":{"notes":"<ul>\n<li>Monitoruj ruch na stronie internetowej i optymalizuj dowiadczenia uytkownika</li>\n<li>Oceniaj, ktry kana marketingowy ma lepsze wyniki</li>\n<li>Analizuj zagregowane dane o uytkownikach strony w celu lepszego zrozumienia naszych klientw. Losowe identyfikatory s udostpniane partnerom.  </li>\n</ul>","name":"Analityczne pliki cookie"}},"custom_tokens":{"show_less":"Moje ustawienia","accept_none":"Nie zgadzam si","show_more":"Moje ustawienia","choose_all":"Zgadzam si na wszystkie","confirm_specific":"Zapisz wybr","accept_all":"Zgadzam si","notification":"Poprzez wybr tej kategorii aktywowane s rwnie kategorie plikw analitycznych i personalizacyjnych.  ","cookie_policy_url":"https://www.lufthansa.com/xx/en/common/privacy-statement/cookie-policy","imprint_url":"https://www.lufthansa.com/xx/pl/common/imprint","imprint":"Metryka strony ","company_logo_url":"","privacy_policy_url":"https://www.lufthansa.com/xx/pl/common/privacy-statement/info"}},"it":{"common_tokens":{"confirmation_button":"","title":"Impostazioni della privacy","message":"Usiamo solo cookies e tecnologie similari che sono necessarie per il funzionamento dell'app e del sito. Ulteriori cookies vengono utilizzati solo con il  suo consenso.Le utilizziamo per accedere, analizzare e tenere traccia di informazioni quali caratteristiche del suo  dispositivo cos come alcuni dati personali (indirizzo IP, statistiche di navigazione, geolocalizzazione, identificatori univoci). L'elaborazione dei suoi dati  ha diversi scopi:  i cookies analitici ci permettono di migliorare il nostro servizio per offrirle un'esperienza di navigazione migliore verificando l'efficienza delle nostre campagne. I cookies di personalizzazione le permettono di accedere ad un'esperienza online personalizzata con offerte e servizi basati sulle sue esigenze. Infine, i cookies pubblicitari vengono inseriti da societ terze che elaborano i suoi dati per creare elenchi di segmenti di pubblico per fornire annunci mirati sui social media e su Internet. Lei pu dare, rifiutare o modificare il consenso in ogni momento utilizzando il link in fondo alla pagina. Pu acconsentire all'uso da parte nostra dei cookies cliccando su Accetto. Per ulteriori informazioni sulla tipologia di dati che vengono raccolti e sulla condivisione degli stessi con i nostri partner la preghiamo di leggere la sezione dedicata alle Norme sulla privacy e sui cookies: <a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy policy - This link will be opened in a new tab\">Norme&nbsp;sulla&nbsp;privacy</a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie policy - This link will be opened in a new tab\">Norme&nbsp;sull'utilizzo&nbsp;dei&nbsp;cookies</a>"},"categories":{"cdp":{"name":"","notes":""},"mobile":{"name":"","notes":""},"cookiematch":{"notes":"","name":""},"email":{"name":"","notes":""},"crm":{"notes":"","name":""},"misc":{"notes":"","name":""},"search":{"notes":"<ul>\n<li>Rendre gli annunci online e sui social pi significativi per lei</li>\n<li>Identificare gruppi di clienti specifici e invitarli a riconnettersi ai nostri prodotti in un secondo tempo</li>\n<li>Condivisione di dati specifici relativi alla clientela con partner pubblicitari e di social media per rispondere alle esigenze della nostra clientela</li>\n</ul>","name":"Pubblicit"},"social":{"name":"","notes":""},"display_ads":{"notes":"<ul>\n<li>Memorizzare le preferenze da visite precedenti</li>\n<li>Raccogliere i feedback degli utenti per migliorare il nostro sito web</li>\n<li>Valutare i suoi interessi per offrirle contenuti e offerte personalizzate</li>\n</ul>","name":"Personalizzazione"},"affiliates":{"notes":"<ul>\n<li>Monitoraggio dell'utilizzo del sito web e ottimizzazione dell'esperienza utente</li>\n<li>Valutaro quali canali di marketing stanno ottenendo i migliori risultati</li>\n<li>Analizza i dati aggregati relativi all'utilizzo del sito per capire i nostri clienti. Identificatori randomizzati condivisi con i partner.</li>\n</ul>","name":"Analisi"},"engagement":{"name":"","notes":""},"monitoring":{"notes":"","name":""},"personalization":{"name":"","notes":""},"uncategorized":{"notes":"","name":""},"big_data":{"notes":"","name":""},"analytics":{"name":"Necessari","notes":"Questi cookie sono necessari per utilizzare le funzioni chiave di questo sito Internet, ad es. le funzioni relative alla sicurezza. Questi cookie ci consentono anche di rilevare se vuole salvare i dati di login del suo profilo cos da accedere rapidamente ai nostri servizi ogni volta che visita di nuovo il sito Internet."}},"isDefault":"false","custom_tokens":{"accept_all":"Accetto","confirm_specific":"Salva le scelte","notification":"Selezionando questa categoria le sezioni Analisi e Personalizzazione verranno attivate.","accept_none":"Non accetto","show_less":"Le mie impostazioni","choose_all":"Accetto tutto","show_more":"Le mie impostazioni","privacy_policy_url":"https://www.lufthansa.com/xx/it/common/privacy-statement/info","cookie_policy_url":"https://www.lufthansa.com/xx/en/common/privacy-statement/cookie-policy","imprint":"Impressum","company_logo_url":"","imprint_url":"https://www.lufthansa.com/xx/it/common/imprint"}},"ru":{"custom_tokens":{"cookie_policy_url":"https://www.lufthansa.com/xx/en/common/privacy-statement/cookie-policy","company_logo_url":"","imprint":" ","imprint_url":"https://www.lufthansa.com/xx/ru/common/imprint","privacy_policy_url":"https://www.lufthansa.com/xx/ru/common/privacy-statement/info","accept_none":"  ","show_less":"","choose_all":"   ","show_more":"","confirm_specific":"  ","accept_all":" ","notification":"          "},"isDefault":"false","categories":{"affiliates":{"notes":"<ul>\n<li>  -    </li>\n<li>     </li>\n<li>     -   .    .</li>\n</ul>","name":""},"personalization":{"name":"","notes":""},"analytics":{"notes":"  cookie     -,    .   cookie    ,               -.","name":""},"uncategorized":{"name":"","notes":""},"big_data":{"notes":"","name":""},"engagement":{"notes":"","name":""},"monitoring":{"notes":"","name":""},"crm":{"name":"","notes":""},"misc":{"name":"","notes":""},"cookiematch":{"notes":"","name":""},"email":{"notes":"","name":""},"mobile":{"name":"","notes":""},"cdp":{"notes":"","name":""},"social":{"name":"","notes":""},"display_ads":{"name":"","notes":"<ul>\n<li>       </li>\n<li>      </li>\n<li>          </li>\n</ul>"},"search":{"notes":"<ul>\n<li>   -        </li>\n<li>           </li>\n<li>               .</li>\n</ul>","name":""}},"common_tokens":{"confirmation_button":"","title":" ","category":"https://www.lufthansa.com/xx/en/cookie-policy","message":"   cookie   ,       .   cookie     .     ,    ,     ,      (IP-,  ,     ).      :  cookie     ,             .  cookie                  .\n  cookie   ,   ,             .    ,        ,     .        cookie,    .      ,         ,         cookie: <a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy policy - This link will be opened in a new tab\">&nbsp;</a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie policy - This link will be opened in a new tab\">&nbsp;&nbsp;cookie</a>"}},"de":{"custom_tokens":{"choose_all":"Allen zustimmen","show_more":"Meine Einstellungen","accept_none":"Ich bin nicht einverstanden","show_less":"Meine Einstellungen","notification":"Durch die Auswahl dieser Kategorie werden auch die Kategorien Analyse und Personalisierung aktiviert.","confirm_specific":"Auswahl speichern","accept_all":"Einverstanden","company_logo_url":"","imprint":"Impressum","imprint_url":"https://www.lufthansa.com/xx/de/common/imprint","cookie_policy_url":"https://www.lufthansa.com/xx/de/common/privacy-statement/cookie-policy","privacy_policy_url":"https://www.lufthansa.com/xx/de/common/privacy-statement/info"},"common_tokens":{"no":"","yes":"","title":"Privatsphre Einstellungen","confirmation_button":"Best&auml;tigen und schlie&szlig;en","message":"Wir verwenden Cookies und hnliche Technologien, die fr den Betrieb der App und der Website erforderlich sind.Zustzliche Cookies werden nur mit Ihrer Zustimmung verwendet. Wir verwenden sie, um auf Informationen zuzugreifen, sie zu analysieren und zu speichern, wie z.B. die Merkmale Ihres Gerts sowie bestimmte persnliche Daten (IP-Adressen, Navigationsnutzung, Geolokalisierungsdaten oder eindeutige Identifikationsmerkmale). Die Verarbeitung Ihrer Daten dient verschiedenen Zwecken: Mit Hilfe von Analyse-Cookies knnen wir unsere Leistung analysieren, um Ihnen ein besseres Online-Erlebnis zu bieten und die Effizienz unserer Kampagnen zu evaluieren. Personalisierungs-Cookies ermglichen Ihnen den Zugang zu einem massgeschneiderten Erlebnis auf unserer Website mit nutzungsabhngigen Angeboten und Support. Schlielich werden Werbe-Cookies von Drittfirmen platziert, die Ihre Daten zur Erstellung von Zielgruppenlisten verarbeiten, um gezielte Werbung in sozialen Medien und im Internet zu liefern.Es steht Ihnen frei, Ihre Zustimmung jederzeit zu geben, zu verweigern oder zurckzuziehen, indem Sie den Link unten auf jeder Seite benutzen. Sie knnen der Verwendung von Cookies durch uns zustimmen, indem Sie auf Einverstanden klicken.Fr weitere Informationen darber, welche Daten gesammelt und wie sie an unsere Partner weitergegeben werden, lesen Sie bitte unsere Datenschutz- und Cookie-Richtlinien: <a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy policy - This link will be opened in a new tab\">Datenschutzerklrung</a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie policy - This link will be opened in a new tab\">Cookie-Richtlinie</a>"},"categories":{"social":{"name":"","notes":""},"display_ads":{"notes":"<ul>\n<li>Speicherung Ihrer Prfererenzen aus frhreren Besuchen. </li>\n<li>Sammeln von Benutzer-Feedback zur Verbesserung unserer Website</li>\n<li>Erfassung Ihrer Interessen, um mageschneiderte Inhalte und Angebote anzubieten</li>\n</ul>","name":"Personalisierung"},"search":{"name":"Werbung","notes":"<ul>\n<li>Steigerung der Relevanz von Online- und Social-Werbung fr Sie</li>\n<li>Identifizierung von Kundengruppen, die wir fr bestimmte Produkte wiederholt ansprechen werden</li>\n<li>Weitergabe spezifischer Kundendaten an Werbe- und Social-Media-Partner, um die Bedrfnisse unserer Kunden besser zu erfllen. </li>\n</ul>"},"cookiematch":{"name":"","notes":""},"email":{"name":"","notes":""},"misc":{"notes":"","name":""},"crm":{"notes":"","name":""},"cdp":{"notes":"","name":""},"mobile":{"name":"","notes":""},"analytics":{"notes":"Diese Cookies sind f&uuml;r den Betrieb der Seite unbedingt notwendig und erm&ouml;glichen beispielsweise sicherheitsrelevante Funktionalit&auml;ten. Au&szlig;erdem k&ouml;nnen wir mit dieser Art von Cookies ebenfalls erkennen, ob Sie in Ihrem Profil eingeloggt bleiben m&ouml;chten, um Ihnen unsere Dienste bei einem erneuten Besuch unserer Seite schneller zur Verf&uuml;gung zu stellen.","name":"Notwendig"},"uncategorized":{"notes":"","name":""},"big_data":{"notes":"","name":""},"personalization":{"name":"","notes":""},"engagement":{"name":"","notes":""},"monitoring":{"notes":"","name":""},"affiliates":{"notes":"<ul>\n<li>Beobachtung der Website-Nutzung und Optimierung der Benutzererfahrung</li>\n<li>Bewertung der erfolgreichsten Marketingkanle</li>\n<li>Analyse aggregierter Daten ber die Nutzung der Website, um unsere Kunden besser zu verstehen. Erstellung zuflliger Identifikatoren, um diese mit Partnern zu teilen.</li>\n</ul>","name":"Analysen"}},"isDefault":"false"},"ja":{"custom_tokens":{"privacy_policy_url":"https://www.lufthansa.com/xx/ja/common/privacy-statement/info","company_logo_url":"","imprint":"","imprint_url":"https://www.lufthansa.com/xx/ja/common/imprint","cookie_policy_url":"https://www.lufthansa.com/xx/en/common/privacy-statement/cookie-policy","notification":"","accept_all":"","confirm_specific":"","choose_all":"","show_more":"","accept_none":"","show_less":""},"isDefault":"false","common_tokens":{"message":" IP  \n<a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy policy - This link will be opened in a new tab\"></a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie policy - This link will be opened in a new tab\"></a>","confirmation_button":"","title":""},"categories":{"engagement":{"notes":"","name":""},"monitoring":{"name":"","notes":""},"big_data":{"name":"","notes":""},"uncategorized":{"notes":"","name":""},"analytics":{"notes":"CookieCookie","name":""},"personalization":{"name":"","notes":""},"affiliates":{"name":"","notes":"<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>"},"search":{"notes":"<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>","name":""},"social":{"name":"","notes":""},"display_ads":{"name":"","notes":"<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>"},"mobile":{"name":"","notes":""},"cdp":{"name":"","notes":""},"misc":{"name":"","notes":""},"crm":{"notes":"","name":""},"cookiematch":{"name":"","notes":""},"email":{"name":"","notes":""}}},"tr":{"custom_tokens":{"cookie_policy_url":"https://www.lufthansa.com/xx/en/common/privacy-statement/cookie-policy","company_logo_url":"","imprint":"Knye","imprint_url":"https://www.lufthansa.com/xx/tr/common/imprint","privacy_policy_url":"https://www.lufthansa.com/xx/tr/common/privacy-statement/info","accept_none":"Kabul etmiyorum","show_less":"Ayarlarm","choose_all":"Tmn kabul ediyorum","show_more":"Ayarlarm","accept_all":"Kabul ediyorum","confirm_specific":"Seimlerimi kaydet","notification":"Bu kategori seildiinde, Analytics ve Kiiselletirme kategorileri de etkinletirilecektir."},"isDefault":"false","common_tokens":{"title":"Gizlilik ayarlar","confirmation_button":"","message":"Uygulamamz ve web sitemizi altrmak iin gerekli  cookie ve benzer teknolojileri kullanrz. Ek cookie bilgileri yalnzca sizin izniniz ile kullanlr. Bunlar cihaznzn zellikleri ve belirli kiisel veriler (IP adresleri, navigasyon kullanm, corafi konum verileri veya benzersiz tanmlayclar) gibi bilgilere erimek, analiz etmek ve depolamak iin kullanrz. Verilerinizin ilenmesi eitli amalara hizmet eder: Analytics cookie, size daha iyi bir evrimii deneyim sunmak ve kampanyalarmzn verimliliini deerlendirmek iin performansmz analiz etmemize olanak salar. Kiiselletirme cookieleri, web sitemizin kullanma dayal teklifler sunmasna ve desteklerle zelletirilmi bir deneyimine erimenizi salar. Son olarak, Reklam cookieleri, sosyal medya ve internet zerinden hedeflenmi reklamlar sunmak iin hedefleme listeleri oluturmak iin verilerinizi ileyen nc taraf irketler tarafndan yerletirilir. Her sayfann alt ksmnda bulunan balanty kullanarak herhangi bir zamanda izninizi serbeste verebilir, reddedebilir veya geri ekebilirsiniz. Katlyorum'a tklayarak cookieleri kullanmamza izin verebilirsiniz. Hangi verilerin topland ve i ortaklarmzla nasl paylald hakknda daha fazla bilgi iin ltfen gizlilik ve erez politikamz okuyun: <a href=\"{{privacy_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Privacy policy - This link will be opened in a new tab\">Gizlilik&nbsp;politikamz</a> <a href=\"{{cookie_policy_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"Cookie policy - This link will be opened in a new tab\">Cookie&nbsp;politikamz</a>","category":"https://www.lufthansa.com/xx/en/cookie-policy"},"categories":{"uncategorized":{"notes":"","name":""},"big_data":{"name":"","notes":""},"analytics":{"notes":"Bu internet sitesinin temel ilevlerini, yani gvenlikle ilgili ilevlerini, altrmak iin bu erezler gereklidir. Bu erezlerle, internet sitemizi tekrar ziyaret ettikten sonra hizmetlerimize hzl eriiminizi salamak iin profil oturumunuzun ak kalmasn isteyip istemediinizi de belirleyebilirsiniz.\n","name":"Gerekli"},"personalization":{"name":"","notes":""},"engagement":{"notes":"","name":""},"monitoring":{"notes":"","name":""},"affiliates":{"notes":"<ul>\n<li>Web sitesi trafiini izleyerek ve kullanc deneyiminizi iyiletirmek</li>\n<li>Hangi pazarlama kanallarnn daha iyi performans gsterdiini deerlendirmek ve mterilerimizi anlamak iin web sitesinin kullanmyla ilgili toplanan verileri analiz etmek.</li>\n<li>Rastgele tanmlayclar ortaklarla paylalr.</li>\n</ul>","name":"Analiz"},"social":{"name":"","notes":""},"display_ads":{"name":"Kiiselletirme","notes":"<ul>\n<li>nceki ziyaretlerinizin tercihlerini saklayn</li>\n<li>Web sitemizi gelitirmek iin kullanc geri bildirimi toplama</li>\n<li>Size kiiselletirilmi ierik ve teklifler sunmak iin ilgi alanlarnzn deerlendirilmesi</li>\n</ul>"},"search":{"name":"Reklam","notes":"<ul>\n<li>evrimii ve sosyal reklamlar size hitap eder hale getirin</li>\n<li>Belirli mteri gruplarn belirleyerek onlar daha sonra rnlerimize yeniden balanmaya davet edin</li>\n<li>lgi alanlarnz hedeflemek iin nc taraf erezleri araclyla verileri reklamclk ve sosyal a ortaklarmzla paylan</li>\n</ul>"},"cookiematch":{"name":"","notes":""},"email":{"notes":"","name":""},"misc":{"notes":"","name":""},"crm":{"notes":"","name":""},"cdp":{"notes":"","name":""},"mobile":{"name":"","notes":""}}}};utag.gdpr.preferences_prompt.content.css="#consentOverlay {  display: none;}#cm-dial-v211 {  display: none;}#cm-notification {  display: none;  margin-top: 10px;  margin-bottom: 10px;  padding: 10px;  border: 1px solid #ccc;}#cm-notification p {  font-size: 14px;  line-height: 18px;}#cm-headline:focus {  outline: none}.consent-manager a.icon-link {  color: #52627C;  text-decoration: none;  margin: 0px 5px;  font-family: \'LufthansaText\', \'Roboto\', \'Helvetica Neue\', \'Helvetica\', \'Arial\', sans-serif !important;  font-weight: bold;  font-size: 14px;  line-height: 18px;}.consent-manager a.icon-link::before {  content: \"\\2192\";  display: inline-block;  margin: 0 2px 0 0;  padding: 0;  font-family: \'LufthansaText\', \'Roboto\', \'Helvetica Neue\', \'Helvetica\', \'Arial\', sans-serif !important;  font-weight: bold;  font-size: 14px;  line-height: 18px;}.consent-manager h2 {  margin: 0}.consent-manager p,.consent-manager li {  margin: 0px;  font-family: \'LufthansaText\', \'Roboto\', \'Helvetica Neue\', \'Helvetica\', \'Arial\', sans-serif;  font-weight: 300;  font-size: 14px;  line-height: 18px;}.consent-manager .no-link-style {  text-decoration: none;  color: #000;}.consent-manager .greyed-text {  color: #CCCCCC;}.consent-manager h4 {  margin: 0;  font-size: 14px;  line-height: 18px;  font-family: \'LufthansaHead\', \'Roboto\', \'Helvetica Neue\', \'Helvetica\', \'Arial\', sans-serif;  font-weight: 700;}.consent-manager .title {  font-size: 32px;  line-height: 36px;  font-family: \'LufthansaHead\', \'Roboto\', \'Helvetica Neue\', \'Helvetica\', \'Arial\', sans-serif;  font-weight: 700;}.consent-manager-overlay {  position: fixed;  top: 0;  left: 0;  width: 100%;  height: 100vh;  min-height: 100%;  z-index: 999999;  background-color: #555555;  opacity: 0.8;}.consent-manager {  background: #ffffff;  position: fixed;  top: 50px;  left: 50%;  z-index: 9999999;  transform: translate(-50%);  max-height: 90%;  width: 100%;  max-width: 900px;  margin-bottom: 20px;  overflow-y: auto;  overflow-x: hidden;}.consent-manager-inner {  width: 100%;  height: 100%;  overflow-y: auto;}.consent-manager .layout-wrap {  display: flex;  flex-wrap: wrap;  width: 100%;  height: 100%;}.consent-manager .layout-col {  flex-direction: column;}.consent-manager .layout-col.col-main {  width: 100%;  padding: 30px;  background-color: #ffffff;}/*.consent-manager .layout-col.col-right{ width:30%; background-color:#cccccc;}.consent-manager .layout-col.col-left{ width: 100%; background-color:#ffffff; padding: 30px;}.consent-manager .layout-col.col-80 { display: flex; width: 80%;}.consent-manager .layout-col.col-20 { display: flex; width:20%;}.consent-manager .layout-row.fullwidth { width:100%; flex-shrink:0;}.consent-manager .align-center { display:flex; justify-content: center;}*/.consent-manager .layout-row {  display: flex;  flex-direction: row;  margin: 0;  margin-bottom: 10px;  width: 100%;  justify-content: flex-start;  flex-wrap: wrap;}.consent-manager .checkBoxOption {  min-width: 150px;  min-height: 30px;  margin: 10px 0;  /* width:25%; */  text-align: left;}.consent-manager .layout-row .row-item {  flex-grow: 1;}.consent-manager .paddingTop {  padding-top: 10px;}.consent-manager .paddingBottom {  padding-bottom: 10px;}/* Custom Checkbox start*//* Customize the label (the container) */.consent-manager .container {  display: block;  position: relative;  padding-left: 35px;  cursor: pointer;  font-size: 22px;  -webkit-user-select: none;  -moz-user-select: none;  -ms-user-select: none;  user-select: none;}/* Hide the browser\'s default checkbox */.consent-manager .container input {  position: absolute;  opacity: 0;  cursor: pointer;  height: 0;  width: 0;}/* Create a custom checkbox */.consent-manager .checkmark {  position: absolute;  top: 0;  left: 0;  height: 20px;  width: 20px;  background-color: #fff;  border-radius: 4px;  border: 2px solid #666;}/* On mouse-over, add a grey background color */.consent-manager .container:hover input~.checkmark {  border-color: #414e63;}.consent-manager .container.greyed-text:hover {  border-color: #CCCCCC;  cursor: auto;}/* When the checkbox is checked, add a blue background */.consent-manager .container input:checked~.checkmark {  background-color: #05164D;  border-color: #05164D;}.consent-manager .container.greyed-text input:checked~.checkmark {  background-color: #CCCCCC;  border-color: #CCCCCC;}.consent-manager .container input:checked~.checkmark:hover {  background-color: #414e63;  border-color: #414e63;}.consent-manager .container.greyed-text input:checked~.checkmark:hover {  background-color: #cccccc;  border-color: #cccccc;}/* Create the checkmark/indicator (hidden when not checked) */.consent-manager .checkmark:after {  content: \"\";  position: absolute;  display: none;}/* Show the checkmark when checked */.consent-manager .container input:checked~.checkmark:after {  display: block;}/* Style the checkmark/indicator */.consent-manager .container .checkmark:after {  left: 5px;  top: 2px;  width: 5px;  height: 10px;  border: solid #ffffff;  border-width: 0 2px 2px 0;  -webkit-transform: rotate(45deg);  -ms-transform: rotate(45deg);  transform: rotate(45deg);  box-sizing: inherit;}.consent-manager .checkBoxOption label {  font-family: \'LufthansaText\', sans-serif;  font-weight: 400;  font-size: 18px;  line-height: 20px;}.consent-manager .checkBoxOption label.greyed-text {  color: #cccccc;}.consent-manager .checkBoxOption label:hover {  color: #414E63;}.consent-manager .checkBoxOption label.greyed-text:hover {  color: #cccccc;}.consent-manager .checkBoxOption Input {  margin: 0px;}/* custom checkbox end */.consent-manager .checkBoxDesc {  margin-top: 5px;  padding-left: 36px;  display: block;  font-size: 16px;  line-height: 20px;  margin-bottom: 30px;}.consent-manager .cc-row-buttons {  display: flex;  flex-direction: row;  flex-wrap: wrap;  justify-content: flex-end;}.consent-manager .cc-row-buttons.collapsed {  display: none;}.consent-manager button.button-primary {  cursor: pointer;  text-align: center;  border-radius: 4px;  background-color: #ffad00;  border: 1px solid #ffad00;  color: #05164D;  height: 50px;  min-height: 50px;  line-height: 24px;  padding: 11px 30px;  font-size: 18px;  font-family: \'LufthansaText\', \'Roboto\', \'Helvetica Neue\', \'Helvetica\', \'Arial\', sans-serif;  font-weight: 700;  transition: 200ms ease all;}.consent-manager button.button-primary:hover {  background-color: #ffbd32;}.consent-manager button.button-secondary {  cursor: pointer;  text-align: center;  border-radius: 4px;  background-color: #fff;  border: 2px solid #05164D;  color: #05164D;  height: 50px;  min-height: 50px;  line-height: 24px;  padding: 11px 30px;  font-size: 18px;  font-family: \'LufthansaText\', \'Roboto\', \'Helvetica Neue\', \'Helvetica\', \'Arial\', sans-serif;  font-weight: 700;  margin-right: 30px;  transition: 200ms ease all;}.consent-manager button.button-secondary:hover {  background-color: #05164D;  color: #fff;  ;}.consent-manager #cm-acceptNone {  border: none;  color: #52627C;  outline: none;  padding: 11px 0px;  text-align: left;}.consent-manager #cm-acceptNone:hover {  background-color: transparent;  color: #000036;}/* TOGGLE CSS */.consent-manager .togglebar {  margin-top: 20px;  overflow: hidden;  max-height: 1800px;  /* -webkit-transition: max-height 0.3s; -moz-transition: max-height 0.3s; -ms-transition: max-height 0.3s; -o-transition: max-height 0.3s; transition: max-height 0.3s; */  text-align: right;}.consent-manager .togglebar.collapsed {  max-height: 0;}.consent-manager .consent-toggle {  line-height: 18px;  font-size: 14px;  font-family: \'LufthansaText\', \'Roboto\', \'Helvetica Neue\', \'Helvetica\', \'Arial\', sans-serif;  border: none;  font-weight: 600;  background-color: #fff;  color: #52627C;  cursor: pointer;  outline: none;}.consent-manager .toggleIcon {  display: inline-block;  transform: rotate(180deg);  margin-left: 2px;  position: relative;  width: 12px;  height: 20px;  transition: 200ms ease all;  float: right;  cursor:pointer;}.consent-manager .toggleIcon::before {  content: \"\";  border-left: 2px solid #52627C;  border-bottom: 2px solid #52627C;  width: 8px;  height: 8px;  float: left;  transform: rotate(-45deg);  margin-top: 2px;}.consent-manager .toggleIcon.collapsed {  transform: none !important;}.consent-manager .consent-toggle:hover {}.consent-manager .descContent {  list-style-type: none;  padding: 0 0 20px 0;  margin: 0;  text-align: left;}.consent-manager .togglebar li p {  display: block;  line-height: 18px;  padding: 0 0px;  text-decoration: none;  font-size: 14px;  margin-bottom: 12px;}.consent-manager .togglebar li h3 {  margin: 7px 0;}.consent-manager .layout-row-toggle {  display: block;  text-align: right;}/* DEFAULT CSS OVERWRITES */#cm-acceptNone {    padding-left: 1em !important;    padding-right: 1em !important;}#cm-acceptNone:focus,#cm-descToggle:focus {    border: 0 !important;    border-radius: 4px !important;    box-shadow: 0 0 0.6rem 0.1rem #52627c !important;}#cm-acceptAll:focus,#cm-selectAllCheckboxes:focus,#cm-selectSpecific:focus {    outline: none !important;    border-radius: 4px !important;    box-shadow: 0 0 0.6rem 0.1rem #52627c !important;}/* TOGGLE CSS END */@media (max-width: 580px) {  .consent-manager {    overflow-y: scroll;    overflow-x: hidden;    top: 5%;    height: 90%;    width: 90%;    padding-top: 20px;  }  .consent-manager-inner {    height: calc(100% - 120px);    overflow-y: scroll;  }  .consent-manager .title {    font-size: 22px;    line-height: 26px;  }  .consent-manager .checkboxOption {    width: 100%;    margin-bottom: 0px;  }  .consent-manager .checkBoxOption label {    font-family: \'LufthansaText\', sans-serif;    font-weight: 400;    font-size: 14px;    line-height: 18px;  }  .consent-manager button.button-primary {    width: 100%;    min-height: 30px;    height: 30px;    font-size: 14px;    line-height: 18px;    margin-bottom: 20px;    padding: 5px 20px;    margin-right: 0px;  }  .consent-manager button.button-secondary {    width: 100%;    min-height: 30px;    height: 30px;    font-size: 14px;    line-height: 18px;    margin-bottom: 10px;    margin-right: 0px;    padding: 5px 20px;  }  .consent-toggle {    padding-bottom: 10px;  }  .consent-manager .layout-row-toggle {    height: 30px;  }  .consent-manager .descContent {    padding: 0;  }  .consent-manager .paddingTop {    flex-flow: column;  }  .consent-manager .layout-col.col-main {    padding: 0 20px;  }  .consent-manager .cc-row-buttons {    width: calc(100% - 40px);  }  .consent-manager .buttonView {    position: fixed;    bottom: 0;    left: 0;    width: 100%;    display: flex;    justify-content: center;  }}@media (max-width: 767px) {  .consent-manager {    position: fixed;    background: #ffffff;    top: 5%;    left: 50%;    z-index: 9999999;    transform: translate(-50%);    height: 90%;    width: 90%;    max-width: 767px;    overflow-y: scroll;    overflow-x: hidden;    padding-top: 20px;  }  .consent-manager .title {    font-size: 22px;    line-height: 26px;  }  .consent-manager .checkBoxOption label {    font-family: \'LufthansaText\', sans-serif;    font-weight: 400;    font-size: 14px;    line-height: 18px;  }  /* .consent-manager .layout-col.col-left {   padding: 0 20px;   order:1; } .consent-manager .layout-col.col-right {   width:100%;   order:0;   padding:10px 0 10px 0; } */  .consent-manager button {    /* flex-grow: 1; */  }}";utag.gdpr.preferences_prompt.content.html="<div class=\"consent-manager-overlay\" id=\"consentOverlay\"></div><div class=\"consent-manager\" id=\"cm-dial-v211\" tabindex=\"-1\" role=\"dialog\">    <!-- this is #__tealiumGDPRcpPrefs -->    <div class=\"consent-manager-inner\" id=\"cm_v230\">        <div class=\"layout-wrap\">            <div class=\"layout-col col-main\">                <div class=\"layout-row\">                    <div class=\"row-item\">                        <h2 class=\"title\" id=\"cm-headline\" tabindex=\"0\">{{title}}</h2>                    </div>                </div>                <div class=\"layout-row\">                    <p>{{message}}</p>                </div>                <div class=\"layout-row paddingTop\">                    <div class=\"row-item\">                        <a href=\"{{imprint_url}}\" class=\"icon-link\" target=\"_blank\" aria-label=\"{{imprint}} - This link will be opened in a new tab\">{{imprint}}</a>                    </div>                    <div class=\"row-item\" style=\"text-align: right;\">                        <button id=\"cm-descToggle\" aria-expanded=\"false\" class=\"consent-toggle collapsed\" tabindex=\"0\" aria-controls=\"cm-consentDesc\">{{show_more}}</button><i class=\" toggleIcon collapsed\" id=\"cm-descToggleIcon\"></i>                    </div>                </div>                <div class=\"layout-row-toggle\">                    <div id=\"startDesc\"></div>                    <!--<button id=\"cm-descToggle\" aria-expanded=\"false\" class=\"consent-toggle collapsed\" tabindex=\"0\" aria-controls=\"cm-consentDesc\">{{show_more}}</button><i class=\" toggleIcon collapsed\" id=\"cm-descToggleIcon\"></i>-->                    <div id=\"cm-consentDesc\" class=\"togglebar collapsed\" aria-live=\"polite\" tabindex=\"-1\">                        <div class=\"checkBoxOption\" style=\"display:none;\">                            <label id=\"ck_1_label\" class=\"container greyed-text\">{{category_analytics_title}}                                <input type=\"checkbox\" name=\"necessary\" for=\"ck_1\" id=\"ck_1\" class=\"cmCat-checkboxes\" checked disabled tabindex=\"-1\">                                <span class=\"checkmark\" role=\"checkbox\" id=\"checkmark_ck_1\" tabindex=\"0\" aria-checked=\"true\" aria-labelledby=\"ck_1_label\" disabled></span>                            </label>                            <p>{{category_analytics_description}}</p>                        </div>                        <div class=\"checkBoxOption\">                            <label id=\"ck_2_label\" class=\"container\">{{category_affiliates_title}}                                <input type=\"checkbox\" name=\"statistics\" for=\"ck_2\" id=\"ck_2\" class=\"cmCat-checkboxes\" tabindex=\"-1\">                                <span class=\"checkmark\" role=\"checkbox\" id=\"checkmark_ck_2\" tabindex=\"0\" aria-checked=\"false\" aria-labelledby=\"ck_2_label\"></span>                            </label>                            <p>{{category_affiliates_description}}</p>                        </div>                        <div class=\"checkBoxOption\">                            <label id=\"ck_3_label\" class=\"container\">{{category_display_ads_title}}                                <input type=\"checkbox\" name=\"comfort\" for=\"ck_3\" id=\"ck_3\" class=\"cmCat-checkboxes\" tabindex=\"-1\">                                <span class=\"checkmark\" role=\"checkbox\" id=\"checkmark_ck_3\" tabindex=\"0\" aria-checked=\"false\" aria-labelledby=\"ck_3_label\"></span>                            </label>                            <p>{{category_display_ads_description}}</p>                        </div>                        <div class=\"checkBoxOption\">                            <label id=\"ck_4_label\" class=\"container\">{{category_search_title}}                                <input type=\"checkbox\" name=\"marketing\" for=\"ck_4\" id=\"ck_4\" class=\"cmCat-checkboxes\" tabindex=\"-1\">                                <span class=\"checkmark\" role=\"checkbox\" id=\"checkmark_ck_4\" tabindex=\"0\" aria-checked=\"false\" aria-labelledby=\"ck_4_label\" aria-controls=\"notification\"></span>                            </label>                            <div class=\"\" id=\"cm-notification\" aria-live=\"polite\">                                <div class=\"row-item\">                                    <p>{{notification}}</p>                                </div>                            </div>                            <p>{{category_search_description}}</p>                        </div>                        <div class=\"buttonView\">                            <div class=\"cc-row-buttons collapsed\" id=\"cm-allSelectBtns\">                                <!-- id=\"preferences_prompt_submit\" -->                                <button id=\"cm-selectSpecific\" class=\"button-secondary\" tabindex=\"0\">{{confirm_specific}}</button>                                <button id=\"cm-selectAllCheckboxes\" class=\"button-primary\" tabindex=\"0\">{{choose_all}}</button>                            </div>                        </div>                    </div>                </div>                <div class=\"buttonView\">                    <div class=\"cc-row-buttons\" id=\"cm-allNoneBtns\">                        <!-- id=\"preferences_prompt_submit\" -->                        <button id=\"cm-acceptNone\" class=\"button-secondary\" tabindex=\"0\">{{accept_none}}</button>                        <button id=\"cm-acceptAll\" class=\"button-primary\" tabindex=\"0\">{{accept_all}}</button>                    </div>                </div>                <!--                <div class=\"layout-row paddingTop\">                    <div class=\"row-item\">                        <a href=\"{{imprint_url}}\" class=\"icon-link\" target=\"_blank\">{{imprint}}</a>                    </div>                </div>                -->            </div>        </div>    </div></div>";utag.gdpr.preferences_prompt.content.js="(function preferences_prompt(){var reg_match=/\\d+$/;var state_function_defined=false;var body=document.body;var html=document.documentElement;var height=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight);var clickEventIDs={ck_1:document.getElementById(\"ck_1\"),ck_2:document.getElementById(\"ck_2\"),ck_3:document.getElementById(\"ck_3\"),ck_4:document.getElementById(\"ck_4\"),checkmark_ck_1:document.getElementById(\"checkmark_ck_1\"),checkmark_ck_2:document.getElementById(\"checkmark_ck_2\"),checkmark_ck_3:document.getElementById(\"checkmark_ck_3\"),checkmark_ck_4:document.getElementById(\"checkmark_ck_4\"),selectAllCheckboxes:document.getElementById(\"cm-selectAllCheckboxes\"),selectSpecific:document.getElementById(\"cm-selectSpecific\"),descToggle:document.getElementById(\"cm-descToggle\"),descToggleIcon:document.getElementById(\"cm-descToggleIcon\"),acceptAll:document.getElementById(\"cm-acceptAll\"),acceptNone:document.getElementById(\"cm-acceptNone\")};clickEventIDs.ck_2.addEventListener(\"change\",function(){selectSpecific(2)},false);clickEventIDs.ck_3.addEventListener(\"change\",function(){selectSpecific(3)},false);clickEventIDs.ck_4.addEventListener(\"change\",function(){selectSpecific(4)},false);clickEventIDs.checkmark_ck_2.addEventListener(\"keydown\",function(e){spaceCheck(2,e)},false);clickEventIDs.checkmark_ck_3.addEventListener(\"keydown\",function(e){spaceCheck(3,e)},false);clickEventIDs.checkmark_ck_4.addEventListener(\"keydown\",function(e){spaceCheck(4,e)},false);clickEventIDs.selectAllCheckboxes.addEventListener(\"click\",function(){selectAllCheckboxes()},false);clickEventIDs.selectSpecific.addEventListener(\"click\",function(){confirmSpecific()},false);clickEventIDs.descToggle.addEventListener(\"click\",function(){consentDescToggle()},false);clickEventIDs.descToggleIcon.addEventListener(\"click\",function(){consentDescToggle()},false);clickEventIDs.acceptAll.addEventListener(\"click\",function(){selectAllCheckboxes();},false);clickEventIDs.acceptNone.addEventListener(\"click\",function(){selectNone();},false);showConsentDialog();function changeToggleText(){var toggleButtonOpen='{{show_more}}';var toggleButtonClose='{{show_less}}';if(clickEventIDs.descToggle.classList.contains('collapsed')){clickEventIDs.descToggle.innerHTML=toggleButtonOpen;clickEventIDs.descToggle.setAttribute('aria-expanded','false');clickEventIDs.checkmark_ck_2.tabIndex=-1;clickEventIDs.checkmark_ck_3.tabIndex=-1;clickEventIDs.checkmark_ck_4.tabIndex=-1;}else{clickEventIDs.descToggle.innerHTML=toggleButtonClose;clickEventIDs.descToggle.setAttribute('aria-expanded','true');clickEventIDs.checkmark_ck_2.tabIndex=0;clickEventIDs.checkmark_ck_3.tabIndex=0;clickEventIDs.checkmark_ck_4.tabIndex=0;}}function consentDescToggle(){var consentBtns=document.getElementById('cm-allNoneBtns');var consentBtnsDesc=document.getElementById('cm-allSelectBtns');var consentDesc=document.getElementById('cm-consentDesc');var descToggleIcon=document.getElementById('cm-descToggleIcon');consentBtns.classList.toggle('collapsed');consentBtnsDesc.classList.toggle('collapsed');consentDesc.classList.toggle('collapsed');descToggleIcon.classList.toggle('collapsed');clickEventIDs.descToggle.classList.toggle('collapsed');changeToggleText();}function modalFocus(){var firstFocusElement=document.getElementById(\"cm-headline\");var lastFocusElement=document.getElementById(\"cm-selectAllCheckboxes\");firstFocusElement.focus();var KEYCODE_TAB=9;var KEYCODE_SHIFT=16;document.addEventListener('keydown',function(e){if(document.getElementById('__tealiumGDPRcpPrefs')){var isTabPressed=(e.key==='Tab'||e.keyCode===KEYCODE_TAB);var isShiftPressed=(e.shiftKey||e.key==='Shift'||e.keyCode===KEYCODE_SHIFT);if(!isTabPressed){return;}if(isShiftPressed){if(document.activeElement===firstFocusElement){lastFocusElement.focus();e.preventDefault();}}else{if(document.activeElement===lastFocusElement){firstFocusElement.focus();e.preventDefault();}}}});}function spaceCheck(categoryNum,e){var KEYCODE_SPACE=32;var checkboxes=document.getElementsByClassName('cmCat-checkboxes');var isSpacePressed=(e.keyCode===KEYCODE_SPACE);if(isSpacePressed){if(!checkboxes[categoryNum-1].checked){setCheckbox(categoryNum-1,checkboxes);}else{unsetCheckbox(categoryNum-1,checkboxes);}selectSpecific(categoryNum);}}function sendGA4_View_Event(action,clickedButton){var consent_cookie=window.utag.gdpr.getCookieValues()||{};var consent_value=\"(not set)\";if(consent_cookie&&consent_cookie.consent=='true'){consent_value=\"s\".concat(consent_cookie.c2).concat('|c').concat(consent_cookie.c3).concat('|p').concat(consent_cookie.c4);}function fireEvent(){try{let tmp=Object.assign({},utag_data);tmp.tealium_event='consent manager';tmp.ga_eventCategory='consent manager';tmp.ga_eventAction=(clickedButton?action.concat(' ').concat(clickedButton):action);tmp.ga_eventLabel=consent_value;delete tmp['error.errorInfo.elementName'];delete tmp['error.errorInfo.type'];delete tmp['error.errorInfo.errorCode'];delete tmp['error.errorInfo.message'];tmp.ga_nonInteraction=true;utag.link(tmp);}catch(e){}}function waitForGAPageview(cnt){var gtag_flag=false,i_count=0;if(!cnt){cnt=1;}if(typeof dataLayer!==\"undefined\"){for(i_count=0;i_count<dataLayer.length;i_count++){if(dataLayer[i_count][0]==\"event\"&&dataLayer[i_count][1]==\"page_view\"){gtag_flag=true;break;}}}if(gtag_flag){fireEvent();}else if(cnt<40){setTimeout(function(){waitForGAPageview(++cnt)},100);}}if(document.readyState!=='complete'){if(!state_function_defined){document.addEventListener('readystatechange',function(){if(document.readyState==='complete')waitForGAPageview();});state_function_defined=true;}}else{waitForGAPageview();}}function sendEvent(action,clickedButton){var consent_cookie=window.utag.gdpr.getCookieValues()||{};var consent_value=\"(not set)\";if(consent_cookie&&consent_cookie.consent=='true'){consent_value=\"s\".concat(consent_cookie.c2).concat('|c').concat(consent_cookie.c3).concat('|p').concat(consent_cookie.c4);}if(action==='view'){window.GA_ConsentManagerViewTS=Date.now();}else if(action==='submit'){window.GA_ConsentManagerSubmitTS=Date.now();if(window.GA_ConsentManagerSubmitTS&&window.GA_ConsentManagerViewTS){window.GA_ConsentManagerTSDiff=window.GA_ConsentManagerSubmitTS-window.GA_ConsentManagerViewTS;}}function fireEvent(){try{let tmp=Object.assign({},utag_data);tmp.tealium_event='consent manager';tmp.ga_eventCategory='consent manager';tmp.ga_eventAction=(clickedButton?action.concat(' ').concat(clickedButton):action);tmp.ga_eventLabel=consent_value;delete tmp['error.errorInfo.elementName'];delete tmp['error.errorInfo.type'];delete tmp['error.errorInfo.errorCode'];delete tmp['error.errorInfo.message'];tmp.ga_nonInteraction=true;utag.link(tmp);}catch(e){}}function waitForGAPageview(cnt){if(!cnt){cnt=1;}if(window.ga&&window.ga.getAll&&window.ga.getAll()[0]&&window.ga.getAll()[0].model&&window.ga.getAll()[0].model.data&&window.ga.getAll()[0].model.data.ea&&window.ga.getAll()[0].model.data.ea[\":_s\"]>0){fireEvent();}else if(cnt<50){if(window.ga&&window.ga.getAll&&window.ga.getAll()[0]&&window.ga.getAll()[0].model&&window.ga.getAll()[0].model.data&&window.ga.getAll()[0].model.data.ea&&typeof window.ga.getAll()[0].model.data.ea[':_s']==='undefined'){cnt=99;}else{setTimeout(function(){waitForGAPageview(++cnt)},1000);}}}if(document.readyState!=='complete'){if(!state_function_defined){document.addEventListener('readystatechange',function(){if(document.readyState==='complete')waitForGAPageview();});state_function_defined=true;}}else{waitForGAPageview();}}function setCheckbox(i,checkboxArray){checkboxArray[i].checked=true;var checkmark=document.getElementById('checkmark_'+checkboxArray[i].getAttribute('id'));checkmark.setAttribute('aria-checked','true');}function unsetCheckbox(i,checkboxArray){checkboxArray[i].checked=false;var checkmark=document.getElementById('checkmark_'+checkboxArray[i].getAttribute('id'));checkmark.setAttribute('aria-checked','false');}function initCheckboxes(){var consentState=utag.gdpr.getConsentState();var checkboxes=document.getElementsByClassName('cmCat-checkboxes');if(typeof consentState===\"number\"){for(i=0;i<4;i++){checkboxes[i].checked=(consentState===1);}}else{for(i=0;i<4;i++){if(consentState[i].ct===\"1\"){setCheckbox(i,checkboxes);}else{unsetCheckbox(i,checkboxes);}}}setCheckbox(0,checkboxes);}function confirmSpecific(){var checkboxes=document.getElementsByClassName('cmCat-checkboxes');try{closeConsentDialog(checkboxes,'selection');sendGA4_View_Event(\"submit_selection\",\"\");}catch(error){console.log(error);}}function showConsentDialog(){var consentOverlay=document.getElementById(\"consentOverlay\");consentOverlay.style.display=\"block\";consentOverlay.style.height=height+\"px\";var consentDialog=document.getElementById(\"cm-dial-v211\");consentDialog.style.display=\"block\";clickEventIDs.selectAllCheckboxes.style.display=\"block\";clickEventIDs.selectSpecific.style.display=\"block\";if(typeof window.utag_cmOpen==='function'){window.utag_cmOpen();}initCheckboxes();sendGA4_View_Event('view');modalFocus();changeToggleText();}function closeConsentDialog(checkboxArray,clickedButton){var action='change';if(utag.gdpr.getConsentState()===0){action='submit';}var cats={};for(var i=0;i<checkboxArray.length;i++){var obj=checkboxArray[i];cats[obj.id.match(reg_match)[0]]=obj.checked?1:0;}cats[1]=1;utag.gdpr.setPreferencesValues(cats);var removeDialog=document.getElementById('__tealiumGDPRcpPrefs');if(removeDialog){removeDialog.parentNode.removeChild(removeDialog);}sendEvent(action,clickedButton);}function selectAllCheckboxes(){var checkboxes=document.getElementsByClassName('cmCat-checkboxes');var recallthis=false;for(var i=0;i<checkboxes.length;i++){if(!checkboxes[i].checked){recallthis=true;setCheckbox(i,checkboxes);break;}}if(recallthis){setTimeout(function(){selectAllCheckboxes();},100);}else{setTimeout(function(){try{closeConsentDialog(checkboxes,'all');sendGA4_View_Event(\"submit_all\",\"\");}catch(error){console.log(error);}},200);}}function selectNone(){var checkboxes=document.getElementsByClassName('cmCat-checkboxes');var recallthis=false;for(var i=0;i<checkboxes.length;i++){if(checkboxes[i].checked){recallthis=true;unsetCheckbox(i,checkboxes);break;}}if(recallthis){setTimeout(function(){selectNone();},100);}else{setTimeout(function(){try{closeConsentDialog(checkboxes,'none');sendGA4_View_Event(\"submit_none\",\"\");}catch(error){console.log(error);}},200);}}function selectSpecific(categoryNum){document.getElementById(\"cm-notification\").style.display=\"none\";var checkboxes=document.getElementsByClassName('cmCat-checkboxes');if(categoryNum==4){for(var i=0;i<categoryNum-1;i++){document.getElementById(\"cm-notification\").style.display=\"block\";setCheckbox(i,checkboxes);}document.getElementById(\"checkmark_ck_4\").focus();}if(categoryNum==3&&checkboxes[3].checked===true){unsetCheckbox(3,checkboxes);}else if(categoryNum==2&&checkboxes[3].checked===true){unsetCheckbox(3,checkboxes);}if(checkboxes[categoryNum-1].checked===false){document.getElementById(\"cm-notification\").style.display=\"none\";}}})();";utag.gdpr.preferences_prompt.defaultLang="en";utag.gdpr.showConsentPreferences=function(_lang){function cloneObject(source,target,depth){if(depth===undefined){depth=1;}else if(depth===-1){utag.DB("Max Clone depth exceeded, using reference");return source;}if(window.JSON){return JSON.parse(JSON.stringify(source));}target=target||{};for(var prop in source){if(!source.hasOwnProperty(prop)){continue;}switch(utag.gdpr.typeOf(source[prop])){case"array":target[prop]=source[prop].slice(0);break;case"object":target[prop]=cloneObject(source[prop],target[prop],--depth);break;default:target[prop]=source[prop];}}return target;}try{if(utag.gdpr.preferences_prompt.noShow){return;}var cn=document.getElementById("__tealiumGDPRcpStyle");if(cn){cn.parentNode.removeChild(cn);}var hn=document.getElementById("__tealiumGDPRcpPrefs");if(hn){hn.parentNode.removeChild(hn);}var sn=document.getElementById("__tealiumGDPRcpPrefsScript");if(sn){sn.parentNode.removeChild(sn);}var promptData=cloneObject(utag.gdpr.preferences_prompt);var activeCats=utag.gdpr.getCategories(true);var cats='';var id;for(var i=0;i<activeCats.length;i++){id=utag.gdpr.preferences_prompt.categories[activeCats[i]].id;cats+='<tr><td>{{category_'+activeCats[i]+'_title}}</td><td>{{category_'+activeCats[i]+'_description}}</td><td><input type="checkbox" class="toggle" id="toggle_cat'+id+'"/><label for="toggle_cat'+id+'"> <span class="on">{{yes}}</span> <span class="off">{{no}}</span></label></td></tr>';}promptData.content.html=promptData.content.html.replace('<!--CATEGORIES-->',cats);var dtc=utag.gdpr.getDeTokenizedContent(promptData,_lang);var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style"),mDiv=document.createElement("div"),scr=document.createElement("script"),body=document.body||document.getElementsByTagName("body")[0];style.type="text/css";style.id="__tealiumGDPRcpStyle";if(style.styleSheet){style.styleSheet.cssText=dtc.css;}else{style.appendChild(document.createTextNode(dtc.css));}head.appendChild(style);mDiv.innerHTML=dtc.html;mDiv.id="__tealiumGDPRcpPrefs";body.appendChild(mDiv);scr.language="javascript";scr.type="text/javascript";scr.text="try{"+dtc.js+"} catch(e){utag.DB(e)}";scr.id="__tealiumGDPRcpPrefsScript";head.appendChild(scr);}catch(e){utag.DB(e);}};utag.gdpr.dns=null;utag.track_old=utag.track;utag.track=function(a,b,c,d){if(typeof a=="string")a={event:a,data:b,cfg:{cb:c,uids:d}};if(a.event==="update_consent_cookie"&&b.consent_categories){utag.gdpr.updateConsentCookie(b.consent_categories);}else if(a.event==="set_dns_state"&&typeof b.do_not_sell!=='undefined'){utag.gdpr.dns.setDnsState(b.do_not_sell);}else{if(utag.gdpr.getConsentState()===0){if(!utag.gdpr.noqueue)utag.gdpr.queue.push({event:a.event,data:utag.handler.C(a.data),cfg:utag.handler.C(a.cfg)});}
if(a.cfg.uids){var uids=[];for(var i=0;i<a.cfg.uids.length;i++){if(!utag.gdpr.shouldBlockTag(a.cfg.uids[i])){uids.push(a.cfg.uids[i]);}}
a.cfg.uids=uids;}
return utag.track_old.apply(this,arguments);}};utag.loader.OU_old=utag.loader.OU;utag.loader.OU=function(tid){try{utag.gdpr.applyConsentState();}
catch(e){utag.DB(e);}};if(utag.gdpr.preferences_prompt.single_cookie){window.utag_cfg_ovrd=window.utag_cfg_ovrd||{};utag.loader.SC("utag_main",null,"da");window.utag_cfg_ovrd.nocookie=true;}
if(!utag.gdpr.consent_prompt.isEnabled&&!utag.gdpr.doNotSell.isEnabled&&utag.gdpr.getConsentState()==0){utag.gdpr.setAllCategories(utag.gdpr.preferences_prompt.defaultState,!0);}
class TealiumConsentRegister{constructor(){this.currentDecision=null;this.decisions=[];}
addConsentDecision(decision){if(!decision||(decision.type!=='implicit'&&decision.type!=='explicit')){return;}
if(!this.isNewDecision(this.currentDecision,decision)){return;}
const eventType=this.currentDecision===null?'consent_loaded':'consent_updated';this.currentDecision=decision;this.decisions.push(decision);const event=new CustomEvent(eventType,{detail:{decision:decision}});window.dispatchEvent(event);}
getCurrentDecision(){return this.currentDecision;}
getAllDecisions(){return this.decisions;}
isNewDecision(desc1,desc2){if(!desc1||!desc2||desc1.length!==desc2.length||desc1.type!==desc2.type)return true;for(let i=0;i<desc1.length;i++){if(desc1[i]!==desc2[i]){return true;}}
return false;}}
window.tealiumConsentRegister=window.tealiumConsentRegister||new TealiumConsentRegister();if(typeof utag_cfg_ovrd!='undefined'){for(utag._i in utag.loader.GV(utag_cfg_ovrd))utag.cfg[utag._i]=utag_cfg_ovrd[utag._i]};utag.loader.PINIT=function(a,b,c){utag.DB("Pre-INIT");if(utag.cfg.noload){return;}
try{this.GET();if(utag.handler.RE('view',utag.data,"blr")){utag.handler.LR(utag.data);}}catch(e){utag.DB(e)};a=this.cfg;c=0;for(b in this.GV(a)){if(a[b].block==1||(a[b].load>0&&(typeof a[b].src!='undefined'&&a[b].src!=''))){a[b].block=1;c=1;this.bq[b]=1;}}
if(c==1){for(b in this.GV(a)){if(a[b].block){a[b].id=b;if(a[b].load==4)a[b].load=1;a[b].cb=function(){var d=this.uid;utag.loader.cfg[d].cbf=1;utag.loader.LOAD(d)};this.AS(a[b]);}}}
if(c==0)this.INIT();};utag.loader.INIT=function(a,b,c,d,e){utag.DB('utag.loader.INIT');if(this.ol==1)return-1;else this.ol=1;if(utag.cfg.noview!=true)utag.handler.RE('view',utag.data,"alr");utag.rpt.ts['i']=new Date();d=this.cfgsort;for(a=0;a<d.length;a++){e=d[a];b=this.cfg[e];b.id=e;if(b.block!=1){if(utag.loader.bk[b.id]||((utag.cfg.readywait||utag.cfg.noview)&&b.load==4)){this.f[b.id]=0;utag.loader.LOAD(b.id)}else if(b.wait==1&&utag.loader.rf==0){utag.DB('utag.loader.INIT: waiting '+b.id);this.wq.push(b)
this.f[b.id]=2;}else if(b.load>0){utag.DB('utag.loader.INIT: loading '+b.id);this.lq.push(b);this.AS(b);}}}
if(this.wq.length>0)utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.DB('READY:utag.loader.wq');utag.loader.rf=1;utag.loader.WQ();}});else if(this.lq.length>0)utag.loader.rf=1;else if(this.lq.length==0)utag.loader.END();return 1};utag.loader.EV('','ready',function(a){if(utag.loader.efr!=1){utag.loader.efr=1;try{if(utag.cfg.readywait||utag.cfg.waittimer){utag.loader.EV("","ready",function(){setTimeout(function(){utag.gdpr.promptEnabledSetting();cmExplicitDomReady();cmDNSDomReady();},utag.cfg.waittimer||1);});}else{utag.gdpr.promptEnabledSetting();cmExplicitDomReady();cmDNSDomReady();}function cmExplicitDomReady(){try{if(utag.gdpr.consent_prompt.isEnabled){if(!utag.gdpr.consent_prompt.noShow){if(!utag.gdpr.getConsentState()){utag.gdpr.showExplicitConsent();}}}}catch(e){utag.DB(e);}}function cmDNSDomReady(){try{if(utag.gdpr.doNotSell.isEnabled){if(!utag.gdpr.doNotSell.noShow){if(!utag.gdpr.dns.getDnsState()){utag.gdpr.showDoNotSellBanner();}}}}catch(e){utag.DB(e);}}}catch(e){utag.DB(e);}try{try{if(1){var na_string="(not set)";window.addEventListener("message",(event)=>{if(!event.data||!event.origin||!event.origin.includes('yiluhub'))return;let ec="yilu teaser";let ea=event.data.event?event.data.event:na_string;let el=event.data.productCardOrder?event.data.productCardOrder:na_string;if(ea!=='Load')lhgEvent.fire({},ec,ea,el);});}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};try{try{if(1){window.pagereloadcheck=window.performance.getEntriesByType('navigation').map((nav)=>nav.type).includes('reload');window.spaFlag=false;try{window.utag_first_pv=true;let na_string='(not set)';let upcurrency='(not set)';let upvalue='(not set)';let intialdv='(not set)';function eventTrack(event){var temp={};if(window.teal&&typeof teal.flattenObject==='function'){utag_data=utag_data||{};if(!utag_data["ut.version"]&&window.utag_first_pv){Object.assign(utag_data,utag.data);}
var tempDD=Object.assign({},digitalData);delete tempDD.event;if(tempDD.offer&&tempDD.offer.length>0){for(var i=0;i<tempDD.offer.length;i++){var item=tempDD.offer[i];if(item.offerInfo&&item.offerInfo.offerItem){delete item.offerInfo.offerItem;}}}
temp=Object.assign(utag_data,teal.flattenObject(tempDD));}
window.utag_first_pv=false;for(var i=0;i<event.length;i++){let item=event[i];let ecat=item.category.primaryCategory||na_string;let isServicing=digitalData.page&&(digitalData.page.category.primaryCategory==='Servicing'||digitalData.page.category.primaryCategory==='Refund');let priminvo=digitalData.page&&(digitalData.page.category.primaryCategory==='Refund'&&(digitalData.page.category.subCategory==='Voluntary'||digitalData.page.category.subCategory==='Involuntary'));var servicingFlow=na_string;if(isServicing){if(location.pathname.includes("self-reaccommodation/retrieve")){servicingFlow="Servicing";}else if(location.pathname.includes("self-reaccommodation")){servicingFlow=temp['page.category.primaryCategory']="Invol Rebooking";}else{servicingFlow=temp['page.category.primaryCategory']="Invol Refund";}}
if(priminvo){temp['page.category.primaryCategory']=digitalData.page.category.subCategory+' '+digitalData.page.category.primaryCategory;}
delete temp['filter.element.elementName'];delete temp['filter.element.elementValue'];delete temp['filter.element.elementType'];delete temp['filter.element.userInput'];delete temp['error.errorInfo.detail'];if(ecat==="PageView"){temp.ga_eventCategory="page_view";temp.ga_eventAction=null;utag.view(temp);window.spaFlag=true;}else{let ename=item.eventInfo.eventName||na_string,eattr=item.attributes||[],ekey=item.eventInfo.key||na_string;var eattr_flattened={};for(var j=eattr.length-1;j>=0;j--){var key=eattr[j]['key'];var value=eattr[j]['value'];eattr_flattened[key]=value;}
let ecode=eattr_flattened['code']||na_string,etitle=eattr_flattened['title']||na_string,edetail=eattr_flattened['detail']||na_string,etranslKey=eattr_flattened['translationKey']||na_string,eserviceCode=eattr_flattened['ServiceCode']||eattr_flattened['serviceCode']||'',eserviceCat=eattr_flattened['ServiceCategory']||eattr_flattened['serviceCategory']||'',errorName=eattr_flattened['errorName']||na_string,eservicevalue=eattr_flattened['ServiceValue']||eattr_flattened['serviceValue']||'',ereferenceAttribute=eattr_flattened['referenceAttribute']||na_string,eoriginalCurrency=eattr_flattened['originalCurrency']||na_string,econvertedCurrency=eattr_flattened['convertedCurrency']||na_string,edeselectedCurrency=eattr_flattened['deselectedCurrency']||na_string,efarefamilycode=eattr_flattened['selectedFareFamilyCode']||na_string,efareoutboundFareFamilyCode=eattr_flattened['outboundFareFamilyCode']||na_string,efareinboundFareFamilyCode=eattr_flattened['inboundFareFamilyCode']||na_string,nbdisruptedbounds=eattr_flattened['NbOfDisruptedBounds']||na_string,originalfarefamilycode=eattr_flattened['OriginalFareFamilyCode']||na_string,targetfarefamilycode=eattr_flattened['TargetFareFamilyCode']||na_string,pricedifferenceinpercent=eattr_flattened['PriceDifferenceInPercent']||na_string,numberofpax=eattr_flattened['numberOfPax']||na_string,numberofselectedpax=eattr_flattened['numberOfSelectedPax']||na_string,iscug=eattr_flattened['isCUG']||na_string,hasftelement=eattr_flattened['hasFTelement']||na_string,isdisrupted=eattr_flattened['isSTDisrupted']||na_string,shorttermdisrupted=eattr_flattened['shortTermDisruptedBoundsCount']||na_string,isGracePeriod=eattr_flattened['isGracePeriod']||na_string,intialfaredifferencevalue=eattr_flattened['initialFare']||na_string,Upsellfaredifferencevalue=eattr_flattened['upsellFareDifference']||na_string,upsellFareDifferencecurrency=eattr_flattened['currency']||na_string,sortingMethodValue=eattr_flattened['sortingMethod']||na_string;var elabel=na_string;if(eserviceCode||eserviceCat){elabel=eserviceCode?eserviceCode:eserviceCat;}
temp.ga_eventCategory=ecat;temp.ga_eventAction=ename;temp.ga_eventLabel=elabel;if(ecat==='Error'){temp.ga_eventCategory='error';temp.ga_eventAction=isServicing?ekey:ename;temp.ga_eventLabel=elabel===na_string?errorName:elabel;temp.ga_errorType=ekey;temp.ga_errorCode=ecode;temp.ga_errorMessage=etitle===na_string?etranslKey:etitle;temp.error_counter=1;}
if((ecat==="UserEvent"||ecat==='CustomMetric')&&isServicing){temp.ga_eventLabel=ekey;}
if(ecat==='UserEvent'&&ename==='Late Login'){temp.ga_eventCategory='oneid login';temp.ga_eventAction='click';temp.ga_eventLabel='redirect';}
if(ecat==='UserEvent'&&ename==='Add Filters'){var filterstring="";for(let attr in eattr_flattened){if(eattr_flattened[attr]&&attr!=="PageID"){filterstring+=filterstring.length>0?"_"+attr:attr;}}
temp.ga_eventLabel=filterstring.length>0?filterstring:na_string;}
if(ecat==="CustomMetric"&&ename.includes("Display of redirect to self-reacc link"))
{temp['filter.element.elementName']="Disrupted Bounds";temp['filter.element.elementValue']=nbdisruptedbounds;}
if(ecat==='CustomMetric'&&ename==='Split PNR Refund'){temp['filter.element.elementName']="numberOfPax|numberOfSelectedPax";temp['filter.element.elementValue']=numberofpax+"|"+numberofselectedpax;temp['filter.element.elementType']="GracePeriod";temp['filter.element.userInput']=isGracePeriod;}
if(ecat==='CustomMetric'&&ename==='Split PNR Rebook'){temp['filter.element.elementName']="numberOfPax|numberOfSelectedPax";temp['filter.element.elementValue']=numberofpax+"|"+numberofselectedpax;}
if(ecat==='CustomMetric'&&ename==='ST Disrupted PNR'){if(isdisrupted==="true")
{temp['filter.element.elementName']="STDisrupted PNR";temp['filter.element.elementValue']=shorttermdisrupted;}}
if(ecat==='CustomMetric'&&ename==='CUG Refund'){if(iscug==="true"&&hasftelement==="true")
{temp['filter.element.elementName']="CUG REFUND";temp['filter.element.elementValue']="With FT Element";}
else if(iscug==="true"&&(hasftelement==="false"||hasftelement==="(not set)"))
{temp['filter.element.elementName']="CUG REFUND";temp['filter.element.elementValue']="Without FT Element";}
if(iscug==="false"||iscug==="(not set)")
{temp['filter.element.elementName']="NO CUG REFUND";temp['filter.element.elementValue']="No value";}}
if(ecat==='UserEvent'&&ename&&/Sorting applied on the alternative offers|Event when a sorting is applied/.test(ename)){temp['filter.element.elementName']="sortingMethod";temp['filter.element.elementValue']=sortingMethodValue;}
if(ecat==='UserEvent'&&ename==='Click on Modify Search'){var modifyString="";for(let attr in eattr_flattened){if(eattr_flattened[attr]==='true'){modifyString+=modifyString.length>0?"_"+attr:attr;}}
temp.ga_eventLabel=modifyString.length>0?modifyString:na_string;}
if(ecat==='UserEvent'&&ename==='Multi-currency-pricing Selected'){temp.ga_eventLabel=eoriginalCurrency+'|'+econvertedCurrency;}
if(ecat==='UserEvent'&&ename==='Fallback to Original Currency'){temp.ga_eventLabel=edeselectedCurrency;}
if(ecat==='UserEvent'&&ename.toLowerCase()==='go to next page when selecting a fare family'){temp.ga_eventLabel=efarefamilycode;}
if((ecat==='CustomEvent'&&ename==='LHG Cart Upsell Available')||(ecat==='UserEvent'&&ename==='LHG Cart Upsell Selected')){if(efareinboundFareFamilyCode&&efareoutboundFareFamilyCode){temp.ga_eventLabel=efareoutboundFareFamilyCode+'|'+efareinboundFareFamilyCode;if(efareinboundFareFamilyCode===""||efareinboundFareFamilyCode==="(not set)"){temp.ga_eventLabel=efareoutboundFareFamilyCode;}}}
if((ecat==='CustomMetric'&&ename==='LHG FPP Upsell Available')||(ecat==='CustomMetric'&&ename==='LHG FPP Upsell Not Selected')||(ecat==='CustomMetric'&&ename==='LHG FPP Upsell Selected')){if(originalfarefamilycode&&targetfarefamilycode&&pricedifferenceinpercent){temp.ga_eventLabel=originalfarefamilycode+'|'+targetfarefamilycode+'|'+pricedifferenceinpercent;if(targetfarefamilycode==="")
{targetfarefamilycode="(not set)";}
if(originalfarefamilycode==="")
{originalfarefamilycode="(not set)";}
if(pricedifferenceinpercent==="")
{pricedifferenceinpercent="(not set)";}
if(targetfarefamilycode==="(not set)"&&originalfarefamilycode==="(not set)"&&pricedifferenceinpercent!="(not set)")
{temp.ga_eventLabel=pricedifferenceinpercent;}
if(targetfarefamilycode!="(not set)"&&originalfarefamilycode==="(not set)"&&pricedifferenceinpercent==="(not set)")
{temp.ga_eventLabel=targetfarefamilycode;}
if(targetfarefamilycode==="(not set)"&&originalfarefamilycode!="(not set)"&&pricedifferenceinpercent==="(not set)")
{temp.ga_eventLabel=originalfarefamilycode;}
if(targetfarefamilycode!="(not set)"&&originalfarefamilycode!="(not set)"&&pricedifferenceinpercent==="(not set)")
{temp.ga_eventLabel=originalfarefamilycode+'|'+targetfarefamilycode;}
if(targetfarefamilycode==="(not set)"&&originalfarefamilycode!="(not set)"&&pricedifferenceinpercent!="(not set)")
{temp.ga_eventLabel=originalfarefamilycode+'|'+pricedifferenceinpercent;}
if(targetfarefamilycode!="(not set)"&&originalfarefamilycode==="(not set)"&&pricedifferenceinpercent!="(not set)")
{temp.ga_eventLabel=targetfarefamilycode+'|'+pricedifferenceinpercent;}}}
if(ecat==="CustomEvent"&&ename==="Initial Fare")
{intialdv=intialfaredifferencevalue;}
if(ecat==="CustomEvent"&&ename==="Upsell Fare Difference")
{upvalue=Upsellfaredifferencevalue;upcurrency=upsellFareDifferencecurrency;temp.ga_eventLabel=intialdv+"|"+upvalue+"|"+upcurrency;console.log("GA Event Label:",temp.ga_eventLabel);}
if(ecat==='UserEvent'&&ename.toLowerCase()==='click link to issuing tenant'){let nabool=false;let newTenant=item.newTenant||na_string;let isDisrupted=item.isDisrupted||nabool;if(isDisrupted===false){temp.ga_eventLabel=newTenant+"_Vol_Rebooking";}else if(isDisrupted===true){temp.ga_eventLabel=newTenant+"_InVol_Rebooking";}}
if(eserviceCode==='CO2NEUTRALISATION'||eserviceCode==='CO2COMPENSATION'){temp.ga_eventLabel=eserviceCode+(eservicevalue?'_'+eservicevalue:"");}
if(ename.toLowerCase()==="user blocked by antibot"){temp.ga_eventLabel=ereferenceAttribute;}
if(ecat==="Warning"){temp.ga_eventLabel=ecode+'_'+etitle.toLowerCase();temp.ga_errorType=ekey;temp.ga_errorCode=ecode;temp.ga_errorMessage=etitle===na_string?etranslKey:etitle;temp.error_counter=1;}
if(temp['dom.pathname']&&temp['dom.pathname'].indexOf("booking")!=-1){if(ename=="Upsell Booking Flow"){}else if(ename=="Multi-currency-pricing Available"){}else if(ename=="nonstop flight available"){}else if(ename=="TTI (Time to Interactive)"){}
else{utag.link(temp);}}
else{utag.link(temp);}}}}
if(window.digitalData&&digitalData.event){var events=digitalData.event;var originalPush=events.push;events.push=function(){originalPush.apply(this,arguments);eventTrack(arguments);};}}catch(e){utag.DB('b2 events processing - '+e);gtag('event','crash',{'ga_eventCategory':'debug','ga_eventLabel':'b2 events processing - '+e});}}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};try{try{if(1){(function(){try{var items=document.querySelectorAll("a[data-identifier]");if(items){for(var i=0;i<items.length;i++){var itm=items[i];if(itm){itm.addEventListener("click",function(itm){lhgEvent.fire({'action_type':'b2t'+' '+this.dataset.identifier},"dwm","click",this.dataset.identifier);},true);}}}}catch(ex){}
try{document.addEventListener('click',function(e){if(e.target.shadowRoot){var path=event.composedPath();for(let element of path){if(element.hasAttribute&&element.hasAttribute('data-identifier-track')){const trackElement=e.target.closest('[data-identifier-track]');var dataIdentifierTrack="";var eventproduct=null;var eventParam="";if(trackElement&&trackElement.dataset&&trackElement.dataset.identifierTrack){dataIdentifierTrack=trackElement.dataset.identifierTrack;}else{dataIdentifierTrack=element.getAttribute('data-identifier-track');}
if(dataIdentifierTrack!==""){if(dataIdentifierTrack.indexOf("/")!=-1){eventParam=dataIdentifierTrack.split("/").pop().split("_");eventproduct=dataIdentifierTrack.split("/")[0]==""?null:dataIdentifierTrack.split("/")[0];}else{eventParam=dataIdentifierTrack.split("_");}}
if(eventParam.length===3){lhgEvent.fire({'action_type':'b2t'+' '+eventParam[2].replace(/-/g," "),'product':eventproduct},eventParam[0].replace(/-/g," "),eventParam[1].replace(/-/g," "),eventParam[2].replace(/-/g," "),null,dataIdentifierTrack);}
break;}}}else{if(!event.target.closest(".modal-calendar")){if(event.srcElement.closest("[data-identifier-track]")){const trackElement_new=event.srcElement.closest("[data-identifier-track]");var dataIdentifierTrack="";var eventproduct=null;var eventParam="";if(trackElement_new){dataIdentifierTrack=trackElement_new.getAttribute("data-identifier-track");}
if(dataIdentifierTrack!==""){if(dataIdentifierTrack.indexOf("/")!=-1){var eventParam=dataIdentifierTrack.split("/").pop().split("_");eventproduct=dataIdentifierTrack.split("/")[0]==""?null:dataIdentifierTrack.split("/")[0];}else{var eventParam=dataIdentifierTrack.split("_");}}
if(eventParam.length===3){lhgEvent.fire({'action_type':'b2t'+' '+eventParam[2].replace(/-/g," "),'product':eventproduct},eventParam[0].replace(/-/g," "),eventParam[1].replace(/-/g," "),eventParam[2].replace(/-/g," "),null,dataIdentifierTrack);}}}}});}catch(ex){}
try{document.addEventListener('mousedown',function(event){try{if(event.target.closest(".modal-calendar")){if(event.srcElement.closest("[data-identifier-track]")){const trackElement_mousedown=event.srcElement.closest("[data-identifier-track]");var dataIdentifierTrack="";var eventproduct=null;var eventParam="";if(trackElement_mousedown){dataIdentifierTrack=trackElement_mousedown.getAttribute("data-identifier-track");}
if(dataIdentifierTrack!==""){if(dataIdentifierTrack.indexOf("/")!=-1){eventParam=dataIdentifierTrack.split("/").pop().split("_");eventproduct=dataIdentifierTrack.split("/")[0]==""?null:dataIdentifierTrack.split("/")[0];}else{eventParam=dataIdentifierTrack.split("_");}}
if(eventParam.length===3){lhgEvent.fire({'action_type':'b2t'+' '+eventParam[2].replace(/-/g," "),'product':eventproduct},eventParam[0].replace(/-/g," "),eventParam[1].replace(/-/g," "),eventParam[2].replace(/-/g," "),null,dataIdentifierTrack);}}}}catch(e){}});}catch(ex){}})();}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};try{try{if(1){if(typeof utag_data['qp.WT.mc_id']==='string')utag_data.wt_campaign=utag_data['qp.WT.mc_id'];else if(typeof utag_data['qp.wt.mc_id']==='string')utag_data.wt_campaign=utag_data['qp.wt.mc_id'];if(typeof utag_data['qp.utm_campaign']==='string')utag_data.utm_campaign=utag_data['qp.utm_campaign'];if(typeof utag_data['qp.utm_content']==='string')utag_data.utm_content=utag_data['qp.utm_content'];if(typeof utag_data['qp.utm_source']==='string')utag_data.utm_source=utag_data['qp.utm_source'];if(typeof utag_data['qp.utm_medium']==='string')utag_data.utm_medium=utag_data['qp.utm_medium'];if(typeof utag_data['qp.utm_term']==='string')utag_data.utm_term=utag_data['qp.utm_term'];if(typeof utag_data['qp.aaaid']==='string')utag_data.aaaid=utag_data['qp.aaaid'];if(typeof utag_data['qp.ns_campaign']==='string')utag_data.ns_campaign=utag_data['qp.ns_campaign'];if(typeof utag_data['qp.clickID']==='string')utag_data.clickID=utag_data['qp.clickID'];if(typeof utag_data['qp.MSE_LH.clickid']==='string')utag_data.mse_clickid=utag_data['qp.MSE_LH.clickid'];if(typeof utag_data['qp.internalcampaign']==='string')utag_data.intcamp=utag_data['qp.internalcampaign'];if(typeof utag_data['qp.intcamp']==='string')utag_data.intcamp=utag_data['qp.intcamp'];if(typeof utag_data['qp.ses_mark']==='string')utag_data.ses_mark=utag_data['qp.ses_mark'];if(typeof utag_data['qp.gclid']==='string')utag_data.gclid=utag_data['qp.gclid'];if(typeof utag_data['qp.gclsrc']==='string')utag_data.gclsrc=utag_data['qp.gclsrc'];if(typeof(window.dwmwr)!=='undefined'&&window.dwmwr!==''){utag.DB('dwmwr (DomReady):');utag.DB(window.dwmwr);if(!window.dwmwr.includes("utm_campaign=market_redirect")){var erg=/utm_campaign=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.utm_campaign=erg[1];erg=/utm_source=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.utm_source=erg[1];erg=/utm_medium=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.utm_medium=erg[1];erg=/utm_term=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.utm_term=erg[1];}
erg=/aaaid=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.aaaid=erg[1];erg=/ns_campaign=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.ns_campaign=erg[1];erg=/clickID=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.clickID=erg[1];erg=/utm_content=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.utm_content=erg[1];erg=/WT\.mc_id=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.wt_campaign=erg[1];erg=/MSE_LH\.clickid=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.mse_clickid=erg[1];erg=/internalcampaign=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.intcamp=erg[1];erg=/intcamp=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.intcamp=erg[1];erg=/ses_mark=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.ses_mark=erg[1];erg=/gclid=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.gclid=erg[1];erg=/gclsrc=([^&]*)/i.exec(window.dwmwr);if(erg!==null&&erg[1]!=='')utag_data.gclsrc=erg[1];}else{utag.DB('dwmwr NOT found');}
function setCookie(cname,cvalue,exdays){const d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));let expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/";}
if(utag_data['gclid']&&utag_data['gclsrc']&&utag_data['gclsrc']==="gf"){const unixTime=Math.floor(Date.now()/1000);setCookie('_gcl_gf','GCL.'+unixTime+'.'+utag_data['gclid'],90)}}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};try{try{if((utag.data['dom.url'].toString().indexOf('informationen-zum-datenschutz')<0&&utag.data['dom.url'].toString().indexOf('information-on-data-protection')<0&&utag.data['dom.url'].toString().indexOf('informations-concernant-la-protection-des-donnees')<0&&utag.data['dom.url'].toString().indexOf('informazioni-sulla-protezione-dei-dati')<0&&utag.data['dom.url'].toString().indexOf('informacion-sobre-proteccion-de-datos')<0&&utag.data['dom.url'].toString().indexOf('informacio-sobre-proteccio-de-dados')<0&&utag.data['dom.url'].toString().indexOf('informacja-o-zachowaniu-prywatnosci')<0&&utag.data['dom.url'].toString().indexOf('information-privacy-statement')<0&&utag.data['dom.domain'].toString().indexOf('author-prod.dcep.dlh')<0&&utag.data['dom.url'].toString().indexOf('impressum')<0&&utag.data['dom.url'].toString().indexOf('imprint')<0&&utag.data['dom.url'].toString().indexOf('informacion-legal')<0&&utag.data['dom.url'].toString().indexOf('mentions-obligatoires')<0&&utag.data['dom.url'].toString().indexOf('colophon')<0&&utag.data['dom.url'].toString().indexOf('informacje-ogolne-o-wydawcy')<0&&utag.data['dom.url'].toString().indexOf('avisos-legais')<0&&utag.data['dom.url'].toString().indexOf('cookie-policy')<0&&utag.data['dom.url'].toString().indexOf('cookie-richtlinie')<0)){if(typeof utag_data['dom.domain']==='string'&&utag_data['dom.domain'].includes('miles-and-more.com')){var cm_cookie_index=document.cookie.indexOf('CONSENTMGR');if(cm_cookie_index>-1&&cm_cookie_index!==document.cookie.lastIndexOf('CONSENTMGR')){document.cookie='CONSENTMGR=; path=/; domain=.miles-and-more.com; expires='+new Date(0).toUTCString();}}
var lang1=utag_data.language,lang;if(window.digitalData){lang=digitalData.digitalTouchpoint.touchpointInfo.language||utag_data["digitalTouchpoint.touchpointInfo.language"]||'en';}else if((lang1!==undefined)&&(lang1!=='(not set)')){lang=utag_data.language||utag_data['page.pageInfo.language']||'en';}
else if(window.location.search.indexOf('language')){const urlParams=new URLSearchParams(window.location.search);lang=urlParams.get('language');}
if(lang==='gb')lang='en';if(lang==='hk')lang='ka';if(lang==='mi')lang='zh';var consent=utag.gdpr.getConsentState();if(consent===0){utag.gdpr.showConsentPreferences(lang);}}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};try{try{if(utag.data['mmPageID_firstPart']=='ALPI'||utag.data['mmPageID_firstPart']=='PURF'||utag.data['mmPageID_firstPart']=='EPCO'||utag.data['mmPageID_firstPart']=='RBPD'){function submitInlineErrorEvent(errorCode,errorMessage){if(errorCode){if(errorMessage){let tv='error view inline message',ea='view inline message',ec='error',el='error | '+errorCode,cd={};cd['error.errorInfo.elementName']='client';cd['error.errorInfo.type']='client';cd['error.errorInfo.errorCode']=errorCode;cd['error.errorInfo.message']=errorMessage;let tmp=Object.assign({},utag_data);tmp.tealium_event=tv;tmp.ga_eventCategory=ec;tmp.ga_eventAction=ea;tmp.ga_eventLabel=el;tmp.error_counter=1;if(cd){for(let key in cd){if(cd.hasOwnProperty(key)){tmp[key]=cd[key];}}}
utag.link(tmp);}}}
(function(){try{let sesc_purf_error_list_array=[];let mutationsOccured=function(mutations){let errors=document.querySelectorAll('.message-error .link-follow');let tmp_error_list=[];if(errors!=null){for(var e=0;e<errors.length;e++){let err=errors[e];if(err){var err_id=err.id;var err_msg=err.textContent;tmp_error_list.push(err_id);if(!sesc_purf_error_list_array.includes(err_id)){sesc_purf_error_list_array.push(err_id);submitInlineErrorEvent(err_id,err_msg);}}}}
sesc_purf_error_list_array=sesc_purf_error_list_array.filter(function(itm){return tmp_error_list.includes(itm);});};let mutationsOccured_voucher=function(mutations){let errors=document.querySelectorAll('.message-error .text');let tmp_error_list=[];if(errors!=null){for(var e=0;e<errors.length;e++){let err=errors[e];if(err){if(err.id)continue;var err_id="INVALID_VOUCHER";var err_msg=err.textContent;tmp_error_list.push(err_id);if(!sesc_purf_error_list_array.includes(err_id)){sesc_purf_error_list_array.push(err_id);submitInlineErrorEvent(err_id,err_msg);}}}}
sesc_purf_error_list_array=sesc_purf_error_list_array.filter(function(itm){return tmp_error_list.includes(itm);});};window.MutationObserver=window.MutationObserver||{};let is_ie=navigator.userAgent.includes('MSIE');let sesc_mut_errorNodes=document.getElementsByClassName('message-error wdk-errorpanel');if(is_ie){for(var en=0;en<sesc_mut_errorNodes.length;en++){let element=sesc_mut_errorNodes[en];if(element!=null){element.addEventListener("DOMNodeInserted",function(event){mutationsOccured(null);},false);}}
let loginPanel=document.getElementById('panel-login');if(loginPanel){loginPanel.addEventListener("DOMNodeInserted",function(event){mutationsOccured(null);},false);}
let voucherPanel=document.getElementsByClassName("ui-dialog dialog-vou ui-widget ui-widget-content ui-front");if(voucherPanel){for(var j=0;j<voucherPanel.length;j++){if(voucherPanel[j]){voucherPanel[j].addEventListener("DOMNodeInserted",function(event){mutationsOccured_voucher(null);},false);}}}}
else{var sesc_purf_mut_observer=new MutationObserver(mutationsOccured);var sesc_mut_config={attributes:true,childList:true,characterData:true,subtree:true};for(var en=0;en<sesc_mut_errorNodes.length;en++){sesc_purf_mut_observer.observe(sesc_mut_errorNodes[en],sesc_mut_config);}
let loginPanel=document.getElementById('panel-login');if(loginPanel){sesc_purf_mut_observer.observe(loginPanel,sesc_mut_config);}
let voucherPanel=document.getElementsByClassName("ui-dialog dialog-vou ui-widget ui-widget-content ui-front");if(voucherPanel){var sesc_mut_vouch_observer=new MutationObserver(mutationsOccured_voucher);for(var j=0;j<voucherPanel.length;j++){if(voucherPanel[j])sesc_mut_vouch_observer.observe(voucherPanel[j],sesc_mut_config);}}}}
catch(ex){}})();}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};try{if(typeof utag.linkHandler=='undefined'){utag.linkHandler=function(a,b,c,d,e){if(!a)a=window.event;if(a.target)b=a.target;else if(a.srcElement)b=a.srcElement;if(b.nodeType==3)b=b.parentNode;if(typeof b=='undefined'||typeof b.tagName=='undefined')return;c=b.tagName.toLowerCase();if(c=='body')return;if(c!='a'){for(d=0;d<5;d++){if(typeof b!='undefined'&&b.parentNode)b=b.parentNode;c=(b!=null&&b.tagName)?b.tagName.toLowerCase():'';if(c=='a')break;else if(c=='body')return;}}
if(c!='a')return;var lt=b.text?b.text:b.innerText?b.innerText:'';if((lt==''||/^\s+$/.test(lt))&&typeof b.innerHTML!='undefined'){lt=b.innerHTML.toLowerCase();if(lt.indexOf('<img ')>-1){d=lt.indexOf('alt="');if(d>-1){e=lt.indexOf('"',d+5);lt=lt.substring(d+5,e);}else{d=lt.indexOf('src="');if(d>-1){e=lt.indexOf('"',d+5);lt=lt.substring(d+5,e);}}}}
var hr=b.href,hrnq=(b.href.split('?'))[0];var obj={link_obj:b,link_text:lt,link_url:hrnq,link_type:'exit link',event_name:'link'};c=('exe,zip,wav,mp3,mov,mpg,avi,wmv,doc,pdf,xls').split(',');for(d=0;d<c.length;d++){e=new RegExp(c[d]+'$');if(e.test(hrnq)){obj.link_type='download link';break;}};try{var link=b;if(b.href!==''){window.trackExternalLink=function(url){try{if(url){lhgEvent.fire({},"external link","click external link",url,null,'click external link');}}
catch(ex){utag.DB('DEBUG: following error ext. link extension occured: '+e);gtag('event','crash',{'event_category':'debug','event_label':'ext link -'+e});}};(function(){var int_urls=new RegExp(window.location.host);var http_urls=new RegExp("http(.?)://");if(typeof obj.link_url==='string'){if(obj.link_url.indexOf('travelid.lufthansa.com')>=0){lhgEvent.fire({},"oneid login","click",'redirect');}
else if(!int_urls.test(obj.link_url)&&http_urls.test(obj.link_url)){window.trackExternalLink(obj.link_url);}}})();}}catch(e){};utag.link(obj)}
utag.loader.EV(document,'mousedown',utag.linkHandler);}}catch(e){utag.DB(e)};try{try{if(utag.data['mmPageID_firstPart']=='ITCO'||utag.data['mmPageID_firstPart']=='FOFP'||utag.data['mmPageID_firstPart']=='FFPP'){(function(){try{let messages=[];let eventData={};if(clientSideData.tpi.displayMessages){messages=clientSideData.tpi.displayMessages;for(var i=messages.length-1;i>=0;i--){let code=messages[i].code,text=messages[i].message,type='';if(messages[i].type==="W"){type='warning';}else if(messages[i].type==="E"){type='error';}
eventData.tealium_event=type+' view '+type+' message';eventData.ga_eventCategory=type;eventData.ga_eventAction=' view '+type+' message';eventData.ga_eventLabel=type+' | '+code;console.log(JSON.stringify(eventData));utag.link(eventData);}}}catch(ex){console.log(ex);}})();}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};try{try{if((utag.cond[273])){(function(cssSelector,runOnce,percentVisible,minimumDuration,trackingEvent){var elements;try{elements=document.querySelectorAll(cssSelector);}catch(e){elements=[];if(utag&&utag.DB){utag.DB(e);}else{console.log(e);}}
numTrackedElements=elements.length,refreshIntervalId=0,firedAlways=[],firedOnce=[];var data={"ga_eventCategory":"destination-recommender-visibility","ga_eventAction":"view","iq_event_id":"element_visibility_events_354",};function triggerEvent(){var visibilityData={percent_visible:percentVisible,duration:minimumDuration};utag.ut.merge(visibilityData,data,true);utag.track(trackingEvent,visibilityData);}
function onIntersection(entries){entries.forEach(el=>{if(el.isIntersecting){el.target.dataset.lastViewStarted=el.time;el.target.dataset.visible=true;}else{el.target.dataset.visible=false;el.target.dataset.lastViewStarted=0;el.target.dataset.totalViewTime=0;if(!runOnce){firedAlways.splice(firedAlways.indexOf(data.iq_event_id),1);}}});}
var observer=new IntersectionObserver(onIntersection,{root:null,threshold:percentVisible/100});for(var i=0;i<elements.length;i++){observer.observe(elements[i]);}
function updateTimer(el){var lastStarted=el.dataset.lastViewStarted;var curTime=performance.now();if(lastStarted){var diff=curTime-lastStarted;el.dataset.totalViewTime=parseFloat(el.dataset.totalViewTime||0)+diff;if(el.dataset.totalViewTime>=(minimumDuration*1000)){if(runOnce&&firedOnce.indexOf(data.iq_event_id)===-1){triggerEvent();firedOnce.push(data.iq_event_id);}else if(!runOnce&&firedAlways.indexOf(data.iq_event_id)===-1){triggerEvent();firedAlways.push(data.iq_event_id);}}}
el.dataset.lastViewStarted=curTime;}
function handleRefreshInterval(){for(var i=0;i<elements.length;i++){if(elements[i].dataset.visible==="true"){updateTimer(elements[i]);};}}
refreshIntervalId=window.setInterval(handleRefreshInterval,500);})(".fareteaserdynamic",false,70,5,"link");}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};}})
if(utag.cfg.readywait||utag.cfg.waittimer){utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.loader.rf=1;utag.cfg.readywait=1;utag.DB('READY:utag.cfg.readywait');setTimeout(function(){utag.loader.PINIT()},utag.cfg.waittimer||1);}})}else{utag.loader.PINIT()}}
//tealium universal tag - utag.395 ut4.0.202512221317, Copyright 2025 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};u.ev={"view":1};u.initialized=false;utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.checkForDefaultDecision=function(){var dataLayerArray=window.dataLayer||[];for(var i=dataLayerArray.length-1;i>=0;i--){if(dataLayerArray[i][0]==="consent"&&dataLayerArray[i][1]==="default"){return true;}}
return false;};u.getPreviousDecision=function(){var dataLayerArray=window.dataLayer||[];var extraCommands=["url_passthrough","ads_data_redaction"];var decision={};dataLayerArray.forEach(function(data){if(data[0]==="consent"){decision.consent=decision.consent||data[2];}
extraCommands.forEach(function(command){if(data[0]==="set"&&data[1]===command){decision[command]=decision[command]||data[2];}});});return decision;};u.isDeepEqual=function(object1,object2){function isObject(object){return object!==null&&typeof object==="object";}
var keys1=Object.keys(object1);var keys2=Object.keys(object2);if(keys1.length!==keys2.length)return false;for(var i=0;i<keys1.length;i++){var value1=object1[keys1[i]];var value2=object2[keys1[i]];var areObjects=isObject(value1)&&isObject(value2);if((areObjects&&!u.isDeepEqual(value1,value2))||(!areObjects&&value1!==value2))return false;}
return true;}
u.toBoolean=function(val){val=String(val)||"";return val===true||val.toLowerCase()==="true"||val.toLowerCase()==="on";};u.mapFunc=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.mapFunc(arr,obj[i],item);}else{obj[i]=item;}};u.getConsentValue=function(itemConsent){var googleConsentValues=['granted','denied'];var googleConsentValuesByKey=googleConsentValues.reduce(function(acc,value){acc[value]=value;return acc;},{});if(!u.data.tealium_consent||(!utag.gdpr&&u.data.tealium_consent)){return googleConsentValues.indexOf(itemConsent)===-1?googleConsentValuesByKey.denied:itemConsent;}else if(utag.gdpr&&u.data.tealium_consent){var consentState=utag.gdpr.getConsentState();if(consentState===1){return googleConsentValuesByKey.granted;}
if(consentState===-1||consentState===0){return googleConsentValuesByKey.denied;}
if(Array.isArray(consentState)){var selectedCategories=utag.gdpr.getSelectedCategories();if(googleConsentValues.indexOf(itemConsent)===-1){return selectedCategories.indexOf(itemConsent)===-1?googleConsentValuesByKey.denied:googleConsentValuesByKey.granted;}
return itemConsent;}
return googleConsentValuesByKey.denied;}};u.hasgtagjs=function(){var data_layer_name="dataLayer";window[data_layer_name]=window[data_layer_name]||[];window.gtagRename=window.gtagRename||"gtag";if(utag.ut.gtagScriptRequested||(typeof window[window.gtagRename]==="function"&&typeof window[data_layer_name]==="object")){return true;}
var i,s=document.getElementsByTagName("script");for(i=0;i<s.length;i++){if(s[i].src&&s[i].src.indexOf("gtag/js")>=0&&s[i].id&&s[i].id.indexOf("utag")>-1){return true;}}
if(typeof window[window.gtagRename]!=="function"){window[window.gtagRename]=function(){window[data_layer_name].push(arguments);};var cross_track=u.toBoolean(u.data.cross_domain_flag),cross_track_domains=u.data.cross_domains;if(cross_track&&cross_track_domains!==""){window[window.gtagRename]("set","linker",{domains:cross_track_domains.split(","),accept_incoming:true});}
window[window.gtagRename]("js",new Date());}
return false;};u.loaderCallback=function(){utag.DB('send:395:CALLBACK');u.callback();utag.DB('send:395:CALLBACK:COMPLETE');};u.callback=function(){var thisDecision={consent:{ad_storage:u.data.ad_storage_consent,analytics_storage:u.data.analytics_storage_consent,wait_for_update:u.data.wait_for_update,ad_user_data:u.data.ad_user_data,ad_personalization:u.data.ad_personalization},url_passthrough:u.data.url_passthrough,ads_data_redaction:u.data.ads_data_redaction};if(!u.checkForDefaultDecision()){u.o("set","url_passthrough",thisDecision.url_passthrough);u.o("set","ads_data_redaction",thisDecision.ads_data_redaction);u.o("consent","default",thisDecision.consent);}
var dataLayerArray=window.dataLayer||[];var tevent=utag_data["tealium_event"]||"";var consentDefaultCheck=false;var consentUpdateCheck=false;var newconsentvalue=false;var chkupdatedconsent=false;dataLayerArray.forEach(function(data){if(data[0]==="consent"&&data[1]==="default"){var adStorage=data[2]?.ad_storage||"";var adPersonalization=data[2]?.ad_personalization||"";var adUserData=data[2]?.ad_user_data||"";var analyticsStorage=data[2]?.analytics_storage||"";if(adStorage==="denied"||adPersonalization==="denied"||adUserData==="denied"||analyticsStorage==="denied"){consentDefaultCheck=true;}
if(adStorage==="granted"||adPersonalization==="granted"||adUserData==="granted"||analyticsStorage==="granted"){newconsentvalue=true;}}
if(data[0]==="consent"&&data[1]==="update"){consentUpdateCheck=true;}});if(!u.isDeepEqual(u.getPreviousDecision(),thisDecision)){u.o("set","url_passthrough",thisDecision.url_passthrough);u.o("set","ads_data_redaction",thisDecision.ads_data_redaction);u.o("consent","update",thisDecision.consent);chkupdatedconsent=true;}
if(consentUpdateCheck===false&&consentDefaultCheck===false&&chkupdatedconsent===false)
{u.o("set","url_passthrough",thisDecision.url_passthrough);u.o("set","ads_data_redaction",thisDecision.ads_data_redaction);u.o("consent","update",thisDecision.consent);}
else if(newconsentvalue===true&&chkupdatedconsent===false)
{u.o("set","url_passthrough",thisDecision.url_passthrough);u.o("set","ads_data_redaction",thisDecision.ads_data_redaction);u.o("consent","update",thisDecision.consent);}
u.data.events.forEach(function(eventName){u.sendEvent(eventName);});};u.sendEvent=function(eventName){var eventData={ad_storage:u.data.ad_storage_consent,analytics_storage:u.data.analytics_storage_consent,wait_for_update:u.data.wait_for_update,ad_user_data:u.data.ad_user_data,ad_personalization:u.data.ad_personalization,};utag.ut.merge(eventData,u.data[eventName],1);u.o('consent',eventName,eventData);};u.map={};u.extend=[];u.send=function(utag_event,data_layer){if(u.ev[utag_event]||u.ev.all!==undefined){var a,b,c,d,e,f;a=utag_event;b=data_layer;u.data={base_url:"https://www.googletagmanager.com/gtag/js",tealium_consent:"true",ad_storage_consent:b["google_ad_storage_consent"]||"denied",analytics_storage_consent:b["google_analytics_storage_consent"]||"denied",ads_data_redaction:b["google_ads_data_redaction"]||"true",url_passthrough:b["google_url_passthrough"]||"false",wait_for_update:"",ad_user_data:b["google_ad_user_data_consent"]||"denied",ad_personalization:b["google_ad_personalization_consent"]||"denied",custom:{},events:[]};Object.keys(utag.loader.GV(u.map)).forEach(function(mapping_key){if(data_layer[mapping_key]!==undefined&&data_layer[mapping_key]!==''){var destinations=u.map[mapping_key].split(',');destinations.forEach(function(parameter){u.mapFunc(parameter.split('.'),u.data,data_layer[mapping_key]);});}else{var event_destinations=mapping_key.split(':');if(event_destinations.length===2&&String(data_layer[event_destinations[0]])===String(event_destinations[1])){if(u.map[mapping_key]){u.data.events=u.data.events.concat(u.map[mapping_key].split(','));}}}});utag.DB('send:395:MAPPINGS');utag.DB(u.data);u.data.tealium_consent=u.toBoolean(u.data.tealium_consent);u.data.url_passthrough=u.toBoolean(u.data.url_passthrough);u.data.ads_data_redaction=u.toBoolean(u.data.ads_data_redaction);u.data.wait_for_update=Number(u.data.wait_for_update)||0;u.data.ad_storage_consent=u.getConsentValue(u.data.ad_storage_consent);u.data.analytics_storage_consent=u.getConsentValue(u.data.analytics_storage_consent);u.data.ad_user_data=u.getConsentValue(u.data.ad_user_data);u.data.ad_personalization=u.getConsentValue(u.data.ad_personalization);b['gcs_consent']="analytics storage:"+u.data.analytics_storage_consent+"|"+"Personalization:"+u.data.ad_personalization+"|"+"Advertising:"+u.data.ad_storage_consent;utag_data['gcs_consent']="analytics storage:"+u.data.analytics_storage_consent+"|"+"Personalization:"+u.data.ad_personalization+"|"+"Advertising:"+u.data.ad_storage_consent;u.scriptrequested=u.hasgtagjs();u.o=window[window.gtagRename];if(u.initialized){u.callback();}else{u.initialized=true;window.addEventListener("consent_updated",function(){utag.view({tealium_event:"consent_update_for_google_consent_mode"},null,["395"]);});if(!u.hasgtagjs()){u.scriptrequested=true;utag.ut.gtagScriptRequested=true;u.loader({type:"script",src:u.data.base_url,cb:u.loaderCallback,loc:"script",id:"utag_395",attrs:{}});}else{u.callback();}}}};utag.o[loader].loader.LOAD(id);})("395","lufthansa.main");}catch(error){utag.DB(error);}

//tealium universal tag - utag.445 ut4.0.202512221317, Copyright 2025 Tealium.com Inc. All Rights Reserved.
(function(f){if(f.fbq)return;var n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments);};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version="2.0";n.queue=[];n.agent="tmtealium";})(window);try{(function(id,loader){var u={"id":id},md5;utag.o[loader].sender[id]=u;utag.globals=utag.globals||{};if(utag.ut===undefined){utag.ut={};}
var match=/ut\d\.(\d*)\..*/.exec(utag.cfg.v);if(utag.ut.loader===undefined||!match||parseInt(match[1])<41){u.loader=function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){b=m;}else{b=a.createElement("iframe");}o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}if(o.id){b.id=o.id;}for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){this.onreadystatechange=null;o.cb();}};}}if(o.type!="img"&&!m){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}}};}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
if(utag.ut.md5===undefined){md5=function(t,n){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!=typeof global&&global.crypto&&(r=global.crypto),!r&&"function"==typeof require)try{r=require("crypto")}catch(t){}var e=function(){if(r){if("function"==typeof r.getRandomValues)
try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function t(){}return function(n){var r;return t.prototype=n,r=new t,t.prototype=null,r}}(),o={},s=o.lib={},a=s.Base={extend:function(t){var n=i(this);return t&&n.mixIn(t),n.hasOwnProperty("init")&&this.init!==n.init||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=a.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=null!=n?n:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var n=this.words,r=t.words,e=this.sigBytes,i=t.sigBytes;if(this.clamp(),e%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;n[e+o>>>2]|=s<<24-(e+o)%4*8}else for(o=0;o<i;o+=4)n[e+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var n=this.words,r=this.sigBytes;n[r>>>2]&=4294967295<<32-r%4*8,n.length=t.ceil(r/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(e());return new c.init(n,t)}}),u=o.enc={},f=u.Hex={stringify:function(t){for(var n=t.words,r=t.sigBytes,e=[],i=0;i<r;i++){var o=n[i>>>2]>>>24-i%4*8&255;e.push((o>>>4).toString(16)),e.push((15&o).toString(16))}return e.join("")},parse:function(t){for(var n=t.length,r=[],e=0;e<n;e+=2)r[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new c.init(r,n/2)}},h=u.Latin1={stringify:function(t){for(var n=t.words,r=t.sigBytes,e=[],i=0;i<r;i++){var o=n[i>>>2]>>>24-i%4*8&255;e.push(String.fromCharCode(o))}
return e.join("")},parse:function(t){for(var n=t.length,r=[],e=0;e<n;e++)r[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new c.init(r,n)}},d=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},l=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(n){var r,e=this._data,i=e.words,o=e.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=n?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,f=t.min(4*u,o);if(u){for(var h=0;h<u;h+=s)this._doProcessBlock(i,h);r=i.splice(0,u),e.sigBytes-=f}
return new c.init(r,f)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),p=(s.Hasher=l.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(n,r){return new t.init(r).finalize(n)}},_createHmacHelper:function(t){return function(n,r){return new p.HMAC.init(t,r).finalize(n)}}}),o.algo={});return o}(Math);(function(t){var n=md5,r=n.lib,e=r.WordArray,i=r.Hasher,o=n.algo,s=[];!function(){for(var n=0;n<64;n++)s[n]=4294967296*t.abs(t.sin(n+1))|0}();var a=o.MD5=i.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,n){for(var r=0;r<16;r++){var e=n+r,i=t[e];t[e]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}
var o=this._hash.words,a=t[n+0],d=t[n+1],l=t[n+2],p=t[n+3],y=t[n+4],g=t[n+5],w=t[n+6],v=t[n+7],_=t[n+8],m=t[n+9],B=t[n+10],x=t[n+11],b=t[n+12],S=t[n+13],H=t[n+14],z=t[n+15],C=o[0],M=o[1],A=o[2],D=o[3];C=c(C,M,A,D,a,7,s[0]),D=c(D,C,M,A,d,12,s[1]),A=c(A,D,C,M,l,17,s[2]),M=c(M,A,D,C,p,22,s[3]),C=c(C,M,A,D,y,7,s[4]),D=c(D,C,M,A,g,12,s[5]),A=c(A,D,C,M,w,17,s[6]),M=c(M,A,D,C,v,22,s[7]),C=c(C,M,A,D,_,7,s[8]),D=c(D,C,M,A,m,12,s[9]),A=c(A,D,C,M,B,17,s[10]),M=c(M,A,D,C,x,22,s[11]),C=c(C,M,A,D,b,7,s[12]),D=c(D,C,M,A,S,12,s[13]),A=c(A,D,C,M,H,17,s[14]),C=u(C,M=c(M,A,D,C,z,22,s[15]),A,D,d,5,s[16]),D=u(D,C,M,A,w,9,s[17]),A=u(A,D,C,M,x,14,s[18]),M=u(M,A,D,C,a,20,s[19]),C=u(C,M,A,D,g,5,s[20]),D=u(D,C,M,A,B,9,s[21]),A=u(A,D,C,M,z,14,s[22]),M=u(M,A,D,C,y,20,s[23]),C=u(C,M,A,D,m,5,s[24]),D=u(D,C,M,A,H,9,s[25]),A=u(A,D,C,M,p,14,s[26]),M=u(M,A,D,C,_,20,s[27]),C=u(C,M,A,D,S,5,s[28]),D=u(D,C,M,A,l,9,s[29]),A=u(A,D,C,M,v,14,s[30]),C=f(C,M=u(M,A,D,C,b,20,s[31]),A,D,g,4,s[32]),D=f(D,C,M,A,_,11,s[33]),A=f(A,D,C,M,x,16,s[34]),M=f(M,A,D,C,H,23,s[35]),C=f(C,M,A,D,d,4,s[36]),D=f(D,C,M,A,y,11,s[37]),A=f(A,D,C,M,v,16,s[38]),M=f(M,A,D,C,B,23,s[39]),C=f(C,M,A,D,S,4,s[40]),D=f(D,C,M,A,a,11,s[41]),A=f(A,D,C,M,p,16,s[42]),M=f(M,A,D,C,w,23,s[43]),C=f(C,M,A,D,m,4,s[44]),D=f(D,C,M,A,b,11,s[45]),A=f(A,D,C,M,z,16,s[46]),C=h(C,M=f(M,A,D,C,l,23,s[47]),A,D,a,6,s[48]),D=h(D,C,M,A,v,10,s[49]),A=h(A,D,C,M,H,15,s[50]),M=h(M,A,D,C,g,21,s[51]),C=h(C,M,A,D,b,6,s[52]),D=h(D,C,M,A,p,10,s[53]),A=h(A,D,C,M,B,15,s[54]),M=h(M,A,D,C,d,21,s[55]),C=h(C,M,A,D,_,6,s[56]),D=h(D,C,M,A,z,10,s[57]),A=h(A,D,C,M,w,15,s[58]),M=h(M,A,D,C,S,21,s[59]),C=h(C,M,A,D,y,6,s[60]),D=h(D,C,M,A,x,10,s[61]),A=h(A,D,C,M,l,15,s[62]),M=h(M,A,D,C,m,21,s[63]),o[0]=o[0]+C|0,o[1]=o[1]+M|0,o[2]=o[2]+A|0,o[3]=o[3]+D|0},_doFinalize:function(){var n=this._data,r=n.words,e=8*this._nDataBytes,i=8*n.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(e/4294967296),s=e;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var f=c[u];c[u]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return a},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,n,r,e,i,o,s){var a=t+(n&r|~n&e)+i+s;return(a<<o|a>>>32-o)+n}function u(t,n,r,e,i,o,s){var a=t+(n&e|r&~e)+i+s;return(a<<o|a>>>32-o)+n}function f(t,n,r,e,i,o,s){var a=t+(n^r^e)+i+s;return(a<<o|a>>>32-o)+n}function h(t,n,r,e,i,o,s){var a=t+(r^(n|~e))+i+s;return(a<<o|a>>>32-o)+n}n.MD5=i._createHelper(a),n.HmacMD5=i._createHmacHelper(a)}(Math));}else{md5=utag.ut.md5;}
u.ev={"view":1,"link":1};u.scriptrequested=false;u.pixels_initialized={};u.clearEmptyKeys=function(object){for(var key in object){if(object[key]===""||object[key]===undefined||object[key]===null||object[key]===NaN||(utag.ut.typeOf(object[key])==="array"&&object[key].length===0)){delete object[key];}}
return object;};u.generateEventID=function(event,data,lookup_id){var hash_input=(data["timestamp"]||(function(){var d=new Date();return Math.floor(d.getTime()/1000);})())+"-"+lookup_id+"-"+event+"-"+id,event_id=md5.MD5(hash_input).toString();return event_id;};u.isEmptyObject=function(object){if(typeof Object.keys==="function"){if(Object.keys(object).length===0){return true;}else{return false;}}else{var key;for(key in object){if(object.hasOwnProperty(key)){return false;}}
return true;}};u.toBoolean=function(val){val=val||"";return val===true||val.toLowerCase()==="true"||val.toLowerCase()==="on";};u.map_func=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.map_func(arr,obj[i],item);}else{obj[i]=item;}};u.processAMData=function(data){var processed_data={},key;for(key in data){if(data.hasOwnProperty(key)){if(key==="ph"||key==="ge"||key==="db"||key==="zp"){key=key.replace(/\s/g,"").toLowerCase();}
if(key==="ph"){data[key]=data[key].replace(/[^\d]/g,"");}else if(key==="ge"){if(data[key]!=="m"&&data[key]!=="f"){utag.DB(u.id+": Advanced Matching property 'ge' in wrong format. Removed from init call");continue;}}else if(key==="db"){if(data[key].length!==8){utag.DB(u.id+": Advanced Matching property 'db' is not the correct length. Removed from init call");continue;}}else if(key==="zp"){data[key]=data[key].replace(/[^\d]/g,"");if(data[key].length>5){utag.DB(u.id+": Advanced Matching property 'zp' is too long. Removed from init call");continue;}}}
processed_data[key]=data[key];}
return u.clearEmptyKeys(processed_data);};u.getEventContentsObject=function(event_data,event_name){if(!event_data.content_ids){return null;}
var delivery_category=event_name==='Purchase'?event_data.delivery_category:'';return event_data.content_ids.map(function(content_id,index){return u.clearEmptyKeys({id:content_id,quantity:parseInt(u.data.product_quantity[index]),item_price:parseFloat(u.data.product_unit_price[index]),delivery_category:delivery_category})})}
u.map={"const_content_type":"Search.content_type,InitiateCheckout.content_type,Purchase.content_type,AddToCart.content_type","fb_event:Search":"Search","fb_event:InitiateCheckout":"InitiateCheckout","fb_event:Purchase":"Purchase","fb_event:ViewContent":"ViewContent","fb_event:AddToCart":"AddToCart","outboundDate":"Search.departing_departure_date,InitiateCheckout.departing_departure_date,Purchase.departing_departure_date,AddToCart.departing_departure_date","inboundDate":"Search.returning_departure_date,InitiateCheckout.returning_departure_date,Purchase.returning_departure_date,AddToCart.returning_departure_date","pax_adult_amt":"Search.num_adults,InitiateCheckout.num_adults,Purchase.num_adults,AddToCart.num_adults","pax_child_amt":"Search.num_children,InitiateCheckout.num_children,Purchase.num_children,AddToCart.num_children","pax_baby_amt":"Search.num_infants,InitiateCheckout.num_infants,Purchase.num_infants,AddToCart.num_infants","destination_airport":"Search.destination_airport,InitiateCheckout.destination_airport,Purchase.destination_airport,Search.destination_ids,InitiateCheckout.destination_ids,Purchase.destination_ids,AddToCart.destination_ids,AddToCart.destination_airport","departure_airport":"Search. departure_airport,InitiateCheckout. departure_airport,Purchase. departure_airport,AddToCart.departure_airport","fb_currency":"InitiateCheckout.currency,Purchase.currency,AddToCart.currency","cart.price.totalPrice.amount_EURO":"InitiateCheckout.value,AddToCart.value","content_ids":"Search.content_ids,InitiateCheckout.content_ids,Purchase.content_ids,AddToCart.content_ids","ga_hs_bundle":"InitiateCheckout.travel_class,Purchase.travel_class,AddToCart.travel_class","fb_event_triggerType":"ViewContent.fb_event_triggerType","transaction.total.totalPrice.amount_EURO":"Purchase.value","facebook_content_category":"Search.content_category","facebook_content_type":"Search.content_type,InitiateCheckout.content_type,Purchase.content_type,AddToCart.content_type"};u.extend=[function(a,b){try{if(1){b['const_content_type']='flight'}}catch(e){utag.DB(e);}},function(a,b){try{if(1){b['fb_currency']='EUR'}}catch(e){utag.DB(e);}},function(a,b){try{if(1){try{const pageID=b['page.pageInfo.pageID'];if(a==="view"&&b["tealium_event"]==="view"){if(b["platformId"]==="adcb2"){window.viewContentFired=false;}
else{window.viewContentFired=window.viewContentFired||false;}
var delayTime=12000;var timeoutId;var hasScrolled=false;var userInteracted=false;function triggerViewContent(triggerType){if(!window.viewContentFired){window.viewContentFired=true;b["fb_event"]="ViewContent";b["fb_event_triggerType"]=triggerType;delete b["fb_event"];delete b["fb_event_triggerType"];}}
function startTimeout(){timeoutId=setTimeout(function(){triggerViewContent("10_seconds");},delayTime);}
function handlePageHide(){clearTimeout(timeoutId);}
function handleVisibilityChange(){if(document.domain.includes(".lufthansa.com")){if(document.hidden){clearTimeout(timeoutId);}
else if(!window.viewContentFired){startTimeout();}}}
function handleScroll(){if(userInteracted){hasScrolled=true;var scrollDepth=(window.scrollY+window.innerHeight)/document.documentElement.scrollHeight*100;if(scrollDepth>=25){triggerViewContent("25_percent_scroll");window.removeEventListener("scroll",handleScroll);}}}
function handleUserInteraction(){userInteracted=true;}
window.addEventListener("mousedown",handleUserInteraction);window.addEventListener("touchstart",handleUserInteraction);window.addEventListener("mousewheel",handleUserInteraction);window.addEventListener("scroll",handleScroll);startTimeout();window.addEventListener("pagehide",handlePageHide);document.addEventListener("visibilitychange",handleVisibilityChange);}
const unknown="unknown";function getValue(property,fallback){return(property===undefined||property===null||property===""||property==="(not set)")?fallback:property;}
var reloadcheck,tid;function checkReloadStatus(b){tid=getValue(b["transaction.PNR.transactionId"],unknown);if(b["page_was_reloaded"]===true&&tid===unknown){return"pageReloaded";}else{return"pageNotReloaded";}}
reloadcheck=checkReloadStatus(b);if(a==="view"&&pageID!==undefined&&b["platformId"]==="adcb2"&&(b["page.category.primaryCategory"]==="Booking"||b['conversion.funnel.funnelName']=='Booking')){const searchInteracted=window.cookieExtractor('Search_Meta');if(searchInteracted&&pageID==='FPPOUTBOUND'){window.cookieEraser('Search_Meta');b["fb_event"]="Search";}
else{switch(pageID){case"SHOPPINGCART_cart_based":b["fb_event"]="AddToCart";break;case"SHOPPINGCART_order_based":b["fb_event"]="InitiateCheckout";break;case"CONFIRMATION":if(reloadcheck==="pageNotReloaded"&&b["transaction.total.netFare_EURO"]>0){b["fb_event"]="Purchase";}
break;}}}
}
catch(e){utag.DB(e)}
try{var OnD;if((typeof b['departure_airport']!='undefined'&&typeof b['destination_airport']!='undefined')){OnD=[b['departure_airport'],b['destination_airport']];b['content_ids']=OnD.join(':').toUpperCase();}}catch(e){utag.DB(e);}
}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:445");utag.DB(b);var c,d,e,f,h,i,j,k,l,key,pixel_list,event,base_tracking_type="track",event_data={},event_id="",event_name="",event_tracking_type="",fb_param="",has_purchase=false,lookup_id="",tracking_queue=[],standard_events_lookup={"AddPaymentInfo":{"fb_params":["content_category","content_ids","contents","currency","value"]},"AddToCart":{"fb_params":["content_ids","content_name","content_type","contents","currency","value"]},"AddToWishlist":{"fb_params":["content_name","content_category","content_ids","contents","currency","value"]},"CompleteRegistration":{"fb_params":["content_name","currency","status","value"]},"Contact":{"fb_params":[]},"CustomizeProduct":{"fb_params":[]},"Donate":{"fb_params":[]},"FindLocation":{"fb_params":[]},"InitiateCheckout":{"fb_params":["content_category","content_ids","contents","currency","num_items","value"]},"Lead":{"fb_params":["content_category","content_name","currency","value"]},"PageView":{"fb_params":[]},"Purchase":{"fb_params":["content_ids","content_name","content_type","contents","num_items","currency","value","delivery_category"],"req_params":["currency","value"]},"Schedule":{"fb_params":[]},"Search":{"fb_params":["content_category","content_ids","contents","currency","search_string","value"]},"StartTrial":{"fb_params":["currency","predicted_ltv","value"]},"SubmitApplication":{"fb_params":[]},"Subscribe":{"fb_params":["currency","predicted_ltv","value"]},"ViewContent":{"fb_params":["content_ids","content_name","content_type","contents","currency","value"]}},standard_params_lookup={"content_category":function(){return u.data.content_category||u.data.product_category;},"content_name":function(){return u.data.content_name||u.data.product_name;},"content_ids":function(){return u.data.content_ids||u.data.product_id;},"content_type":function(){return u.data.content_type;},"contents":function(){return u.data.contents;},"currency":function(){return u.data.currency||u.data.order_currency;},"delivery_category":function(){return u.data.delivery_category;},"num_items":function(){var i,num;if(typeof u.data.num_items!=="undefined"&&u.data.num_items!==""){num=u.data.num_items;}else{if(u.data.calc_items===true||u.data.calc_items==="true"){num=0;for(i=0;i<u.data.product_quantity.length;i++){num+=parseInt(u.data.product_quantity[i]);}}}
if(typeof num!=="undefined"&&num!==""){num=parseInt(num);}
return num;},"predicted_ltv":function(){return u.data.predicted_ltv;},"search_string":function(){return u.data.search_string;},"status":function(){return u.data.status;},"value":function(event){var val="";if(typeof u.data.value!=="undefined"&&u.data.value!==""){val=u.data.value;}else{if((event==="AddToCart"||event==="ViewContent")&&u.data.product_unit_price.length>0){val=u.data.product_unit_price[0];}else if(event==="Purchase"){val=u.data.order_subtotal;}}
if(typeof val!=="undefined"&&val!==""){val=parseFloat(val);}
return val;}};u.processing_options=function(){var key,ldu_option;for(key in u.data.lmt_data.ldu_types){if(u.data.lmt_data.ldu_types[key]==="true"||u.data.lmt_data.ldu_types[key]===true){ldu_option=key;}}
if(u.data.lmt_data.use_ldu==="true"||u.data.lmt_data.use_ldu===true){switch(ldu_option){case"california":u.data.lmt_data.country=1;u.data.lmt_data.state=1000;break;case"geolocate":u.data.lmt_data.country=0;u.data.lmt_data.state=0;break;default:break;}
fbq("dataProcessingOptions",u.data.lmt_data.prcs_optns,u.data.lmt_data.country,u.data.lmt_data.state);}else if(u.data.lmt_data.use_ldu==="false"||u.data.lmt_data.use_ldu===false){fbq("dataProcessingOptions",[]);}}
u.data={"base_url":"https://connect.facebook.net/en_US/fbevents.js","advanced_matching":"false","generate_event_id":"true","pixel_id":"1042700560359777","autoConfig":true,"auto_page_view":true,"calc_items":true,"consent":"","disablePushState":true,"track_single":true,"lmt_data":{"prcs_optns":["LDU"],"country":0,"state":0},useContentsObject:false,event_id:'',"order_id":"","order_subtotal":"","order_currency":"","delivery_category":"","product_id":[],"product_name":[],"product_category":[],"product_unit_price":[],"product_quantity":[],"content_category":"","content_ids":"","content_name":"","content_type":"","contents":null,"currency":"","num_items":"","predicted_ltv":"","search_string":"","status":"","value":"","movieref":"","availability":"","body_style":"","checkin_date":"","checkout_date":"","city":"","country":"","departing_arrival_date":"","departing_departure_date":"","destination_airport":"","destination_ids":"","drivetrain":"","exterior_color":"","fuel_type":"","hotel_score":"","lease_end_date":"","lease_start_date":"","listing_type":"","make":"","model":"","neighborhood":"","num_adults":"","num_children":"","num_infants":"","origin_airport":"","postal_code":"","preferred_baths_range":"","preferred_beds_range":"","preferred_num_stops":"","preferred_price_range":"","price":"","property_type":"","region":"","returning_arrival_date":"","returning_departure_date":"","state_of_vehicle":"","transmission":"","travel_class":"","travel_end":"","travel_start":"","user_score":"","year":"","am":{},"custom":{},"event_queue":[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};utag.DB("send:445:EXTENSIONS");utag.DB(b);for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(u.data.hasOwnProperty(e[f])||e[f].indexOf(".")>-1){u.map_func(e[f].split("."),u.data,b[d]);}else{u.data.custom[e[f]]=b[d];}}}else{h=d.split(":");if(h.length===2&&b[h[0]]===h[1]){if(u.map[d]){u.data.event_queue=u.data.event_queue.concat(u.map[d].split(","));}
}else if(h.length===3&&b[h[0]]===h[1]){if(u.map[d]){u.data[h[2]]=u.map[d];}}}}
utag.DB("send:445:MAPPINGS");utag.DB(u.data);if(!u.data.pixel_id){utag.DB(u.id+": Tag not fired: Required attribute 'pixel_id' not populated.");return;}
if(u.data.consent==="grant"||u.data.consent==="revoke"){fbq("consent",u.data.consent);}
if(u.data.disablePushState==="true"||u.data.disablePushState===true){fbq.disablePushState=true;}
if(u.data.generate_event_id==="true"||u.data.generate_event_id===true){lookup_id=b.random_number;if(typeof lookup_id!=="undefined"){utag.globals[lookup_id]=window.utag.globals[lookup_id]||{};}else{lookup_id=Math.random().toFixed(16).substring(2);utag.DB("send:445: The random_number variable was not defined. Any Facebook event IDs generated will not be collected by Tealium Collect. Please ensure you are using the latest version of utag.js to generate a tealium_random value.");}}
if(u.data.track_single===true||u.data.track_single==="true"){base_tracking_type+="Single";}
u.data.order_currency=u.data.order_currency||b._ccurrency||"";u.data.order_id=u.data.order_id||b._corder||"";u.data.order_subtotal=u.data.order_subtotal||b._csubtotal||"";if(u.data.product_category.length===0&&b._ccat!==undefined){u.data.product_category=b._ccat.slice(0);}
if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_name.length===0&&b._cprodname!==undefined){u.data.product_name=b._cprodname.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
if(a==="view"&&(u.data.auto_page_view===true||u.data.auto_page_view==="true")){u.data.event_queue.push("PageView");}
for(i=0;i<u.data.event_queue.length;i++){if(u.data.event_queue[i]==="Purchase"){has_purchase=true;}}
if(u.data.order_id&&!has_purchase){u.data.event_queue.push("Purchase");}
for(i=0;i<u.data.event_queue.length;i++){event_name=u.data.event_queue[i];event_tracking_type=base_tracking_type;event_data={};var event_name_underscores=event_name.replace(/ /g,'_');if(u.data.generate_event_id==="true"||u.data.generate_event_id===true){if(b.random_number){event_id=u.data.event_id||u.generateEventID(event_name,b,lookup_id);if(window.utag.globals[b.random_number]){window.utag.globals[b.random_number]["fb_event_id_"+event_name_underscores]=event_id;window.utag.globals[b.random_number]["fb_event_id_"+event_name_underscores+"_"+id]=event_id;}}else{utag.DB("send:445: Event ID Generation is enabled, but the random_number value was not found in the data layer. No event ID was generated for "+event_name);}
window.utag.globals[lookup_id]["fb_event_id_"+event_name_underscores]=event_id;}
if(typeof standard_events_lookup[event_name]==="undefined"){event_tracking_type+="Custom";}else{for(j=0;j<standard_events_lookup[event_name].fb_params.length;j++){fb_param=standard_events_lookup[event_name].fb_params[j];event_data[fb_param]=standard_params_lookup[fb_param](event_name);}}
for(key in u.data.custom){if(u.data.custom.hasOwnProperty(key)){event_data[key]=u.data.custom[key];}}
if(typeof u.data[event_name]==="object"){for(key in u.data[event_name]){if(u.data[event_name].hasOwnProperty(key)){if(key==="value"&&utag.ut.typeOf(u.data[event_name][key])==="array"&&u.data[event_name][key].length>0){event_data[key]=parseFloat(u.data[event_name][key][0]);}else{event_data[key]=u.data[event_name][key];}}}}
if(event_name==="Purchase"){for(key in standard_events_lookup[event_name].req_params){if(standard_events_lookup[event_name].req_params.hasOwnProperty(key)){if(!event_data[standard_events_lookup[event_name].req_params[key]]){utag.DB("send:445:"+event_name+" tracking: The required parameter '"+standard_events_lookup[event_name].req_params[key]+"' is empty. ");continue;}}}}
if(u.toBoolean(u.data.useContentsObject)&&!event_data.contents){event_data.contents=u.getEventContentsObject(event_data,event_name)}
tracking_queue.push(u.clearEmptyKeys({"event_tracking_type":event_tracking_type,"event_name":event_name,"event_data":event_data,"event_id":event_id}));}
pixel_list=u.data.pixel_id.split(/\s*,\s*/);for(k=0;k<pixel_list.length;k++){if(u.data.autoConfig==="false"||u.data.autoConfig===false){fbq("set","autoConfig",false,pixel_list[k]);}
if(a==="view"){if(!u.pixels_initialized[pixel_list[k]]){u.processing_options();if(u.data.advanced_matching==="true"||u.data.advanced_matching===true){u.data.am=u.processAMData(u.data.am);if(u.isEmptyObject(u.data.am)){utag.DB("Advanced Matching is enabled, but no Advanced Matching data was mapped.");}
fbq("init",pixel_list[k],u.data.am);}else{fbq("init",pixel_list[k]);}
u.pixels_initialized[pixel_list[k]]=true;}else if(u.data.advanced_matching==="true"||u.data.advanced_matching===true){fbq("init",pixel_list[k],u.processAMData(u.data.am));}}
if(u.data.track_single===true||u.data.track_single==="true"){for(l=0;l<tracking_queue.length;l++){if(tracking_queue[l].event_id){fbq(tracking_queue[l].event_tracking_type,pixel_list[k],tracking_queue[l].event_name,u.clearEmptyKeys(tracking_queue[l].event_data),{eventID:tracking_queue[l].event_id});}else{fbq(tracking_queue[l].event_tracking_type,pixel_list[k],tracking_queue[l].event_name,u.clearEmptyKeys(tracking_queue[l].event_data));}}}}
if(u.data.track_single!==true&&u.data.track_single!=="true"){for(l=0;l<tracking_queue.length;l++){if(tracking_queue[l].event_id){fbq(tracking_queue[l].event_tracking_type,tracking_queue[l].event_name,u.clearEmptyKeys(tracking_queue[l].event_data),{eventID:tracking_queue[l].event_id});}else{fbq(tracking_queue[l].event_tracking_type,tracking_queue[l].event_name,u.clearEmptyKeys(tracking_queue[l].event_data));}}}
if(!u.scriptrequested){u.scriptrequested=true;var urlParams=new URLSearchParams(window.location.search);var fbclidParam=urlParams.get('fbclid');if(fbclidParam){var version="fb";var subdomainIndex=Array.from(window.location.host.matchAll(/\./g)).length;var creationTime=Date.now();document.cookie="_fbc="+version+"."+subdomainIndex+"."+creationTime+"."+fbclidParam+"; path=/;";}
u.loader({"type":"script","src":u.data.base_url,"cb":null,"loc":"script","id":"utag_445","attrs":{}});}
utag.DB("send:445:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("445","lufthansa.main"));}catch(error){utag.DB(error);}
(function(){ if(typeof utag!='undefined' && !utag_condload){utag.initcatch=true;for(var i in utag.loader.GV(utag.loader.cfg)){var b=utag.loader.cfg[i];if(b.load!=4){utag.initcatch=false;break};if(b.wait==1){utag.initcatch=false;break}};if(utag.initcatch)utag.handler.INIT();} })();